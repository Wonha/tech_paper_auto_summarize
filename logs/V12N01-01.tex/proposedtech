\documentstyle[epsf,jnlpbbl]{jnlp_j}

\setcounter{page}{3}
\setcounter{巻数}{12}
\setcounter{号数}{1}
\setcounter{年}{2005}
\setcounter{月}{1}
\受付{1995}{5}{6}
\再受付{1995}{7}{8}
\採録{1995}{9}{10}

\setcounter{secnumdepth}{2}

\title{大規模日本語文法の開発}
\author{野呂 智哉\affiref{TITECH} \and 橋本 泰一\affiref{TITECH}
  \and 徳永 健伸\affiref{TITECH} \and 田中 穂積\affiref{TITECH}}

\headauthor{野呂 智哉・橋本 泰一・徳永 健伸・田中 穂積}
\headtitle{大規模日本語文法の開発}

\affilabel{TITECH}{東京工業大学 大学院情報理工学研究科}
{Graduate School of Information Science and Engineering,
  Tokyo Institute of Technology}

\jabstract{
  構文解析において，多様な言語現象を扱うためには大規模な文法が必要となる
  が，一般に人手で文法を開発することは困難である．一方，大規模な構文構造
  付きコーパスから様々な統計情報を取り出し，自然言語処理に利用する研究が
  多くの成果をあげてきており，構文構造付きコーパスの整備が進んでいる．こ
  のコーパスから大規模な文脈自由文法(CFG，以下，文法と略す)を抽出するこ
  とが考えられる．ところが，コーパスから抽出した文法をそのまま用いた構文
  解析では多数の解析結果(曖昧性)を作り出すことが避けられないことが問題で
  あり，それが解析精度の悪化や解析時間，使用メモリ量の増大の要因ともなる．
  効率的な構文解析を行うためには，曖昧性を増大させる要因を分析
  し，構文解析の段階では曖昧性を極力抑えるよう文法やコーパスを変更する必
  要がある．本論文では，構文解析で出力される曖昧性を極力抑えた文法を開発
  するための具体的な方針を提案し，その有効性を実験により明らかにしている．
}

\jkeywords{大規模日本語文法，構文構造付きコーパス，構文解析}

\etitle{Building a Large-Scale Japanese Grammar}
\eauthor{Tomoya Noro \affiref{TITECH} \and Taiichi Hashimoto
  \affiref{TITECH} \and Takenobu Tokunaga \affiref{TITECH} \and Hozumi
  Tanaka \affiref{TITECH}}

\eabstract{
  Although large-scale grammars are prerequisite
  for parsing a great variety of sentences,
  it is difficult to build such grammars by hand.
  Yet, it is possible to derive a context-free grammar (CFG)
  automatically from an existing large-scale,
  syntactically annotated corpus.
  While seemingly a simple task,
  CFGs derived in such fashion have seldom been applied
  to existing systems.
  This is probably due to a great number of possible
  parse results (i.e. high ambiguity).
  In this paper, we analyze some causes of high ambiguity,
  and we propose a policy for building a large-scale Japanese CFG
  for syntactic parsing, capable of decreasing ambiguity.
  We also provide an experimental evaluation of the obtained CFG
  showing reduction in the number of parse results (reduced ambiguity)
  created by the CFG and the improved parsing accuracy.
}

\ekeywords{Large-Scale Japanese CFG, Syntactically Annotated Corpus,
  Syntactic Analysis}

\begin{document}
\maketitle

\section{大規模日本語文法の作成手順}
\label{sec:Procedure}

\begin{figure}[tp]
  \centering
  \epsfxsize=.6\textwidth
  \epsfbox{Procedure/figure/procedure.eps}
  \caption{大規模日本語文法作成手順}
  \label{fig:procedure}
\end{figure}

我々は，既存の構文構造付きコーパス
を出発点とし，
以下の手順で文法を作成することを試みている
(図\ref{fig:procedure})．
\begin{enumerate}
\item 既存の構文構造付きコーパスから文法を抽出する
\item 構文解析結果の曖昧性を増大させる要因を分析する
\item 分析結果をもとに構文構造付きコーパスの変更方針を作成する
\item 変更方針に従ってコーパスを変更し，そこから新しい文法を再抽出する
\item (2)〜(4)を繰り返す
\end{enumerate}
文法の抽出は，Charniakによるtree-bank grammarの
抽出方法\cite{charniak:96}と同様の方法をとる．
出発点として使用した構文構造付きコーパスの概要については，
付録\ref{sec:Corpus}節で述べる．

上述の文法作成手順では，変更対象が構文構造付きコーパスであり，
文法はコーパスから抽出されるだけであるため，
「文法の作成」という表現に違和感を感じるかもしれない．
しかし，既存のコーパスから抽出した文法は，
コーパス作成者の意図に反し，きわめて多数の構文解析結果を出力する．
そのため，コーパスの作成は，そこから抽出した文法による構文解析結果を
考慮しながら行うことが望ましい．
換言すれば，文法の作成，変更とコーパスの作成，変更は
並行して進める必要があると考えている．
このようにして作成したコーパスは，
PCFGモデル等の確率モデルによる学習の際に，
訓練データとして
も利用できる．


\section{構文解析結果の曖昧性を増大させる要因}
\label{sec:Problem}

繰り返し述べたように，
大規模な構文構造付きコーパスから抽出したCFGを
そのまま利用して構文解析を行うと，
多数の曖昧性を生じる．
曖昧性が増大すると，解析に必要な時間，メモリ量が増大するだけでなく，
その中から構文的に正しいものを選択することが困難になる．
この問題を解決するためには，曖昧性を増大させる要因を
分析しなければならない．

\begin{figure}[tp]
  \centering
  \epsfxsize=.9\textwidth
  \epsfbox{Problem/figure/lack_of_syn.eps}
  \caption{CFG抽出時における構文情報の欠落}
  \label{fig:lack_of_syn}
\end{figure}

曖昧性を増大させる要因は，以下の4種類に大別できる．
\begin{description}
\item[ラベル付けの誤り(要因1): ] 構文構造は人手で付与するため，
  誤りは避けられない．誤った構造が付与されたコーパスから
  抽出した文法は，誤った構造を生成し，
  それが無意味な曖昧性の増大につながる．
\item[構文構造の不一致(要因2): ] 大規模なコーパスを作成する際，
  作業は一人ではなく複数で行うことが一般的である．
  この時，作業者による構造の付け方の``ゆれ''が問題となる．
  一貫性のない構文構造付きコーパスから抽出した文法は
  冗長な文法規則を持ち，
  それが無意味な曖昧性の増大につながる．
\item[構文情報の欠落(要因3): ] 構文構造を付与する際，コーパス作成者は
  文全体の構造を考慮しながら，部分的な構造を決定することが多い．
  ところが，CFGの各規則は
  ノードの親子関係に関する情報しか持たず，
  それ以外の周辺文脈情報(各子ノードを根とする部分木の情報や，
  親ノードを根とする部分木の外側の構文情報)を持たない．
  構文構造の曖昧性を解消する上で有用な構文情報が欠落することで，
  構文解析において，構文的に誤った解析木を余分に生成することがある．
  例えば，図\ref{fig:lack_of_syn}に示す2つの構文木が存在した場合，
  構文木(a)からは``$<$連体句$>\to <$動詞句$>$''という規則が，
  構文木(b)からは``$<$連用句$>\to <$動詞句$>$''という規則が抽出される．
  しかし，これらの規則には動詞の活用形に関する情報が欠落しているため，
  活用形に関係なく，すべての動詞句が連体句にも連用句にもなれてしまう．
  その結果，連用形の動詞句が連体句として体言を修飾したり，
  終止・連体形の動詞句が連用句として用言を修飾したりする解析木が
  生成でき，これが曖昧性を不必要に増大させる要因となる．
\item[意味情報の必要性(要因4): ] 曖昧性の中には，その解消において，
  構文情報だけではなく意味情報も必要とするものがある．
  例えば，「彼の目の色」の「彼の」が「目」と
  「色」のどちらを修飾するかの曖昧性の解消には，
  各語の意味を考慮する必要があり，構文情報だけでは解消できない．
  詳細は後述するが，我々が想定する自然言語解析では，
  構文解析時は構文情報のみを利用し，
  意味情報を必要とする曖昧性の解消は，
  構文解析後の意味解析で行うこととしている．
  構文解析時に解消できない曖昧性を列挙することは，
  構文解析結果を組み合わせ的に増大させることになる
  \footnote{英語においても，PP attachment問題を構文情報だけで
  解決することはできない．この曖昧性は，前置詞句の数に対するCatalan数
  のオーダで増大し\cite{martin:87,church:82}，文全体の構文解析結果の
  曖昧性の増大の最大の要因の1つとなる．}．
\end{description}



要因1と2は，コーパスの誤りであるため，訂正すべきもとのして，
以下の考察から除外する．
一方，要因3と4はコーパスの誤りではない．
要因3の解決には，どの構文情報が必要であるかを考察し，
その情報を非終端記号に追加し，細分化する．
要因4の解決には，意味情報を利用しない限り解決が困難な曖昧性を
包含した単一の構文構造をコーパスに付与し，
CFGを再抽出する．
すなわち，再抽出したCFGによる構文解析結果では，
要因4による曖昧性を区別しない．
こうすることで，構文解析結果の曖昧性を抑えられるだけでなく，
意味解析で解消すべき曖昧性の所在が明らかになる．
次節では，我々の具体的な変更方針について述べる．

\section{文法，コーパスの変更方針}
\label{sec:Modification}




\label{sec:Policy}

要因3の曖昧性はすべて除外することが理想である．
EisnerやKomagataは，Categorial Combinatory Grammar(CCG)について，
解析器側を変更することによってこの曖昧性を完全に除外し，
一つの意味解釈に対して一つの解析木を出力する
(exactly one syntactic structure per semantic reading)手法を
提案している\cite{eisner:1996,komagata:97b}．
本研究ではCFGを使用し，解析器に変更を加えるのではなく，
文法とコーパスそのものを変更しながら，この曖昧性を抑える．

さらに，我々は，要因4の曖昧性を包含した単一の構造を生成する
(意味的情報は利用しないことを前提とした)，構文解析のための
大規模日本語文法の構築を目的としている．
しかし，
この方針によって，
出力される構文解析木の数を抑えることは，
その後の意味解析を困難にすることもあり得る．
そのため，
構文解析時には包含された曖昧性を意味解析で解消することを
念頭に置きながら，
要因4の曖昧性のうち，どれを単一の構文構造で表現し，
構文解析結果の曖昧性を抑えるかを詳細に検討する必要がある．

我々が使用しているコーパスには，以下のような不備や欠点があった．
\begin{enumerate}
\item 用言の活用形に関する情報の欠落(要因3)
\item 複合名詞内の構造の曖昧性(要因4)
\item 連用修飾句，連体修飾句の係り先の曖昧性(要因4)
\item 並列構造の曖昧性(要因4)
\end{enumerate}
これらについて，具体的に変更方針を述べる
\footnote{我々は，第\ref{sec:Introduction}節で述べた
文法開発の手順のサイクルを複数回に分けてこれらの検討を行った
\cite{noro:2003}．}．

\subsection{用言の活用形に関する情報の欠落}

\begin{figure}[tp]
  \centering
  \epsfxsize=.7\textwidth
  \epsfbox{Modification/figure/conjugation.eps}
  \caption{活用形に関する情報の付与}
  \label{fig:conjugation}
\end{figure}

用言の活用形の情報が欠落しているために
それが連体修飾句になるか連用修飾句になるかで曖昧になることを，
第\ref{sec:Problem}節で，要因3の曖昧性の例として挙げた．
実際，我々が使用しているコーパスで，この問題があった．
これを解決するために，用言等の語尾や助動詞の活用形に関する情報を
構文構造に引き継ぐように変更する(図\ref{fig:conjugation})．
ただし，未然形，連用形等すべての活用形を付与するのではなく，
その語が末尾に現れることで連用修飾句，または連体修飾句になり得る
場合にのみ，それぞれ「連用」，「連体」というラベルを追加する．
これは，活用形の情報を付与する目的が，
その用言が連用修飾句になり得るものか，連体修飾句になり得るものかを
区別するためであり，それ以外の情報は必要ないからである．

\subsection{複合名詞内の構造の曖昧性}

\begin{figure}[tp]
  \centering
  \epsfxsize=.7\textwidth
  \epsfbox{Modification/figure/convert_compound_noun.eps}
  \caption{複合名詞の構造の変更}
  \label{fig:convert_compound_noun}
\end{figure}

複合名詞内の構造の曖昧性を構文解析で解消することは困難であり，
この曖昧性を構文解析結果の違いとして出力すべきではないと考えている．
白井らも，この曖昧性を構文解析結果の違いとして出力しないよう
文法を変更している\cite{shirai:97}
\footnote{白井らは，複合名詞という言葉ではなく，
「同一品詞列を支配するノード」という表現を使用している．
我々は，名詞，接頭語，接尾語などで構成され，名詞として働く構成素を
対象とし，複合名詞と呼んでいる．}．
我々もその方針に倣い，複合名詞については，
語構成に関係なく右下がりの構造に統一する
(図\ref{fig:convert_compound_noun})
\footnote{構造を右下がりにする際，複合名詞の根ノードと
内部のノードのラベルを図\ref{fig:convert_compound_noun}のように
区別している．もし，これらを同一のラベルにすると，
「金谷さん夫妻」の例において，「さん夫妻」という接尾語が先頭に出現する
複合名詞を認める文法規則になってしまう．}．



\subsection{連用修飾句，連体修飾句の係り先の曖昧性}



次に，連用修飾句，連体修飾句の係り先の曖昧性の扱いを検討する．
我々は，連用修飾関係の曖昧性は
従来通り別の構造として区別し(すなわち，構造は変更しない)
\footnote{元のコーパスでは用言のとる表層格の情報を利用していたが，
格の区別は意味情報を必要とし，構文解析時の曖昧性解消が困難な曖昧性を
増大させる要因となる．
そこで，図\ref{fig:convert_adv_phrase}に示すように，
用言のとる表層格の情報は無視する\cite{noro:2003}．}，
連体修飾関係を表す構造を，複合名詞の場合と同様，意味に関係なく
同一の構造にする(図\ref{fig:convert_adn_phrase})
\footnote{構造を変更する際，図\ref{fig:convert_adn_phrase}に示すよう
  に，右側の名詞句と左側の連体句の下の名詞句を区別している．
もし，これらを同一のラベルにすると，抽出した文法規則は
変更前後の両方の構造を生成することが可能になり，
構造を制限することができなくなる．}．
つまり，連用修飾関係の曖昧性は構文解析結果の曖昧性として残し，
連体修飾関係の曖昧性は構文解析の段階では出さず，
後の意味解析でこの曖昧性を解消することになる．

\begin{figure}[tp]
  \centering
  \epsfxsize=.7\textwidth
  \epsfbox{Modification/figure/convert_adv_phrase.eps}
  \caption{連用修飾句の係り先に関する変更}
  \label{fig:convert_adv_phrase}
\end{figure}

\begin{figure}[tp]
  \centering
  \epsfxsize=\textwidth
  \epsfbox{Modification/figure/convert_adn_phrase.eps}
  \caption{連体修飾句の係り先に関する変更}
  \label{fig:convert_adn_phrase}
\end{figure}

\begin{figure}[tp]
  \centering
  \epsfxsize=.7\textwidth
  \epsfbox{Modification/figure/structure.eps}
  \caption{単文「欧米諸国は日本の流通制度の改善を求めている」の構造}
  \label{fig:structure}
\end{figure}

上述の方針に決定した理由は二つある．
一つは，連用修飾関係を表す構造を意味に関係なく同一の構造にすることは，
構文解析後の意味解析を困難にすることになるからである．
例えば，「欧米/諸国/は/日本/の/流通/制度/の/改善/を/求めている」
という単文を考える．ただし，スラッシュは単語区切りを表す
(「求めている」は動詞語幹，助動詞語幹，語尾に分割されるが，
簡単のため，ここでは1語として表記する)．
この文に対してボトムアップに(意味的に正しい)構文構造を付与すると，
次の手順になる．
\begin{enumerate}
\item 「欧米諸国」，「流通制度」のそれぞれを一つの複合名詞にまとめる
  (図\ref{fig:structure}の破線で囲まれた部分)．
\item 「日本の」と「流通制度」，そして「(日本の)流通制度の」と「改善」の
  それぞれを一つの連体修飾関係にまとめる
  (図\ref{fig:structure}の細い実線で囲まれた部分)．
\item 「(日本の流通制度の)改善を」と「求めている」，
  「欧米諸国は」と「(日本の流通制度の改善を)求めている」の
  二つの連用修飾関係をまとめる(図\ref{fig:structure}の太い実線で
  囲まれた部分)．
\end{enumerate}
このように考えると，単文では，連用修飾関係を表すレベルが
連体修飾を表すレベルより上にある．
複文や重文は，この単文を組み合わせることで構成される．
上位レベルである連用修飾関係を表す構造を
意味に関係なく同一構造にすることは，
複文や重文を構成する単文のまとまりを破壊することになり，
文全体の構造がとらえにくくなる．
その結果，構文解析後の意味解析が困難になる．
下位レベルである連体修飾関係を表す構造を，
意味に関係なく同一構造にし，
連用修飾関係を表す構造は従来通り別の構造として区別することで，
その後の意味解析を困難にせずに，
構文解析の段階の曖昧性を抑えられると考えている．





もう一つの理由は，連用修飾句の係り先の曖昧性の解消は，
連体修飾句の係り先の曖昧性の解消に比べて，
構文解析での解決が容易であるからである．
連用修飾句の係り先は，
助詞と動詞の関係，副詞と助動詞の関係等を利用することで，
決定できる可能性があるのに対し，
連体修飾句の係り先は，連用修飾句の場合に比べて，
品詞レベルでの解決が難しい．
そこで，品詞レベルでの解決が比較的容易な連用修飾関係を表す構造は
従来通りとし，連体修飾関係を表す構造は，
意味に関係なく同一構造にすべきであると，我々は考えている．

\begin{figure}[tp]
  \centering
  \epsfxsize=.6\textwidth
  \epsfbox{Modification/figure/rentai_amb.eps}
  \caption{連体修飾句の係り先に関する2種類の曖昧性}
  \label{fig:adnominal_phrase}
\end{figure}

ただし，連体修飾句の係り先の曖昧性が，大別して2種類あることに
注意したい．
\begin{enumerate}
\item 連用修飾句の範囲を変えないもの
\item 連用修飾句の範囲を変えるもの
\end{enumerate}
図\ref{fig:adnominal_phrase}にそれぞれの例を示す．
太い実線で囲まれた句は連用修飾句を，細い実線で囲まれた句は連体修飾句を，
破線で囲まれた句は動詞を，網掛けの長方形で囲まれた句は連体修飾を受ける
名詞を，矢印の始点は修飾関係の係り元を，終点は係り先を表す．

「新しい環境への適応能力を調べる」の場合，
連体修飾句「新しい」が「環境」に係る場合でも
「適応能力」に係る場合でも，
動詞「調べる」に係る連用修飾句は「新しい環境への適応能力を」である
ことには変わりはない(図\ref{fig:adnominal_phrase}(a)，(b))．
ところが，「百年の歴史を持つ祭り」では，
連体修飾句「百年の」が「歴史」に係る場合の動詞「持つ」に係る
連用修飾句は「百年の歴史を」であるのに対し，
「百年の」が「祭り」に係る場合も考えられないこともない．
後者の場合は，
「歴史を」のみが「持つ」に係る連用修飾句となる
(図\ref{fig:adnominal_phrase}(c)，(d))．

我々は，連用修飾句の範囲と係り先
は従来のまま変更せず，そこから抽出した文法は，その曖昧性を
構文解析の段階に出力することにしている．
その方針に合わせ，連用修飾句の範囲を変えない場合に限り，
連体修飾関係を表す構造を同一の構造に統一する
(すなわち，「新しい環境への適応能力を調べる」の場合は
図\ref{fig:adnominal_phrase}(b)の構造に変更し，
「百年の歴史を持つ祭り」の場合は図\ref{fig:adnominal_phrase}(c)の
構造のままにしておく)．


\subsection{並列構造の曖昧性}

並列構造の曖昧性の解消には意味的情報が必要であり，
係り受け解析において並列構造を含む文の正解率は，
含まない文に比べて低くなる．
予備実験によると，並列構造を含む文の正解率は，
含まない文の正解率の半分程度しかない\cite{noro:2003}
\footnote{「文の正解率」の定義は第\ref{sec:Evaluation}節で述べる．}．
文の正解率を全体的に上げるためには，
並列構造の曖昧性について検討する必要がある．
KNP\cite{kurohashi:1998}では，先に並列関係にある部分を決定し，
次にその内部の構造を分析するアプローチを採用している
\cite{kurohashi:1992}．
しかし，我々は，並列関係にあるかどうかの判定は構文解析に先立って
行わず，その後の意味解析の段階で行うこととする．
言い換えると，注目している二つの部分が並列関係にあるかどうかの曖昧性は，
構文解析の段階では区別しない．

\begin{figure}[tp]
  \centering
  \epsfxsize=.9\textwidth
  \epsfbox{Modification/figure/convert_para_noun.eps}
  \caption{並列名詞句の構造に関する変更}
  \label{fig:convert_para_noun}
\end{figure}

\begin{figure}[tp]
  \centering
  \epsfxsize=.8\textwidth
  \epsfbox{Modification/figure/convert_para_verb.eps}
  \caption{並列述語句の構造に関する変更}
  \label{fig:convert_para_verb}
\end{figure}



日本語には，並列名詞句，並列述語句，並列助詞句の3種類の並列構造がある
\footnote{黒橋らは，それぞれを名詞並列，述語並列，部分並列と呼んでいる
\cite{kurohashi:1998}．}．
我々は，これらの構造を以下の方針で変更する．
\begin{description}
\item[並列名詞句: ] 名詞句「日本と中国の関係」において，
  「日本」と「中国」が並列関係にあるのか，それとも
  「日本」と「関係」が並列関係にあるのかという曖昧性の解消には，
  各語の意味的情報が必要となる．「ＡのＢのＣ」，「ＡとＢのＣ」の
  二つの名詞句を考えると，どちらの場合も名詞「Ａ」，「Ｂ」，「Ｃ」の
  間の関係を分析することになる．このことから，
  並列名詞句の分析は連体修飾句の係り受けの解析に似ている．
  構文解析の段階では「Ａと」を連体修飾句と同様に扱い，
  並列構造の曖昧性の解消は，次の意味解析の段階で，
  連体修飾関係の曖昧性の解消と同時に行うこととする
  (図\ref{fig:convert_para_noun})．
\item[並列述語句: ] 予備実験\cite{noro:2003}によると，
  並列述語句を含む文の正解率は，
  それ以外の並列構造を含む文の正解率と比べて大幅に低くなる．
  これは，二つの述語句が並列関係にあるか否かの判断が，
  構文解析の段階では難しいためである．
  例えば，「歌を歌い，踊りを踊る」という文が並列構造を持つか否かは，
  並列関係の定義を明確にしなければ，
  コーパス作成者によっても判断が分かれるところである．
  構文解析の段階では並列述語句は連用修飾関係と同様に扱い，
  二つの述語句が並列関係にあるか否かの判断は，
  後の意味解析の段階で行うこととする
  (図\ref{fig:convert_para_verb})．
\item[並列助詞句: ] 並列助詞句は，「国政段階\underline{でも}
  個別産業レベル\underline{でも}
  影響力は小さい」のように，並列関係にある二つの助詞句に含まれる
  助詞が同じであることが多いので，並列助詞句を含む文の正解率は
  それほど低くならないと思われるかもしれない．
  ところが，予備実験\cite{noro:2003}によると，
  並列助詞句を含む文の正解率は並列述語句を含む場合よりは高いが，
  並列名詞句を含む場合とほぼ同じであった．
  二つの助詞句が並列関係にあるか否かの判定には意味的情報が必要であり，
  構文解析の段階で解決することは困難である．
  構文解析の段階では，とりあえず並列関係にある助詞句は
  別個に動詞に係る構造を作ることとし，
  二つの助詞句が並列関係にあるか否かの判定は
  意味解析の段階で行うこととする
  (図\ref{fig:convert_para_pp})．
\end{description}

\begin{figure}[tp]
  \centering
  \epsfxsize=.8\textwidth
  \epsfbox{Modification/figure/convert_para_pp.eps}
  \caption{並列助詞句の構造に関する変更}
  \label{fig:convert_para_pp}
\end{figure}


以上をまとめると，我々の文法とコーパスの変更方針は以下のようになる．
\if0
\begin{enumerate}
\item 複合名詞内の構造の曖昧性，連用修飾句の範囲を変えない
  連体修飾句の係り先の曖昧性は
  タイプ3の曖昧性とし，構文解析の段階では
  一つの構文構造を出力する．
\item 連用修飾句の係り先の曖昧性，連用修飾句の範囲を変える
  連体修飾句の係り先の曖昧性はタイプ1の曖昧性とし，
  構文解析の段階で係り受け構造を反映した異なる構造を出力する．
\item 並列構造の曖昧性はタイプ3の曖昧性とし，
  二つの句が並列関係にあるか否かの曖昧性は，
  構文解析の段階では一つの構文構造を出力する．
\end{enumerate}
\fi
\begin{enumerate}
\item 複合名詞内の構造，連用修飾句の範囲を変えない
  連体修飾句の係り受け関係の構造は，
  語構成や意味に関係なく同一の構造にする．
\item 連用修飾句の係り受け関係の構造，連用修飾句の範囲を変える
  連体修飾句の係り受け関係の構造は，
  従来通りの構造にする．
  ただし，用言のとる表層格の情報は無視する．
\item 二つの句が並列関係にあるか否かの判定は
  構文解析の段階では行わず，並列関係にあるか否かで構造の区別はしない．
\end{enumerate}

\begin{figure}[tp]
  \centering
  \epsfxsize=.7\textwidth
  \epsfbox{Modification/figure/basicPolicy.eps}
  \caption{構文解析で生成される構造}
  \label{fig:example_of_policy}
\end{figure}

以上の方針に従って構築した文法を使用し，
「道路の両側には水を流すための溝が掘ってあります」という文を
構文解析すると，図\ref{fig:example_of_policy}に示す
4個の構文構造が生成される．
ただし，実線で囲まれた句は連用修飾句を，
破線で囲まれた句は動詞を，矢印の始点は連用修飾関係の係り元を，
終点は係り先を表す．
これら4個の構文構造は，連用修飾句の範囲とその係り先の違いを表し，
この中から一つの構文構造を選択することは，
連用修飾句の範囲とその係り先を決定することを意味する．
一方，連体修飾句の係り先は，
各構文構造が持つ意味的曖昧性の中から
一つの意味解釈を生成することによって決定する．
例えば，構文構造(b)では連体修飾句「道路の両側には水を流す」が
「ため」に係るか「溝」に係るかを決定し，
構文構造(c)では連体修飾句「道路の」と「両側には水を流す」が，
それぞれ「ため」に係るか「溝」に係るかを決定する．
一方，構文構造(b)では，「道路の」が「ため」や「溝」に係る可能性は，
動詞「流す」を連用修飾する「道路の両側には」という句の範囲を
変えることになるので考慮する必要はない．

\section{PGLRモデルによる解析結果を利用した係り受け解析}
\label{sec:SDDA}

前節で，我々の方針により作成したコーパスから
抽出した大規模日本語文法が，構文解析結果の曖昧性を抑え，
文の正解率が約10\%向上することを示した．
しかし，構文解析結果の曖昧性を抑えるために，
一部の曖昧性を
同一の構造で表現することとし，
その内部構造を厳密に決定していないため，
文の正解率が高くなるのは当然であるという疑問が残る．
そこで，
PGLRモデルによる解析結果を利用した文節係り受け解析を行い，
係り受け精度を調べた．



\subsection{構文木からの文節係り受け関係の抽出}
\label{sec:DepExtraction}

文節の係り受け関係は，構文木から取り出す．
その手順を以下に示す．
\begin{enumerate}
\item 文節区切りを決定する
\item 構文構造をもとに，各文節について，係り先となる文節を決定する
\end{enumerate}
例えば，図\ref{fig:example_tree}の構文木の場合，
文節区切りと各文節の係り先となる文節は
表\ref{tab:extracted_dep}のようになる．
我々が使用しているコーパスに付与されている構造は句構造であり，
文節中のどの語に係るかをさらに厳密に決定することも可能である．
しかし，今回の実験では，どの文節に係るかのみを決定する．

\begin{figure}[t]
  \centering
  \epsfxsize=.8\textwidth
  \epsfbox{SDDA/figure/example_tree.eps}
  \caption{構文構造の例}
  \label{fig:example_tree}
\end{figure}

\begin{table}[tp]
  \centering
  \caption{図\protect\ref{fig:example_tree}の木構造から抽出される文節の係り受け関係}
  \begin{tabular}{|c|l|c|}\hline
    文節番号 & \multicolumn{1}{|c|}{文字列} & 係り先文節番号 \\\hline
    1 & １．８ヘクタールの & 2 \\\hline
    2 & 広さが & 3 \\\hline
    3 & あり， & 6 \\\hline
    4 & 日本庭園の & 5 \\\hline
    5 & 眺めが & 6 \\\hline
    6 & すばらしい & ---(文末) \\\hline
  \end{tabular}
  \label{tab:extracted_dep}
\end{table}

変更後の文法では，連体修飾句の係り受け関係の構造は
連用修飾句の範囲を変えない場合に限り，
同一の構造(右下がりの構造)に制限している．
そのため，連体修飾句の係り受け解析を行う際は，
連体修飾関係の曖昧性をすべて考慮しなければならない．
しかし，今回は，PGLRモデルによる生成確率1位の構文木中の連体修飾句は
(意味的情報を用いず)
係り得る名詞の中で最も近いものを含む文節に係ることとする
\footnote{係り得る名詞の中で最も近いものに係るとすると，
連体修飾句の係り先の正解率は70\%弱であった．}．

\begin{figure}[t]
  \centering
  \epsfxsize=.6\textwidth
  \epsfbox{SDDA/figure/adnominal.eps}
  \caption{連体句の係り受け関係}
  \label{fig:sdda_adn}
\end{figure}

例えば，「青い目のアメリカから来た男性に会う」という文の
「青い目のアメリカから来た男性に」という助詞句を考える．
変更後の文法でこの文を構文解析すると，
この助詞句について，
図\ref{fig:sdda_adn}(a)，(c)，(e)の3通りの解析木が出力される
(中間ノードのラベルは省略する)
\footnote{実際には助詞句「青い目のアメリカから」が
「会う」に係る解析木も出力されるが，ここの議論では省略する．}．
図\ref{fig:sdda_adn}(a)のような構文木が生成された場合，
その係り受けは，図\ref{fig:sdda_adn}(b)に示すように，
文節「青い」が文節「目の」に，文節「目の」が文節「男性に」に
直接係るとして係り受け精度を計算する
(文節「アメリカから」は文節「来た」に，
文節「来た」は文節「男性に」に係る)．
図\ref{fig:sdda_adn}(c)，(e)の場合は，それぞれ
図\ref{fig:sdda_adn}(d)，(f)に示すような係り受け構造となる．

連用修飾句の係り先の曖昧性は
構文解析結果の曖昧性として残しているので，
構文解析結果として出力された構造をそのまま利用する．

複合名詞の内部の構造
は語構成に関係なく同一の構造としているが，
今回の実験では文節の係り受け
構造を抽出するだけであるので，
複合名詞の内部の構造までは考慮されない．

2つの文節が並列関係にあるか否かの曖昧性は，
今回の評価実験では無視し，
並列名詞句は連体修飾関係として，
並列述語句と並列助詞句は連用修飾関係として扱う．

\subsection{評価実験}

評価は，変更後のコーパス8912文で行った
\footnote{第\ref{sec:Evaluation}節の評価実験では8911文を利用していた．
実際のコーパスは8912文であるが，1文は変更前のコーパスから
抽出した文法で構文解析を行うと，構文解析結果の数が膨大になり過ぎ，
メモリ不足で解析できなかったため，この1文を除いて実験を行った．
今回の実験は変更後のコーパスから抽出した文法のみを利用するので，
8912文全てを利用している．}．
このうち，評価用として100文をランダムに選択し，
残りをPGLRモデルの学習用とした．
この評価用データの100文は，1文あたり平均19.84形態素，7.16文節であり，
並列構造を持つ文は17文含まれている．
PGLRモデルにより評価用データ100文を構文解析し，
生成確率が1位の構文木から，
第\ref{sec:DepExtraction}節で述べた方法により，
半自動的に係り受け構造を抽出し
\footnote{構文解析結果から文節の係り受け構造を機械的に抽出することは，
一見すると簡単に見える．しかし，コーパスに付与されている構造が
複雑であるため，完全に自動化することはできなかった．
機械的に正しい係り受け構造を抽出できない部分は人手で修正している．
今後，文節係り受け構造の抽出を容易にするために，
構造の変更を検討していく予定である．}，
その精度を以下の3つの尺度で評価した．
\[\mbox{係り受けA型}=\frac{\mbox{正しい係り受け関係の数}}
{\mbox{総文節数}-(\mbox{テスト文の総数}\times 1)}\]
\[\mbox{係り受けB型}=\frac{\mbox{正しい係り受け関係の数
    (文末2文節の関係以外)}}{\mbox{総文節数}-(\mbox{テスト文の総数}
    \times 2)}\]
\[\mbox{文正解率}=\frac{\mbox{正しい係り受け関係をすべて決定できた文数}}
{\mbox{テスト文の総数}}\]
「係り受けA型」とは，全ての係り受け関係の正解率であり，
「係り受けB型」とは，文末2文節の係り受け関係以外の係り受け正解率である．
「文正解率」とは，文全体の文節の係り受け関係の正解率である．
テスト文の正しい係り受け関係は，
変更前のコーパスに付与されている構文木から，
先に述べた方法で取り出した．
その結果を表\ref{tab:result_sdda}に示す．
ただし，「文節不一致」は文節区切りが正解と一致しなかった文の数を表す．

\begin{table}[tp]
  \centering
  \caption{係り受け解析の実験結果}
  \label{tab:result_sdda}
  \begin{tabular}{|r|r|r|r|}\hline
    \multicolumn{1}{|c|}{係り受けA型}
    & \multicolumn{1}{|c|}{係り受けB型}
    & \multicolumn{1}{|c|}{文正解率}
    & \multicolumn{1}{|c|}{文節不一致}\\\hline
    91.32\% & 89.61\% & 61.54\% & 9\\\hline
  \end{tabular}
\end{table}

表\ref{tab:result_sdda}より，意味情報を全く利用しなくとも，
PGLRモデルのみによる係り受け正解率が90\%前後と非常に高いことが分かる．
これは，Support Vector Machineや最大エントロピー法を用いた
文節係り受け解析の手法の正解率と同程度である
\cite{uchimoto:99,kudo:2002}
\footnote{使用しているコーパスや実験の条件が異なるため，
公平な比較ではない．}．我々は，
構文解析結果に対して意味解析を行うことを想定している．
現在，本格的な意味解析の代わりに，
SDSAの枠組みのみを利用して，単語の共起に関する統計データを用いた
小規模な係り受け解析の実験を行っているが，
非常に単純なスコア付けであるにも関わらず，
93.0\%の係り受け正解率(係り受けB型)，68.8\%の文正解率が
得られることを確認している\cite{yagi:2003}．
今回は評価用データを100文として実験を行ったが，
この規模は非常に小規模であるため，SDSAの有効性を示すには至っていない．
しかし，我々は，実験結果からSDSAによるアプローチが
有効である可能性があると考えている．
今後，
コーパスサイズを大きくし，
SDSAベースの本格的な意味解析への移行を検討する予定である．

\appendix

\section{文法作成の出発点として使用したコーパス}
\label{sec:Corpus}

本節では，我々が文法作成の出発点として使用した
構文構造付きコーパスについて述べる．

我々が使用したコーパスは，EDRコーパス中の文(約2万文)に対し，
人手で構文構造を付与したものである．
基本的な構造はEDRコーパスに付与されている括弧付き構造に準拠しているが，
単語区切り，品詞体系，構文構造それぞれについて，
元となるEDRコーパスと異なる点がある．

\subsection{基本構造}

\begin{figure}[tp]
  \centering
  \epsfxsize=\textwidth
  \epsfbox{Corpus/figure/edrtree_pos.eps}
  \caption{構文木を構成する3つの層}
  \label{fig:edrtree_pos}
\end{figure}

我々が使用したコーパスに付与されている構造は，
以下の3つの層に分かれている(図\ref{fig:edrtree_pos})．
\begin{description}
\item[第1層: ] 形態素と終端記号(品詞)を対応付ける層．
\item[第2層: ] 終端記号(品詞)をやや粗い品詞分類に変換する層．
\item[第3層: ] 実際の構文構造を示す層．
\end{description}

\subsection{単語区切りと品詞体系}

EDRコーパスで使用されている品詞は15種類しかなく，
比較的粗い品詞体系となっている．
しかし，これは構文解析を行うのに十分であるとは言えない．
白井らは，助詞と記号を，表層情報(形態素)を利用して細分化しているが
\cite{shirai:97}，それでも，まだ十分ではないと考えている．
そこで，EDR日本語単語辞書に記載されている品詞名，
左右連接属性(連接属性対)，用言のとる表層格情報を組み合わせることにより，
さらに細分化したものを第1層の品詞として使用している
(表\ref{tab:pos_example})．
ただし，「開講」等「する」を伴って動詞を形成するものは，
EDR日本語単語辞書では``JN1;JVE''という品詞が割り当てられているが，
我々が使用したコーパスでは``JSH''で置き換えている．
また，「(のぼり)はじめる」のように動詞に続く動詞や形容詞は，
補助動詞(JAX)としている．

\begin{table}[tp]
  \centering
  \caption{品詞の細分化の例(1)}
  \begin{tabular}{|c|c|c|}\hline
    単語 & EDRコーパス & 使用したコーパス \\\hline\hline
    れんが & 名詞 & JN1\_JLN1\_JRN1\_＊ \\\hline
    埋め込(む) & 動詞 & JVE\_JLV1\_JRVM\_cが-に-を \\\hline
    (埋め込)む & 語尾 & JEV\_JSVM\_JEE1\_＊ \\\hline
    と(格助詞) & 助詞 & JJO\_JL30C\_JR30C\_＊ \\\hline
    と(接続助詞) & 助詞 & JJO\_JL30S\_JR30S\_＊ \\\hline
    と(並列助詞) & 助詞 & JJO\_JL30H\_JR30H\_＊ \\\hline
    開講 & 動詞 & JSH\_JLN3\_JRN4\_cが-を \\\hline
    (開講)する & 語尾 & JEV\_JSV2\_JEE1\_＊ \\\hline
    (のぼり)はじめ(る) & 動詞 & JAX\_JLV9\_JRV1\_＊ \\\hline
  \end{tabular}
  \label{tab:pos_example}
\end{table}

\begin{table}[tp]
  \centering
  \caption{品詞の細分化の例(2)}
  \begin{tabular}{|c|c|c|}\hline
    単語 & EDRコーパス & 使用したコーパス \\\hline\hline
    (強め)てい(る) & 助詞/動詞 & JJP\_JL26S\_JRV1\_＊ \\\hline
    によって & 助詞/動詞/語尾/助詞 & JJ1\_JL48C\_JR26S\_hによって
    \\\hline
    において & 助詞/動詞/語尾/助詞 & JJ1\_JL48C\_JR26S\_hにおいて
    \\\hline
  \end{tabular}
  \label{tab:pos_example2}
\end{table}

EDRコーパスでは，「不安感を強めている」の「てい(る)」は
「て(助詞)」，「い(動詞)」の2単語に分かれているが，
我々が使用したコーパスでは，助動詞相当句として1単語としている
(表\ref{tab:pos_example2})．「によって」等の助詞相当句も同様である
\footnote{助詞相当句の左右連接属性は，左端の語の左連接属性と
右端の語の右連接属性で決まるので，格助詞「に」ではじまり
接続助詞「て」で終わる助詞相当句(「によって」，「にとって」等)は
すべて同じ品詞になってしまう．
そこで，これらを区別するために，形態素ごとに分類している．}．

EDR日本語単語辞書をもとにした品詞体系は非常に細かく，
実際にコーパスに出現した品詞だけでも600種類を数える
(存在し得る品詞を含めると優に1000種類を超える)．
この品詞の上に直接構文構造を付けると，
そのコーパスから抽出した文法規則が複雑になる．
そこで，品詞分類を粗くする層として第2層を設けている．
これにより，品詞分類が100種類程度に減少する．
本論文では，構文構造を図示する際，必要でない限り，
第1層の品詞を省略し，第2層の粗い品詞を終端記号とする．

\if0
粗い品詞分類は，以下のようになっている．
\begin{description}
\item[名詞: ] 「する」が直後に結合できるもの，助詞を伴なわずに連用修飾
  可能なもの等，機能ごとに分類するが，固有名詞等を分類しない．
  \begin{description}
  \item[(分類)] 普通名詞，数名詞，サ変名詞，連用名詞，形容名詞，
    連体名詞，形式名詞，形式連用名詞，形式連体名詞
  \end{description}
\item[動詞，形容詞: ] 語幹と語尾に分割されるが，動詞語尾と形容詞語尾の
  区別はしない．
  \begin{description}
  \item[(分類)] 動詞語幹，形容詞語幹，語尾
  \end{description}
\item[副詞: ] 基本的に用言を修飾するものであるが，
  「ほぼ全域」のように名詞を修飾するものもあり，これらを区別している．
  \begin{description}
  \item[(分類)] 副詞，陳述副詞，連体副詞
  \end{description}
\item[連体詞: ] 名詞を修飾するものであるが，「この」，「その」等は
  指示連体詞として区別している．
  \begin{description}
  \item[(分類)] 連体詞，指示連体詞
  \end{description}
\item[助動詞: ] 語幹と語尾に分けられるものは分け，それ以外のものは
  それぞれ別のカテゴリを与える．
  ただし，語尾は動詞，形容詞語尾と区別しない．
  受身助動詞，使役助動詞は格の交代現象を引き起こすため，区別する．
  \begin{description}
  \item[(分類)] 助動詞語幹，語尾，受身助動詞語幹，使役助動詞語幹，
    助動詞-た，助動詞-ます(その他多数)
  \end{description}
\item[判定詞: ] 名詞の後に結合して判断を表す助動詞「だ」，「です」，
  「である」は判定詞として助動詞と区別する．
  「だ」，「です」は語幹と語尾に分けられないが，語幹となっている．
  語尾は，動詞語尾，形容詞語尾，助動詞語尾と区別しない．
  \begin{description}
  \item[(分類)] 判定詞語幹，語尾
  \end{description}
\item[補助動詞: ] 「(のぼり)はじめる」のように，
  動詞の後に続く動詞や形容詞を補助動詞とする．
  \begin{description}
  \item[(分類)] 補助動詞語幹，語尾
  \end{description}
\item[助詞: ] 機能により分類する．格助詞のうち，
  動詞や形容詞の結合価成分を作るものに対しては，
  形態素ごとに分割したカテゴリを与える．
  \begin{description}
  \item[(分類)] 副助詞，連体助詞，接続助詞，準体助詞，終助詞，格助詞，
    格助詞$\backslash$が，格助詞$\backslash$を，格助詞$\backslash$に
    (その他多数)
  \end{description}
\item[接辞: ] 接尾語は，それが結合することによって形成される複合語の
  種類(品詞)によって分類される．
  \begin{description}
  \item[(分類)] 接頭語，接尾語/普通名詞，接尾語/連用名詞，
    接尾語/動詞(その他多数)
  \end{description}
\end{description}
\fi

\subsection{構文構造}

第3層の構造は基本的にEDRコーパスの括弧付けに従い，
各中間ノードに非終端記号を付与する．
ただし，
我々が使用したコーパスでは1つの中間ノードに複数の非終端記号を
縦に続けて割り当てることもあり，これにより，
コーパスから抽出した文法が非終端記号の置き換え規則を含むようになる．
例えば，「文法が」と「日本語文法が」という2つの句に対して，
\cite{shirai:97}の場合は図\ref{fig:labelling}(a)のような構造になり，
我々が使用したコーパスでは図\ref{fig:labelling}(b)のような構造になる．
(a)から抽出される後置詞句に関する文法規則は，
名詞句に助詞が結合する規則と名詞に助詞が結合する規則の2つになるが，
(b)から抽出される助詞句に関する文法規則は，
名詞句に助詞が結合する規則のみである
\footnote{白井らが「後置詞句」と呼んでいる句は，
我々が使用したコーパスでは「助詞句」と呼んでいる．}．
その代わり，名詞句を構成するまでの部分が深くなるが，
名詞や複合名詞から名詞句への置き換え規則を設け，
類似の規則をまとめることで，
句より上のレベルと下のレベルを明確に分けることができ，
構造や抽出した文法規則が分かりやすくなる．

\begin{figure}[tp]
  \centering
  \epsfxsize=\textwidth
  \epsfbox{Corpus/figure/labelling.eps}
  \caption{\protect\cite{shirai:97}との構文構造の違い}
  \label{fig:labelling}
\end{figure}

構造は基本的にEDRコーパスの括弧付けに従うが，
次の場合には括弧付けとは異なる構造を付与する．
\begin{description}
\item[法，様相を表す助動詞: ] 「そうだ」など法や様相を表す助動詞は，
  EDRコーパスでは文全体に付加する構造になっている．
  しかし，白井らは，曖昧性を抑えるため，
  文末の最後の要素に結合する構造にしている．
  我々が使用したコーパスも，同様の構造になっている．
\item[フラットな構造: ] 白井らも指摘しているように，
  EDRコーパスの括弧付けの中には，細かい括弧付けがなく，
  多くの要素を1つの括弧でまとめてしまうものがある．
  その場合には，さらに細かい構造を付与する．
\item[用言に結合する語尾，助動詞: ] 用言に複数の語尾や助動詞が
  結合する場合，
  EDRコーパスでは1つの括弧でまとめられているが，
  この部分は，左下がりの構造にしている(図\ref{fig:verb_struct})．
  この部分をEDRコーパスに従ってフラットな構造にすると，
  結合する助詞や助動詞の列のパターンだけ文法規則が必要となるが，
  こうすることで，少ない文法規則でより多くのパターンを
  カバーできるようになる．
\end{description}

\begin{figure}[tp]
  \centering
  \epsfxsize=.5\textwidth
  \epsfbox{Corpus/figure/verb_struct.eps}
  \caption{動詞に複数の助動詞が結合する場合の構造}
  \label{fig:verb_struct}
\end{figure}

\begin{figure}[tp]
  \centering
  \epsfxsize=.5\textwidth
  \epsfbox{Corpus/figure/case.eps}
  \caption{用言のとる表層格を考慮した構造}
  \label{fig:case}
\end{figure}

我々が使用したコーパス中の用言を表す品詞には，
それらがとる表層格の情報が付与されている．
その表層格の情報は，第3層の構文構造にも引き継がれ，
該当する助詞句によって打ち消される(図\ref{fig:case})．
これにより，二重ヲ格等の制約を取り入れることが可能になる
\footnote{本論文では，簡略化のため，説明において必要でない場合には，
表層格の情報を省略して図示することがある．}．


\begin{biography}
\biotitle{略歴}
\bioauthor{野呂 智哉}{
  1977年生．
  2000年東京工業大学工学部情報工学科卒業．
  2002年同大学院情報理工学研究科計算工学専攻修士課程修了．
  同年同大学院情報理工学研究科計算工学専攻博士後期課程進学，在学中．
  日本語構文構造付きコーパスと日本語文法の構築に関する研究に従事．
}
\bioauthor{橋本 泰一}{
  1999年東京工業大学大学院情報理工学研究科修士課程修了．
  2001年同大学院情報理工学研究科博士課程修了．
  現在，同大学大学院情報理工学研究科助手．博士(工学)．
  情報処理学会，言語処理学会，各会員．
}
\bioauthor{徳永 健伸}{
  1961年生．
  1983年東京工業大学工学部情報工学科卒業．
  1985年同大学院理工学研究科修士課程修了．
  同年(株)三菱総合研究所入社．
  1986年東京工業大学大学院博士課程入学．
  現在，同大学大学院情報理工学研究科助教授．
  博士(工学)．
  自然言語処理，計算言語学，情報検索などの研究に従事．
  情報処理学会，認知科学会，人工知能学会，計量国語学会，Association
  for Computational Linguistics，ACM SIGIR，各会員．
}
\bioauthor{田中 穂積}{
  1941年生．
  1964年東京工業大学工学部情報工学科卒業．
  1966年同大学院理工学研究科修士課程修了．
  同年電気試験所(現産業技術総合研究所)入所．
  1980年東京工業大学助教授．
  1983年東京工業大学教授．
  現在，同大学大学院情報理工学研究科計算工学専攻教授．
  博士(工学)．
  人工知能，自然言語処理に関する研究に従事．
  情報処理学会，電子情報通信学会，認知科学会，人工知能学会，計量国語学
  会，Association for Computational Linguistics，各会員．
}

\bioreceived{受付}
\biorevised{再受付}
\bioaccepted{採録}

\end{biography}

\end{document}

