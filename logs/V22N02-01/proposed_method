本章では，症状・診断名の抽出のためにベースとするシステムを説明する．
本研究では，用語抽出の処理を症状・診断名からなる固有表現を抽出するタスクとみなし，系列ラベリングとして定式化する．
また，固有表現の抽出は，機械学習アルゴリズムlinear-chain CRFを用いて行う（以降，本研究で用いたlinear-chain CRFを指す場合，単にCRFと呼ぶ）．
さらに，CRFで抽出を行った出力に，人手で作成したルールを用いて抽出誤り訂正の後処理を行うことで，より誤りの少ない抽出を実現する．
NTCIR-10 MedNLP (Medical Natural Language Processing)タスク[CITE]は，医療分野における情報抽出技術の評価を目的として実施されたタスクである．
診療記録から症状・診断名を抽出する「症状と診断タスク」を含む3つのサブタスクが定義された．
本研究では，MedNLPタスクで使用されたデータセット（MedNLPテストコレクション）を使用し，症状と診断タスクと同様の設定で症状・診断名の抽出を行う．
以下，MedNLPテストコレクションおよび症状と診断タスクについてそれぞれ説明する．
MedNLPテストコレクションは，医師により書かれた架空の患者の病歴要約50文書からなるデータセットであり，2対1の比率で訓練データとテストデータに分割されている．
同テストコレクションには，患者の個人情報および診療情報がアノテーションされている．
個人情報は患者の名前，年齢，性別と，日時，地名，医療機関名からなり，診療情報は患者の症状や医師の診断（症状・診断名）を指す．
このうち，症状と診断タスクで対象とされたのは後者の診療情報である．
症状・診断名には，医師の認識の程度などを表すモダリティ属性が定義されており，それぞれ症状の罹患の肯定，否定，推量（可能性の存在）を表すpositive，negation，suspicionに加え，症状が患者の家族の病歴として記述されていることを表すfamilyの4種類からなる．
以下，<n></n>，<s></s>，<f></f>で囲まれた範囲をそれぞれモダリティ属性がnegation，suspicion，familyである症状・診断名であるとして，各モダリティ属性が付与された症状・診断名の例を示す．
「<n>糖尿病</n>は認めず」
「<n>関節症状</n>は改善した」
「<s>神経疾患</s>の疑いにて」
「<s>味覚異常</s>の可能性を考え」
「<n>胆嚢炎</n>を疑わせる所見を認めず」
「母親；<f>気管支喘息</f>」
「父：<f>狭心症</f>、<f>心筋梗塞</f>」
「娘３人は鼻粘膜の<f>易出血性</f>があり」
negation，suspicion属性については，(a)〜(d)に示すように，症状・診断名の係り先の文節が特定の表現を含む場合に，その表現に対応するモダリティ属性となることが多い．
ただし，(e)のように，直接の係り先がsuspicionを示す表現を含んでいても，後方に否定表現が現れることによりnegationとなることがある．
family属性の症状・診断名は，(f)，(g)のように，続柄名の後に症状・診断名を列挙する形で記述された場合が該当する他，(h)のように，文全体の主語が続柄である場合も該当する．
なお，positive属性は，negation，suspicionおよびfamilyであることを示す表現と共起しない症状・診断名に対して付与される属性とみなせる．
表[REF_tab:medtr_tag]に，訓練データにおける各モダリティ属性の出現回数（``#''の列）を示す．
出現回数はモダリティ属性の種類により偏りがあり，positiveが7割程度を占めているのに対し，suspicion，familyは非常に少数となっている．
症状と診断タスクは，テストコレクションから，患者に関連する症状・診断名を抽出し，モダリティ属性を決定するタスクとして定義された．
評価は，訓練データを用いて開発されたシステムに対して，テストデータでの抽出性能を測ることで行われ，評価尺度として，[MATH]値([MATH])が使用された．
[MATH]値は，適合率(Precision)と再現率(Recall)の調和平均であり，次式で定義される．
また，評価方法として，モダリティ属性の分類を考慮する評価と，考慮しない評価の2通りの方法で評価が行われた．
前者の方法では，抽出された固有表現が正しい属性に分類されないと正解とならないのに対して，後者の方法は，属性が誤っていても，抽出された固有表現の範囲がアノテーションされた正解情報と一致していれば正解とみなされる．
本研究では，各モダリティ属性が付与された症状・診断名を異なるカテゴリの固有表現とみなして固有表現抽出を行うことで，症状・診断名の抽出範囲およびモダリティ属性の決定を行う．
固有表現抽出は，入力文中の固有表現部分を同定するタスクであり，系列ラベリングとして定式化されることが多い．
系列ラベリングとは，入力系列に対してラベルの系列を出力する問題である．
固有表現抽出では，トークンの系列である文を入力として，トークンごとに固有表現の種類等を表すラベルを推定し，それらラベルの列を出力する．
本研究では，形態素をトークンとする系列ラベリングとして固有表現抽出の定式化を行う．
定式化の際には，同一の固有表現（チャンク）中の位置を表すためのチャンキング方式として，IOB2フォーマット[CITE]を使用した．
IOB2では，タグはB (Begin)，I (Inside)，O (Outside)の3種類があり，それぞれチャンクの先頭，チャンクの先頭を除く内部，チャンクの外側を表す．
なお，複数のカテゴリの固有表現が存在する場合，B，Iはカテゴリ名と併せて使用される．
たとえば，「嘔吐／B-c_pos 出現／I-c_pos した／O」のようにラベルを付与することで，「嘔吐出現」がc_pos（肯定のモダリティ属性を持つ症状・診断名）というカテゴリの固有表現であることを表す．
なお，入力文の形態素解析には，linear-chain CRFに基づく日本語形態素解析器であるMeCab [CITE] (Ver. 0.996)およびIPADIC (Ver. 2.7.0)を用いた．
本システムでは，機械学習アルゴリズムとしてlinear-chain CRFを用いた．
linear-chain CRFは，分類アルゴリズムである最大エントロピー法を出力が構造を有する問題（構造学習）に拡張したモデルである．
品詞タギング[CITE]，基本名詞句同定[CITE]，形態素解析[CITE]など，構造学習，特に，系列ラベリングとして定式化できる自然言語処理の様々な問題に適用され，高い性能が報告されている．
また，固有表現抽出の研究においても広く使用され[CITE]，NTCIR-10 MedNLPタスクでも最もよく用いられた[CITE]．
linear-chain CRFの実装としては，C++で記述されたオープンソースソフトウェアであるCRF++  (Ver. 0.58)を利用した．
CRF++は，準ニュートン法の一種であるL-BFGS (Limited-memory BFGS)を使用して数値最適化を行っており，省メモリで高速な学習を実現している．
また，素性テンプレートという素性の記述形式が定義されており，テンプレートを利用することで多様な素性を容易に学習に組み込むことができるという特長がある．
CRF++の素性テンプレートでは，出力ラベル系列についてのunigram素性およびbigram素性が利用可能である．
出力ラベルunigram素性は，入力系列についての任意の情報（系列中の特定のトークンの形態素自体や品詞など）と現在のトークンのラベルの組からなる素性を指し，出力ラベルbigram素性は，入力系列の任意の情報，現在のトークンのラベルおよび1つ前のトークンのラベルの三つ組からなる素性を指す．
本研究では，すべての素性に対して出力ラベルunigram素性およびbigram素性の両方を使用することとした．
たとえば，品詞素性を[MATH]から2までのウィンドウで用いると述べた場合，注目するトークンの2つ前方から2つ後方に位置するトークンの品詞について，それぞれで出力ラベルunigram素性およびbigram素性を使用することを意味する．
なお，指定した値未満の出現回数である素性を学習に使用しないことを意味する素性のカットオフの閾値は1とし，訓練データに出現したすべての素性を使用することにした．
また，正則化には[MATH]正則化を用いた．
本システムでは，症状・診断名抽出のための素性として，「形態素」，「形態素基本形」，「品詞」，「品詞細分類」，「字種」，「辞書マッチング情報」，「モダリティ表現」の7種類の情報を用いた．
注目するトークンを起点にどこまでの範囲のトークンの情報を素性に用いるかを表すウィンドウサイズについては，モダリティ素性を除き，[REF_chp:experiments]章で述べる実験により最適な値を決定する．
モダリティ素性のウィンドウサイズについては後述する．
形態素素性はトークン自体であり，基本形，品詞，品詞細分類素性は，それぞれ各形態素の基本形，品詞，品詞細分類である．
たとえば，「言っ」の基本形は「言う」，「速く」の基本形は「速い」となる．
品詞は，名詞，動詞，形容詞，接続詞など10数種類存在し，品詞細分類は，名詞であれば「固有名詞」，「形容動詞語幹」などがある．
これら四つの素性には，形態素解析器MeCabの出力を利用した．
なお，MeCabではデフォルトの辞書としてIPADICが採用されており，IPADICで使用されている品詞および品詞細分類は，IPA品詞体系として定義されている．
字種素性は，トークンを構成する文字の字種パターンを表す．
本研究では，ひらがな，カタカナ，漢字，英大文字，英小文字，ギリシャ文字，数値，記号とこれらの組合せからなる字種パターンを定義した．
たとえば，「レントゲン」は「カタカナ」，「考え」は「[MATH]」，「ＭＲＩ」は「英大文字」が字種パターンとなる．
なお，「[MATH]」では，1つのトークン中にひらがなと漢字が出現していればこのパターンに相当するものとし，各文字の出現順は無視した．
複数字種の組合せからなるパターンの扱いは，他のパターンについても同様である．
辞書素性は，専門用語辞書など外部の語彙資源を利用した素性であり，入力文中の形態素列が辞書中の語句と一致したか否かという情報を表す．
本研究では，症状・診断名の抽出のために病名等の用語から構成される辞書を使用し，入力文中のトークン列で，辞書中の語句とマッチした部分にIOB2フォーマットに基づくタグを付与した．
たとえば，「腎機能障害」という語句が辞書中に含まれる場合，「腎／機能／障害／の／増悪」と分割された形態素列に対して「B／I／I／O／O」というタグが付与される．
なお，辞書マッチは文字数についての最左最長一致で判定し，マッチした範囲の境界が形態素の内部にある場合，マッチ範囲に完全に包含される形態素に対してのみタグを付与した．
モダリティ素性は，症状・診断名のモダリティ属性を示す表現（モダリティ表現）を捉えるための素性である．
モダリティ表現の具体例として，先行する症状・診断名のモダリティがnegationであることを示す「〜なし」や「〜を認めず」，同様にsuspicionであることを示す「〜疑い」や「〜を考え」などがある．
また，「母」「息子」など続柄を表す表現は，共起する症状・診断名のモダリティ属性がfamilyであることを示すモダリティ表現であるといえる．
本素性では，negation，suspicionおよびfamily属性を対象に，モダリティ属性推定の手がかりとなる表現を正規表現で記述し，文中の各トークンについて，最左最長一致で正規表現とマッチした範囲の端に位置するトークンまでの距離（形態素数）と，マッチした表現が表すモダリティ属性を示すタグを付与した．
なお，positive属性は，negation，suspicionおよびfamilyであることを示す表現と共起しない症状・診断名に対して付与される属性とみなせるため，これらのモダリティ表現が周辺に存在しないことがpositive属性と推定するための手がかりとなる．
例として，negationのモダリティ表現を捉える正規表現の1つとして次の(a)を使用している．
\![はがを]?(([認め[MATH]みとめ[MATH]見[MATH]み[MATH]得[MATH]え)(られ)?)?([無な](い[MATH]く[MATH]かっ)[MATH]せ?ず)
この正規表現を用いると，「運動／麻痺／は／み／られ／ず」という入力に対して「はみられず」という部分がマッチし，マッチした範囲の先頭トークン「は」までの距離は，「麻痺」で1，「運動」で2となる．
negationとsuspicionのモダリティ表現は症状・診断名の右側に出現するため，モダリティ表現が右側に出現しているトークンにのみ，出現を示すタグを付与した．
反対に，familyの表現は「母：脳梗塞」のように左側に出現するため，モダリティ表現が左側に出現しているトークンにのみタグを付与した．
なお，negationの正規表現は上述の(a)を含む4件，suspicionの正規表現は以下の(b)を含む2件，familyの正規表現は以下の(c) 1件を使用した．
モダリティ素性として使用した正規表現の全リストは付録[REF_sec:modal_regex]に記載する．
の?(疑い[MATH]うたがい)
{[祖伯叔]?[父母](?![指趾])親?[MATH]お[じば][MATH][兄弟姉妹娘][MATH]息子[MATH]従(兄弟[MATH]姉妹)}
また，過学習を抑制する目的で，モダリティ属性ごとに距離のグループ化を行った．
negationとsuspicionでは，距離1〜2（近くに出現），3〜4（やや近くに出現），5〜8（やや遠くに出現），9〜12（遠くに出現）の4通りの距離を考慮し，familyでは[MATH]〜[MATH]，[MATH]〜[MATH]，[MATH]〜[MATH]，[MATH]の4通りとした．
なお，距離は，注目するトークンの右側にモダリティ表現が出現している場合に正数，左側に出現している場合に負数で表しており，距離の絶対値は，注目するトークンから同一文中の任意のモダリティ表現（正規表現とマッチしたトークン列）内の最も近いトークンまでのトークン数に相当する．
また，``[MATH]〜''は文の左端以降での出現を意味している．
以上のモダリティ素性の定義に基づくと，前述の例に対しては，「運動」および「麻痺」に``neg1_2''，それ以外のトークンにモダリティ表現の非出現を表すタグ``O''が付与される．
なお，モダリティ素性として付与したタグは，注目しているトークンのタグのみ学習・推定に用いた（つまり，ウィンドウサイズを1とした）．
トークンに付与される素性タグにより，トークンの周辺文脈の情報が表現されており，実質的に12以上先のトークンまで考慮していることになる．
著者らは，NTCIR-10 MedNLPタスクに参加し，構造化パーセプトロン[CITE]およびlinear-chain CRFに基づく固有表現抽出システムを開発してきた[CITE]．
開発したシステムについてエラー分析を行ったところ，観測された誤りの中で，モダリティ属性の分類誤りが大きな割合を占めることがわかった．
この種の誤りは単純なルールで修正できるため，モダリティ属性の分類誤りに焦点を当て，誤り訂正のためのルールを作成することにした．
観測されたモダリティ属性分類誤りは，さらに次の2通りに大別できたため，それぞれの誤りに対応する訂正ルールとして，2つのルールを作成した．
固有表現の周辺に（非positive属性の）モダリティ表現が存在し，かつ推定された属性が同表現が表す属性と異なっている（主にpositiveとなっている）誤り
固有表現の周辺にモダリティ表現が存在せず，かつ推定された属性がpositive以外となっている誤り
作成した2つのルールを以下に示す．
``［］''の外側（左側）にnegationおよびsuspicion属性に対する条件，``［］''の内側にfamily属性に対する条件を記述した．
正しい推定に対して修正ルールを適用してしまうことを防ぐため，後述する[MATH]および[MATH]の値は，[MATH]，[MATH]として，ルールの適用基準を厳しく設定した．
ただし，family属性のモダリティ表現が出現する文中の症状・診断名が患者の家族に対する言及でないというケースは極めて少ないとの考えの下，familyに対する距離は[MATH]，つまり，該当位置から到達可能な同一文内の最大トークン数とした．
固有表現[MATH]の末尾［先頭］のトークンから右［左］方向に距離（トークン数）[MATH]以内に（非positive属性の）モダリティ表現[MATH]が存在する場合，[MATH]の推定ラベルのモダリティ属性を表現[MATH]が表す属性[MATH]に更新する．
距離[MATH]以内に複数のモダリティ表現が存在する場合は，family，negation，suspicionの順に優先する．
固有表現[MATH]の末尾［先頭］のトークンから右［左］方向に距離[MATH]以内にモダリティ表現が存在しない場合，推定ラベルの属性をpositiveに更新する．
なお，上記のルールを導入することは，固有表現[MATH]から[MATH]の最も近くのモダリティ表現までの距離[MATH]を，(a)近い([MATH])，(b)中程度の距離である([MATH])，(c)遠い，あるいはモダリティ表現が存在しない([MATH])の3通りに分け，距離[MATH]に応じてモダリティ属性決定の挙動を変えていることに対応する．
ルールが適用される(a)および(c)の条件下では，CRFで推定されたモダリティ属性をルールで上書きしているため，ルールによりモダリティ属性を決定しているのと等価である．
一方，固有表現から中程度の距離までの範囲内にモダリティ表現が存在する(b)の場合には，CRFによる推定結果をそのまま採用し，モダリティ属性の決定を学習の結果に委ねた．
用語抽出への語彙資源の利用は，訓練データに少数回しか出現しない用語やまったく出現しない用語の認識に有効であり，医療用語辞書などの語彙資源を用いた医療用語抽出研究が行われている[CITE]．
しかし，診療記録では症状・診断名として多様な複合語が使用されるため，テキスト中の語句に対して辞書中の用語と単純にマッチングを行うだけではマッチしない複合語が存在し，辞書利用の効果は限定的となる．
そこで，本章では，語彙資源中の複合語から構成語彙を獲得する方法と，構成語彙を組み合わせてより多くの複合語にマッチする拡張マッチングの方法を述べ，これらの方法に基づく語彙資源を活用した症状・診断名の抽出手法を提案する．
症状・診断名は，複数の医療用語から構成される複合語であることが多い．
たとえば，「水痘肺炎」という用語は「水痘」と「肺炎」から構成され，「甲状腺出血」は「甲状腺」と「出血」から構成される．
診療記録では，多様な構成語彙を組み合わせた複合語が用いられる一方で，実際に用いられる複合語の中には辞書中には含まれないものも多い．
例として，「水痘感染」と「甲状腺腫大」は，診療記録コーパスMedNLPテストコレクション中で用いられ，医療用語辞書MEDIS病名マスター中に存在しなかった症状・診断名である．
ただし，上述の用語の各構成語彙に注目すると，「水痘」，「感染」，「甲状腺」，「腫大」を構成語彙として含む用語は同辞書中に多数存在した（表[REF_tab:medterm_constituent]）．
したがって，症状・診断名の抽出に，既存の辞書中に含まれる用語をそのまま用いて対応するには限界があるといえる．
また，症状・診断名としてありうる構成語彙の組合せは膨大な数に上ると考えられ，それらを網羅的に含むような辞書を構築することも現実的ではない．
一方で，症状・診断名の構成語彙となる語の多くは，辞書中の用語の部分文字列として辞書に含まれている可能性が高い．
そこで，本研究では，既存の医療用語資源から症状・診断名の構成語彙となる語句を獲得し，得られた構成語彙を組み合わせた柔軟なマッチング方法「拡張マッチング」に基づく症状・診断名の抽出手法を提案する．
なお，マッチした結果は，機械学習の素性（辞書素性）として用いる．
語彙資源を活用した拡張マッチングによって，辞書素性タグが付与される語句が増加し，元の辞書に含まれない語彙にも対応した抽出が可能になると考えられる．
症状・診断名の構成語彙の獲得にあたり，構成語彙には，単独で症状・診断名として用いられる「主要語」と，主要語と隣接して現れたときにのみ症状・診断名の一部となる「修飾語」の2種類が存在すると仮定する．
[REF_sec:basic_idea]節で述べた例では，「水痘」，「感染」，「腫大」が主要語に相当し，「甲状腺」が修飾語となる．
「水痘感染」や「甲状腺腫大」のように，構成語彙に分解される前の元の用語自体も主要語とみなす．
主要語と修飾語の具体的な獲得方法は次節以降で後述することにし，本節では，主要語辞書と修飾語辞書の2種類の辞書を用いた症状・診断名のマッチング方法「拡張マッチング」を説明する．
以下，「消化管悪性腫瘍の[MATH]」という入力文が与えられた場合を例に，拡張マッチングの手順を述べる．
主要語辞書には「消化管障害」，「腫瘍」，「悪性腫瘍」が含まれ，修飾語辞書には「消化管」，「悪性」が含まれているものとする．
入力文を文字の列とみなし，主要語辞書中にマッチする文字列がないか検索する処理を先頭の文字から末尾の文字まで繰り返し行う．
例の入力文に対しては，次のようにマッチング範囲の探索が行われる．
入力文1文字目の「消」を読み込み，主要語辞書の検索を行う（図[REF_fig:twodic_matcing], a1）．
「消化管悪」まで検索した時点で主要語が存在しないことが判明するため(a2)，主要語検索を終了して2文字目以降について検索を続ける．
2文字目「化」および3文字目「管」の検索においてマッチする主要語はない．
4文字目の「悪」を読み込み，主要語辞書の検索を行う(b1)．
検索した結果，「悪性腫瘍」が主要語辞書とマッチする(b2)．
続いて，マッチした範囲「悪性腫瘍」の左右両側について，修飾語辞書中にマッチする文字列がないか検索する．
検索した結果，元の範囲の左側の「消化管」が修飾語辞書とマッチする(b3)．
マッチした範囲を「消化管悪性腫瘍」に拡張し，引き続き，拡張された範囲のさらに左側について，修飾語辞書を検索する．
しかし，これ以上マッチする語はないため，「消化管悪性腫瘍」をマッチした範囲として記憶し，入力文5文字目以降について検索を続ける．
5文字目「性」の検索においてマッチする主要語はない．
6文字目の「腫」を読み込み(c1)，同様の処理を行った結果，主要語辞書で「腫瘍」(c2)，修飾語辞書で「悪性」および「消化管」がマッチし(c3，c4)，「消化管悪性腫瘍」をマッチした範囲として記憶する．
入力文7文字目以降の文字についても同様に検索を続ける．
7文字目以降の検索においてマッチする主要語はなかったものとし，入力文に対する検索の処理を終了する．
上述の辞書探索処理の結果，例では「消化管悪性腫瘍」がマッチした範囲として（二重に）得られる．
複数のマッチング範囲が得られ，得られた範囲間に重なりがある場合は，範囲内の文字数が最も多いものを残し，残りを破棄する．
例では，得られた2つの範囲が同一であるため，残される範囲も元の範囲と同じものとなる．
以上が拡張マッチングの処理である．
最終的に得られたマッチング範囲には辞書素性タグを付与し，機械学習の素性として利用する．
本研究では，主要語辞書として，MEDIS病名マスター(Ver. 3.11)と，MedNLPテストコレクション[CITE]の訓練データを利用する．
MEDIS病名マスター（ICD10対応標準病名マスター）は，一般財団法人医療情報システム開発センターにより提供されている病名辞書である．
病態毎に選ばれた代表病名を表す「病名表記」に加え，病名表記の読み，ICD10コードなどから構成され，本研究で利用したVer. 3.11では，24,292語が収載されている．
同辞書に含まれる病名表記を抽出し，主要語辞書として用いる．
MedNLPテストコレクションは，NTCIR-10 MedNLPタスクで提供された模擬患者の病歴要約からなるコーパスである．
同コーパスの訓練データからアノテーションされた症状・診断名部分を抽出し，主要語辞書MedNE（延べ語数1,922，異なり語数1,068）として用いる．
ただし，主要語辞書をそのまま用いると，一部の語が用語抽出の学習に悪影響を与える場合がある．
たとえば，細菌性皮膚感染症の一種である「よう」（癰）は，「〜するようになった」などの表現にマッチしてしまう．
また，「喫煙歴」という表現に含まれる「喫煙」は，必ずしも患者の喫煙を表す言及ではないため症状・診断名に該当しない．
このように，症状・診断名と無関係の表現とマッチする用語や，高頻度で非症状・診断名としても使用される用語を辞書が含んでいる場合，学習を阻害する要因となる．
そこで，MedNLP訓練データを使用し，高い割合で症状・診断名とマッチする用語を取得する処理を行う．
以下，各主要語辞書に対する語彙制限の方法を述べる．
なお，後述の閾値[MATH]，[MATH]，[MATH]および[MATH]は，[REF_chp:experiments]章で述べる実験により決定する．
辞書に含まれる各用語について，MedNLP訓練データ中で固有表現範囲（症状・診断名としてアノテーションされた範囲）の内部および外部に出現した回数をそれぞれカウントし，次の2つの基準を満たす用語を主要語として許容する．
固有表現範囲の外部における出現回数が[MATH]未満である．
訓練データ中に1回以上出現している場合は，固有表現範囲の内部と外部の両方の出現に対し，外部に出現した割合が[MATH]未満である．
辞書に含まれる各用語について，MedNLP訓練データ中で固有表現範囲の内部および外部に出現した回数をそれぞれカウントし，次の2つの基準を満たす用語を主要語として許容する．
固有表現範囲の内部における出現回数が[MATH]以上である．
固有表現範囲の内部と外部の両方の出現に対し，内部に出現した割合が[MATH]以上である．
[REF_sec:basic_idea]節で述べたように，主要語に含まれる部分文字列の中には有用な修飾語が多く含まれるという考えに基づき，主要語から部分文字列を切り出すことで修飾語を獲得する．
修飾語の獲得には，主要語の取得と同様にMEDIS病名マスターとMedNEを用いる．
なお，MEDIS病名マスターの関連リソースとして提供されている「修飾語テーブル」は，本研究では使用しない．
修飾語は，主要語辞書でマッチした範囲を拡張する際にのみ用いるため，意味をなさない非語が含まれていても，実際にテキスト中で主要語と隣接して現れなければ学習・抽出に影響を与えない．
ただし，MEDIS病名マスターには動詞や助詞，記号などを含む用語（「１型糖尿病・関節合併症あり」，「アヘン類使用による急性精神・行動障害」など）が存在するため，切り出された部分文字列が助詞などの表現を含んでいると，症状・診断名でない範囲にまで拡張してしまう可能性がある．
そこで，部分文字列を切り出すことにより機械的に修飾語候補を抽出した後，意味をなさないと考えられる候補と，過大な拡張を行う可能性のある有害な候補を除去するという手順により修飾語の獲得を行う．
なお，有害な候補の除去には，主にひらがなから構成される語40語程度の「ひらがな表現」リストを作成し，使用した．
同リストは，助詞（「が」や「より」），接続詞（「または」や「かつ」），動詞・助動詞の組合せ（「ならない」）などひらがなのみから構成される表現の他，一部，「著しい」など漢字を構成要素に持つ表現も含む．
「ひらがな表現」の全リストは付録[REF_sec:mdfy_restrict]に記載する．
修飾語取得の対象とする用語集合[MATH]から修飾語集合[MATH]を生成する手順を以下に示す．
切り出す部分文字列の最小の長さは2で固定し，修飾語として許容する部分文字列の最小出現回数を[MATH]とした．
[MATH]の値は，主要語の語彙制限と同様に，[REF_chp:experiments]章で述べる実験により決定する．
修飾語候補の抽出
各用語[MATH]について，[MATH]の先頭および末尾から，長さ2から[MATH]の文字列長までの部分文字列を切り出す．
切り出した部分文字列は，修飾語候補集合[MATH]に追加する．
たとえば，[MATH]の場合，``医療''，``医療用''，``医療用語''，``用語''，``療用語''が切り出される．
各修飾語候補[MATH]について，[MATH]を部分文字列として含む[MATH]の用語全体の集合を求める．
これを，[MATH]の出現元集合[MATH]とする．
たとえば，[MATH]の場合，[MATH] [MATH]などが得られると考えられる．
修飾語候補の限定（有害な語の除去）
[MATH]のうち，数字および「％」記号のみからなる語を除去対象候補集合[MATH]に追加する．
[MATH]のうち，先頭または末尾が「-」（ハイフン）以外の記号か空白である語を[MATH]に追加する．
[MATH]のうち，先頭または末尾の文字が1字からなる「ひらがな表現」に一致し，一致した文字と隣接する文字がひらがな以外である語を[MATH]に追加する．
[MATH]のうち，先頭または末尾から始まる範囲が2字以上からなる「ひらがな表現」の組合せに一致した語を[MATH]に追加する．
修飾語候補の限定（有益でない語の除去）
[MATH]のうち，[MATH]内での部分文字列としての出現回数が[MATH]回未満([MATH])である[MATH]を[MATH]に追加する．
任意の[MATH] ([MATH])について，出現元集合が等しい場合，[MATH]と[MATH]のうちの長さが小さい方を[MATH]に追加する．
たとえば，[MATH]である場合，``群''が[MATH]に追加される．
修飾語候補の決定
[MATH]から[MATH]の元を除いた集合[MATH]が求める修飾語集合である．
