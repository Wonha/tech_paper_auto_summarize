本節では，固有表現クラスに含まれる文字列の頻度と異なり数とを用いて，固有表現抽出の難易度を示す指標について述べる．
このような指標は，ある固有表現クラス内において，異なる文字列が数多く現れるならば，そのクラスの固有表現を認識することは難しくなる，という仮定に基づいている．
頻度や異なり数を考慮する文字列の単位には，固有表現そのもの，単語，また単一の文字をとることができる．
まず，固有表現そのものを単位として分析を行なう．
表[REF_table:FE_first]に，各クラスがもつ固有表現の異なり数を示す．
予備試験と本試験の総合課題では，全表現の異なり数が各クラスの異なり数の合計よりも少ない．
これは，複数のクラスに分類される固有表現がそれぞれ3個ずつあったからである．
また，限定課題には割合表現が現われなかったので，数値が入っていない．
異なり数を指標として用いるには，コーパスサイズの影響を除く必要がある．
最初に定義する指標は，各クラスについて固有表現の異なり数を出現頻度で正規化したものである．
以下これをFE(Frequency of Entities)と呼ぶ．
FEの定義を式で示せば式[REF_eq:FE]となる．
[MATH]は各クラスに含まれる固有表現の異なり数，[MATH]は各クラス内の固有表現の総出現数である．
FEは，あるクラス内の固有表現を抽出することが難しいときに，指標の値が大きくなることを意図して定義されている．
FEの値を求める際には，文章中に現れる数字を全て文字``＃''で置き換えた．
これは，各数字を異なる表現とみなすよりも同一の表現とみなす方が固有表現の多様性を捉える際にはより適切であるという判断による．
数字を同一の文字とみなすことによってTIMEX-NUMEXグループに含まれる固有表現クラスのFEの値は小さくなるが，これはTIMEX-NUMEXグループの認識精度が非常に高いという結果に合致する．
FEの値を表[REF_table:FE_second]に示す．
前節では固有表現そのものを指標を計算する単位として用いたが，単語や文字を単位としても同様に指標を定義することができる．
固有表現よりも短かく頻度の大きい単語や文字を単位にすることで，よりコーパスサイズの影響を受けにくい指標が得られると期待される．
以下，単語単位の指標をFW，文字単位の指標をFCと呼ぶ．
FW，FCの定義はFEと同様に，それぞれ式[REF_eq:FW]，式[REF_eq:FC]によって表わせる．
FEと同様に，FW・FCにおいても数字は同一の文字とみなして値を求めた．
FWとFCの値の傾向は似通っているので，ここではFCの値のみを示す(表[REF_table:FC])．
FCではクラス間の差がFEよりも際だっており，特にTIMEX-NUMEXグループ内のクラスに対するFCの値はきわめて小さい．
指標の有効性を確かめるために，各指標がシステムの評価結果とどの程度相関しているかを調べる．
まず，各固有表現クラスに対するFE・FW・FCの値とF-measureとの散布図を予備試験(図[REF_figure:scatter_diagram_dryrun])，本試験の総合課題(図[REF_figure:scatter_diagram_general])，限定課題(図[REF_figure:scatter_diagram_arrest])それぞれについて示す．
どの図においても，縦軸に指標の値，横軸にF-measureの値をとっている．
各クラスに対応するF-measureの値には，以下のような，クラス名を示す英字3文字のラベルを付した：
組織名(ORG)，人名(PRS)，地名(LOC)，固有物名(ART)，
日付表現(DAT)，時間表現(TIM)，金額表現(MON)，割合表現(PRC)
予備試験と総合課題においては，TIMEX-NUMEXグループが右下にまとまり，固有物名を除いたENAMEXグループがややその左上に位置する．
その左上に位置しているのは，固有物名である．
限定課題においては，固有物名は他のENAMEXグループに属するクラスと同様の位置にある．
F-measureの値においても，指標の値においても，値の傾向としてはほぼ同様であるといえる．
各クラスごとにFE・FW・FCの値とF-measureとの相関係数を求めた結果を表[REF_table:FEWC_CC]に示す．
これらの指標は，固有表現の抽出が難しいときに値が大きくなることを意図して定義されたものである．
即ち，F-measureの値との負の相関が高くなることを意図して作成された指標である．
表[REF_table:FEWC_CC]から，FW・FCは予備試験のコーパスにおいてはFEよりも相関が弱いが，本試験のコーパスにおいては総合・限定課題どちらにおいてもFEより相関が強いことが分かる．
予備試験に対するシステムの評価結果は1つのシステムによるものであることを考慮すると，本試験の二つの課題に対して相関が強いほうが指標としてより信頼できる．
本試験のコーパスに対する結果から，固有表現よりも単語の方が，単語よりも文字の方が指標の値を求める単位としては安定しているといえる．
本節では，固有表現内の個々の表現について，その表現のクラス内における頻度とコーパス全体における頻度との関係に基いて固有表現抽出の難易度を示すことを考える．
これは，あるクラスに相対的に関連の強い文字列が多いほど，そのクラスの固有表現を抽出することはより易しくなるという仮定に基づいている．
先に定義した指標では，クラス内の頻度のみを用いており，個々の固有表現内の文字列については考慮していなかった．
本節で考える指標では，ある文字列の固有表現クラスとの関連の強さを，その文字列のクラス内での頻度とコーパス全体の頻度の双方を用いて定義する．
つまりある文字列の頻度が高く，かつそのほとんどが特定の固有表現クラス内に限られるならば，その文字列はそのクラスと関連が強くなり，そのような文字列が多いほどそのクラスにおける固有表現の抽出は易しくなるという仮定に基づく．
以下では，文字を単位として指標を定義する．
文字を単位として選んだのは，先に定義された指標の中では，文字を単位とした指標が最もシステムの評価結果との相関が強かったためである．
まず，各文字ごとの指標CI[MATH]を定義する．
文字[MATH]のクラス[MATH]に対するCI[MATH]の値は，式[REF_eq:character_index_each]によって与えられる．
[MATH]は文字[MATH]のクラス[MATH]における頻度，[MATH]はコーパス全体での頻度を現わす．
[MATH]はクラス[MATH]内の総文字数である．
つまり，右辺第1項[MATH]はクラス[MATH]での文字[MATH]の相対頻度を示し，第2項[MATH]は文字[MATH]がクラス[MATH]にどれだけ偏って現れるかを示しているので，CI[MATH]は文字[MATH]のクラス[MATH]における偏りを相対頻度で正規化したものとなる．
各固有表現クラスに現れる全文字のCI[MATH]の値を合計した値を，新たな指標CI(Character Index)として用いることにする．
この指標は，固有表現の抽出が易しいときに値が大きくなることを意図して定義されたものである．
従って，システムの評価結果との正の相関が強ければ，指標として優れていることになる．
CI[MATH]は，クラス[MATH]の表現に文字[MATH]が生じる条件付き確率[MATH]と，文字cがあったときにそれがクラス[MATH]の表現の一部である条件付き確率[MATH]との積を推定する式となっている．
CI[MATH]は，文字[MATH]の出現確率[MATH]，クラス[MATH]内の文字が出現する確率[MATH]，文字[MATH]とクラス[MATH]の同時確率[MATH]を用いて次のように変形できる．
これは，文字[MATH]とクラス[MATH]に対する相互情報量に基づく尺度(式[REF_eq:mutual_information])に類似する．
異なる点は，[MATH]を取っていないことと，同時確率[MATH]が二乗になっていることである．
この違いによって，文字[MATH]がクラス[MATH]にのみ出現する場合，相互情報量に基づく尺度では，その文字の頻度に関わらず一定値になるのに対し，CI[MATH]の値では，さらにその文字がクラス[MATH]の全表現のうちどのくらいの割合を占めるかを指標として含むことができる．
また，CI[MATH]の定義は，CI[MATH]の総和としてCIを求める際に必要な正規化となっており，クラス[MATH]内の全ての文字が[MATH]にのみ現れるならば，CIは最大値1をとる．
これに対し，相互情報量に基づく尺度では，そのクラス内での文字の分布により最大値は一定でない．
表[REF_table:index_CC_CI]に，CIとシステムの評価結果との相関係数の値を示す．
CIとシステムの評価との相関は先に定義した指標のそれと比べると低く，指標としては十分でないことを示している．
相関が低い理由の一つとしては，CIの値が，各固有表現クラスに含まれる全文字のCI[MATH]の値を合計した値であることが考えられる．
CI[MATH]の値が低い文字はそのクラスに含まれる固有表現を抽出するのに有用であるとはいえないので，そのような文字はCIを求める際に取り除く必要がある．
CI[MATH]の値に対する閾値を設け，閾値以上の値についてのみCIの値に加えることで，CIの値をより指標として優れたものにできると考えられる．
図[REF_figure:CI]は，CI[MATH]に対する閾値と相関係数との関係を示すグラフである．
CI[MATH]に対する閾値を示す軸には対数軸を取っている．
グラフから，3種類のテストコーパス全てについて相関係数の値は一旦上昇し，その後低下していることが分かる．
各々の相関係数の最大値と，それに対応する閾値は表[REF_table:index_CC_CI]に示してある．
これらの値は前節で提示した指標の相関係数と同程度になっている．
もっとも，相関係数の最大値を与える閾値は，システムの評価結果を用いて初めて明らかになるので，新しいタスクのテストコーパスにおいては，事前に閾値を何らかの方法で決定する必要がある．
新しいタスクにおいて閾値を求める方法の一つとしては，予め閾値を求めるために本当に評価したいコーパスと同じ種類のデータを用意し，同じ固有表現クラスの定義を用いて複数の参加システムについて実験をしておき，そこで得られた閾値を，本当に評価したいコーパスについて用いることが考えられる．
例えば，性質の似た2種類のコーパスを用いて予備試験と本試験を行い，それぞれについて複数システムの評価結果を得ることができれば，予備試験の結果から閾値を得て本試験に用いることができる．
今回の実験においては，予備試験に対して1システムの結果のみを用いているが，それでもその結果から得られた閾値を本試験のコーパスに対して用いるならば，表[REF_table:index_CC_CI]の最後の行に示すように，最大値に近い相関係数の値が得られるので，この方法によって妥当な閾値が得られたといえる．
CIの値の振舞いをより詳しく調べるために，固有表現クラスをENAMEXグループとTIMEX-NUMEXグループの二つに分け，各々についてCI[MATH]の値が大きい順に文字を並べてCI[MATH]の値の変化を示したのが図[REF_figure:CI]である．
TIMEX-NUMEXグループにおいてはCI[MATH]の値が他に比べて極立って大きい文字がいくつか存在するのに対し，ENAMEXグループにはそのような文字は存在せず，なだらかにCI[MATH]の値が変化していくことがグラフから見てとれる．
このことは，ENAMEXグループの固有表現には多くの文字がほぼ同程度に関連しているが，極立って強い関連を持つものはなく，固有表現を抽出する際にはほぼ全ての文字を考慮する必要があること，一方NUMEX-TIMEXグループの固有表現には，少数の文字が非常に強く関連していることを示唆している．
本節では，CI[MATH]の値に基づいて，固有表現を抽出する際に有用と思われる文字を具体的に挙げて述べる．
表[REF_table:characters_with_CIc_numex]にTIMEX-NUMEXグループにおいてCI[MATH]の値が大きい文字を示す．
対象課題は本試験の総合課題である．
「＃」は数字全体を示している．
前節で見たように，TIMEX-NUMEXグループには，CI[MATH]の値が非常に大きい文字がいくつか存在する．
これらの文字がそのクラスに属する表現と強く結びついていることは人間の直観から見ても妥当だといえる．
実際，金額表現クラスにおける「円」，割合表現クラスにおける「％」のCI[MATH]の値は非常に大きく，各クラスに対するCIの値の半分以上を占めている．
一方，コーパス中の数字の頻度は非常に大きいが，TIMEX-NUMEXグループ内の各クラスに同様に現れるため，日付表現以外ではCI[MATH]の値は小さい．
次に，ENAMEXグループにおける各文字のCI[MATH]の値の傾向を調べる．
表[REF_table:characters_with_CIc_enamex]に，ENAMEXグループにおいてCI[MATH]の値が大きい文字を示す．
対象課題は同様に本試験の総合課題である．
これを見ると，人名以外の3つのクラスにおいては，接尾辞として用いられる文字においてCI[MATH]の値が比較的大きいことが分かる．
これをより明確に示すために，ENAMEXグループにおいてCI[MATH]を文字bi-gramについて求めた結果を表[REF_table:characters_with_CIc_bigram_enamex]に示す．
[BOE]は固有表現の開始，[EOE]は終了を示す．
文字bi-gramに対する結果からは，組織名クラスにおける「党」や「銀」，固有物名における「法」，地名における「市」や「国」など，いくつかの接尾辞に対して高いCI[MATH]の値が得られた．
これらの接尾辞が，特定の固有表現クラスに属する表現と強く結びついていることは人間の直観から見て妥当だといえる．
今回の実験では，固有表現中の先頭にあるか末尾にあるかといった位置の情報は用いなかったが，このような位置情報を取り入れることで，指標の値から固有表現抽出に必要な知識の一部をより効率良く得ることができると考えられる．
[htbp]
固有表現内の文字列に関する分析だけでは，難易度を調べるのに十分ではない．
あるクラス内の固有表現が多様であったとしても，その周囲の表現が定まっているならば，そのクラスの固有表現抽出に関する難易度は小さくなると考えられる．
本節では，固有表現の周囲の表現に着目して新たな指標を定義し，その有効性を先に定義した指標と同様に検証する．
以下では指標を求める際の文字列の単位としては全て単語を用いている．
まず，FE・FW・FCと同様に，固有表現の周囲の単語について，その頻度と異なり数に基づいた指標FCW(Frequency of context words)を定義する．
FCWは固有表現クラスの周囲[MATH]語以内の単語を対象とする指標であり，式[REF_eq:FCW]のように定義される．
周囲の単語とみなす範囲[MATH]を，固有表現の直前または直後1単語から最大4単語まで変化させ，指標の値を求めた．
また，固有表現の直前に現われる単語に関する指標FCWpreと，固有表現の直後に現れる単語に関する指標FCWfolとをそれぞれ求めた．
指標とシステムの評価結果との相関を表[REF_table:index_CC_FCW]に示す．
負の相関が強いほどこの指標の値がシステムの結果とよく合致していることになるが，相関係数の値から，FCWは指標として適切であるとはいえない．
固有表現の周囲の単語を用いた新たな指標として，CIと同様にCWI(Context Word Index)を定義する．
CWIの定義は式[REF_eq:context_word_index]で与えられる．
[MATH]は固有表現の周囲の単語とみなされる語の範囲を示し，右辺第1項[MATH]は，範囲[MATH]を大きくしたときに頻度を補正するための項である．
[MATH]は，固有表現クラス[MATH]の周囲[MATH]語以内に現れる単語の集合を示す．
[MATH]は，単語[MATH]がクラス[MATH]の固有表現の周囲[MATH]語以内に現れる頻度，[MATH]はコーパス全体での頻度を現わす．
[MATH]はクラス[MATH]の固有表現周囲に現れる単語の総数である．
すなわち，右辺第2項[MATH]はクラス[MATH]に対する単語[MATH]の相対頻度を示し，第3項[MATH]は単語[MATH]がクラス[MATH]に属する表現の周囲[MATH]語以内にどれだけ偏って現れるかを示す．
表[REF_table:CWI]に，[MATH]のときの各クラスにおけるCWIの値を示す．
FCWと同様に，直前の単語に関する指標CWIpreと直後の単語に関する指標CWIfolとを別々に求めた．
各課題における指標の値のうち，クラス間で最も大きいものを太字で示した．
固有表現の周囲の単語とみなす範囲を，固有表現の直前または直後1単語から最大4単語まで変化させ，システムの評価結果との相関を調べた．
結果を表[REF_table:index_CC_CWI]に示す．
ここでは正の相関が強いほどシステムの結果とよく合致していることを表わす．
CWIの指標としての有効性はFCWよりは高いが，その他の指標と比べると低い．
CWIは固有表現の周囲の表現がもつ情報を十分に利用しているとはいえないが，しかし課題や固有表現クラスによっては，人間の直観に沿うような結果が得られている．
[MATH]のときの結果から，具体的な単語の例を表[REF_table:timeCWIpres]，表[REF_table:personCWIfols]，また表[REF_table:arrestCWIfols]に示す．
これらの表において単語に添えられている値は，単語ごとの指標CWI[MATH]と，あるクラスに属する固有表現の前または後に現われた頻度[MATH]である．
[tbp]
表[REF_table:CWI]から3種類の課題全てにおいて時間表現クラスは他のクラスよりCWIpreの値が大きいことが分かるが，これは表[REF_table:timeCWIpres]に示すように，時間表現の直前には日付表現がよく現われていることによる．
この逆が成り立たないことは，日付表現クラスのCWIfolの値が時間表現のCWIpreの値ほど高くないことから分かる．
日付表現クラスは時間表現クラスとともに現れることも多いが，単独で現れることも多いからである．
人名クラスについても同様に，どの課題でも他のクラスよりCWIfolの値が大きいことが表[REF_table:CWI]から分かる．
表[REF_table:personCWIfols]にCWIfol[MATH]の値が大きい単語を示す．
どの課題においても敬称や呼称が人名の直後によく現れており，これらの単語は人名を抽出する際に有用であることが分かる．
固有物名，金額表現，時間表現クラスはそれぞれ本試験の限定課題においてCWIfolの値が大きい．
表[REF_table:arrestCWIfols]に示すように，そのほとんどが特定の一単語がもつCWIfol[MATH]の値によるものである．
これは，限定課題におけるコーパスが逮捕に関する記事のみから成っており，単語の用いられ方が他の種類の記事に比べてより固定されていることが理由であると考えられる．
IREXワークショップに参加した全システムの性能について，その平均値との相関を調べることによって指標の結果の有効性を検討してきた．
本節では，各システムの性能と指標との相関について示す．
IREXで行なわれた本試験の総合課題・限定課題それぞれについて，定義した指標と参加した各システムの評価結果との相関係数を調べた結果を図[REF_figure:hist_graphs_g]，[REF_figure:hist_graphs_a]に示す．
指標の種類はFE, FW, FC, CI, CWIpre, CWIfolの全6種類である．
CIについては，図[REF_figure:CI]から得られたしきい値を用いた結果を示した．
固有表現内の文字列を用いた指標(FE, FW, FC, CI)との相関は，どちらの課題においても，ほとんどのシステムで高い．
固有表現の周囲の単語を用いた指標(CWIpre, CWIfol)との相関はそれに比べると低いことが分かる．
特に限定課題では，固有表現の周囲の単語を用いた指標との相関はシステムによって大きくばらつきがある．
表[REF_table:each_system_fmeasure]に，個々のシステムについて，そのF-measureの値と手法の特徴をまとめた．
括弧内に示した値は，各々のシステムのF-measureについて，それ以外の全システムのF-measureの平均との相関係数をとったものである．
また，表[REF_table:each_system_index_general]，表[REF_table:each_system_index_arrest]に，IREXで行なわれた本試験の総合課題・限定課題それぞれについて，定義した指標と参加した各システムの評価結果との相関係数を調べた結果を示す．
これは，図[REF_figure:hist_graphs_g]，図[REF_figure:hist_graphs_a]を記述するのに用いたものである．
固有表現の周囲の単語を用いた指標は，どのシステムにおいても相関係数の値が低く，また，バラツキが大きいので以下の考察ではふれない．
総合課題においては，各システムの評価と全体との相関は，システムOを除いて非常に高い．
限定課題においては，システムE,F,Oにおいて，全体との相関が低くなっている．
固有表現内の文字列を用いた指標(FE, FW, FC, CI)との相関は，両課題においてほぼシステム全体との相関に類似した結果になっている．
システムE, F, Oはそれぞれ異なる機械学習手法を用いており，また評価結果も互いに近い値ではないので，手法の特徴が指標との相関に影響しているとはいえないが，システムFとOについては，評価時に用いたプログラムやデータに不備があり，本来の性能が発揮されていなかったことがワークショップにて発表された．
このことが，F-measureの値や指標の値の双方において，他のシステムとの相関が低い原因になっていると考えられる．
システムEについては，総合課題においては相関が高いが，限定課題では相関が低くなっている．
システムの各クラスごとの評価を見ると，とくに固有物名・組織名での結果が平均に比べて高く，この差が相関が低くなった原因と考えられる(表[REF_table:system_E])．
システムEは，限定課題用にチューニングは行っていないが，手作業および自動生成によって得られたNグラムパタンを用いており，これらのパタンが，限定課題の固有物名としてよく現れる法律名などに対応していたと考えられる．
総じて，固有表現内の文字列に基づいた指標と各システムの性能との相関は，ほぼ全システムの平均との相関と同じ傾向を示しているが，固有表現の周囲の単語を用いた指標は改善の必要があるといえる．
