\documentstyle[epsf,jnlpbbl]{jnlp_j_b5}

\setcounter{page}{75}
\setcounter{巻数}{10}
\setcounter{号数}{5}
\setcounter{年}{2003} 
\setcounter{月}{10}
\受付{2003}{1}{15}
\再受付{2003}{3}{13}
\採録{2003}{4}{30}


\title{用例ベース翻訳のための対訳文の句アライメント}

\author{荒牧 英治\affiref{TOKYO} \and 黒橋 禎夫\affiref{TOKYO} \and 佐藤 理史\affiref{KUEE} \and 渡辺 日出雄\affiref{IBM}} 

\headauthor{荒牧，黒橋，佐藤，渡辺}
\headtitle{用例ベース翻訳のための対訳文の句アライメント}


\affilabel{TOKYO}{東京大学大学院情報理工学系研究科}
{Graduate School of Information Science and Technology, The University of Tokyo}
\affilabel{KUEE}{京都大学大学院情報学研究科}
{Graduate School of Informatics, Kyoto University}
\affilabel{IBM}{日本IBM株式会社東京基礎研究所}
{Tokyo Research Laboratory, IBM Research}

\jabstract{
用例ベース翻訳を実現するためには，大量の用例が必要である．
本研究は，対訳文を用例として利用できるようにするために，対訳文に対して句アライメントを行なう手法を提案する．
従来の句アライメントでは，語アライメントを得てから，その情報をもとに句アライメントに拡張する手法が方式が多かった．
本手法では基本句という文節に相当する単位を導入して，基本句間のアライメントを行なう．
実験を行なった結果，良好な結果を得た．
}

\jkeywords{句アライメント，用例ベース機械翻訳，翻訳知識獲得}

\etitle{Phrase Alignment \\
for Example-Based Machine Translation}

\eauthor{Eiji Aramaki\affiref{TOKYO} \and Sadao Kurohashi\affiref{TOKYO} \and Satoshi Sato\affiref{KUEE} \and Hideo Watanabe\affiref{IBM}}

\eabstract{
Example-based machine translation requires a large set of translation patterns.
In this paper, we propose a phrase alignment method that aims to acquire translation patterns from bilingual sentense pairs.
Most of previous methods employ word alingnment for phrase alingnment.
This method uses the basic-phrase as the unit of phrase alingnment, and estimates alignment between basic-phrases.
The experimental results show that this method performs well.
}

\ekeywords{Phrase Alignment, Example-based Machine Translation, Translation Knowledge Acquisition}

\begin{document}
\maketitle
\thispagestyle{empty}

\section{提案手法}

提案手法は，対訳文を入力とし，両言語に含まれている{\bf 基本句}(次節にて定義)間の対応関係を推定する．
提案手法の本質的な部分は対象とする言語ペアに依存しないが，実験は日英間で行なったため，以下の章では日英を対象として手法を説明する．
提案手法の大まかな流れは次のようになる．

\vspace{1ex}
\begin{enumerate}

\item {\bf 基本句を単位とした依存構造への変換} : 
日英両言語の文を構文解析し，語をまとめることにより，基本句を単位とした依存構造を得る．

\item {\bf 辞書の情報による対応関係の推定} : 
日英対訳辞書(以下，{\bf 辞書}とよぶ)を利用し基本句対応を推定する．

\item {\bf 未対応句の処理} : 
辞書の情報では対応のつかなかった基本句(以下，このような句を{\bf 未対応句}とよぶ)を含んだ基本句対応を推定する．

\end{enumerate}
\vspace{1ex}

\subsection{基本句}
日本語では，語(形態素)という単位の基準が曖昧であり，高精度に自動検出することができる文節が統語解析の単位として一般的に用いられてきた．
一方，英語においては，語の基準が明確であるため，文節に相当する単位は通常用いられない．
これら両言語の言語の構造を照合する際には，従来，語を単位とした構造照合が行われてきた\cite{Matsumoto1993,Kaji1992}．

提案手法では，文節に相当する単位を英語に導入し，両言語の構造を文節に相当する単位で照合する．
英語には，文節に相当する単位は存在しないため，本稿では，この単位を{\bf 基本句}とよぶ．
基本句を対応の単位とすることのメリットは次のようにまとめられる．

\vspace{1ex}
\begin{enumerate}
\item 複合名詞などにおける基本句の内部の結びつきは強い結び付きであるので，対応の整合性を調べる際の強い手がかりとできる．
\item 機能語は各言語固有の振る舞いがあり，それをバラバラに扱うと問題が複雑になってしまう．基本句を単位とすることにより内容語中心の取り扱いとなり，問題が単純化される．
\item ある対応が周辺と整合的であるかどうかを計算する場合に，まわりとの距離の尺度が必要であるが，単語を単位として考えるよりも，基本句を単位とする方が妥当な尺度となる．
\end{enumerate}
\vspace{1ex}


\subsection{基本句を単位とした依存構造への変換}

\begin{figure}
\begin{center}
 \leavevmode
 \epsfxsize=12cm
 \epsfysize=8.2cm
 \epsfbox{f_kihonnku2.eps}
\caption{基本句を単位とした依存構造}
\label{f_kihonnku2.eps}
\end{center}
\end{figure}

まず，対訳文中の両言語の文を統語解析し，その結果を基本句を単位とした依存構造に変換する．
これは日英それぞれ次のように行なう．

日本語の文については，KNP\cite{Kurohashi1994}を用いて統語解析を行なう．
その結果得られる「$(接頭辞＊)(内容語＋)(機能語＊)$」という構造を持つ文節を基本句とする(＊は0回以上の繰り返し，＋は1回以上の繰り返し)．
文節と異なる点は，「(〜に)ついて」や「(〜に)おいて」など，機能的表現となっている内容語を直前の文節にまとめることである．
ここでいう機能的表現となる文節は，人手で登録した文節パターン約30に当てはまる文節と，KNPの解析結果が＜複合辞＞となる文節とする．

英語の文については，Charniakの統語解析システム\cite{Charniak2000}を用いて解析を行なう．
これは句構造を出力するので，各句構造規則に主辞を定義することにより依存構造に変換する．
次に内容語を中心にして，その前後の機能語(前置詞・冠詞・不定詞など)をまとめる．
これには次の規則を用いた．

\vspace{1ex}
\begin{enumerate}

\item 複合名詞をまとめる(例：the \underline{oil crises})

\item 機能語を内容語とまとめる(例：\underline{at this} meeting)

\item 助動詞や助動詞的表現を主動詞とまとめる(例：\underline{had better} study)

\end{enumerate}
\vspace{1ex}

図\ref{f_kihonnku2.eps}に，両言語の文を基本句を単位とした依存構造に変換した例を示す．
日本語側の「役割に向け」の「向け」や，「踏み出すことになる」と」の「ことになる」が機能的表現であるために直前の文節にまとめられて基本句となっている．

英語側では，(1)〜(3)の規則により，図\ref{f_kihonnku2.eps}右のように語がまとめられる．
日本語側との大きな相違点は，基本句をまとめる際に表層の文字列上でギャップが発生する場合があることである．
例えば，``〜 toward a new NATO 〜'' は，``toward''と``a''をその係り先である``NATO''にまとめた結果，``toward a NATO'と``new''に分けて基本句となる．
このように基本句でもとの語順が保存されない場合は，本稿中では，``an ＿ step'', ``(important)''のように表記する．


\subsection{辞書の情報による対応関係の推定}
\subsubsection{辞書対応リンクの付与}

\begin{figure}
\begin{center}
 \leavevmode
 \epsfxsize=11cm
 \epsfysize=8.2cm
 \epsfbox{f_d-link.eps}
\end{center}
\caption{辞書対応リンク}
\label{f_d-link.eps}
\end{figure}

辞書(日本語の見出し語:約14万語)を用いて日英の内容語間に対応をつける．
辞書には単語間あるいは単語列間(例:「寝る」$\Leftrightarrow$``go to bed''， 「事務総長」$\Leftrightarrow$``secretary general''など)の対応関係が記述されており，対訳文中の両言語の語(列)と一致するものがあれば，対訳文中の両言語の語(列)同士をリンク付ける(以下，このリンクを{\bf 辞書対応リンク}とよぶ)．
両言語とも内容語を含まない対応関係(例:「で」$\Leftrightarrow$``at''など)や，片側の言語で内容語を含まない対応関係(例:「進行中の」$\Leftrightarrow$``on''など)については，曖昧性が高いために辞書対応リンクを付与しない．

ある語(列)の訳語が相手側言語に複数存在すれば，語(列)は複数の辞書対応リンクを持つ．
以降，このような辞書対応リンクを{\bf 曖昧な}辞書対応リンクよぶ．
一方，辞書対応リンクが1本だけ付与されている単語(列)において，その辞書対応リンクを{\bf 一意な}辞書対応リンクよぶ．
図\ref{f_d-link.eps}は先の図\ref{f_kihonnku2.eps}の対訳文に張られる辞書対応リンクの例である．


\subsubsection{辞書の情報による基本句対応の推定}

\begin{figure}
\begin{center}
 \leavevmode
 \epsfxsize=11cm
 \epsfysize=8.2cm
 \epsfbox{f_kouho4.eps}
\end{center}
\caption{辞書対応リンクと基本句対応の候補}
\label{f_kouho4.eps}
\end{figure}



次に辞書対応リンクを用いて，基本句の対応({\bf 基本句対応})を推定する．
これは次のような手続きで行なう．
まず，基本句が辞書対応リンクで接続されており，かつ，日英それぞれで依存関係で接続されていることを条件に，対訳文中からあらゆる基本句対応の候補(以降，{\bf 候補}とよぶ)を生成する．
例えば，図\ref{f_d-link.eps}の例では，7つの候補を生成する(図\ref{f_kouho4.eps}の候補1〜7)．

ここで，候補7に含まれている語(列)には，曖昧な辞書対応リンクを持ったものがない．
このような候補(以降，{\bf 一意な候補}とよぶ)を採用して基本句対応とする．
候補1〜6には，曖昧な辞書対応リンクをもった語(列)が存在する．
このような候補(以降，{\bf 曖昧な候補}とよぶ)については次の手順で採用する候補を判定する．

\vspace{1ex}
\vspace{1ex}
\begin{description}
\item step1: 曖昧な候補のスコア計算
\item step2: 最高スコアを持つ候補を採用
\item step3: 採用した候補と重複する候補は削除．候補が残っているならstep1へ，残っていないならstep4へ．
\item step4: 基本句対応の棄却判定
\end{description}
\vspace{1ex}
\vspace{1ex}

step1では曖昧な候補にスコアを付与する．
スコアは次の2つの整合性を用いて以下のように定義する．


\vspace{1ex}
\begin{description}
\item {\bf 内的整合性} :  対応内部に含まれる辞書対応リンクの整合性
\item {\bf 外的整合性} :  近傍のすでに採用された基本句対応の整合性
\end{description}
\vspace{1ex}


\[
	(基本句対応候補のスコア) = (内的整合性) \times C ＋ (外的整合性) \times (1 - C)
\]

C は定数であり，どちらの情報をより重視するかのパラメータである．



\subsubsection*{\underline{内的整合性}}


基本句対応の候補内に辞書対応リンクを多く持っている場合，その候補は信頼性が高い．
そこで，候補内の辞書対応リンクの情報を内的整合性として，以下のように定義する．

\[
(内的整合性) = \frac{ D_j + D_e }{ W_j + W_e} \times \log ( D_j + D_e )
\]

ただし，$W_j$ は候補内の日本語の内容語の数，$W_e$ は英語の内容語の数である．
$D_j$ は辞書対応リンクを付与されている日本語の内容語の数，$D_e$ は辞書対応リンクを付与されている英語の内容語の数である．


$\frac{ D_j + D_e }{ W_j + W_e}$は，候補内の辞書対応リンクの充足の度合いを示しており，候補内のすべての内容語が辞書対応リンクを付与されている場合に最大値である1をとる．
ここで，すべての内容語が辞書対応リンクで接続されていても，内容語数が1:1の候補と，2:2の候補では，後者の候補の方が候補内の辞書対応リンクがお互いに支持しあっており，信頼性が高いと考えられる．
そこで後者を優先するために，log $( D_j + D_e )$により重み付けをしている．

例えば，図\ref{f_kouho4.eps}の候補3は内容語数が9つ(日本語側4つ，英語側5つ)であり，そのうちの8つが辞書対応リンクをもつ．
よって，内的整合性は 1.84 (=$\frac{4+4}{4+5} × \log(4+4)$)となり，候補1〜6の中でもっとも高い値となる．



\subsubsection*{\underline{外的整合性}}

\begin{figure}
\begin{center}
 \leavevmode
 \epsfxsize=8cm
 \epsfysize=5.6cm
 \epsfbox{f_gaiteki2.eps}
\end{center}
\caption{外的整合性}
\label{f外的整合性}
\end{figure}



候補の近傍に基本句対応が多く存在すればするほど，その候補は他の基本句対応に支持されており確かだと考えられる．
本稿ではこの支持を外的整合性とよぶ．
外的整合性は，候補の近傍の基本句のうち，基本句対応に含まれるものの割合を用いて以下のように定義する．

\[
	(外的整合性) = \frac{\sum_i  (C_iによる候補への支持)}{ \#(N_j) ＋ \#(N_e) }						\\
\]

{\small\[
(C_iによる候補への支持)=	\left\{\begin{array}{@{\hspace{0.6mm}}ll}
\#(C_{ij} \cap N_j) ＋ \#(C_{ie} \cap N_e)	&	\	\mbox{if}	\	\#(C_{ij} \cap N_j)＞0  かつ  \#(C_{ie} \cap N_e)＞0	\\
0					&	\	\mbox{otherwise}	\
\end{array}\right.
\]}



ただし，$N_j$ は候補の日本語側の近傍に存在する基本句の集合，$N_e$ は候補の英語側の近傍に存在する基本句の集合，$C_{ij}$は基本句対応$C_i$の日本語側の基本句の集合，$C_{ie}$は基本句対応$C_i$の英語側の基本句の集合である．\#は集合の要素数を示す．
{\bf 近傍}とは，依存構造上で基本句間の距離が2以内に含まれる基本句の集合と定義する\footnote{近傍を依存構造上で基本句間の距離1〜3と変化させて実験を行ったが，距離2が高い精度を示した．よって，ここでは依存構造上で基本句間の距離2を近傍とした．どの範囲を近傍と扱うのがよいかは対訳コーパスに依存し，本稿では詳細に取り扱わなかった．}．





例えば，図\ref{f外的整合性}で「NATOは」$\Leftrightarrow$``toward a ＿ NATO''という候補に注目してみと，日本語側の「NATOは」近傍には4つの基本句があり，英語側の``toward a ＿ NATO''近傍にも4つの基本句がある．
この近傍の基本句対応は「一歩を」$\Leftrightarrow$``an ＿ step''だけなので，外的整合性は，0.25 (=$\frac{2}{4+4}$) となる．



\vspace{1ex}
\vspace{1ex}
\vspace{1ex}
\vspace{1ex}


step2では，曖昧な候補のうち最も高いスコアを持つものを採用し，候補を基本句対応とする．
この際，基本句対応を次の4つに分類しておく．
この分類は後の処理で利用する．

\vspace{1ex}
\begin{enumerate}
	\item {\bf 充足対応}: 内的整合性が1である基本句対応．この基本句対応は対応内のすべての内容語が辞書対応リンクを付与されている．
	\item {\bf 日本語過剰対応}: 基本句対応内の英語側の内容語はすべて辞書対応リンクが付与されており，日本語側の内容語の一部が辞書対応リンクを付与されていない基本句対応．
	\item {\bf 英語過剰対応}: 基本句対応内の日本語側の内容語はすべて辞書対応リンクが付与されており，英語側の内容語の一部が辞書対応リンクを付与されていない基本句対応．
	\item {\bf 不安定対応}: 基本句対応内の日英いずれの言語側にも辞書対応リンクを付与されていない内容語が含まれている基本句対応．
\end{enumerate}
\vspace{1ex}



step3では，基本句対応が持つ基本句と候補が持つ基本句が重複していれば，その候補を削除する．
例えば図\ref{f_d-link.eps}の下例では候補3を採用すると，候補1〜2,4〜6 は削除する．
まだ候補が残っているならば，次の候補を採用するために step1に戻る．
候補が存在しないならば，step4に移る．


step4では，すべての基本句対応について外的整合性を計算し，外的整合性が0であれば，その基本句対応を棄却する．
この処理を行なう理由は次のようになる．

先に一意な候補は外的整合性がなくても無条件に採用した．
また，曖昧な候補についても，内的整合性が高ければ外的整合性がなくても採用されうる．
しかし，外的整合性が小さい基本句対応は誤っている可能性が高く，ここで外的整合性の有無を手がかりとして基本句対応の棄却を行なう．






\subsection{未対応句の処理}

\begin{figure}
\begin{center}
 \leavevmode
 \epsfxsize=14cm
 \epsfysize=8.2cm
 \epsfbox{f_kisoku.eps}
\end{center}
\caption{未対応句の推定規則}
\label{f_kisoku.eps}
\end{figure}



先の処理で推定された基本句対応だけでは，対応付けられていない基本句が残る場合がある．
このような未対応句を対応付ける場合，次の2通りの可能性がある．

\vspace{1ex}
\begin{enumerate}
	\item 未対応句同士を基本句対応とする(以降，{\bf 新規対応}とよぶ)
	\item 未対応句をすでに推定された基本句対応に含めて新たな基本句対応とする(以降，{\bf 拡張対応}とよぶ)
\end{enumerate}
\vspace{1ex}

そこで，コーパスを調査して図\ref{f_kisoku.eps}のような新規対応と拡張対応を推定する規則を作成した．
未対応句の対応付けは規則に適合した場合に行なう．

新規対応の規則は，日本語側のn個の未対応句(以降，{\bf 未対応句群}とよぶ)と英語側のm個の未対応句群が，それぞれの親方向，子方向が対応付けられている，あるいは端点となっている場合に，それらを基本句対応とする．
ただし，未対応句群に含まれる未対応句は依存構造上で連続していることを条件とする．




\vspace{1ex}
\begin{description}
\item {\bf 新規-a}: 両言語の未対応句群の親同士が対応付けられていおり，子同士が対応付けられている場合．ただし，子が複数ある場合は，いずれかの子同士が対応付けられていればよいものとする．
\item {\bf 新規-b}: 両言語の未対応句群がともに依存構造上の葉である場合，両言語の未対応句群の親同士が対応付けられており，かつ，兄弟がすべて基本句対応に含まれている場合．ただし，兄弟同士が対応付けられている必要はない．
\item {\bf 新規-c}: 両言語の未対応句群がともに依存構造上の根であり，子同士が対応付けられている場合．ただし，子が複数ある場合はいずれかの子同士が対応付けられていればよいものとする．
\end{description}
\vspace{1ex}


\vspace{1ex}

拡張対応も新規対応と同様に，未対応句群の親方向，子方向が対応付けられている，あるいは端点となっている場合に未対応句群の対応付けを行なうが，未対応句群が片方の言語側だけに存在する点が異なる．
ここで，基本句対応を不適切に拡張対応としてしまわないように，拡張対応は次の2つの条件のいずれかを満たすものとする．
条件のいずれかを満たした上で以下の規則に適合すれば拡張対応を推定する．



\vspace{1ex}
\begin{description}
\item 条件1: 英語過剰対応の日本語側に未対応句群が拡張される場合．または，日本語過剰対応の英語側に未対応句群が拡張される場合
\item 条件2: 不安定対応に未対応句群を拡張する場合
\end{description}
\vspace{1ex}

\vspace{1ex}

\vspace{1ex}
\begin{description}
\item {\bf 拡張-a}: 2つの基本句対応が，片方の言語側で依存構造で接続されており，他方の言語側では未対応句群を挟んで接続されている場合に，未対応句群をいずれかの基本句対応に加える．どちらの基本句対応を拡張対応とするかの判定は，条件1の基本句対応を条件2の基本句対応よりも優先する．
また，条件1同士や，条件2同士の判定は，内的整合性の低い基本句対応を優先する．
\item {\bf 拡張-b}: 未対応句群が依存構造上の葉である場合，親と兄弟すべてが基本句対応に含まれており，親の対応先が葉であれば，未対応句群を親の基本句対応に加える．
\item {\bf 拡張-c}: 未対応句群が依存構造上の根である場合，子が基本句対応に含まれており，かつ，子の対応先が根であれば，未対応句群を子の基本句対応に加える．
\end{description}
\vspace{1ex}


規則に適合する未対応句群が存在しなくなると，未対応句の処理は終了する．



\end{document}
