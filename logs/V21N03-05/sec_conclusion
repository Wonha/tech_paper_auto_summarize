本章では，前章までに得たモデルをさらに改良するための問題分析と改良案の提示を行う．
まず，[REF_sec:age-acc]節では，対象年齢と形態素解析精度の関係に着目し，精度低下のより詳細な原因調査を行う．
[REF_sec:add-proc]節では，絵本のラベルありデータを追加しても精度が向上しにくかった固有名詞に焦点をあて，固有名詞の部分アノテーションによる精度向上の効果を検証する．
さらに，[REF_sec:other]節では，提案手法の絵本以外のコーパスへの適用可能性についても考察する．
[REF_sec:ehon-db]節で述べたように，\kodomoは対象年齢がはっきり設定されている．
そこで本節では，\kodomoを用いて，対象年齢と形態素解析精度の関係を分析する．
\kytea (\bestHINOKI)と，\mecabを使って元データを解析した場合の対象年齢と精度の関係を図[REF_fig:age-acc]に示す．
ただし，図[REF_fig:age-acc]では，\kod{012}を2歳児にプロットしている．
図[REF_fig:age-acc]から，\kytea (\bestHINOKI)でも\mecabでも，対象年齢が低いほど形態素解析精度も低いことがわかる．
どちらの解析器も，基本的に一般向けのコーパスを学習データとしてモデルが作成されており，対象年齢が上がるとより一般向けの文に近づいていることが図[REF_fig:age-acc]からも読み取れる．
表[REF_tb:mojisyu]（[REF_sec:mojisyu]節）で示したように，絵本と京大コーパスなどに出現する文字種を比較すると，絵本はひらがなと空白が多く，漢字が少ない点が顕著に異なっていた．
また，[REF_sec:ana-sphan]節では，特にひらがなが形態素解析精度の低下に非常に関わることを示した．
そこで，対象年齢によってそれらの文字種の出現傾向が変わるかどうかを，\kodomoのデータを使って調査した（表[REF_tb:mojisyu-kodomo]）．
表[REF_tb:mojisyu-kodomo]によると，文字種の出現傾向に絵本全体の傾向と顕著な違いは見られず，対象年齢によって明らかな変化は見られなかった．
つまり，ひらがなの多さだけが精度低下の原因ではないことがわかる．
ただし，表[REF_tb:mojisyu-kodomo]に参考として示した，行平均の文字数と形態素数は，対象年齢が上がるにつれ増加している．
京大コーパスと\lxdの文平均の文字数や形態素数（表[REF_tb:mojisyu]）と比較すると，文平均か，行平均かの差はあるが，対象年齢が上がるにつれ\lxdの数値に近づいており，辞書の例文や定義文に近い長さになってきていることがわかる．
つまり，語の羅列ではなく，文になってきていると考えられる．
そこで，文字種だけではわからない差分を調査するため，空白を除く全形態素に占める品詞毎の割合を調査した．
その結果，対象年齢によってもっとも変化が大きかった品詞は，\pos{助詞}\pos{記号} \pos{副詞}\pos{感動詞}だった．
図[REF_fig:age-hinshi]に，これらの品詞の占める割合の対象年齢毎の変化と，\lxdでの割合を示す．
ここで，\pos{助詞}の割合は対象年齢と共に単調増加しており，単語の羅列から助詞などを含む文となっていることがわかる．
\pos{記号}は，句読点や括弧などを含むため，句読点を使った文や会話文の量や長さに関係すると考えられる．
\pos{記号}は，\kod{012}と\kod{3}の間で大きく増加しているが，単調増加ではなく，\kod{5}や\lxdでの割合はむしろ\kod{3}や\kod{4}より低い．
これは文が長くなるため記号の占める割合が低くなるのだと考えられる．
例えば，会話文の場合，記号である\jpn[「]{}と\jpn[」]{}の間に発話内容が記述されるが，発話内容が長くなれば，記号の占める割合は低くなる．
一方，\pos{副詞}の割合は対象年齢に応じて単調減少している．
\pos{副詞}には擬音語や擬態語が多く含まれ，対象年齢が低いほど，そうした語の含まれる割合が高いことがわかる．
また，\pos{感動詞}の割合は\kod{012}と\kod{3}の間で大きく減少している．
\pos{感動詞}には挨拶などが含まれ，より小さな子供向けの絵本では，挨拶などが多く出現するためだと思われる．
なお，絵本毎に精度を調査すると，品詞一致精度で最も精度の高かった絵本と，最も精度の低かった絵本は，両方とも\kod{012}に含まれた．
これらは，一行一形態素程度の非常に短い文からなっており，\jpn[ぴょん]{}\jpn[ぼちゃん]{}\jpn[ぶらぶら]{}などの擬音語や擬態語の繰り返しがほとんどだった．
文脈はほぼないため，学習データや辞書に該当する語が存在するかどうかに依存して精度が大きく変化したとみられる．
そのため，より対象年齢の低い子供向け絵本の解析精度の向上は，擬音語や擬態語の辞書や学習データの拡充にかかっているといえるだろう．
今後は，擬音語や擬態語の収集による精度向上にも取り組みたい．
[REF_sec:errors]節で述べたように，固有名詞は他の絵本を追加しても解析精度が向上しにくく，学習データなしでは解析が難しい語が多い．
その上，固有名詞の誤りは数値以上に精度が悪い印象を与えかねない．
しかし一方で，活用語や非自立語などに比べ，固有名詞のアノテーションや辞書への追加は非常に容易である．
ここで，\randomに出現した固有名詞でもっとも誤り回数が多かった（各4回）\jpn[ぐり]{}と\jpn[ぐら]{}に着目する．
これらを辞書登録しただけでは解析精度は変わらなかったが，\kyteaでは，部分アノテーションしたデータを学習データに加えることができる（[REF_sec:morph-kytea]章）．
そこで，\jpn[ぐり]{}と\jpn[ぐら]{}に対し部分アノテーションを行い，その効果を検証した．
部分アノテーションは以下の流れで行った．
まず，[1]対象語を含む文を字面一致で抽出し，次に，[2]人手で該当箇所に対象語以外の語が含まれないか確認し，最後に，[3]自動的に部分アノテーションを実行した．
ここで，\jpn[ぐり]{}と\jpn[ぐら]{}の場合，[2]の確認作業で，\jpn[どん\ul{ぐり}]{}，\jpn[うす\ul{ぐら}い]{}，\jpn[\ul{ぐら}い]{}が混じっていることがわかった．
[3]では，最長一致によってこれらの語のアノテーションも自動的に行った．
例えば，文\refs{gurigura}の場合，下線部をそれぞれ，\jpn[ぐり/名詞-固有名詞-人名-一般/グリ/ぐり]{}，\jpn[ぐらい/助詞-副助詞/グライ/ぐらい]{}として部分アノテーションした．
\ex \ul{ぐり}がけいとをまくと、えんどうまめ\ul{ぐらい}になりました。
（なかがわりえことやまわきゆりこ「ぐりとぐらのえんそく」p. 15（1979,福音館書店））
これにより部分アノテーションされたのは，\jpn[ぐら]{} 135箇所，\jpn[ぐり]{} 131箇所，\jpn[どんぐり]{} 1箇所，\jpn[うすぐらい]{} 2箇所，\jpn[ぐらい]{} 6箇所だった．
これらの部分アノテーションデータを学習データに追加したところ，原形一致の精度が[MATH]%改良された．
品詞一致までの精度は，小数点第一位までの比較では同じだったが，\jpn[ぐり]{}と\jpn[ぐら]{}に関する誤りはなくなった．
固有名詞は学習しにくく，かつ，同じ絵本では何度も出現するため，固有名詞のみを先にアノテートすることは有効だと考えられる．
固有名詞を含めた固有表現や未知語の抽出方法に関する研究は多く[CITE]，特に格フレーム情報を利用する方法[CITE]は，絵本でも有効だと考えられる．
今後は，絵本やシリーズ毎の固有名詞の抽出や，該当固有名詞を含む他の語の確認・抽出を自動・半自動化することにより，精度向上を目指したい．
また，[CITE]は，SVM平面からの距離を用いて確信度の低いデータを選び，部分アノテーションして学習データに追加する能動学習を提案している．
固有名詞のように，一気にアノテートできる部分を学習に追加した後は，[CITE]と同様に能動学習を行うことが考えられる．
本節では，提案手法の絵本以外への適用可能性について考察する．
提案手法は，既存の言語資源と解析対象の言語資源の特徴が大きく異なる場合に有用である．
例えば，小学生は学年毎に習う配当漢字が決められている．
そのため教科書では，習っていない漢字をひらがなで記載するため，漢字とひらがなが一般向け文章とは全く異なる交じり方をする場合があり，形態素解析を難しくしている．
例えば，\jpn[音楽]{}の場合，\jpn[音]{}は1年生，\jpn[楽]{}は2年生の配当漢字であるため，\jpn[音がく]{}と記載される場合がある．
そこで，教科書等の学童用の文章の解析用には，学年配当漢字に基づいて利用できる漢字を制限し，それ以外はひらがなに変換して学習データを作成することが考えられる．
あるいは，Webなどに出現するくだけた文章の解析用として，文末表現の変換，利用語彙の制限などにより，学習データを変換することも考えられる．
このように，学習データを対象分野に合わせて自動的に変換するルールを決定できる場合には，本提案手法が適用できると考えられる．
これまで，主に新聞などのテキストを対象とした解析では，形態素解析器を始めとして高い解析精度が達成されている．
しかし分野の異なるテキストに対しては，既存の解析モデルで，必ずしも高い解析精度を得られるわけではない．
そこで本稿では，既存の言語資源を対象分野の特徴にあわせて自動的に変換する手法を提案した．
本稿では，絵本を解析対象とし，既存の言語資源を絵本の特徴にあわせて自動的に変換し，学習に用いることで精度向上できることを示した．
まず，[REF_sec:target]章では，解析対象である絵本データベースの紹介を行った．
また，新聞などのテキストと絵本のテキストの文字種毎の割合を比較し，絵本では，漢字が少なく，空白とひらがなが多いことを示した．
[REF_sec:morph-kytea]章では，実験で利用する形態素解析器\kyteaの学習機能について紹介した．
また，[REF_sec:bunseki]章では，絵本の形態素解析における問題分析のため，絵本の評価用データに対し，ひらがなを漢字に変換したり，空白を削除するなどの処理を行った場合の解析精度の変化を調査し，ひらがなが多いことが解析精度低下の主な原因であることを示した．
[REF_sec:morph]章では，[REF_sec:target]章と[REF_sec:bunseki]章の分析結果に基づき，既存の言語資源を絵本の特徴にあわせて変換する手法を提案した．
[REF_sec:exp-adult]章では，提案手法によって得た言語資源だけを学習に用いた教師なし分野適応の実験を行い，既存の一般的な形態素解析モデルより高い精度（品詞一致精度で88.5%）が得られることを示した．
また[REF_sec:exp-add-ehon]章では，絵本自体のラベルありデータを学習に用いた教師あり分野適応の実験を行い，学習曲線を調べた．
ここで，提案手法によって得た既存言語資源によるラベルありデータは，絵本自体のラベルありデータ約11,000行，90,000形態素と同程度の効果があることを示した．
さらに，絵本自体にアノテーションを行う場合，できるかぎり全ての絵本から，アノテーション対象を選択することが効率的であることを示した．
また，新しい絵本に対する解析精度は，形態素区切り98.3%，品詞完全一致で91.1%，品詞大分類で94.7%，漢字の原形一致で89.0%が見込めることを示した．
[REF_sec:kousatsu]章の考察では，絵本の対象年齢毎の形態素解析精度の変化を調査し，対象年齢が低いほど解析精度も低く，その原因としては，文字種より，助詞などを含む文としての形態を取るかどうかに関連することを示した（[REF_sec:age-acc]節）．
また，他の絵本を学習データに追加しても，固有名詞の推定精度の向上は難しいが，固有名詞のアノテーションは，活用語などに比べて容易であることから，固有名詞に対して半自動的に部分アノテーションを行うことで，固有名詞の解析精度が向上できることを示した（[REF_sec:add-proc]節）．
今後は，標準表記を決定し，学習データの標準表記への変換と，漢字による原形推定精度の向上に取り組みたい．
また，絵本やシリーズ単位での，固有名詞（人や動物の名前）の自動的発見，および，固有名詞の（半）自動的な部分アノテーションに取り組みたい．
また，本稿で紹介した絵本用形態素解析モデルを利用し，子供向けの文を対象とした難易度測定や絵本の対象年齢の推定[CITE]，子供の発達や興味に応じた絵本リコメンデーションを行う予定である．
本章では，前章までに得たモデルをさらに改良するための問題分析と改良案の提示を行う．
まず，[REF_sec:age-acc]節では，対象年齢と形態素解析精度の関係に着目し，精度低下のより詳細な原因調査を行う．
[REF_sec:add-proc]節では，絵本のラベルありデータを追加しても精度が向上しにくかった固有名詞に焦点をあて，固有名詞の部分アノテーションによる精度向上の効果を検証する．
さらに，[REF_sec:other]節では，提案手法の絵本以外のコーパスへの適用可能性についても考察する．
[REF_sec:ehon-db]節で述べたように，\kodomoは対象年齢がはっきり設定されている．
そこで本節では，\kodomoを用いて，対象年齢と形態素解析精度の関係を分析する．
\kytea (\bestHINOKI)と，\mecabを使って元データを解析した場合の対象年齢と精度の関係を図[REF_fig:age-acc]に示す．
ただし，図[REF_fig:age-acc]では，\kod{012}を2歳児にプロットしている．
図[REF_fig:age-acc]から，\kytea (\bestHINOKI)でも\mecabでも，対象年齢が低いほど形態素解析精度も低いことがわかる．
どちらの解析器も，基本的に一般向けのコーパスを学習データとしてモデルが作成されており，対象年齢が上がるとより一般向けの文に近づいていることが図[REF_fig:age-acc]からも読み取れる．
表[REF_tb:mojisyu]（[REF_sec:mojisyu]節）で示したように，絵本と京大コーパスなどに出現する文字種を比較すると，絵本はひらがなと空白が多く，漢字が少ない点が顕著に異なっていた．
また，[REF_sec:ana-sphan]節では，特にひらがなが形態素解析精度の低下に非常に関わることを示した．
そこで，対象年齢によってそれらの文字種の出現傾向が変わるかどうかを，\kodomoのデータを使って調査した（表[REF_tb:mojisyu-kodomo]）．
表[REF_tb:mojisyu-kodomo]によると，文字種の出現傾向に絵本全体の傾向と顕著な違いは見られず，対象年齢によって明らかな変化は見られなかった．
つまり，ひらがなの多さだけが精度低下の原因ではないことがわかる．
ただし，表[REF_tb:mojisyu-kodomo]に参考として示した，行平均の文字数と形態素数は，対象年齢が上がるにつれ増加している．
京大コーパスと\lxdの文平均の文字数や形態素数（表[REF_tb:mojisyu]）と比較すると，文平均か，行平均かの差はあるが，対象年齢が上がるにつれ\lxdの数値に近づいており，辞書の例文や定義文に近い長さになってきていることがわかる．
つまり，語の羅列ではなく，文になってきていると考えられる．
そこで，文字種だけではわからない差分を調査するため，空白を除く全形態素に占める品詞毎の割合を調査した．
その結果，対象年齢によってもっとも変化が大きかった品詞は，\pos{助詞}\pos{記号} \pos{副詞}\pos{感動詞}だった．
図[REF_fig:age-hinshi]に，これらの品詞の占める割合の対象年齢毎の変化と，\lxdでの割合を示す．
ここで，\pos{助詞}の割合は対象年齢と共に単調増加しており，単語の羅列から助詞などを含む文となっていることがわかる．
\pos{記号}は，句読点や括弧などを含むため，句読点を使った文や会話文の量や長さに関係すると考えられる．
\pos{記号}は，\kod{012}と\kod{3}の間で大きく増加しているが，単調増加ではなく，\kod{5}や\lxdでの割合はむしろ\kod{3}や\kod{4}より低い．
これは文が長くなるため記号の占める割合が低くなるのだと考えられる．
例えば，会話文の場合，記号である\jpn[「]{}と\jpn[」]{}の間に発話内容が記述されるが，発話内容が長くなれば，記号の占める割合は低くなる．
一方，\pos{副詞}の割合は対象年齢に応じて単調減少している．
\pos{副詞}には擬音語や擬態語が多く含まれ，対象年齢が低いほど，そうした語の含まれる割合が高いことがわかる．
また，\pos{感動詞}の割合は\kod{012}と\kod{3}の間で大きく減少している．
\pos{感動詞}には挨拶などが含まれ，より小さな子供向けの絵本では，挨拶などが多く出現するためだと思われる．
なお，絵本毎に精度を調査すると，品詞一致精度で最も精度の高かった絵本と，最も精度の低かった絵本は，両方とも\kod{012}に含まれた．
これらは，一行一形態素程度の非常に短い文からなっており，\jpn[ぴょん]{}\jpn[ぼちゃん]{}\jpn[ぶらぶら]{}などの擬音語や擬態語の繰り返しがほとんどだった．
文脈はほぼないため，学習データや辞書に該当する語が存在するかどうかに依存して精度が大きく変化したとみられる．
そのため，より対象年齢の低い子供向け絵本の解析精度の向上は，擬音語や擬態語の辞書や学習データの拡充にかかっているといえるだろう．
今後は，擬音語や擬態語の収集による精度向上にも取り組みたい．
[REF_sec:errors]節で述べたように，固有名詞は他の絵本を追加しても解析精度が向上しにくく，学習データなしでは解析が難しい語が多い．
その上，固有名詞の誤りは数値以上に精度が悪い印象を与えかねない．
しかし一方で，活用語や非自立語などに比べ，固有名詞のアノテーションや辞書への追加は非常に容易である．
ここで，\randomに出現した固有名詞でもっとも誤り回数が多かった（各4回）\jpn[ぐり]{}と\jpn[ぐら]{}に着目する．
これらを辞書登録しただけでは解析精度は変わらなかったが，\kyteaでは，部分アノテーションしたデータを学習データに加えることができる（[REF_sec:morph-kytea]章）．
そこで，\jpn[ぐり]{}と\jpn[ぐら]{}に対し部分アノテーションを行い，その効果を検証した．
部分アノテーションは以下の流れで行った．
まず，[1]対象語を含む文を字面一致で抽出し，次に，[2]人手で該当箇所に対象語以外の語が含まれないか確認し，最後に，[3]自動的に部分アノテーションを実行した．
ここで，\jpn[ぐり]{}と\jpn[ぐら]{}の場合，[2]の確認作業で，\jpn[どん\ul{ぐり}]{}，\jpn[うす\ul{ぐら}い]{}，\jpn[\ul{ぐら}い]{}が混じっていることがわかった．
[3]では，最長一致によってこれらの語のアノテーションも自動的に行った．
例えば，文\refs{gurigura}の場合，下線部をそれぞれ，\jpn[ぐり/名詞-固有名詞-人名-一般/グリ/ぐり]{}，\jpn[ぐらい/助詞-副助詞/グライ/ぐらい]{}として部分アノテーションした．
\ex \ul{ぐり}がけいとをまくと、えんどうまめ\ul{ぐらい}になりました。
（なかがわりえことやまわきゆりこ「ぐりとぐらのえんそく」p. 15（1979,福音館書店））
これにより部分アノテーションされたのは，\jpn[ぐら]{} 135箇所，\jpn[ぐり]{} 131箇所，\jpn[どんぐり]{} 1箇所，\jpn[うすぐらい]{} 2箇所，\jpn[ぐらい]{} 6箇所だった．
これらの部分アノテーションデータを学習データに追加したところ，原形一致の精度が[MATH]%改良された．
品詞一致までの精度は，小数点第一位までの比較では同じだったが，\jpn[ぐり]{}と\jpn[ぐら]{}に関する誤りはなくなった．
固有名詞は学習しにくく，かつ，同じ絵本では何度も出現するため，固有名詞のみを先にアノテートすることは有効だと考えられる．
固有名詞を含めた固有表現や未知語の抽出方法に関する研究は多く[CITE]，特に格フレーム情報を利用する方法[CITE]は，絵本でも有効だと考えられる．
今後は，絵本やシリーズ毎の固有名詞の抽出や，該当固有名詞を含む他の語の確認・抽出を自動・半自動化することにより，精度向上を目指したい．
また，[CITE]は，SVM平面からの距離を用いて確信度の低いデータを選び，部分アノテーションして学習データに追加する能動学習を提案している．
固有名詞のように，一気にアノテートできる部分を学習に追加した後は，[CITE]と同様に能動学習を行うことが考えられる．
本節では，提案手法の絵本以外への適用可能性について考察する．
提案手法は，既存の言語資源と解析対象の言語資源の特徴が大きく異なる場合に有用である．
例えば，小学生は学年毎に習う配当漢字が決められている．
そのため教科書では，習っていない漢字をひらがなで記載するため，漢字とひらがなが一般向け文章とは全く異なる交じり方をする場合があり，形態素解析を難しくしている．
例えば，\jpn[音楽]{}の場合，\jpn[音]{}は1年生，\jpn[楽]{}は2年生の配当漢字であるため，\jpn[音がく]{}と記載される場合がある．
そこで，教科書等の学童用の文章の解析用には，学年配当漢字に基づいて利用できる漢字を制限し，それ以外はひらがなに変換して学習データを作成することが考えられる．
あるいは，Webなどに出現するくだけた文章の解析用として，文末表現の変換，利用語彙の制限などにより，学習データを変換することも考えられる．
このように，学習データを対象分野に合わせて自動的に変換するルールを決定できる場合には，本提案手法が適用できると考えられる．
これまで，主に新聞などのテキストを対象とした解析では，形態素解析器を始めとして高い解析精度が達成されている．
しかし分野の異なるテキストに対しては，既存の解析モデルで，必ずしも高い解析精度を得られるわけではない．
そこで本稿では，既存の言語資源を対象分野の特徴にあわせて自動的に変換する手法を提案した．
本稿では，絵本を解析対象とし，既存の言語資源を絵本の特徴にあわせて自動的に変換し，学習に用いることで精度向上できることを示した．
まず，[REF_sec:target]章では，解析対象である絵本データベースの紹介を行った．
また，新聞などのテキストと絵本のテキストの文字種毎の割合を比較し，絵本では，漢字が少なく，空白とひらがなが多いことを示した．
[REF_sec:morph-kytea]章では，実験で利用する形態素解析器\kyteaの学習機能について紹介した．
また，[REF_sec:bunseki]章では，絵本の形態素解析における問題分析のため，絵本の評価用データに対し，ひらがなを漢字に変換したり，空白を削除するなどの処理を行った場合の解析精度の変化を調査し，ひらがなが多いことが解析精度低下の主な原因であることを示した．
[REF_sec:morph]章では，[REF_sec:target]章と[REF_sec:bunseki]章の分析結果に基づき，既存の言語資源を絵本の特徴にあわせて変換する手法を提案した．
[REF_sec:exp-adult]章では，提案手法によって得た言語資源だけを学習に用いた教師なし分野適応の実験を行い，既存の一般的な形態素解析モデルより高い精度（品詞一致精度で88.5%）が得られることを示した．
また[REF_sec:exp-add-ehon]章では，絵本自体のラベルありデータを学習に用いた教師あり分野適応の実験を行い，学習曲線を調べた．
ここで，提案手法によって得た既存言語資源によるラベルありデータは，絵本自体のラベルありデータ約11,000行，90,000形態素と同程度の効果があることを示した．
さらに，絵本自体にアノテーションを行う場合，できるかぎり全ての絵本から，アノテーション対象を選択することが効率的であることを示した．
また，新しい絵本に対する解析精度は，形態素区切り98.3%，品詞完全一致で91.1%，品詞大分類で94.7%，漢字の原形一致で89.0%が見込めることを示した．
[REF_sec:kousatsu]章の考察では，絵本の対象年齢毎の形態素解析精度の変化を調査し，対象年齢が低いほど解析精度も低く，その原因としては，文字種より，助詞などを含む文としての形態を取るかどうかに関連することを示した（[REF_sec:age-acc]節）．
また，他の絵本を学習データに追加しても，固有名詞の推定精度の向上は難しいが，固有名詞のアノテーションは，活用語などに比べて容易であることから，固有名詞に対して半自動的に部分アノテーションを行うことで，固有名詞の解析精度が向上できることを示した（[REF_sec:add-proc]節）．
今後は，標準表記を決定し，学習データの標準表記への変換と，漢字による原形推定精度の向上に取り組みたい．
また，絵本やシリーズ単位での，固有名詞（人や動物の名前）の自動的発見，および，固有名詞の（半）自動的な部分アノテーションに取り組みたい．
また，本稿で紹介した絵本用形態素解析モデルを利用し，子供向けの文を対象とした難易度測定や絵本の対象年齢の推定[CITE]，子供の発達や興味に応じた絵本リコメンデーションを行う予定である．
