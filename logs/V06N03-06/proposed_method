パッセージ検索では，検索要求と各文書との類似度を，文書中の各パッセージとの類似度によって計算[CITE]したり，文書全体での類似度とパッセージでの類似度を組み合わせて計算[CITE]したりする．
パッセージの単位には大きく分けて，文書の章，節や形式段落のような形式的な情報に基づくもの[CITE]，固定長や可変長のウィンドウに基づくもの[CITE]，形式によらない意味的なまとまりに基づくもの[CITE]の3種類がある．
文書中の形式段落や章，節という形式的な情報によるパッセージ抽出は，パッセージを著者が決定した構造に従って取り出す手法である．
このタイプのパッセージは，検索に先立ってインデキシング時に決定できるため処理が容易であるという利点がある．
しかし，現実の文書では同一の話題が複数の段落や章，節などにまたがる場合もある．
また，日本語においては，形式的な切れ目と内容の切れ目が一致しない場合がある[CITE]．
このような場合，形式的な情報をパッセージの単位とすると検索精度に悪影響を与える可能性がある．
また，このタイプのパッセージは，検索要求に関係なくパッセージの単位を決定する．
そのため，検索の精度を向上させる条件として，決定されたパッセージがどのような検索要求に対しても適切な類似度を計算できるパッセージである必要がある．
しかし，実際にこのようなパッセージを決定することは困難であり，この点が問題点として指摘されている[CITE]．
固定長や可変長ウィンドウによるパッセージは，検索要求が入力された時点でウィンドウをスライドさせながら各文書を走査し，検索要求との類似度が高いウィンドウを関連の高いパッセージとして決定する．
このタイプのパッセージ検索は，検索要求に応じて関連するパッセージを決定できるという利点がある一方で，有意なウィンドウサイズを決定しなければならないという問題が生じる．
ウィンドウサイズには，固定長[CITE]，一定の範囲で変化させる可変長[CITE]があるが，実際には効果的な検索を実現するために，データベース中の文書の長さや種類によってウィンドウの長さを調整する方法がよくとられている．
また，走査において，ウィンドウをスライドさせる幅も問題になる．
スライド幅を小さくすると細かな走査が可能になるが，検索にかかるコストが高くなり実用的でなくなる．
一方，幅を大きくすると検索コストは軽減されるが，ウィンドウ境界にまたがる部分の影響により検索精度が悪くなる可能性がある．
Callanはこの問題に対処するために，入力された検索要求と最初に一致した場所からウィンドウによる走査を開始し，以降のウィンドウは前のウィンドウの中間点から開始するという手法を提案している[CITE]．
しかし，有意なウィンドウサイズを決定しなけれはならないという問題は依然として残っている．
またこのタイプのパッセージは，文書の意味的な要素を反映していないという問題がある．
形式によらない意味的なまとまりに基づくパッセージ抽出は，文書の内容に基づいているため最も望ましい方法である．
このタイプのパッセージ抽出には，あらかじめ文書を談話セグメント(意味段落)に分割することでインデキシング時にパッセージを決定する方法と，検索要求が入力された時点で検索要求と関連の強い意味的なまとまりとしてパッセージを取り出す方法の2つが考えられる．
HearstとPlauntは，前者の方法として，文書をあらかじめ固定長のブロックに区切り，文書中に出現する語の結束性を計算し，結束性を持つ語がブロック間にまたがっている割合の多いブロックどうしをまとめ，談話セグメント，すなわちパッセージを形成する[CITE]．
しかし，形式的な情報を用いる場合と同様に，検索要求に関係なくパッセージが決定されるため，どのような検索要求にも適切なパッセージを仮定しているという問題がある．
また，文書の談話セグメントへの分割は多くの研究者によって行われているが[CITE]，現在のところ充分な精度での談話セグメントへの分割は達成されていない．
しかし，厳密に談話セグメントを計算する代わりに，比較的浅い処理を用いて文書中の意味的にまとまった部分を取り出すことは可能である．
例えば，語彙的連鎖[CITE]を計算すると，文書中の語彙ごとに意味的にまとまった部分を計算できる．
この語彙的連鎖の情報を使用することで，意味的なまとまりに基づくパッセージ抽出の後者の方法が実現できる．
すなわち，検索要求が入力された時点で検索要求と一致する語彙に関する語彙的連鎖が出現する部分をまとめることで検索要求と関連するパッセージが取り出せる．
次節では，我々がパッセージの決定に使用する語彙的連鎖の計算方法について説明する．
語彙的連鎖とは文書中で互いに意味的な関係を持つ語の連続のことである．
例えば，膨張を続ける宇宙の中で数多くの星が誕生，消滅を繰り返しました．
そして宇宙の誕生から約100億年後，他の星と同じ様にして，原始太陽を中心にして原始太陽系星雲と呼ばれるガスの円盤を作りました．
という文章中には，意味的に関連のある語の集まり{星，星，星雲}が共起する．
このような語の集まりを語彙的連鎖と呼ぶ．
一般に語彙的連鎖は文書中に複数存在し，1つの連鎖が出現している範囲では，その連鎖を構成する語に関する話題が述べられていると考えることができる．
語彙的連鎖形成の基準としては，表層形式が一致するタームの連続(同一タームの反復)，シソーラス上の同一概念に属するタームの連続，共起しやすいタームの連続などが考えられる．
以降では本研究で使用する語彙的連鎖の計算手法について説明する．
なお，本研究では，文書中の各文を形態素解析し[CITE]，名詞，動詞，形容詞をタームとして取り出す．
語彙的連鎖は，この名詞，動詞，形容詞についてのみ計算する．
同一タームの反復に基づく語彙的連鎖は，最も単純な手法である．
表層形式の同じタームは互いに意味的に関連のあるタームと考え連鎖を構成する．
シソーラス上の同一概念に属するタームを互いに意味的に関連のあるタームと考え，連鎖を構成する．
シソーラスを使用する場合，1つのタームが複数の概念に含まれる場合には，語義曖昧性の問題が発生する．
そのため，語義曖昧性を解消しつつ語彙的連鎖を生成する手法[CITE]により語彙的連鎖を生成する．
語彙的連鎖生成の手法を要約すると次のようになる．
語彙的連鎖を漸進的に生成する過程で，語彙的連鎖の候補を最近更新されたものが上位に来るようにスタック状に管理し，スタックの上位にある語彙的連鎖の候補から順に，現在解析中の語との結束性を調べる．
このスタック構造により，解析中の語の近傍の文脈を得ることができるので，語義曖昧性解消をしつつ，語彙的連鎖を生成することが可能となる．
本研究では，シソーラスに角川類語新辞典[CITE]を使用する．
角川類語新辞典では，概念体系を大分類，中分類，小分類の3階層に分類しているが，小分類を使用する．
このタイプの語彙的連鎖は，既存のシソーラスを使用しない．
文書コーパスの共起情報からターム間の共起の強さである共起スコアを計算する．
このスコアを用いてタームのクラスタを構成する．
1つのクラスタ内のタームの連続が1つの語彙的連鎖となる．
本研究では，ターム[MATH]と[MATH]の共起スコアを式([REF_equ:cosdis])のコサイン距離によって計算する．
ここで，[MATH]と[MATH]はそれぞれ文書[MATH]にターム[MATH]と[MATH]の出現する数([MATH])を表わし，[MATH]はコーパスの全文書数を表わす．
また，クラスタリングにおけるクラスタ間の類似尺度には式([REF_equ:min])の最短距離法を用いる．
ここで[MATH]はそれぞれクラスタ[MATH]内，[MATH]内のタームである．
この共起スコアを使用した文書ごとの語彙的連鎖の計算は，次のように行なう．
文書の先頭から順に1文を取り出し，1文内のタームの共起スコアを計算する(式([REF_equ:cosdis]))．
1ターム1クラスタから開始し，クラスタ間の類似度をタームの共起スコアを基に式([REF_equ:min])により計算する．
類似度が高い順に，閾値以上の類似度を持つクラスタをマージすることで，クラスタリングを行なう．
1文内での処理が終了した後に，その時点までに作成された文書全体でのクラスタと今計算した1文内でのクラスタによる2段階目のクラスタリングを1文内の場合と同様に行なう．
これを文書内の文がなくなるまで繰り返す．
共起関係に基づく語彙的連鎖生成アルゴリズムは次のようになる．
計算された語彙的連鎖の中には重要と考え難いものも含まれる．
例えば，図[REF_fig:leximg]の語彙的連鎖を考える．
図[REF_fig:leximg]では，連鎖A,B,C,D,Eの5種類の連鎖が計算されているが，連鎖CとEは連鎖を形成するタームが極端に少ないうえに，出現する位置が互いに非常に離れている．
このような連鎖は重要ではなく有意な連鎖と認めない方が良いと思われる．
一方，連鎖A,BおよびDは形成するタームの数が全体的に多く，文書のある部分で高密度で出現していることがわかる．
また，連鎖Bでは，14語目から23語目までの間および，28語目から36語目の間というタームの出現しない部分が存在する．
これを我々は語彙的連鎖のギャップと呼ぶ．
このようなギャップが存在する場合，同一の連鎖であっても，ギャップの区間ではその連鎖に関連する話題が述べられていないと考えられるため，ギャップで一旦連鎖を切り離して別の連鎖として計算した方が良い．
そこで，有意な連鎖を選択するために，連鎖およびギャップの長さを考慮した以下の制約を設ける．
ギャップ長の閾値を設定し，連鎖を構成するタームが閾値以上の間出現しない場合は，連鎖を切り別々の連鎖とする．
連鎖長の閾値を設定し，連鎖の覆う範囲が閾値以上の長さをもつ連鎖だけを有意な連鎖とする．
図[REF_fig:leximg]の連鎖Bを例にとると，図[REF_fig:decidechn]のように，ギャップ長閾値において連鎖Bは部分連鎖B1，B2，B3に分割される．
次にそれぞれの部分連鎖に対して連鎖長の閾値の制約を適用することで，部分連鎖B2，B3は連鎖と認められなくなる．
結果として元の連鎖Bの中で，部分連鎖B1だけが有意な連鎖として残される(図[REF_fig:decidechn])．
図[REF_fig:leximg]の連鎖CおよびEも同様の閾値によって有意な連鎖と認められなくなる．
前節で説明した語彙的連鎖を使用した我々のパッセージ検索手法について述べる．
我々のパッセージ検索手法は基本的に次のような手法に基づく．
まず，入力された検索要求内の各タームと関連する語彙的連鎖の文書内での出現位置と，その連鎖の重要度を文書ごとに取り出す．
次に，各文書ごとに出現位置の重複する語彙的連鎖をまとめ，1つのパッセージとする．
各パッセージ内の語彙的連鎖の重要度を足し合わせることにより検索要求と各パッセージの類似度を計算する．
以下では語彙的連鎖の重要度の計算方法，連鎖のインデキシングおよび検索要求と関連の強いパッセージの抽出手法について順に説明する．
各連鎖の重要度は，ある文書に多く出現し，文書集合全体ではあまり出現しないタームほどその文書内で重要なタームであるという[MATH]の考えに基づいて決定する．
すなわち，ある文書内で多くのタームから構成される連鎖で，文書集合全体ではあまり出現しない連鎖ほどその文書内で重要な連鎖であると考え，文書[MATH]内の語彙的連鎖[MATH]の重要度[MATH]を次のように定義する．
シソーラスおよび同一タームの反復を使用する場合，
共起タームを使用する場合，
ここで，[MATH]は語彙的連鎖[MATH]を構成するタームの総数，[MATH]はデータベース中の全文書数，[MATH]は連鎖[MATH]と同一の概念に属する連鎖が出現する文書の数，[MATH]は，連鎖[MATH]を構成するタームの出現する文書数の中で最大の値をそれぞれ示している．
シソーラスを使用する場合，各タームの属する概念があらかじめ決っているため，全文書中に現れる各概念の数も計算できる．
同一タームの反復の場合も同様である．
一方，共起タームに基づき文書ごとに計算した連鎖の場合，連鎖を構成するタームの種類も文書ごとに異なるため，シソーラスのように出現する文書数を計算できない．
例えば，タームAとBがある文書で連鎖を構成し，別の文書でタームBとCが連鎖を構成した場合，タームAおよびCの出現する文書は1つであるが，タームBは2つの文書に出現することになる．
そのため，連鎖の出現文書頻度としては連鎖を構成するタームの内，もっとも多くの文書に出現するタームの情報を使用することにした．
検索時にタームの属する語彙的連鎖の出現文書と文書中の出現位置および連鎖の重要度を取り出す必要があるため，まず語彙的連鎖のインデキシングを行う．
インデックスは，(連鎖を構成するターム，文書ID，連鎖ID[出現範囲]，重要度) という形式からなる．
例として，文書00001に出現する連鎖A1 {星，星，星雲，星}と，連鎖A2 {星，太陽，月，星}の2つの連鎖のインデキシングを考える．
図[REF_fig:index]のように，インデキシングすることにより，タームの属する連鎖の出現文書と文書中の出現位置および重要度を効率良く取り出すことができる．
例えば，図[REF_fig:index]のインデックスを使用すると，『星』というタームから文書00001の連鎖A1と連鎖A2が検索でき，連鎖A1の範囲はテキスト00001の1語目から36語目まで，連鎖A2の範囲は93語目から116語目までであることがわかる．
前節で作成したインデックスを使用することで，検索要求と関連の強いパッセージが計算できる．
計算は以下の手続きで行う．
検索要求を形態素解析し，検索要求内のタームとして名詞，動詞，形容詞を選択する．
検索要求内の各タームごとにインデックスを索き，語彙的連鎖の出現位置の情報を得る．
検索要求内のタームにマッチした連鎖の含まれる文書ごとに，出現する各連鎖をまとめパッセージの範囲を決定する．
パッセージの範囲は次のように決定する．
まず，文書中に出現する各語彙的連鎖のうち，出現位置に重なりのある連鎖どうしを1つのパッセージ候補としてマージする．
この処理を出現位置に重なりのある連鎖がなくなるまで繰り返し，最終的に残ったパッセージ候補をパッセージとする．
1つのパッセージの範囲は，パッセージ内の最初の語彙的連鎖が始まるタームから最後の語彙的連鎖が終了するタームまでである．
各パッセージと検索要求との類似度を計算する．
次のようなパッセージは検索要求と強く類似していると考えられる．
より多くの検索要求内のタームと関連する語彙的連鎖を含むパッセージ．
重要度の高い語彙的連鎖を多く含むパッセージ．
各語彙的連鎖の出現位置の重なっている部分が多いパッセージ．
そこで，本研究では上記の条件を満たすパッセージほど検索要求との類似度が高くなるように，パッセージ内の連鎖の出現数，重要度および連鎖どうしの重なりを考慮してパッセージと検索要求の類似度を計算する．
まず，式([REF_equ:passcr0])により，検索要求内のターム[MATH]と対応する語彙的連鎖[MATH]との類似度[MATH]を計算する．
ここで，[MATH]は検索要求内のターム[MATH]の検索要求内の頻度，[MATH]は全文書数，[MATH]はターム[MATH]の出現する文書数であり，[MATH]はターム[MATH]に対応する語彙的連鎖[MATH]の重要度である．
次に，[MATH]を連鎖の長さ[MATH]で割ることにより，連鎖の範囲内の各ターム[MATH]のスコア[MATH]を計算する(式([REF_equ:passcr1]))．
次に検索要求内のターム毎の各スコア[MATH]をパッセージの開始位置から終了位置まで足しながら各位置での連鎖の重なりに応じて重みをかける(式([REF_equ:passcr]))．
ここで，[MATH]は検索要求，[MATH]はパッセージ[MATH]であり，[MATH]，[MATH]はそれぞれパッセージ[MATH]の開始するタームの位置および終了するタームの位置を表す．
[MATH]は語彙的連鎖[MATH]の位置[MATH]におけるスコアである．
[MATH]は検索要求内のタームの数，[MATH]は検索要求内のタームに対応する連鎖の内，パッセージ[MATH]内の[MATH]番目のタームを範囲に含んでいる連鎖の数である．
例として，図[REF_fig:pasimg]を考える．
図[REF_fig:pasimg]には，検索要求内のタームとして入力された3つのターム(それぞれ黒い丸，グレーの丸，四角で表されている)と，インデックスを索くことによりマッチした文書の1つが示されている．
この文書中には検索要求内のタームとマッチする語彙的連鎖A1，A2，B1，B2，C1，C2，C3が存在している．
この例では，連鎖A1およびA2は黒い丸で表わされた検索要求内のタームに，連鎖B1およびB2はグレーの丸で表わされた検索要求内のタームに，また連鎖C1，C2およびC3は四角で表わされた検索要求内のタームにそれぞれマッチする．
ここで各語彙的連鎖をパッセージ候補とし，その範囲を調べる．
次に重複した範囲を持つ連鎖どうしを1つのパッセージ候補としてまとめる作業を繰り返すことにより，最終的なパッセージを決定する．
図[REF_fig:pasimg]では3つのパッセージが決定されており，パッセージ1には語彙的連鎖A1,B1,C1，パッセージ2にはA2，C2，パッセージ3にはB2，C3がそれぞれ含まれている．
次に各パッセージと検索要求との類似度を計算する．
例えば，パッセージ1では，連鎖A1の範囲が1語目から36語目の36語，B1の範囲が3語目から59語目の57語，C1の範囲が17語目から63語目の44語である．
従って各連鎖と検索要求内のタームの類似度[MATH]を，それぞれ36，57，44で割ることにより，[MATH]を求める．
パッセージ1のスコアは[MATH]を1語目から63語目まで変化させながら，対応する[MATH]を足して求める．
この時，3語目から16語目までは，A1とB1が重なり，17語目から36語目まではA1,B1とC1が重なり，37語目から63語目まではB1とC1が重なっているためそれぞれの重みをかける．
これにより，各文書中の各パッセージごとに検索要求との類似度が計算できる．
