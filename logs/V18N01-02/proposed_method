本研究では談話構造を表すモデルとして談話の話題の推移を表すために「談話構造木」という木構造を定義する．
談話構造木では，句点で区切られた文をノードとし，各ノード文はただ1つの親ノードを持つ．
そして文ノードを接続しているアークに9種類の文間接続関係（詳細化，展開，原因—結果，逆接，遷移，転換，並列，例提示，質問—応答）を付与する．
以下に例を示す．
図1の例文では，1文目と2文目ではともに「N自動車」を主な話題としている．
そして3文目では2文目に登場した「電気自動車」へと話題が展開している．
4文目では，3文目の話題「電気自動車」についてさらに情報を付加している．
そして5文目ではまた「N自動車」へと話題が戻っている．
例文では，大まかに分けると「N自動車」とそこから派生した「電気自動車」についての話題が存在し，図1の談話構造木でその話題の推移を表すことができる．
本研究ではセンタリング理論(Grosz, Joshi and Weinstein 1995)と対象知識に基づき談話中の話題の移り変わりに着目した談話構造解析の手法を提案する．
センタリング理論とは文の話題の中心である焦点の推移に着目して文間の結束性をモデル化した理論である（第4章）．
また，対象知識とは，語の語意が表す概念の部分／属性関係，上位—下位関係，類義関係といった2概念間の意味的関係をEDR電子辞書の共起辞書と概念辞書から抽出したものである（第3章）．
本研究の手法では対象知識により話題の部分や属性などへの展開といった概念の意味的関係を考慮してセンタリング理論を拡張し，文の話題の推移を的確に捉えられる談話構造解析を可能にする．
その結果として，先に述べたように，文をノードとする談話構造木を機械的に生成する．
この時，焦点の推移に基づく文間の結束性を文を表すノード間のアークとして表現する．
さらにアークにこの文間の焦点の推移が何を意味するのかを表す理由や展開といった9種類の文間接続関係ラベルを割り振ることで，文同士の役割的関係を明らかにする．
これによって，質問応答や照応解析の解の探索範囲を絞り込んだり，自動要約で主たる話の流れを示す評価基準を得られることが期待できる．
なお，Groszらのセンタリング理論では代名詞の扱いに関する規則が与えられているが，現在筆者らの環境ではゼロ代名詞や指示代名詞の先行詞を高い精度で特定する技術を確立できていないので，それらを考慮するとかえって談話構造木の構築精度を下げる可能性があるので，本研究では代名詞を扱わないことにした．
談話構造木を以下のプロセスを経て構築する．
形態素・構文・意味解析
談話構造木の構築
文間接続関係の判定
まず，形態素・構文解析をJuman・Knp (黒橋，長尾1998)を用いて，意味解析をSageを用いて行う．
これにより談話に含まれる各文は，形態素，文節に分割され，それぞれにEDR辞書中の品詞と語意（EDR辞書で定義された約40万概念のどれか）が付与され，文節間の係り受け関係には役割関係を表す深層格（EDR辞書で定義されたものにSageで追加された30種のどれか）が付与される．
つぎに談話構造木の構築と文間接続関係の判定を分割して行う．
談話構造木の構築は，センタリング理論，表層パターン，文間距離に着目した手法を用いて行う（第5章）．
センタリング理論はGrosz (Grosz, Joshi and Weinstein 1995)のものを，本研究で提案する対象知識を用いて拡張して使用する．
最後に，構築された談話構造木中のリンクに文間接続関係を付与する（第6章）．
文間接続関係の判定には，接続詞，主題，モダリティ・テンス・アスペクト，語意で表される概念間の部分／属性関係などの対象知識に着目したルールを用いて判定する．
本研究の提案する手法では，センタリング理論と対象知識で話題の推移を的確に捉え，談話構造木の構築と文間接続関係の判定のプロセスを分割して行うことにより，文間接続関係の判定を単純化することが可能になる．
なお，研究を具体的に進めるにあたって，文間接続関係の定義やその判定ルールの作成においては，対象となる談話として，新聞やWebの報道・解説・論説記事を用いたので，研究成果は精度の信頼性においてこれらの談話が対象になるが，談話構造構築方式はより一般的に適用できると考えている．
ただし，会話文などのように言外の指示表現が多用される分野では精度が落ちることが想定される．
本稿では，まず提案手法の基本となる対象知識について3章で，センタリング理論について4章で述べた後，実際の談話構造解析のプロセスについて，5章で談話構造木の構築方法，6章で文間接続関係の判定方法について述べる．
談話の中でも，特に論文や新聞などの報道・解説・論説といった文章では，まず始めにその談話が何について述べられているものなのかを表す談話全体の話題（大話題）が示され，続いてその大話題を説明するために，大話題に関連した幾つかのさらに詳細な話題（小話題）が述べられるといった話題の階層構造を取る場合が多い．
小話題としては大話題の部分／属性，下位，類義などが現れやすい．
以下を例文として説明する．
例文では，まず冒頭で談話全体の話題である大話題「相模原市」が示されている．
そして，2文目，3文目で大話題「相模原市」（Sageで求めた語意は0f2ff2:相模原市という市）の部分／属性「人口」（3c0fa3:一定の地域に住む人の数）が，4文目では部分／属性「大学」（1e8598:高等教育の中核となる学術研究および教育の最高機関）が小話題として説明されている．
したがって，例文のような文章を談話解析するためには，「人口」が「相模原市」の部分／属性であるという対象—部分／属性関係といった知識が必要になる．
本研究ではこのような話題となる対象間の関係を対象知識と呼ぶ．
対象知識としては，対象—部分／属性関係のほかに，上位—下位関係，類義関係を考える．
概念間に意味的関係があるかどうかの判定（図2）では，2つの語の語意が表す2概念をシソーラスと共起辞書，品詞，概念類似度を用いた対象知識判定規則に照らし合わせ，適合した場合に当該2概念間に対象—部分／属性関係，上位—下位関係，類義関係があると考える．
シソーラスにはEDR概念辞書，共起辞書にはEDR日本語共起辞書（（株）日本語電子辞書研究所1995）[9]を用いる．
以下で対象知識のそれぞれの，対象知識判定規則について述べる．
対象—部分／属性関係とは表1のような概念間の関係を示す．
ここで注意したいのは，本研究では，ある概念の部分概念と属性概念を明確に分類しないということである．
本研究では，あくまで小話題として現れやすい概念を抽出することを目的としている．
対象—部分／属性関係の判定規則には，主に共起辞書を用いるものとシソーラスでの上位概念ペアを用いるものの2種類がある．
共起辞書を用いるものは，共起辞書中の共起関係子が助詞「の」であるレコードに着目する．
その理由は，「自動車のエンジン」というように，対象と部分／属性を直接結びつける代表的な助詞として「の」が用いられるからである．
対象とするレコードの検索には対象概念と部分／属性概念のペアを対象とし，完全一致だけでなく類義のレコードも対象とすることで対象—部分／属性概念の可能性があるものを漏れなく抽出する．
レコードの検索方法は表2の3種類を用い，適合条件に一致すれば該当レコードありとする．
ここで類義かどうかの判定には，シソーラス上の距離に基づく以下の式(加藤,古川,蒲生,韓,原田2005)を用いて類似度を計算し，その類似度が閾値（本報告では0.85とした）以上のものを類義とする．
&類似度(\mathrm{a}, \mathrm{b})=\frac{2(1-r)dc}{2(1-r)dc+(1-r^{da})+(1-r^{db})}
& r:公比(r \ne 1.0) \nonumber
& dc:共通上位概念までの概念の深さ\nonumber
& da:共通上位概念から語\mathrm{a}までの深さ\nonumber
& db:共通上位概念から語\mathrm{b}までの深さ\nonumber
ただし，助詞「の」の用法には，対象が部分／属性を修飾する用法のほかに，「彼の走る姿」といった主格の用法や，「黄色の花」といった対象をその状態が修飾するもの，「13時の会議」といった時間による修飾などの用法がある．
これらの用法を取り除くため，該当レコードに対して，深層格や品詞，シソーラスでの上位概念による以下の規則を用いてさらに絞り込みを行う．
対象とする深層格はmodifier（修飾），element-of（要素），part-of（部分）
品詞は数詞を除く名詞
対象候補は上位概念に「時」，「状態」，「物やものに対する指示的な呼称」，「方向」，「複数のものの関係によって決まる位置」，「部分」を持たない
以上の共起辞書レコードの検索，深層格や品詞，シソーラスでの上位概念による規則に適合したものを対象—部分／属性関係とする．
つぎに，上位概念ペアを用いた対象—部分／属性関係の抽出について述べる．
EDR概念辞書には「人間の属性」や「動物の部分」，「具体物の属性」，「機械の部品」などの概念が含まれる．
部分／属性概念候補がこれらを上位概念に持ち，さらに対象概念候補がそれら属性を持つにふさわしい概念（表3の左列に列挙した概念）を上位概念に持てば，対象—部分／属性関係ありとする．
例えば部分／属性候補が「人間の属性」を上位概念に持ち，対象概念候補が「人間」を上位概念に持てば，対象—部分／属性関係ありとする．
これらの対象—部分／属性関係を持つ上位概念のペアの一覧を表3に示す．
上位—下位関係とは表4のような概念間の関係を指す．
上位—下位関係はシソーラスを用いることで容易に抽出することができる．
ただし，シソーラス中のすべての上位—下位関係を持つ概念を対象にしてしまうと意味が離れすぎてしまうため，2概念間に適当な概念間距離閾値（本報告では，距離2）を設定する．
類義に関してもシソーラスを用いることで容易に抽出することができる．
式(1)に基づき類似度を計算し，適当な閾値（本報告では0.85）以上の2概念間に類義関係ありと判断する．
センタリング理論(Grosz, Joshi and Weinstein 1995)とは，文の焦点の移り変わりに着目して談話の結束性をモデル化したものである．
センタリング理論では，談話単位中の各文SiにCf(Si) (Forward-looking centers)を，また各文Siとその前に出現する各文SjにCb(Si，Sj) (Backward-looking center)を定義する．
Cf(Si)は文Siに出現する要素（話題）のリストであり，優先順位によりソートされている．
Cb(Si，Sj)は，ただ一つの要素を持ち，文Sjから文Siに談話が推移した時の焦点をあらわしている．
本研究では，以下のように定義する．
Cf(Si): Forward-looking centers
文Siに出現する名詞節と主辞がサ変名詞である動詞節を要素とするリスト
以下の優先順位により降順にソートされている
主題（ハ格）＞ガ格＞ニ格＞ヲ格＞その他
Cb(Si，Sj): Backward-looking center
Cf(Sj)の要素でSiに含まれる名詞節と，同一または同義または対象知識（第3章）で判定される部分／属性や上位／下位関係のある概念を表す語を主辞とする文節のうちソート順で最上位要素
ルートノード文ではCf(Si)の最上位要素
i [MATH] j
文の3つ組Si, Sj, Sk [MATH]に対して，Cbの推移Cb(Sj，Sk)[MATH]Cb(Si，Sj)の値を表5のように定義する．
これをTRANSITIONと呼ぶ．
談話構造木の構築でTRANSITION Cb(Sj，Sk)[MATH]Cb(Si，Sj)を求める際にはSkは確定しており，SkはSjの親ノードである．
TRANSITIONは焦点の連続性を評価している．
そして，このTRANSITIONの種類により文間の結束性の強さが示される．
結束性の強さは以下の順に従う．
CONTINUATION＞RETAINING＞SHIFTING＞NOTHING
以下の例文でセンタリング理論におけるCf，CbとTRANSITIONの判定例を示す．
例文a
幸子は夕飯の材料が足らないことに気づいた。
Cf(Sa1)：[幸子，材料，夕飯]
Cb(Sa1, [MATH]：[幸子]
そこで幸子は弟に買い物を頼んだ。
Cf(Sa2)：[幸子，弟，買い物]
Cb(Sa2, Sa1)：[幸子]
TRNSITION Cb(Sa1, [MATH])[MATH]Cb(Sa2, Sa1)：CONTINUATION
しかし、弟は幸子に嫌だと言った。
Cf(Sa3)：[弟，幸子]
Cb(Sa3, Sa1)：[幸子]
TRANSITION Cb(Sa1, [MATH])[MATH]Cb(Sa3, Sa1)：RETAINING
Cb(Sa3, Sa2)：[幸子]
TRANSITION Cb(Sa2, Sa1)[MATH]Cb(Sa3, Sa2)：RETAINING
弟はゲームに夢中だった。
Cf(Sa4)：[弟，ゲーム]
Cb(Sa4, Sa1)：[[MATH]]
TRANSITION Cb(Sa1, [MATH])[MATH]Cb(Sa4, Sa1)：NOTHING
Cb(Sa4, Sa2)：[弟]
TRANSITION Cb(Sa2, Sa1)[MATH]Cb(Sa4, Sa2)：SHIFTING
Cb(Sa4, Sa3)：[弟]
TRANSITION Cb(Sa3, Sa2)[MATH]Cb(Sa4, Sa3)：SHIFTING
例文aでは，文Sa4で比較先の文SjによりTRANSITIONが分かれている．
Cb(Sa4, Sa2)とCb(Sa4, Sa3)のときはTRANSITIONがSHIFTINGとなっているが，Cb(Sa4, Sa1)の場合はNOTHINGである．
これはつまり，文Sa4は，文Sa1よりも文Sa2やSa3との間の結束性が高いことを表している．
次の例では，部分／属性でCbが決定されている．
例文b
N社は新型自動車を発表した。
Cf(Sb1)：[N社，新型自動車，発表]
Cb(Sb1, [MATH]：[N社]
新型自動車は優れた環境性能を実現。
Cf(Sb2)：[新型自動車，環境性能，実現]
Cb(Sb2, Sb1)：[新型自動車]
TRANSITION Cb(Sb1, [MATH])[MATH]Cb(Sb2, Sb1)：SHIFTING
燃費は、23.0 km/lとクラストップレベル。
Cf(Sb3)：[燃費，23.0 km/l，クラストップレベル]
Cb(Sb3, Sb1)：[燃費（新型自動車）]
TRANSITION Cb(Sb1, [MATH])[MATH]Cb(Sb3, Sb1)：SHIFTING
Cb(Sb3, Sb2)：[燃費（新型自動車）]
TRANSITION Cb(Sb2, Sb1)[MATH]Cb(Sb3, Sb2)：CONTINUATION
例文bでは，文Sb3のCbが先行文内の「自動車」の部分／属性概念である「燃費」である．
また，文Sb3で比較先の文SjがSb1の時のCb(Sb3, Sb1)の場合はSHIFTING, Sb2の時のCb(Sb3, Sb2)の場合はCONTINUATIONと分かれており，文Sb3は文Sb2との結束性が高い．
Cb(Si, Sj)が部分／属性概念などで決定される場合と同一概念や同義概念で決定される場合を談話構造木構築の際に区別するため，Cb決定タイプを表6のように設定する．
Cf(Si)の要素と同一概念または同義概念が含まれない場合は，EQUAL以外の決定タイプが採用される．
この場合の優先順位は，ATTRIBUTE, LOWER, SIMILARの順である．
第5章で詳しく述べるが，本研究では，談話構造木の構築にこのTRANSITIONの種類における結束性の強さを主な指標として用いる．
談話構造木は談話における話題の推移を表す木構造であるので，同じ焦点Cbを持つ文同士が接続されることが望ましい．
このことは，結束性の強いTRANSITION（CONTINUATIONやRETAINING）になる文同士を接続したリンクを多く含む談話構造木を構築すればよいということと同義である．
本章では談話構造木の構築アルゴリズムについて述べる．
談話構造木は文をノードとし，談話中の話題の推移を表す木構造である．
談話構造木中では，近い話題を持つ，つまり結束性の高い文同士が隣接する．
また，ルートノード（談話構造木の根に当たるノード）は談話の先頭文であり，各ノード文は自身よりも前に出現した文のうちのただ一つを親ノード文として持つ．
談話構造木構築アルゴリズムでは，先頭から順に処理対象文とし，先頭文はルートノードに，以降の文は自身よりも前に出現した文すべてを接続候補文とし，最も結束性の高い接続候補文に接続する．
文同士の結束性を測るための指標として，センタリング理論（第4章）におけるTRANSITIONの種類により結束性の度合いを表すセンタリング得点，特定の表層パターンの組み合わせに着目した表層パターン得点，文間距離を用いた文間距離得点の3つの指標の和を用いる．
以下でそれぞれについて説明する．
センタリング理論では，文間の焦点の推移に着目したTRANSITIONを求めることにより文間の結束性の高さを評価できる．
接続候補ノード文とのTRANSITIONを求め，TRANSITIONの種類により結束性が高いものほど高得点とする．
ここでTRANSITIONの判定には，対象知識も含める．
つまり，接続候補文のCbと処理対象文のCbの関係が対象知識上の関係に該当すればTRANSITIONはCONTINUATIONかRETAININGになる．
ただし，Cbが同一概念や同義概念ではなく対象知識から決定される概念を持つ語の場合は，同一概念や同義概念の場合よりも得点を低くするように，Cbの決定タイプにより重み付けする．
センタリング得点Cpは以下の式に従う．
& Cp = Tp\times w_{Cb}
&  Tp: \text{TRANSITION得点} \nonumber
&  w_{Cb}: Cb重み\nonumber
TpはTRANSITIONに応じた得点であり，結束性の高いものほど高得点になるように設定する．
w[MATH]はCbの決定タイプに応じた重みであり同一概念や同義概念を1.0とし，優先度に応じた値を設定する．
表7にTRANSITION得点Tp,表8にCb決定タイプによる重みw[MATH]の例を示す．
接続候補文と処理対象文が特定の表層パターンの組み合わせ（例えば，接続候補文の表記が「最初に」で始まり，処理対象文の表記が「つぎに」で始まる）を持てば，関連の高い話題を順序立てて提示していると考えられ，結束性は高いと判断し，表層パターン得点Epを付与する．
表層パターンが現れる場合は接続先として確定的な場合であり，Epはセンタリング得点のCONTINUATIONの場合などよりも高い値に設定する．
このような表層パターンの組み合わせの例を表9に示す．
発話者は，読者にわかりやすいように，話題を徐々に変化させながら談話を構築する．
そのため近接する文は関連性の高い話題を持つことが自然である．
そこで近接する文ノードほど結束性が高いと判断し，文間距離に反比例する得点を与える．
& Dp = Dp_ \left(1-\frac{d}{i}\right)
&  d:文間距離\nonumber
&  i:処理対象文番号\nonumber
&  Dp_:距離得点上限値\nonumber
ここで，dは接続候補文と処理対象文との文間距離，iは処理対象文番号，[MATH]は文間距離得点上限値である．
[MATH]はTRANSITION間の得点を大きく超えない値が望ましい．
つまり表7の場合CONTINUATIONが90，RETAININGが60であるので[MATH]は30とした．
以上の3つの指標の合計得点を結束性得点とし，接続候補文それぞれに対して求め，最高得点を持つ文を親ノードとしてリンクを張る．
談話構造木構築アルゴリズムを図3に示す．
以下の文章を例に説明する．
ここでTRANSITION得点Tpは表7，文間距離得点上限値[MATH]は30として説明する．
まず1文目をルートノードにする．
2文目では，接続候補文は1文目のみであるので1文目とリンクを張る．
3文目では，1文目と2文目が接続候補文になるが，それぞれに対しTRANSITIONを求めると，1文目に対してはNOTHING, 2文目に対してはSHIFTINGとなる．
表層パターンはなく，距離得点を加算する．
結束性得点は1文目15，2文目52.5となり，2文目が最も結束性得点が高くなるので，2文目とリンクを張る．
4文目は，1文目から3文目までが接続候補文となる．
それぞれに対して，TRANSITIONを求める．
図4は各接続候補文に対してTRANSITIONを求めた状態である．
1文目と2文目に対してはCONTINUATION, 3文目に対してはSHIFTINGとなる．
表層パターンはなく，距離得点を加算する．
結束性得点は，1文目97.5，2文目105，3文目52.5となり最も得点の高い2文目とリンクを張る．
構築された談話構造木中のすべてのリンクに文間接続関係を付与する．
文間接続関係はリンクで直接接続された2文間の接続関係を表す．
何種類の関係を定義するかは，研究者により異なっているが（6種類〜11種類），本研究では，黒橋ら(黒橋，長尾1994)の11種類の結束関係（並列，対比，主題連鎖，焦点—主題連鎖，詳細化，理由，原因—結果，変化，例提示，例説明，質問—応答）を参考に，事例13文章112文に試行する過程で，意味解析結果の語意，深層格，モダリティや，対象知識や主題や話題を基にした計算可能性と要約や質問応答などの応用での必要性から，表10の9種類を定義し，利用することにした．
文間接続関係は基本的には，親ノード文から子ノード文への関係である．
つまり表10でのSiが親ノード文であり，Sjが子ノード文である．
例えば，文間接続関係が「詳細化」といった場合は親ノード文での話題に関して子ノード文でさらに詳細な情報が記述されているということである．
ただし，「原因結果」と「逆接」関係に関しては逆向き関係が存在する．
なお，黒橋らとの比較で言えば，判定の明確性を維持し6.2節の文間接続関係判定ルールを容易に構築できるようにするために，対比を逆接として，変化を遷移として再定義した．
また同様の目的から主題連鎖と焦点—主題連鎖の違いを，展開と転換に分離再定義した．
一方，理由と例説明は出現頻度が低いので今回の分類では削除した．
具体的な事例では，これらは詳細化に分類されることが多いと思われる．
文間接続関係の判定には，文間接続関係判定ルールを用いる．
文間接続関係判定ルールは以下の形式を持つ．
接続関係名
9種類の接続関係（表10）のうち1つ
条件部
接続詞
主題
モダリティ・テンス・アスペクト
対象知識
構文・意味情報
得点
接続関係名への確信度
文間接続関係判定ルールは接続関係名と条件部，得点から構成される．
条件部は接続詞などの表層表現や主題の推移，文の認識や話者の態度を表すモダリティ（推量，疑問など），時制を表すテンス・アスペクト，対象知識，構文・意味情報を用いた論理式である．
ここで主題とは，その文が何について述べられているのかを示すもので，一般的には，助詞「は」で示される文節のことを指す．
本研究では，助詞「は」で示される文節のほかに助詞「も」や読点「、」で示される主語格も対象とする．
なおモダリティテンスアスペクト，接続詞，構文・意味情報は，モダリティ解析機能が加わった意味解析システムSage (梅澤，西尾，松田，原田2008;梅澤，加藤，松田，原田2009)で解析された情報に基づく．
ルールの例とその適合例を図5〜図7に示す．
図5の例では，親ノード文の主題以外の文節「電気自動車」が子ノード文の主題として現れている．
親ノード文の話題「N自動車」から新たな話題「電気自動車」に展開されている．
図6では，子ノード文が接続詞「しかし」で始まっている．
接続詞「しかし」は逆接を表す一般的な接続詞であり．
このような接続詞が現れる場合は，接続関係が明確に現れている場合であり，高得点を与える．
図7では親ノード文の主題「電気自動車」が子ノード文で部分／属性である「充電時間」になっている．
この場合では親ノード文の話題を引き続きつつより詳細な内容の説明へ移行していると考えている．
ルールの一覧を表11に，ルールで使われる接続詞の一覧を表12に，それを用いる文間接続関係名ごとに示す．
ここで(R)と書かれているものは逆向き関係を表している．
つぎに文間接続関係判定のアルゴリズム図8について述べる．
文間接続関係判定のアルゴリズムでは，談話構造木に存在するすべてのリンクに対し，1つずつ順に文間接続関係を付与する．
まず，リンク1つに対し接続関係それぞれに対応する9つの適合得点を用意する．
そして表11のルール1つずつ，条件部に適合するか判定する．
適合した場合には，ルールの得点を対応する接続関係の適合得点に加算する．
そしてすべてのルールについて適合判定を行った後，最高の適合得点を持つ接続関係を文間接続関係として決定する．
