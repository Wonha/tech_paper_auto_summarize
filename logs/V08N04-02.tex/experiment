\section{実験}
\label{sec:experiments}

本章では，まず，実験1で，我々の手法を公開データに基づいて評価す
ることにより，我々の手法が他の手法よりも優れた分割精度を持つこ
とを示し，次に，実験2で，我々の手法を長い文書に適用した場合の分
割精度を述べる．

二つの実験の本稿全体における位置付けは以下の通りである．まず，
実験1の目的は，提案手法と従来手法とを比較することにより，提案手
法が，従来手法よりも，テキストを精度良く分割できることを示すこ
とにある．そのため，もし，提案手法と従来手法とを比較したいだけ
ならば，実験1のみで十分である．したがって，本稿の主要な目的であ
る，提案手法の他の手法に対する優位性を示すためには，実験1だけで
十分である\footnote{もちろん，この言明は，実験1で用いたデータに
  よる分割結果の精度が，どれほど現実のテキストの分割結果の精度
  を反映しているかによる．我々は，この分割結果の精度が，そのま
  ま現実のテキストにおける分割結果の精度となることはないとして
  も，この分割結果で明かになる，テキスト分割システムの精度の順
  位は，現実のテキストにおいても反映されると考えている．また，
  現在，我々が入手可能なデータの中では，実験1に用いたデータが，
  最も包括的に従来手法を網羅しているため，各種手法を比較するテ
  ストベッドとしては妥当であると考える．}．

しかし，我々の最終的な目的は，テキスト分割の結果を，長い文書の
要約\cite{nakao00:_algor_one_summar_long_text}や講演のディクテー
ション結果の要約に使うことであるので，その目的のために，提案手
法が，どれほど役に立つかを調べたい．そのために，実験2においては，
提案手法による分割が，どの程度，元の文書の章や節と一致するかを
調べることにより，提案手法の，長い文書を要約するときへの応用の
可能性を把握することを目的とする．そのため，実験2の位置付けは，
今後我々の手法を実際の応用へと適用させるための前段階と考えてい
る．我々は，将来的には，何らかのタスクに基づいて提案手法を評価
することを考えている．


\subsection{実験1：公開データによる評価}
\label{sec:exp1}

実験1で用いたデータは， \cite{choi00:_advan}により，各種のテキ
スト分割手法を比較するために用いられたデータである
\footnote{{\tt http://www.cs.man.ac.uk/\~{}choif/software/C99-1.2-release.tgz} より入手可能である．このパッケージを展開したときにできる {\tt naacl00Exp/data/\{1,2,3\}/\{3-11,3-5,6-8,9-11\}/*} を実験に用いた．}．
Choiは，彼の提案手法$C99$と，
TextTiling\cite{hearst94:_multi_parag_segmen_expos_text}，
DotPlot\cite{reynar98:_topic},
Segmenter\cite{kan98:_linear_segmen_segmen_signif}を比較し，
$C99$では，他の手法と比較し，誤り確率が半減されたと述べている．
ただし，誤り確率とは，テキストを構成する単位(単語，文，パラグラ
フ等)について，任意に選んだ$r$単位だけ離れた二つの単位が誤って分
割される確率のことである．ここで，$r$は，正しい分割における各区
間の長さの平均の半分が良いとされている
\cite{beeferman99:_statis_model_text_segmen}．なお，実験1におけ
る$r$の単位は単語である． また，誤り確率が低いほど精度は良い．

この実験データは，700個のテキストから
なり，個々のテキストは，10個のテキスト断片を連結したものである．
そして，それぞれのテキスト断片は，Brown Corpus からランダムサン
プリングされたテキストの最初の$s$行である．個々のテキストは，
$s$により特徴付けられる．表\ref{tab:testcorpus}には，実験データ
の諸元を示す．

\begin{table}[htbp]
  \begin{center}
    \caption{実験データの諸元\protect{\cite{choi00:_advan}}}
    \begin{tabular}{|l|c|c|c|c|}
      \hline
      $s$の範囲  & $3 - 11$ & $3 - 5$ & $6 - 8$ & $9 - 11$ \\ \hline
      テキスト数 & 400      &  100    &  100    & 100 \\ \hline
    \end{tabular}
    \label{tab:testcorpus}
  \end{center}
\end{table}

各テキストは，Choiのパッケージにあるライブラリを利用した 
stemmer により正規化され，その正規化されたテキストが提案手法に
より分割された．ただし，分割可能な位置は，\cite{choi00:_advan}
と同様に，文間のみである．その後，分割されたテキストの誤り確率
は，Choiのパッケージにある評価プログラムにより計算された．

その評価結果を表\ref{tab:U00vsC99}と表\ref{tab:U00bvsC99b}に示
す．これらの表において，$U00$は，提案手法において，大域的な最小
コスト分割を求めたときの評価結果であり，$U00_{(b)}$は，提案手法
において，区間数を10に指定\footnote{この際には，\ref{eq:rec}節
  で述べた再帰的分割は適用していない．}したときの評価結果である．
また，$C99$は，Choiのアルゴリズムによる最適分割の評価結果であり，
$C99_{(b)}$は，Choiのアルゴリズムにおいて区間数を10に指定した場
合の評価結果である\footnote{表\ref{tab:U00bvsC99b}の$C99_{(b)}$
  の行にある数値は，\cite{choi00:_advan}の Table 6 のものと若干
  異なる．その理由は，元々の数値は500のサンプルテキストに基づい
  たものであるのに対して，この表のものは，700のサンプルに基づい
  て我々が再実験した結果だからである(Choi, personal
  communication)．なお，\cite{choi00:_advan}で使われた500サンプ
  ルにおける$C99_{(b)}$の誤り確率は以下の表のものである．
  
  \begin{tabular}{|c|cccc|c|}\hline
                  & $3-11$      & $3-5$ & $6-8$       & $9-11$     & 全体\\\hline
      $C99_{(b)}$ & 12\%        & 12\%  & 9\%         & 9\%        & 12\%\\\hline
  \end{tabular}
}．また，二つの表において，$**$は，比較対象で
あるアルゴリズムの誤り確率が$t$検定により，有意水準1\%で有意差
があることを示す．なお，「$3-11$」などの列の数字は，それに該当
するテキストにおける誤り確率の平均であり，「全体」は，全部のテ
キストについての誤り確率の平均である．

\begin{table}[htbp]
  \begin{center}
    \caption{分割数をプログラムが決めた場合の誤り確率の比較}
    \begin{tabular}{|c|cccc|c|}\hline
            & $3-11$     & $3-5$       & $6-8$ & $9-11$ & 全体\\\hline
      $U00$ & 11\%$^{**}$ & 13\%$^{**}$ & 6\%$^{**}$  & 6\%$^{**}$   & 10\%$^{**}$\\
      $C99$ & 13\%       & 18\%        & 10\%  & 10\%   & 13\%\\\hline
    \end{tabular}
    \label{tab:U00vsC99}
  \end{center}
\end{table}

\begin{table}[htbp]
  \begin{center}
    \caption{分割数が指定された場合の誤り確率の比較}
    \begin{tabular}{|c|cccc|c|}\hline
                  & $3-11$      & $3-5$ & $6-8$       & $9-11$     & 全体\\\hline
      $U00_{(b)}$ & 10\%$^{**}$ &  9\%  &  7\%$^{**}$ & 5\%$^{**}$ &  9\%$^{**}$\\
      $C99_{(b)}$ & 12\%        & 11\%  & 10\%        & 9\%        & 11\%\\\hline
    \end{tabular}
    \label{tab:U00bvsC99b}
  \end{center}
\end{table}

これらの表から，提案手法が，$C99$あるいは$C99_{(b)}$と，同等あるい
は，より精度良くテキストを分割できると言える．そして，$C99$ある
いは$C99_{(b)}$は，分野非依存のテキスト分割手法のなかでは，その他の
従来手法よりも精度良くテキストを分割できるので，我々の提案手法
が，従来手法よりも精度良くテキストを分割できることが言える．

\subsection{実験2：長い文書の章や節との一致度による評価}
\label{sec:exp2}

実験2では，比較的長い文章を分割し，その分割結果と元々の章や節に
よる分割とを比較することにより，提案手法を評価した．

実験に用いたデータは，文部省年報\footnote{{\tt
    http://wwwwp.mext.go.jp/download.html}よりダウンロードでき
  る．}である．我々がこのデータを用いた理由は，それが公開されて
いるということに加えて，SGMLでタグ付けされているため，付録に示
す簡単なPerlスクリプトにより章(chapter)や節(section)を切り出せ
るためである\footnote{このPerlスクリプトにより切り出せないもの
  もある．実験に用いたものは，このスクリプトにより処理可能なも
  のである．}．

\begin{table}[htbp]
  \begin{center}
    \caption{文部省年報の諸元}
    \begin{tabular}{|c|ccc|}\hline
      &章の数& 節の数& ページ数\\\hline
      昭和６０年度 & 13 & 63 & 62 \\
      昭和６２年度 & 22 & 96 & 109 \\
      昭和６３年度 & 13 & 65 & 52 \\
      平成元年度   & 13 & 64 & 54 \\
      平成２年度   & 13 & 64 & 55\\\hline
    \end{tabular}
    \label{tab:monbu}
  \end{center}
\end{table}

表\ref{tab:monbu}には，実験に用いた文部省年報の諸元を示す．表で，
章や節の数は，元のファイルでの章や節の数を数えたものであるが，
ページ数は，我々が，元テキストをポストスクリプトファイルに変換
して数えたものであるので，一応の目安と考えておくのが良い．

表\ref{tab:monbu}に示す文部省年報には，以下の前処理が加えられた．
まず，付録のスクリプトを用いて，章や節を切り出した結果から，分
割位置を示す記号を除いたテキストを得た．次に，そのテキストに対
して，ChaSen version
2.25\cite{matsumoto99:_japan_morph_analy_system_chasen_manual}
を適用し，その結果から，ChaSenの品詞体系における「名詞」「未知
語」「記号-アルファベット」「接頭詞」に該当するもののみを抽出し，
提案手法への入力とした．ただし，名詞のうちで，その下位分類が
「数」「代名詞」「非自立」「特殊」「接続詞的」「動詞非自立的」
に該当するものは除いた．また，平仮名だけからなる形態素も除いた．
なお，このときの分割可能な位置はスクリプトの出力結果の各行の終
りである．これは，段落の間で分割していることに相当する．

表\ref{tab:chap}，表\ref{tab:secnorec}，表\ref{tab:secrec}には，
このようにして得られたテキストを，分割対象の章や節の数を指定し
て，分割したときの精度を示す．ここで，表のタイトルに付記してい
る再帰的分割とは，\ref{eq:rec}節で述べた再帰的方法により分割し
た場合を示し，非再帰的分割とは，再帰的分割をしていない場合を示
す．また，精度とは，
\begin{displaymath}
  \frac{元の章や節と一致した分割位置の数}{章や節の分割位置の総数}
\end{displaymath}
である．ただし，章や節の数を$n$とすると，分割位置の数は，$n-1$
である．なお，本実験で分割数を指定している理由は，本実験の目的
が，指定された粒度の分割をどの程度の精度で実現できるかを調べる
ことにあるからである．粒度を指定した分割は，長い文書から，必要
に応じた長さの要約を得るときに重要である
\cite{nakao00:_algor_one_summar_long_text}．

\begin{table}[htbp]
  \begin{center}
    \caption{分割結果と章の区切れとの対応(非再帰的分割)}
    \begin{tabular}{|c|ccc|}\hline
                   & 章の数 & ±1の精度     & ±0の精度\\ \hline
      昭和６０年度 & 13     & 0.42 (0.019) & 0.33 (0.006)\\
      昭和６２年度 & 22     & 0.52 (0.021) & 0.29 (0.007)\\
      昭和６３年度 & 13     & 0.50 (0.021) & 0.42 (0.007)\\
      平成元年度   & 13     & 0.50 (0.020) & 0.42 (0.007)\\
      平成２年度   & 13     & 0.50 (0.020) & 0.42 (0.007)\\\hline
      平均         &        & 0.49 (0.020) & 0.37 (0.007)\\\hline
    \end{tabular}
    \label{tab:chap}
  \end{center}
\end{table}

\begin{table}[htbp]
  \begin{center}
    \caption{分割結果と節の区切れとの対応(非再帰的分割)}
    \begin{tabular}{|c|ccc|}\hline
                   & 節の数 & ±1の精度     & ±0の精度\\ \hline
      昭和６０年度 & 63     & 0.29 (0.10) & 0.13 (0.033)\\
      昭和６２年度 & 96     & 0.17 (0.10) & 0.07 (0.032)\\
      昭和６３年度 & 65     & 0.34 (0.11) & 0.16 (0.038)\\
      平成元年度   & 64     & 0.37 (0.11) & 0.19 (0.036)\\
      平成２年度   & 64     & 0.38 (0.11) & 0.18 (0.036)\\\hline
      平均         &        & 0.31 (0.10) & 0.14 (0.035)\\\hline
    \end{tabular}
    \label{tab:secnorec}
  \end{center}
\end{table}

\begin{table}[htbp]
  \begin{center}
    \caption{分割結果と節の区切れとの対応(再帰的分割)}
    \begin{tabular}{|c|ccc|}\hline
                   & 節の数 & ±1の精度   & ±0の精度\\ \hline
      昭和６０年度 & 63     & 0.50 (0.10) & 0.31 (0.033)\\
      昭和６２年度 & 96     & 0.45 (0.10) & 0.32 (0.032)\\
      昭和６３年度 & 65     & 0.48 (0.11) & 0.28 (0.038)\\
      平成元年度   & 64     & 0.56 (0.11) & 0.38 (0.036)\\
      平成２年度   & 64     & 0.57 (0.11) & 0.40 (0.036)\\\hline
      平均         &        & 0.51 (0.10) & 0.34 (0.035)\\\hline
    \end{tabular}
    \label{tab:secrec}
  \end{center}
\end{table}

これらの表において，「±0の精度」とは，システムによる分割位置が，
元文書の分割位置と正確に同一な場合を一致としたときの精度である．
また，「±1の精度」とは，正確に同一な場合に加えて，前後1行のず
れまでを許容して一致としたときの精度である．なお，それぞれの精
度を示す列において，括弧内の数値は，精度のベースライン
\begin{equation}
  \label{eq:bl}
  \frac{テキストにおいて一致と判定する許容範囲のサイズの合計}{テキストのサイズ}
\end{equation}
である\cite{nakao99}\footnote{\cite{nakao99}では，(\ref{eq:bl})
  式を再現率のベースラインとしているが，本実験の場合には，分割
  数を指定しているので，再現率と精度が一致する．}．ただし，本実
験の場合には，サイズは行数でカウントする．

まず，表\ref{tab:chap}における，章の数を分割数としたときの分割
精度を見る．表\ref{tab:chap}では，±1の精度の平均が0.49であり，
±0の精度の平均が0.37である．ここで，
\cite{reynar99:_statis_model_topic_segmen}では，英文テキスト4文
書について，彼の手法による分割結果が，平均0.25の精度で章の区切
れと一致することを述べていて，
\cite{nakao00:_algor_one_summar_long_text}では，ベースラインが
0.005〜0.01のとき，F値\footnote{これは，我々の精度に相当する．
  なお，F値(=$\frac{2 \times 再現率 \times 適合率}{再現率+適合
    率}$)は，\cite{nakao00:_algor_one_summar_long_text}のTable
  3 から計算で求めた．}が，0.31〜0.39である．これらの結果は，±
0の精度に対応するが，テキストが違うため，直接比較することは不可
能である．しかし，数値だけを比較するならば，我々の方法は，章の
分割に関しては，これらの方法と比べて，少なくとも同等程度に章の
区切れを再現していると考える．

次に，節の数を指定したときの分割精度を表\ref{tab:secnorec}と表
\ref{tab:secrec}に示す．また，表\ref{tab:num}には，最小コスト解
による分割数と章や節の数とを示す．

表\ref{tab:secnorec}は，再帰をせずに，分割数を指定して分割した
ときの精度を示している．このとき，±1の精度の平均が0.31であり，
±0の精度の平均が0.14である．一方，再帰的分割をしたときには，表
\ref{tab:secrec}に示すように，±1の精度の平均が0.51であり，±0
の精度の平均が0.34である．これから分かるように，最小コスト解よ
りも粒度の細かい分割が必要なときには，再帰的分割をした方が精度
良く分割ができる．なお，
\cite{nakao00:_algor_one_summar_long_text}では，ベースラインが
0.035のときにF値が0.29であるので，再帰的分割による方法は，
\cite{nakao00:_algor_one_summar_long_text}と比べて，少なくとも
同等程度に節の区切れを再現していると考える．

\begin{table}[htbp]
  \begin{center}
    \caption{最小コスト解による分割数と章や節の数}
    \begin{tabular}{|c|ccc|}\hline
                   & 最小コスト解による分割数 & 章の数 & 節の数  \\\hline
      昭和６０年度 & 13 & 13     & 63     \\
      昭和６２年度 & 12 & 22     & 96    \\
      昭和６３年度 & 11 & 13     & 65     \\ 
      平成元年度   & 12 & 13     & 64     \\
      平成２年度   & 12 & 13     & 64     \\\hline
    \end{tabular}
    \label{tab:num}
  \end{center}
\end{table}

\vspace*{20pt}

