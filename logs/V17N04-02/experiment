評価実験 \label{sec:evaluation}


\subsection{評価データ}

Googleの検索結果を人手により分類したものを評価用の正解データとして用いた．
正解データ作成にあたり20代の男女10人に協力を頼んだ．
協力者が自由にクエリを入力して，
Googleの検索結果上位30件を
タイトルとスニペットのみから分類してもらい，
15セットの正解データ
（平均クラスタ数 3.6，最大クラスタ数 5，最小クラスタ数 2，
クラスタに含まれる文書数の平均 9.040）を得た．
正解データ作成のために協力者が選んだクエリを表{\ref{tab:query}に示す．
検索結果を30件としたのは，検索エンジンのユーザの54\%が上位10件以内，
73\%が上位20件以内の検索結果しか閲覧しないという調査結果\cite{Jansen03}から，
検索結果30件をクラスタリングすることで十分な情報をユーザに与えられると
考えたためである．
なお，情報の少なさや内容の曖昧さから協力者が分類できないと判断した文書や
文書数が1であるクラスタは正解データから除外した．


\begin{table}[t]
    \caption{評価に用いたクエリ} \label{tab:query}
\input{03table01.txt}
\end{table}


\subsection{評価方法}

本研究の手法と比較手法のそれぞれを用いて，15セットの評価データの
クラスタリングを行い，その性能を比較した．
比較手法は，名詞の重み上位順に（\ref{sec_weight}節の概要の(1)のリスト$S$の順に）
指定されたクラスタ数だけ重要語を抽出し，重要語を含む文書集合を文書クラスタとするという，
\ref{sec:intro}章で述べた従来手法\cite<e.g.,>{Hirao06,Narita03,Zamir98}とした．

両手法において，名詞の重み付けには\ref{subsubsec:weight}節の手法を用いた．
また，システムが出力するクラスタ（以下，システムクラスタと呼ぶ）
の数$n$は各正解データセットのクラスタ数とした．
なお，正解クラスタ数より少ない重要語しか抽出できなかった場合には，
空のクラスタを出力したとみなして評価を行った．
さらに，提案手法によるクラスタリングにおいて，
\ref{sec_WM}節における閾値を$C_W=2$，$C_{WM}=0.6$と設定した．


\subsection{評価基準}

評価基準として，F値，CR (clustering ratio), OR (overlapping ratio) を用いる．
これらの値はすべて各データセットごとに計算する．

クラスタリングの精度を表すF値は以下の手順で求めることができる\cite{Orihara08}．
まず，システムクラスタ$SC_i\ (1 \leq i \leq n)$と正解クラスタ$AC_j\ (1 \leq j \leq n)$
のすべての対に対して，F値$F(SCi,ACj)$を次式で計算する．
\begin{align}
F(SC_i, AC_j) &= \frac{2 \times R(SC_i, AC_j) \times P(SC_i, AC_j)}{R(SC_i, AC_j) + P(SC_i, AC_j)}\\
R(SC_i, AC_j) &= \frac{|SC_i \cap AC_j|}{|AC_j|}\\
P(SC_i, AC_j) &= \frac{|SC_i \cap AC_j|}{|SC_i|}
\end{align}
次に，次式の$F(M)$が最大となるようなシステムクラスタと正解クラスタの一対一対応$M$を求め，
そのときの値をこのシステムクラスタの F 値とする．
\begin{equation}
  F(M) = \sum_{(SC_i,AC_j)\in{M}} \frac{|AC_j|}{\sum_{k=1}^n |AC_k|}\ F(SC_i,AC_j)
\end{equation}
これは，システムクラスタと正解クラスタを2つの頂点集合として，
それらの間の枝の重みを$\frac{|AC_j|}{\sum_{k=1}^n |AC_k|}F(SC_i, AC_j)$とする
二部グラフの最大マッチング問題を解くことに相当する．

CRは文書集合のうちのどれだけの割合の文書をクラスタに分類できるかを
表しており，次式で計算される\cite{Narita03}．
なお，{$N$}は検索結果の文書数である．
\begin{equation}
CR = \frac{\displaystyle\left|\bigcup_{i=1}^n SC_i\right|}{N}
\end{equation}
本研究で扱っている共通の語句に基づくクラスタリング手法では，
どのクラスタにも属さない文書が生じてしまう可能性がある．
したがってCRが高い（1に近い）ほうが望ましい結果であると言える．

ORはクラスタ間で文書が重複する割合の平均であり，次式で計算される．
\begin{equation}
OR = \frac{1}{{ }_n{C}_2} \sum_{i=1}^n \sum_{j=i+1}^n \frac{|SC_i \cap SC_j|}{|SC_i \cup SC_j|}
\end{equation}
この値は単純に低いほど（もしくは高いほど）望ましいというわけではなく，
正解クラスタのOR値に近いほうが望ましい結果であると言える．



評価結果と考察

本章では，\ref{sec:evaluation}章で述べた評価実験について，
以下の観点から評価結果を述べるとともに，考察を行う．

\begin{itemize}
\item クラスタリングの精度：正しい分類をしているか
\item クラスタリングの被覆度：どのくらいの文書をクラスタリングできるか
\item システムクラスタ間の類似度：過度に類似したクラスタを出力していないか
\item 単語グループの必要性：互いに類似していない重要語を抽出するだけでは不十分か
\item 複合名詞の抽出手法：\ref{sec_WM}節における複合名詞抽出はどの程度影響があるか
\end{itemize}

なお，以下で示す評価値はすべて各セットごとに求めた値の平均値を用いている．



\subsection{クラスタリング精度} \label{subsec:F}

クラスタリングの精度を示す評価基準であるF値の結果（全セットの平均値）を表\ref{tab_F}に示す．
なお，表\ref{tab_F}（およびこれ以降の表）において，
「本手法」の値として「単語グループ無」と「単語グループ有」の2種類の値が
示されている．「単語グループ有」の値は，\ref{sec:method}章で述べた
提案手法による評価結果を示している．一方，「単語グループ無」の値は
「\ref{subsec:overview}節の概要の手順(5)の単語クラスタリング
（\ref{subsec:word_clustering}節）を行わず，
手順(4)で抽出した重要語を含む文書の集合を文書クラスタとする方法」
による評価結果である．
つまり，本研究の提案手法と従来手法の中間に位置する手法と言える．
単語グループを用いずに文書クラスタリングを行った場合の評価結果を示したのは，
\ref{subsec:necessity}節で単語グループの必要性（類似していない重要語の抽出だけで十分かどうか）
を検証するためである．

\begin{table}[t]
\caption{各手法におけるF値} \label{tab_F}
\input{03table02.txt}
\end{table}

表\ref{tab_F}より，全ての重み付け手法において，本手法のF値は従来手法よりも高くなった．
また従来手法と本手法（単語グループ有）間で平均値の差の検定を行ったところ，
df，tf以外での重み付け手法において有意差が見られた ({$p<0.05$})．
df と tf についても平均値の差は有意傾向 (df：{$p=0.061$}，tf：{$p=0.067$})となった．
この結果から，本手法は従来手法よりもクラスタリング精度が高い（人手に近いクラスタリン
グを行うのに有効である）と言える．
さらに，単語グループを考慮しなくても従来手法より性能が高いことから，
\ref{sec_weight}節の重要語の抽出手法そのものも有効であると言える．

特に，TRは検索結果を分類するのに有用な (discriminative) 単語が
上位にランクされやすい指標である\cite{Gelgi07}ので，TRに従来手法を
適用しただけで意味的に類似したクラスタを生成しにくくなる可能性がある．
しかし，従来手法のTRのF値（0.511）は本手法よりも有意に低い値である
ことから，この可能性は排除できる．つまり，表\ref{tab_F}の結果は，
本研究の手法に基づいて重要語を抽出するほうがTRによるランキングに
基づく手法よりも性能が高いことを示している．



\subsection{クラスタリングの被覆度} \label{subsec:CR}

クラスタの被覆度（クラスタに含まれる文書の割合）を表す評価基準である
CRの結果（全セットの平均値）を表\ref{tab_CR}に示す．
表\ref{tab_CR}より，全ての重み付け手法において，本手法のCRは従来手法
よりも高くなった．
また従来手法と本手法（単語グループ有）間で平均値の差の検定を行ったところ，
全ての重み付け手法において有意差が見られた ({$p<0.05$})．
この結果から，本手法は従来手法よりも多くの文書を
分類できると言える．
さらに，単語グループを考慮しなくても従来手法よりCRが高いことから，
互いに意味的に類似しない単語のみを抽出する本研究の重要語抽出手法
そのものがより多くの文書を分類するのに有効であると言える．

\begin{table}[t]
    \caption{各手法におけるCR} \label{tab_CR}
\input{03table03.txt}
\end{table}
\begin{table}[t]
    \caption{各手法における平均クラスタサイズ} \label{tab_Size}
\input{03table04.txt}
\end{table}


しかし，本研究では非排他的クラスタリングを行っているので，単純に
より多くの文書をひとつのクラスタに含めてしまえば，つまり，クラスタ
のサイズを大きくしてしまえば，不適切にCRを高くすることが可能である．
そこで，適切なクラスタサイズを保ちつつ本手法のCRが高くなっているか
どうかを調べるために，表\ref{tab_Size}に平均クラスタサイズ
（各クラスタに含まれる文書数の平均）を示す．
表\ref{tab_Size}を見ると，本手法（単語グループ有）のクラスタサイズは
従来手法よりは大きくなっているものの，正解データの平均クラスタサイズ
である 9.040 を大幅に越えるものはない．
（重み付け手法がdfの場合にクラスタサイズが大きくなっているが，
これは従来手法と本手法に共通した現象であり，本手法だけが不当に
クラスタサイズを大きくしているわけではない．）
さらに，単語グループを考慮しない場合には従来手法よりもクラスタサイズ
が小さくなっている．
よって，本手法は，不当にクラスタサイズを大きくせずに，より多くの
文書を分類することができると結論づけられる．


\subsection{クラスタ間の類似度}

\ref{sec:intro}章で述べた，不適切に類似したクラスタを出力してしまう
という従来手法の問題点が本手法で解決されているかどうかを評価するために，
クラスタ間の重複割合の平均値であるORの結果（全セットの平均値）を
表\ref{tab_OR}に示す．
全ての重み付け手法において，本手法のORは従来手法よりも低い値であり，
正解クラスタの値（0.029）にかなり近くなっている．
したがって，本手法は従来手法よりも類似したクラスタを出力しにくく，
従来手法の問題点を解決していると言える．

\begin{table}[t]
    \caption{各手法におけるOR} \label{tab_OR}
\input{03table05.txt}
\vspace{-1\baselineskip}
\end{table}


\subsection{単語グループの必要性} \label{subsec:necessity}

本節では，本手法において単語グループを用いる場合と用いない場合の評価結果を
比較することによって，単語グループを用いてクラスタリングすること
の必要性を検証する．

表\ref{tab_F}と表\ref{tab_CR}から，重み付け手法に関係なく，
単語グループを用いたほうが用いないよりもF値，CRともに高い
ことがわかる．
この結果は，単語グループの必要性を支持している．

表\ref{tab_Size}のクラスタサイズに注目すると，単語グループを
用いない場合には，正解データのクラスタサイズである 9.040 より
かなり小さいサイズになっている．これは，本研究の重要語抽出方法が
出現頻度が低い名詞を抽出しやすいためである．
一方，単語グループを用いた本手法のクラスタサイズは正解データの
サイズ 9.040 と同程度である．
したがって，出現頻度が低い単語が重要語として抽出された場合でも，
単語グループを用いることによって適切なクラスタサイズの文書クラ
スタを生成できると言える．
つまり，クラスタサイズの点からも単語グループが必要であると結論できる．

なお，表\ref{tab_OR}のクラスタ間の類似度 OR は単語グループの
有無による差はほぼなく，単語グループを用いることは類似した
クラスタを出力しないという利点そのものには貢献していない．
しかし，単語グループを用いない場合と同程度のクラスタ類似度の
ままで性能（F値，CR）を向上させていることになり，総合的に
単語グループの必要性を示しているといえる．


\subsection{複合名詞の抽出手法の評価} \label{subsec:marge}

本節では，{\ref{sec_WM}}節で述べた複合名詞の抽出手法の性能を評価するために，
この抽出手法を用いる場合と用いない場合の評価結果の比較を行う．

まず，{\ref{sec_WM}}節の単語合成手法で実際に抽出された複合名詞の例を表{\ref{tab:exe_WN}}に示す．
{\ref{sec_WM}}節で意図したように，「情報」や「限定」などの一般的な単語に代わり，
「店舗情報」，「限定発売」などの具体的な話題を表す複合名詞が抽出されている．
また，形態素解析では複数の名詞に分割されてしまう「綿陽」のような地名や
「ブロードバンド」のような専門用語も正しく抽出されている．

\begin{table}[b]
\caption{単語合成手法で抽出された複合名詞の例（括弧内は形態素解析による区切りを表す）} 
\label{tab:exe_WN}
\input{03table06.txt}
\end{table}
\begin{table}[b]
    \caption{複合名詞抽出の有無によるF値の比較} \label{tab:nomarge_F}
\input{03table07.txt}
\end{table}
\begin{table}[b]
    \caption{複合名詞抽出の有無によるCRの比較} \label{tab:nomarge_CR}
\input{03table08.txt}
\end{table}

次に，複合名詞抽出を行う場合と行わない場合のF値，CR，ORをそれぞれ表{\ref{tab:nomarge_F}}，
表{\ref{tab:nomarge_CR}}，表{\ref{tab:nomarge_OR}}に示す．
表{\ref{tab:nomarge_F}}より，本手法では全ての重み付け手法で複合名詞抽出を行うほうが
行わないよりもF値が高いことがわかる．
一方，従来手法では，重み付け手法がLP，TRのときに複合名詞抽出を行うほうがF値が
高くなるものの，その他の重み付け手法では同じ値となった．
また表{\ref{tab_CR}}と表{\ref{tab_OR}}より，CRとORは従来手法，本手法の
全ての重み付け手法においてほぼ同じ結果となった．
以上の結果から，複合名詞抽出はクラスタリングの被覆度やクラスタ間の類似度には
あまり影響を与えないが，本手法のクラスタリング精度を向上させる効果があると結論できる．
また，語句間の類似度を考慮しない従来方法に対しては，複合名詞抽出はほとんど効果が
ないと言える．


\begin{table}[b]
    \caption{複合名詞抽出の有無によるORの比較} \label{tab:nomarge_OR}
\input{03table09.txt}
\end{table}
\begin{table}[b]
    \caption{クエリ「伊右衛門」における重要語，単語グループ，文書クラスタ} \label{tab:exe_iemon}
\input{03table10.txt}
\end{table}


\subsection{生成されたクラスタについて} \label{subsec:qualty}

本節では，評価に用いたデータセットに対するクラスタリング結果の実例を
示すことによって，本手法を定性的に考察する．
表{\ref{tab:exe_iemon}}〜{\ref{tab:exe_choco}}に，
いくつかのクエリによる検索結果を
本手法でクラスタリングした結果（重要語，単語グループ，文書クラスタ）を示す．

表{\ref{tab:exe_iemon}}のクエリ「伊右衛門」による検索結果のクラスタリング例では，
3種類のクラスタ
（サントリーから発売されている緑茶「伊右衛門」，京極夏彦の小説「嗤う伊右衛門」，
「伊右衛門」をタイトルに含むブログ）が生成されているが，これらのクラスタは正解
クラスタと一致する．
一方，従来手法では，どの重み付け手法でも「ブログ」に関する単語
（表{\ref{tab:exe_iemon}}では「日記」）が重要語として抽出されず，
代わりに緑茶に関する単語（サントリー，飲料，緑茶など）が重複して
重要語として抽出されてしまう．

\begin{table}[t]
    \caption{クエリ「四川」における重要語，単語グループ，文書クラスタ} \label{tab:exe_shisen}
\input{03table11.txt}
\end{table}
\begin{table}[t]
  \begin{center}
\caption{クエリ「チョコボール」における重要語，単語グループ，文書クラスタの例} 
\label{tab:exe_choco}
\input{03table12.txt}
\end{table}

表{\ref{tab:exe_shisen}}や表{\ref{tab:exe_choco}}の例を見ても，
表{\ref{tab:exe_iemon}}と同様に，類似する単語が重要語として選ばれておらず，
それらの重要語を核とする単語グループには，
同じ話題を表す同義語や関連語
（例えば，表{\ref{tab:exe_shisen}}の「地震」から「震源」や「ニュース」）
が適切に分類されている．
また，表{\ref{tab:exe_choco}}において，
重要語「エンゼル」から「金」，「銀」，「確率」といった単語が選ばれ，
「金（または銀）のエンゼルが当たる確率に関するページ集合」というように，
文書クラスタの内容が推測しやすくなる単語グループも見られる．
しかし，「商品」や「サイト」といった広い意味を持つ一般的な単語が
単語グループに含まれてしまうために，結果的に
文書クラスタの精度が下がってしまう例
（表{\ref{tab:exe_shisen}}の「ゲーム」における「サイト」）
も見受けられる．



