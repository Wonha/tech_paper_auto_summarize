提案する手法の概要は以下の通りである．
ユーザの入力したクエリを受け取り，Googleによる検索結果のタイトルとスニペットを文書として取得する．
本論文の以下では，各ページのタイトルとスニペットをひとつの「文書」と呼ぶ．
各文書に対して，茶筌(http://chasen-legacy.sourceforge.jp/)を用いて形態素解析を行う．
形態素解析で名詞・英字と判断された単語から，複合名詞を含む名詞を抽出する．
抽出した名詞から，クラスタの話題を表すと考えられる互いに類似していない重要語を，指定された文書クラスタ数だけ抽出する．
手順(3)で抽出されたすべての単語に対して，各重要語から単語グループを生成する．
単語グループを用いて，文書クラスタを生成する．
以下の[REF_sec_WM]節から[REF_sec_bun]節では，上記の手順(3)から(6)の各処理の詳細を述べる．
まず形態素解析により名詞及び英字と判断された単語を抽出する．
この際に，非自立の名詞や代名詞などは除き，英字の連続はひとつの名詞とする．
また，各単語[MATH]の文書頻度[MATH]（[MATH]を含む文書数）を検索結果の文書集合全体から計算し，一定値[MATH]以下の単語を除外する．
さらにクエリ及びクエリの一部となる単語は，ほぼ全ての文書に出現するため，手順(4)の重要語の抽出に大きな影響を及ぼすので除外する．
次に，これらの単語から構成される名詞の[MATH]グラム（複合名詞）を，重要語候補として抽出すべきかどうかを判断する．
例えば，文書集合中で「情報」や「検索」という名詞が，ほぼ「情報検索」という複合名詞でしか用いられていない場合には，「情報検索」をひとつの単位として抽出すべきである．
また，形態素解析が固有名詞と認識できないために不適切に分解されてしまう固有名詞（例：「エースコック」）を適切に抽出することも意図している．
以下の手法により，重要語の候補として抽出すべき（複合名詞を含む）名詞を決定する．
[MATH]（すべての単語の集合），[MATH]とする．
[MATH]とする．
集合[MATH]中の単語[MATH]と，集合[MATH]中の単語[MATH]のすべての組み合わせ（ただし[MATH]）に対して，以下の処理を行う．
2つの単語をつなぎ合わせた語句[MATH]，[MATH]のうちで，全文書における出現頻度が高い方を合成候補[MATH]とする．
ただし，一方の単語がもう一方の単語を部分文字列として含む場合には，合成はせずに長いほうの単語を[MATH]とする．
全文書における[MATH]，[MATH]及び[MATH]の出現頻度（[REF_sec_weight]節の式([REF_eqn:tf])で定義される）をそれぞれ[MATH]，[MATH]，[MATH]としたとき，次式で定義される値[MATH]を計算する．
上記で計算した[MATH]が閾値[MATH]以上ならば，[MATH]，[MATH]，[MATH]とする．
つまり，[MATH]，[MATH]の代わりに[MATH]を複合名詞として用いることになる．
[MATH]ならば，[MATH]を複合名詞（重要語候補）の集合として終了する．
[MATH]ならば，[MATH]を1増やしてから手順(2)に戻る．
閾値[MATH]を適切に（0.5より大きく）設定することによって，[MATH]や[MATH]が単独で出現するよりも複合名詞[MATH]として出現することが多い場合に，複合名詞として抽出することができる．
なお，本論文の以下では，複合名詞を含む重要語候補（[MATH]の要素）のことを単に「名詞」や「単語」と表記する．
前節で得られた名詞集合[MATH]から，以下の手順を用いて，重要語を抽出する．
抽出されたすべての名詞に対して，[REF_subsubsec:weight]節で述べる重み付け手法を用いて，ランク付けする．
結果として得られた名詞のランク付きリストを[MATH]とする．
リスト[MATH]の中でランクの最上位にある名詞を取り出して，重要語とする．
抽出した重要語との類似度（[REF_subsubsec:cosine]節参照）が基準値[MATH]以上のすべての名詞をリスト[MATH]から取り除く．
なお，[REF_subsubsec:threshold]節で述べるように，基準値[MATH]は文書集合に応じて自動的に決定する．
重要語の個数が指定されたクラスタ数[MATH]に満たない場合には，手順(2)に戻る．
上記の手順(3)において，抽出された重要語と話題が類似する名詞を重要語（クラスタのベースとなる語）としないことによって，本手法は重要語どうしの類似度が低くなるように重要語を抽出する．
なお，[REF_sec:intro]章で述べた従来の手法は，手順(1)で得られるリスト[MATH]のランク上位[MATH]個をクラスタのベースとなる重要語として抽出することに相当する．
上記の手順(1)における名詞の重み付け手法としては，以下の基準が考えられる．
なお，[REF_sec:evaluation]章で述べる評価実験では，これらのどの基準を用いても本手法のほうが優れていることを示す．
名詞[MATH]の出現する文書数である[MATH]の値が大きいほど，その名詞が重要であると考える．
なお，計算に用いる文書は検索結果の文書集合全体である．
次式で計算される文書集合中の総出現頻度[MATH]が高い名詞が重要であると考える．
ただし，[MATH]は文書[MATH]における単語[MATH]の出現数，[MATH]は文書数をそれぞれ表す．
次式で定義されるtfidf値が高い（特定の文書に多く出現する）名詞が重要であると考える．
tfidf(w_{i}) &= tf(w_i) \times idf(w_i)
idf(w_i) &= log_{2} \left( \frac{N}{df(w_{i})} \right) + 1
次式で定義される[MATH]もしくは[MATH]が高い，つまり検索結果のランキング上位の文書に多く含まれる名詞ほど重要であるとする指標である．
SP(w_{i}) &= \sum_{j=1}^{N} \left[ tf(w_{i},d_{j}) \times sin\left({1+\sqrt{j}}\right) \right] \times idf(w_{i})
LP(w_{i}) &= \sum_{j=1}^{N} \left[ tf(w_{i},d_{j}) \times log_{N}\left(\frac{N}{j}\right) \right] \times idf(w_{i})
ただし，[MATH]はサーチエンジン（本研究ではgoogle）の検索結果のランキングが[MATH]番目の文書を表す．
[MATH]は単語をノード，共起の有無をエッジとするグラフのPageRankのように計算される値であり，[MATH]が高い（つまり重要な）単語と多く共起している単語は重要であると考える指標である．
ただし，{[MATH]}は{[MATH]}と{[MATH]}の共起回数，{[MATH]}は繰り返し計算回数を表し，{[MATH]}である．
上記の手順(3)において，名詞どうしの類似度[MATH]（抽出された重要語とリスト[MATH]に含まれる名詞との類似度）には，次式のコサイン(cos)類似度を用いる．
つまり，名詞[MATH]を，文書[MATH]における出現頻度[MATH]を要素とする[MATH]次元ベクトルで表現したときのコサイン類似度に相当する．
基準値[MATH]が0.05〜0.5（0.05刻み）のいずれかの値をとるものとして，それぞれの値で実際に文書クラスタリングを行い，最も多くの文書を分類できる（つまりどのクラスタにも属さない文書が最も少ない）値を基準値[MATH]として採用する．
ただし抽出した重要語が指定したクラスタ数に満たなかった場合には，指定したクラスタ数に最も近いものの中での最適値を基準値とする．
なお，この判定に用いる文書クラスタリング手法は，[REF_subsec:word_clustering]節で述べる単語グループを用いた方法ではなく，本節で述べた方法で抽出した重要語を含む文書をクラスタとする方法である．
前節の方法で得られた重要語に対して，以下のアルゴリズムを用いて単語グループを生成する．
各重要語[MATH]に対応する単語グループ[MATH]を以下の方法で生成する．
重要語[MATH]とのcos類似度（([REF_eqn:cosine])式）が基準値[MATH]以上の名詞（重要語は除く）をリスト[MATH]からすべて抽出する．
抽出した名詞集合に対し，重要語[MATH]とのcos類似度の平均値[MATH]を求める．
重要語[MATH]とのcos類似度が平均値[MATH]以上の名詞のみを，その重要語を核とした単語グループ[MATH]に含める．
複数の単語グループに含まれる名詞を，すべての単語グループから取り除く．
基準値[MATH]は0.05〜0.5（0.05刻み）のいずれかの値をとるものとし，それぞれの値で実際に文書クラスタリングを行い，最も多くの文書を分類できる値を基準値[MATH]として採用する．
この判別に用いる文書クラスタリング手法は，[REF_sec_bun]節で述べる手法を用いる．
以下のアルゴリズムを用いて，単語グループから文書クラスタを生成する．
単語グループ[MATH]に対応する空の文書クラスタ[MATH]を生成する．
以下の方法で，各文書[MATH]がどの文書クラスタに含まれるかを決定する．
文書[MATH]が単語グループ[MATH]の核となった重要語[MATH]を含んでいれば，文書[MATH]を単語グループに対応する文書クラスタ[MATH]に含める．
（複数の重要語[MATH]を含んでいれば，複数の文書クラスタに属することになる．
）
全ての単語グループ[MATH]に対し，以下の式で定義される[MATH]を計算する．
S_i(d_j) &= \frac_{w_k\in{WG_i}}\delta(w_k,d_j) {|WG_i|}
\delta(w_k,d_j) &=
1 & \text{（名詞[MATH]が文書[MATH]に出現する場合）}
0 & \text{（名詞[MATH]が文書[MATH]に出現しない場合）}
\nonumber
そして，[MATH]の値が以下の不等式を満たすならば，文書[MATH]を文書クラスタ[MATH]に含める．
直観的に言うと，文書[MATH]が他の単語グループよりも単語グループ[MATH]の単語を多く含んでいれば，その文書は[MATH]に対応する文書クラスタ[MATH]に分類されることになる．
提案する手法の概要は以下の通りである．
ユーザの入力したクエリを受け取り，Googleによる検索結果のタイトルとスニペットを文書として取得する．
本論文の以下では，各ページのタイトルとスニペットをひとつの「文書」と呼ぶ．
各文書に対して，茶筌(http://chasen-legacy.sourceforge.jp/)を用いて形態素解析を行う．
形態素解析で名詞・英字と判断された単語から，複合名詞を含む名詞を抽出する．
抽出した名詞から，クラスタの話題を表すと考えられる互いに類似していない重要語を，指定された文書クラスタ数だけ抽出する．
手順(3)で抽出されたすべての単語に対して，各重要語から単語グループを生成する．
単語グループを用いて，文書クラスタを生成する．
以下の[REF_sec_WM]節から[REF_sec_bun]節では，上記の手順(3)から(6)の各処理の詳細を述べる．
まず形態素解析により名詞及び英字と判断された単語を抽出する．
この際に，非自立の名詞や代名詞などは除き，英字の連続はひとつの名詞とする．
また，各単語[MATH]の文書頻度[MATH]（[MATH]を含む文書数）を検索結果の文書集合全体から計算し，一定値[MATH]以下の単語を除外する．
さらにクエリ及びクエリの一部となる単語は，ほぼ全ての文書に出現するため，手順(4)の重要語の抽出に大きな影響を及ぼすので除外する．
次に，これらの単語から構成される名詞の[MATH]グラム（複合名詞）を，重要語候補として抽出すべきかどうかを判断する．
例えば，文書集合中で「情報」や「検索」という名詞が，ほぼ「情報検索」という複合名詞でしか用いられていない場合には，「情報検索」をひとつの単位として抽出すべきである．
また，形態素解析が固有名詞と認識できないために不適切に分解されてしまう固有名詞（例：「エースコック」）を適切に抽出することも意図している．
以下の手法により，重要語の候補として抽出すべき（複合名詞を含む）名詞を決定する．
[MATH]（すべての単語の集合），[MATH]とする．
[MATH]とする．
集合[MATH]中の単語[MATH]と，集合[MATH]中の単語[MATH]のすべての組み合わせ（ただし[MATH]）に対して，以下の処理を行う．
2つの単語をつなぎ合わせた語句[MATH]，[MATH]のうちで，全文書における出現頻度が高い方を合成候補[MATH]とする．
ただし，一方の単語がもう一方の単語を部分文字列として含む場合には，合成はせずに長いほうの単語を[MATH]とする．
全文書における[MATH]，[MATH]及び[MATH]の出現頻度（[REF_sec_weight]節の式([REF_eqn:tf])で定義される）をそれぞれ[MATH]，[MATH]，[MATH]としたとき，次式で定義される値[MATH]を計算する．
上記で計算した[MATH]が閾値[MATH]以上ならば，[MATH]，[MATH]，[MATH]とする．
つまり，[MATH]，[MATH]の代わりに[MATH]を複合名詞として用いることになる．
[MATH]ならば，[MATH]を複合名詞（重要語候補）の集合として終了する．
[MATH]ならば，[MATH]を1増やしてから手順(2)に戻る．
閾値[MATH]を適切に（0.5より大きく）設定することによって，[MATH]や[MATH]が単独で出現するよりも複合名詞[MATH]として出現することが多い場合に，複合名詞として抽出することができる．
なお，本論文の以下では，複合名詞を含む重要語候補（[MATH]の要素）のことを単に「名詞」や「単語」と表記する．
前節で得られた名詞集合[MATH]から，以下の手順を用いて，重要語を抽出する．
抽出されたすべての名詞に対して，[REF_subsubsec:weight]節で述べる重み付け手法を用いて，ランク付けする．
結果として得られた名詞のランク付きリストを[MATH]とする．
リスト[MATH]の中でランクの最上位にある名詞を取り出して，重要語とする．
抽出した重要語との類似度（[REF_subsubsec:cosine]節参照）が基準値[MATH]以上のすべての名詞をリスト[MATH]から取り除く．
なお，[REF_subsubsec:threshold]節で述べるように，基準値[MATH]は文書集合に応じて自動的に決定する．
重要語の個数が指定されたクラスタ数[MATH]に満たない場合には，手順(2)に戻る．
上記の手順(3)において，抽出された重要語と話題が類似する名詞を重要語（クラスタのベースとなる語）としないことによって，本手法は重要語どうしの類似度が低くなるように重要語を抽出する．
なお，[REF_sec:intro]章で述べた従来の手法は，手順(1)で得られるリスト[MATH]のランク上位[MATH]個をクラスタのベースとなる重要語として抽出することに相当する．
上記の手順(1)における名詞の重み付け手法としては，以下の基準が考えられる．
なお，[REF_sec:evaluation]章で述べる評価実験では，これらのどの基準を用いても本手法のほうが優れていることを示す．
名詞[MATH]の出現する文書数である[MATH]の値が大きいほど，その名詞が重要であると考える．
なお，計算に用いる文書は検索結果の文書集合全体である．
次式で計算される文書集合中の総出現頻度[MATH]が高い名詞が重要であると考える．
ただし，[MATH]は文書[MATH]における単語[MATH]の出現数，[MATH]は文書数をそれぞれ表す．
次式で定義されるtfidf値が高い（特定の文書に多く出現する）名詞が重要であると考える．
tfidf(w_{i}) &= tf(w_i) \times idf(w_i)
idf(w_i) &= log_{2} \left( \frac{N}{df(w_{i})} \right) + 1
次式で定義される[MATH]もしくは[MATH]が高い，つまり検索結果のランキング上位の文書に多く含まれる名詞ほど重要であるとする指標である．
SP(w_{i}) &= \sum_{j=1}^{N} \left[ tf(w_{i},d_{j}) \times sin\left({1+\sqrt{j}}\right) \right] \times idf(w_{i})
LP(w_{i}) &= \sum_{j=1}^{N} \left[ tf(w_{i},d_{j}) \times log_{N}\left(\frac{N}{j}\right) \right] \times idf(w_{i})
ただし，[MATH]はサーチエンジン（本研究ではgoogle）の検索結果のランキングが[MATH]番目の文書を表す．
[MATH]は単語をノード，共起の有無をエッジとするグラフのPageRankのように計算される値であり，[MATH]が高い（つまり重要な）単語と多く共起している単語は重要であると考える指標である．
ただし，{[MATH]}は{[MATH]}と{[MATH]}の共起回数，{[MATH]}は繰り返し計算回数を表し，{[MATH]}である．
上記の手順(3)において，名詞どうしの類似度[MATH]（抽出された重要語とリスト[MATH]に含まれる名詞との類似度）には，次式のコサイン(cos)類似度を用いる．
つまり，名詞[MATH]を，文書[MATH]における出現頻度[MATH]を要素とする[MATH]次元ベクトルで表現したときのコサイン類似度に相当する．
基準値[MATH]が0.05〜0.5（0.05刻み）のいずれかの値をとるものとして，それぞれの値で実際に文書クラスタリングを行い，最も多くの文書を分類できる（つまりどのクラスタにも属さない文書が最も少ない）値を基準値[MATH]として採用する．
ただし抽出した重要語が指定したクラスタ数に満たなかった場合には，指定したクラスタ数に最も近いものの中での最適値を基準値とする．
なお，この判定に用いる文書クラスタリング手法は，[REF_subsec:word_clustering]節で述べる単語グループを用いた方法ではなく，本節で述べた方法で抽出した重要語を含む文書をクラスタとする方法である．
前節の方法で得られた重要語に対して，以下のアルゴリズムを用いて単語グループを生成する．
各重要語[MATH]に対応する単語グループ[MATH]を以下の方法で生成する．
重要語[MATH]とのcos類似度（([REF_eqn:cosine])式）が基準値[MATH]以上の名詞（重要語は除く）をリスト[MATH]からすべて抽出する．
抽出した名詞集合に対し，重要語[MATH]とのcos類似度の平均値[MATH]を求める．
重要語[MATH]とのcos類似度が平均値[MATH]以上の名詞のみを，その重要語を核とした単語グループ[MATH]に含める．
複数の単語グループに含まれる名詞を，すべての単語グループから取り除く．
基準値[MATH]は0.05〜0.5（0.05刻み）のいずれかの値をとるものとし，それぞれの値で実際に文書クラスタリングを行い，最も多くの文書を分類できる値を基準値[MATH]として採用する．
この判別に用いる文書クラスタリング手法は，[REF_sec_bun]節で述べる手法を用いる．
以下のアルゴリズムを用いて，単語グループから文書クラスタを生成する．
単語グループ[MATH]に対応する空の文書クラスタ[MATH]を生成する．
以下の方法で，各文書[MATH]がどの文書クラスタに含まれるかを決定する．
文書[MATH]が単語グループ[MATH]の核となった重要語[MATH]を含んでいれば，文書[MATH]を単語グループに対応する文書クラスタ[MATH]に含める．
（複数の重要語[MATH]を含んでいれば，複数の文書クラスタに属することになる．
）
全ての単語グループ[MATH]に対し，以下の式で定義される[MATH]を計算する．
S_i(d_j) &= \frac_{w_k\in{WG_i}}\delta(w_k,d_j) {|WG_i|}
\delta(w_k,d_j) &=
1 & \text{（名詞[MATH]が文書[MATH]に出現する場合）}
0 & \text{（名詞[MATH]が文書[MATH]に出現しない場合）}
\nonumber
そして，[MATH]の値が以下の不等式を満たすならば，文書[MATH]を文書クラスタ[MATH]に含める．
直観的に言うと，文書[MATH]が他の単語グループよりも単語グループ[MATH]の単語を多く含んでいれば，その文書は[MATH]に対応する文書クラスタ[MATH]に分類されることになる．
