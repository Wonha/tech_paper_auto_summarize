本研究で対象とする例規とは，法特有の階層構造を有する文章である．
典型的な法では，例規名を表す「表題」，効力を発する日を記した「発令」，公布を宣言する「公布文」，例規の内容を記した「本則」，そして「制定附則」及び「改正附則」が第一番目の階層を構成する．
このうち本則は，「章」「節」／「条」「項」「号」の階層を有している．
図[REF_reikiStructure]に例規に共通する主要な階層構造を示す．
ただし，実際の例規では章が存在しない場合も多く，特に制定時期が古い例規ではこの階層構造に従わない場合もある事を付記する．
章と一部の条にはその内容を記載した見出しがついている．
図[REF_reikiExample]に愛媛県青少年保護条例から抜粋した本則の一部を記す．
図[REF_reikiExample]において章と条の右横に括弧で記載した文字列が章見出しおよび条見出しである．
例規比較を行う際には，対応する条文の関係を記した比較対照表が作成される．
この表を条文対応表と呼ぶ．
表[REF_reikiHikakuTable]に，愛媛県青少年保護条例と香川県青少年保護育成条例の条文対応表の典型例を記す．
表では，例規構造より表題，発令，公布文がまず並ぶ．
その後，二つの条例において対応する条が左右に並ぶという形をとっている．
条番号の一行上に書かれている括弧書きの文字列は条見出しである．
表より以下のような事がわかる．
愛媛県の第1条が香川県の第1条に，愛媛県の1条が香川県の4条に対応している．
香川県の第3条に対応する愛媛県の条文が存在しない．
香川県の第15条は，愛媛県の第12条と第13条の2つに対応している．
この表を利用する事により「青少年」の定義や，夜間の時間帯といった二つの条例の違いを網羅的に比較する事が行われている．
条文比較表において対応する条文は類似する事が多い．
これを示すため，表中で対応する両県の第一条の共通部分に下線を引いた．
愛媛県：この条例は、青少年の健全な育成を阻害する恐れのある行為から青少年を保護し、もって青少年の健全な育成をはかる事を目的とする。
香川県：この条例は、青少年の福祉を阻害するおそれのある行為を禁止し、その健全な保護育成を図る事を目的とする。
この場合，両方の条が大変よく一致している事がわかる．
次に対応する条の文字数に差がある包含関係にある例として，愛媛県の第13条の3と第10条の3を挙げる．
愛媛県：何人も、青少年に対し、ツーショットダイヤル等利用カード（ツーショットダイヤル等営業に関して提供する役務の数量に応ずる対価を得ることを目的として発行する文書その他の物品をいう。
以下同じ。
）を販売し、配布し、贈与し、又は貸し付けてはならない。
香川県：何人も、青少年に利用カードの販売等をしてはならない。
この例は「利用カード」の定義が条内で行われているか否により共通部分に偏りが出ている事を示している．
そのため，香川県側は24文字中18文字(75%)が一致しているが，愛媛県側は110文字中18文字(16%)が一致しているにすぎない．
ただし，共通部分が多い場合でも必ずしも対応する条であるとは限らない．
例として愛媛県の第5条の8と香川県の第10条の2を示す．
愛媛県：自動販売機等業者は、次に掲げる施設の敷地の周囲から200メートル以内の区域に、（中略）設置しないように努めなければならない。
(1)学校教育法（昭和22年法律第26号）第1条に規定する学校（大学を除く。
）
(2)児童福祉法（昭和22年法律第164号）第7条第1項に規定する児童福祉施設
(3)図書館法（昭和25年法律第118号）第2条第1項に規定する図書館
（後略）
香川県：卑わいな姿態等を被写体とした写真又は描写した絵を掲載した広告文書等は（中略）「有害広告文書等」（中略）とする。
2何人も、次に掲げる行為をしてはならない。
（中略）
(3)次に掲げる施設の敷地内において有害広告文書等の配布をすること。
ア学校教育法（昭和22年法律第26号）第1条に規定する学校（大学を除く。
）
イ図書館法（昭和25年法律第118号）第2条第1項に規定する図書館
（後略）
このように，共通部分が多い場合でも必ずしも対応するとは限らない事がわかる．
本研究で目的とする計算機支援を達成するためには，与えられた2条例より条文比較表を自動生成する必要がある．
そのためには，計算機で解決可能な形に問題をモデル化する必要がある．
一般に条文対応表は，その名の通り表として表現されているが，条の対応関係は多対多であり，また対応する条がない場合も存在する．
当然にして同一例規内の条の間には対応関係は存在しない．
また，例規の主要構造のうち対応関係を決める必要があるのは本則に属する条のみであり，制定附則や改正附則に属する条の対応関係を決める必要はない．
そこで，我々は条文比較表より本則の部分に着目し，各例規の本則に属する条を頂点とする2部グラフとしてモデル化する．
2部グラフを構成する2つの頂点集合は例規ごとに構成され，対応する条の間に辺が引かれる．
ここで2つの例規A, Bの条文対応表のモデルを以下のように定義する．
二部グラフ[MATH],ただし，
頂点[MATH]がAの本則に属する条に，[MATH]がBの本則に属する条に対応し，
辺[MATH]は，[MATH]と[MATH]が条文比較表において対応する事を表す．
図[REF_taiouhyou]に，愛媛県と香川県の青少年保護に関する条例の条文対応表を示す．
図中左側の四角が愛媛県側の，右側の四角が香川県側の各条を表す頂点である．
左右の頂点間の辺が，両県の条例における条の対応関係を表現している．
条文対応表の推定問題とは，2つの例規[MATH]を入力とし，法学者が作成する条文対応表と一致または類似した二部グラフ[MATH]を出力する問題と定義する．
条文対応表の推定問題は，入力として与えられる二例規の各条間の類似度を計算し，その類似度に基づき条文が対応するか否かを判定する事で解く事ができる．
本研究では，類似度の定義，すなわち類似尺度が与えられたとき以下のアルゴリズムによって条文の対応関係を推定する方法を提案する．
2つの例規A, B
二部グラフ[MATH]
2つの例規の本則に属する条に対応する頂点集合[MATH]を生成する．
2つの頂点[MATH]間の辺重みを条[MATH]間の類似度とする重み付き完全二部グラフ[MATH]を生成する．
[MATH]に属する各頂点[MATH]を端点とする辺集合[MATH]のうち，最も重みの大きい辺を二部グラフ[MATH]の辺集合[MATH]に加える．
[MATH]に属する各頂点[MATH]を端点とする辺集合[MATH]のうち，最も重みの大きい辺を二部グラフ[MATH]の辺集合[MATH]に加える．
二部グラフ[MATH]を出力する．
条文対応表では，図[REF_taiouhyou]に示したように一つの条に対して複数の条が対応する事例がある．
提案アルゴリズムでは両方の例規からではなく，Step3と4において一方の例規の条からみて類似度の最も高い条に対応関係があると判定した辺をグラフに追加している．
Step3とStep4は独立して辺，すなわち1つの条と対応関係にある条を選択しているため，一つの頂点が複数の辺の端点となりうる．
結果的にStep5において多対多の二部グラフ，すなわち多対多の関係を含む条文対応表が出力される．
前節のアルゴリズム内では条間の類似度を定義していない．
この類似度は，法学者が二条間に対応関係が存在する場合に大きい値を，対応関係が存在しない場合に小さい値をとる事が求められる．
しかしながら，法学者の暗黙知を適切に表現する類似尺度が明らかとなっていないため，本研究では既存の3種類の文書比較，文字列比較法に基づく類似尺度を用い，それらの比較評価を行った．
与えられた文章を，単語の出現頻度を表現したベクトルとしてモデル化する方法をベクトル空間モデルと呼ぶ[CITE]．
2つの文章に対応するベクトル間の距離を計算する事により，文章間の関連度を求める方法であり，情報抽出や情報フィルタリング等に用いられる．
距離尺度としては，コサイン，内積，マンハッタン距離やユークリッド距離等が用いられる．
要素数[MATH]個の単語集合[MATH]が与えられたとき，ベクトル空間モデルによりある文章[MATH]は長さ[MATH]のベクトル[MATH]で表現される．
ここで，[MATH]は，文章[MATH]中における単語[MATH]の出現回数である．
このベクトルはしばしばtf-idf (Term Frequenc, Inverse Document Frequency)に基づく重みが加味される．
この重みにより，多くの文章に出現する単語の重要度を下げ，特定の文章にしか出現しない単語の重要度を上げる事が可能となる．
本研究では，条文対応表作成問題における各条文をこのベクトル空間モデルでベクトル化し，2つのベクトルの距離によって対応関係の強さを数値化する．
なお，距離尺度としてコサインを用い，利用する単語を頻出順に10,50,100個選んだもの，及び全例規に出現する全単語の4種類を比較した．
ベクトルの重み付けについては，定数重み及びtf-idf重みの2種類を比較した．
また，利用する単語の品詞として，全品詞の利用，全品詞の原形を利用，名詞のみ利用，名詞，副詞，形容詞，動詞，連体詞の5種類を利用，の4種類を適用した．
例規の条文はその長さ，すなわち単語数や文字数の分散値が大きい．
これが本手法で計算される条文間の類似度は条文の長さの違いが影響を及ぼす可能性がある．
そこで類似度を2つの条文のうち短い方の条文の文字数で割る事で正規化した値も類似尺度とする．
以降，正規化前を「絶対スコア」，正規化後を「相対スコア」と呼ぶこととする．
以上によりベクトル空間モデルに基づく類似尺度数は，[MATH]個となる．
最長共通部分列(Longest Common Subsequence)とは，入力として与えられた2つの文字列における最長の共通部分文字列をいう[CITE]．
共通部分文字列とは，もとの文字列から文字を出現順序をかえずに取り出したものとなる．
今，二本の文字列[MATH], [MATH]が与えられたとする．
このとき最長共通部分列は，（アイエオ）となり，その長さは4である．
最長共通部分列は動的計画法により計算する事が可能である．
入力として2つの文字列[MATH]と[MATH]が与えられたとき，最長共通部分列長を求めるアルゴリズムは以下の通りである．
[MATH]行，[MATH]列の行列[MATH]を準備する
行列[MATH]の値を以下の漸化式によって計算していく
行列[MATH]の要素より最大値を出力する
本手法による条文の対応関係の強さは，最長共通部分列の長さとして定義する．
比較する単位としては，文字単位と単語単位の比較を行った．
文字単位では，ひらがなカタカナを含む全ての文字を対象とした場合と漢字のみを対象とした場合を，単語単位では，全品詞，全品詞の原形，名詞のみ，名詞，副詞，形容詞，動詞，連体詞の5種類の4つの場合の比較を行った．
また，本手法の性能比較では，入力として条見出しを用いた場合の評価も行った．
以上により最長共通部分列に基づく類似尺度数は，定数重みを用いたものが[MATH]個，tf-idf重みを用いたものが[MATH]個の合計16個となる．
文字列アライメントは，入力として与えられた文字列に存在する類似した領域を特定できるよう，文字列を整列させる事をいう．
この整列に必要とする文字・単語の挿入や削除，置換コストの合計値によって文字列間の類似度が定義される．
挿入・置換のコストを1，置換コストを2とした場合，レーベンシュタイン距離あるいは編集距離と呼ばれる類似尺度になる．
挿入等のコストの異なる例としては，生物情報学におけるアミノ酸配列（タンパク質）に適用される手法がある[CITE]．
この手法におけるコストは生物の進化において変化が発生する確率に基づいて決定されている．
文字列アライメントは，文字列を整列させるため，一致しない事を表す文字として「—」を用いる．
今，二本の文字列[MATH], [MATH]が与えられたとすると，(アイ—エオ)がアライメントである．
アライメントは，例えば一致した文字に2点を加点し，一致しない場合（「—」の場合）に2点を減点する，といった基準を設定する事により，類似度の数値が行われる．
上記のアライメントは6点となる．
与えられた基準において最も高い類似度を持つアライメントの計算には動的計画法が用いられる．
入力として2つの文字列[MATH]と[MATH]が与えられたとき，最も高い類似度を求めるアルゴリズムは以下の通りである．
[MATH]行，[MATH]列の行列[MATH]を準備する
[MATH]行及び，[MATH]列の値を[MATH]にする
行列[MATH]の値を以下の漸化式によって計算していく
行列Mの要素より最大値を出力する
ここで関数[MATH]は，文字[MATH]と[MATH]をアライメントさせた場合の点数であり，上記の例の場合[MATH]である．
また，定数[MATH]は，一致しない場合，すなわち「—」の時の点数であり，上記の例では[MATH]点である．
一般に最長共通部分列や文字列アライメントでは，共通部分文字列の順序は保存される．
しかし例規比較において対応させるべき条文は，必ずしも順序が保存されているとはいいがたい．
例として，愛媛県と香川県の青少年の保護に関する条例を挙げる．
愛媛県の5条の2及び香川県の8条の2はともに，有害ながん具類等の販売等の制限や禁止について規定している．
愛媛県では，青少年に対する有害がん具の所持制限，有害がん具の定義の順で記述しているのに対し，香川県では，有害がん具の定義，所持制限の順で記述されている．
表[REF_alignOrderReal]に該当部分の抜粋を記載する．
そこで，本研究では，アライメントアルゴリズムを再帰的に適用する事により順序関係が保存されていない条文へ対応した手法も用いた．
再帰的な適用法は，以下の通りである．
長さ[MATH]の文字列Aと長さ[MATH]の文字列B
文字列にアライメントを行う．
その結果，文字列Aの[MATH]〜[MATH]までの部分文字列と文字列Bの[MATH]〜[MATH]までの文字列のアライメントが得られたとする．
文字列Aと文字列Bの整列していない部分文字列の組合せ4種類に対してそれぞれアライメントを行う．
4種類の組合せは以下の通りである．
文字列Aの[MATH]〜[MATH]文字と文字列Bの[MATH]〜[MATH]文字
文字列Aの[MATH]〜[MATH]文字と文字列Bの[MATH]〜[MATH]文字
文字列Aの[MATH]〜[MATH]文字と文字列Bの[MATH]〜[MATH]文字
文字列Aの[MATH]〜[MATH]文字と文字列Bの[MATH]〜[MATH]文字
対角線に位置する(a)と(d)の類似度の和と(b)と(c)の類似度の和のうち大きい方のアライメント結果とStep1でえられたアライメント結果を出力する．
文字列アライメントによる条文の対応関係の強さは，再帰的に得られた各アライメントの類似度の値の和とした．
アライメントの単位としては，[REF_subsec:LCS]節に記した最長共通部分列と同様に文字単位と単語単位の比較を行った．
関数[MATH]の値としては，文字単位の場合は漢字が一致した場合に2点，漢字以外が一致した場合1点とし，単語単位の場合は各単語のtf-idfスコアを用いた．
以上により文字列アライメントに基づく類似尺度数は，定数重みを用いたものが[MATH]個，tf-idf重みを用いたものが[MATH]個の合計16個となる．
