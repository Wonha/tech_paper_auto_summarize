本節では，本研究で使用している質問応答システム[CITE]の概要を説明する．
この質問応答システムでは，利用者が自然言語で質問文を入力すると，各解候補のスコアに基づき，解候補群を順序付けて上位から利用者が指定した数だけ提示する．
各解候補のスコアは，知識源の文書中の，各解候補と質問文中に含まれるキーワードとの近さなどを基にしている．
本稿ではこれを優先順位型質問応答システムと呼ぶことにする．
本研究で使用している質問応答システムの全体の構成を図[REF_fig:Ranking-type-QA]に示す．
本システムは主に四つのモジュール，すなわち，質問文解析モジュール，文書検索モジュール，パッセージ検索モジュール，そして解抽出モジュールから構成されている．
解抽出モジュールの中には，解を整形するサブモジュールもある．
利用者が入力した質問文から質問応答に有用な情報を抽出するのが質問文解析モジュールの役割である．
解析により得られる情報を次に示す．
形態素解析および構文解析の結果
キーワード（質問文中の内容語）
人名，地名など質問の求める回答の種類を表す質問型
疑問詞に対応する数量表現（質問型が数量表現であった場合）
本モジュールは質問文解析により得られたキーワードを元に，文書検索を行う．
検索エンジンには，TFIDFによる語の重みづけとベクトル空間法による類似度尺度を用いて，与えられたキーワード集合と各文書の類似度を求めるものを採用している．
文書検索で得られた関連文書の中でも，質問の解となる情報が書かれているのはその一部だけである．
文書全体から解抽出を行なうことは計算量の面で非効率的なので，正解に関わる文脈を小さなコストで先に切り出しておいたほうがよい．
これを行うのがパッセージ検索モジュールである．
パッセージとは，文章における連続した一部分のことであり，パッセージ検索は文書集合から正解を含む可能性の高いパッセージを取り出すために行う．
本システムのパッセージ検索では，一パッセージを三文として抽出を行なっている．
パッセージを三文とした時の有効性は，村田ら[CITE]により考察されている．
それぞれのパッセージには，パッセージ中に出現するキーワードの異なり数などを基にしたスコアが付けられ，スコアが大きいパッセージが次の解抽出モジュールに渡される．
解抽出は，パッセージ検索までの処理で得られたパッセージから，質問の解を抜き出す処理である．
パッセージを文単位に分割し，それぞれの文（これを検索文と呼ぶ）と質問文とを照合することにより，解となる形態素を決定する．
スコアが高い形態素が得られたら，その形態素を中心にして最終的な解候補を生成する．
本システムの文照合は2-gram照合，キーワード照合，係り受け照合，質問型照合の四種の照合からなる．
それぞれの照合において照合の一致の度合に応じて検索文の文字または形態素にスコアが与えられ，全てのスコアの和がその形態素のスコアとなる．
そしてスコアの高い形態素から順に解候補が生成される．
2-gram照合とキーワード照合では，解を含む可能性の高い文の中で，ある形態素を解と仮定した時の質問文との照合の良さを，2-gramとキーワードの観点から測定する．
一方，質問型照合は，質問型と一致する形態素にスコアを与えるために行なわれる．
質問タイプには，人名，地名，組織名，その他数量表現などがある．
係り受け照合では，質問文と検索文との構造の一致の度合を見る．
本システムの係り受け照合では，一文対一文の照合を基本としているが，質問文の内容が検索文の二文以上にわかれて出現している場合もある．
そこで，このような場合には前文の最後の文節を次文の提題の文節に仮想的に係り受けさせるという手法で複数文を連結し，仮想的に一文であるとみなして質問文との照合を行なっている．
形態素[MATH]の最終スコアは，2 gram，キーワード，係り受け，質問型の各照合によって与えられたスコアの和[MATH]で表され，スコアの和の高い形態素[MATH]から，解を整形するサブモジュールを用いて解が作成される．
ここで，[MATH]は検索文である．
S(mor,L_i) = Sb(mor,L_i) + Sk(mor,L_i) + Sd(mor,L_i) +St(mor,L_i)
Sb(mor,L_i)&= 2 gram照合でのスコア
Sk(mor,L_i) &=キーワード照合でのスコア
Sd(mor,L_i)&=係り受け照合でのスコア
St(mor,L_i) &=質問型照合でのスコア
\nonumber
解を整形するモジュールで作られた解候補[MATH]のスコア[MATH]は，解を形成している形態素のうち，スコア[MATH]が最大のものとなる．
複数の異なる検索文から見つかった同じ解候補に対してより高いスコアを付与する，疑似的な多数決方式がこのシステムでは採用されている．
さまざまな質問応答システムにおいて，解候補の冗長性を解の選定に役立てることが有効であることが示されている[CITE][CITE]．
多数決方式はその一つである．
一方で，我々のシステムでは，探索制御が行なわれており指定される数の解が見つかった時点で残りの解候補を調べることはせずに探索を打ち切る．
そのため，探索の過程において，通常の多数決方式は採用できない．
しかし，指定された求める解の数は異なり数である．
そのため，指定された数になるまでにすでに求められている解と同じものが改めて見つかる可能性がある．
そこで，その時にはその解のスコアを出現回数に応じて高くしている．
以下では，複数回同じ解が求められた場合，その解に複数投票が入った，と表現することにする．
多数決方式を用いたときのある解候補[MATH]の最終スコア[MATH]は，以下の式で与えられる．
ここで，[MATH]は解候補のリストであり，[MATH]は[MATH]中の[MATH]の頻度である．
式([REF_Eq:多数決])に示される通り，多数決方式のスコアは単純に頻度を最大のスコアに乗じるのではなく，頻度の対数値を乗じることにより頻度に対するスコアの上がり具合が穏やかになるように調整されている．
このような，頻度に対するスコアの上がり具合を調整する多数決方式の有効性は，村田ら[CITE]により考察がなされており，この手法は，高精度の他の多数決手法と同等程度の性能を持つことが示されている．
質問応答の基本的な仕組みは，先に述べたように，\InH{段階1}知識源となる文書集合の中から，与えられた質問に対する解候補群を見つけること，
\InH{段階2}各解候補に対し，その質問に対する答としての「良さ」を与える数値，すなわち，スコアを付与すること
からなる．
リスト型質問応答の基本は，上記の二段階に加え，\InH{段階3}優先順位型質問応答システムの出力，すなわち，スコア付きの解候補群を正解（と思しき）集合（最終的な回答群）と不正解（と思しき）集合の二つに分割する
ことである．
これは，スコアの値に基づき，上位何件の解候補を正解と判断するかを決定することに等しい．
我々はその為の手法として，解候補の集合を，そのスコアを基にいくつかのクラスタに分離することを考える．
そこで，本手法では，まず，確率密度分布に基づくクラスタリングで用いられる混合分布モデルと同様に\InH{仮説1}あるクラスタ中の解候補のスコアの値密度分布が，ある一つの確率分布に従っており，異なるクラスタは異なるパラメタの確率分布に由来すること，そして，
\InH{仮説2}解候補群全体のスコアの密度分布はこの複数の確率分布の混合分布に従っていること
を仮定する．
次に，各確率分布のパラメタをEMアルゴリズムにより推定し，いくつかの分布に分離する．
最後に，それぞれの分布を正解集合のスコアの分布と不正解集合のスコア分布のどちらであるかを判定し，各解候補がいずれの分布に由来するものなのかを推定し，最終的な正解集合を求める．
ここで，上記クラスタ数はいくつの群に分けて分析をするかを表す一種のパラメタであり，何らかの手法で決める必要がある．
正解集合には何らかの共通点があり1〜2程度の少数のクラスタから構成されることが期待されるが，不正解集合にこのような性質があるとは限らない．
しかし本論文では，手法の分析のしやすさから，2〜3程度のクラスタに分ける場合について検討を行なう．
一方，基本となる優先順位型質問応答において，システムの求める解析精度が十分でないこともある．
例えば，我々の利用しているシステム[CITE]では，順位づけにおいても未だ満足のいくものではない．
同システムでは，MRR値が0.5程度であり，平均すると2位に正解を見つけることができるという評価であるが，実際のところは1/3程度の問題について1位に正解を返し，2〜5位に正解を返すのが1/3程度，残りの問題については全く正解を得ることが出来ていない．
つまり，システムにとって得意な問題と不得意な問題が存在している．
我々は，不得意な問題の場合は，各解候補に対するスコア付けがうまくいっておらず，上述の仮説1，仮説2が成立していないと考えた．
そこで，推定した確率分布のパラメタに基づき，複数に分割された分布それぞれが正解集合の分布であるか，不正解集合のそれかを判定し，正解集合の分布と不正解集合の分布とが明確に分割できるか否かを調べる．
これにより，正解が適切に見つかっているか否かを判断することがある程度可能であると考える．
解候補のスコア分布が正解集合の分布と不正解集合の分布とに分けられるとしている本提案手法では，全ての質問対し，一つ以上の正解があることを前提としており，最低でも一つの回答を出力する．
正解が全くない質問については，正解が適切に見つかっていないと判定された質問の一部ととらえることができるが，現在対応できていない．
優先順位型質問応答システムの出力は解候補とそのスコアの組のリストであり，スコアを数直線上に示すと，図[REF_fig:ScoreDensity]（上）の様になる．
それを視覚的に分かりやすくするために，一定区間で区切ってヒストグラムにしたものが，図[REF_fig:ScoreDensity]（中）である．
これは説明の為に示した図であり，実際の処理ではヒストグラムは求めていない．
本研究では平滑化した確率密度関数を求めるための手法として，スコア分布をいくつかの正規分布の混合分布とみなし，各分布のパラメタを求めるのにEMアルゴリズムを用いている．
本提案手法では，複雑な要因（本手法では，[REF_subsec:解生成]節に示す，解候補のスコア）が重なりあってできるばらつきは正規分布に近付くという，統計学における中心極限定理を基にして，仮定する分布を正規分布とした．
解候補のスコアの分布が，正解集合が成すいくつかの分布と不正解集合のそれとの混合分布であること，並びにそれらの分布がいずれも正規分布であることを仮定すると，混合分布は式([REF_Eq:MixtureDist])で与えられる．
なお，本稿では，各解候補のスコアは全て，各問について各解候補のスコアを最大値で除し，[0,1]の範囲となるように正規化したものを用いる．
ここで，[MATH]はスコアの値に対応する確率変数，[MATH]は仮定する分布数，[MATH]は平均値[MATH]，分散[MATH]の正規分布，[MATH]はそれぞれの確率分布の混合比を決めるパラメタである．
解のスコア付けが正しく行なわれ，スコア分布が混合分布であるという仮説が成り立つのであれば，スコアの平均値が大きい分布が正解集合がなす分布となる．
以降では，スコアの平均値の大きい方の分布から順に番号をつけ[MATH]とする．
解候補スコアの観測値の集合が与えられた場合，式([REF_Eq:MixtureDist])における各パラメタの推定は，EMアルゴリズムにより行なうことができる．
これらの分布のパラメタから次節で述べる手法により正解集合の分布と不正解集合の分布とが明確に分割できると判定できる場合には，スコアにより回答候補群を正解の群と不正解の群に分けられると判断する．
また，使用している優先順位型質問応答システムには，[REF_subsec:解生成]節に示すように，スコア付けに，多数決方式が採用されている．
この多数決スコアがスコアの分布に大きな影響を及ぼしていると考えられる（図[REF_fig:WeightedScore]）．
複数回出現した解候補のスコアはその出現回数に応じて高くなり，複数回出現した解候補のグループが，スコアの高い分布を形成しやすくなり，分布が別れやすくなる．
このことについては[REF_sec:問題判定]節において実験，考察する．
スコアの降順で解候補が並んでおり，[MATH]番目の解候補を[MATH]，その最終スコア[MATH]を正規化したスコアを[MATH]とする．
解候補のスコアが明確に分割できるかどうかの判定は，隣接した正規分布の平均値の差の値の最大値([MATH])，隣接解候補のスコアの差の最大値([MATH])に基づいて行なう．
これは，解候補を二群に分けるという観点において，隣接した正規分布の平均値の差の値の最大値([MATH])が大きいほど，スコア分布が大きく二つのグループに分離できると考えられるからである．
また，解の分布の如何によらず，解候補をスコアにしたがって二群に分けることを考えると，最も素朴な手法は，隣接する解候補のスコアの差が最も大きい箇所で分離するものであろう．
この時，その差の最大値が大きい時ほどスコアの分布が明確に二つに分かれると考えられる．
本稿では，以上の二つの指標，すなわち
[MATH]
[MATH]
を採用することとし，上記分離指標のいずれかを満たす場合を，スコアの分布が明確に分かれていると判断した．
ここで，[MATH]，[MATH]はそれぞれスコア分布が明確に分離できると判断する閾値である．
図[REF_fig:RealScore]は実際に質問応答システムが出力した解候補のスコア分布の例である．
上位30件を採用した．
それぞれの質問文は，図[REF_fig:RealScore](a)では「サッカーのワールドカップフランス大会で日本が対戦した国はどこですか。
」（QAC2subtask2のテストセット中の質問．
IDはQAC2-20055-01）であり，知識源は毎日新聞，読売新聞それぞれの98年と99年の2年分の記事である．
図[REF_fig:RealScore](b)では「小沢征爾はいつからボストン交響楽団の音楽監督を務めていましたか。
」（QAC1のテストセット中の質問．
IDはQAC1-1047-01）であり，知識源は毎日新聞の98年と99年の2年分の記事である．
棒グラフが実際の解の分布（ヒストグラム）を示しており，実線がEMアルゴリズムにより推定された複数の分布，破線がその混合分布である．
図[REF_fig:RealScore](a)は上位の解候補に正解が含まれている場合，図[REF_fig:RealScore](b)は上位の解候補に正解が含まれていない場合であり，正解の位置はそれぞれの図に矢印で示してある．
上位に正解が含まれている場合（図[REF_fig:RealScore](a)）では隣接した分布同士の平均値の差が，最大の所で0.16と大きく，いくつかの分布が独立しているように見え，スコアの大きい分布と小さい分布とに明確に分けられそうである．
それに対して，上位の解候補に正解が含まれていない場合（図[REF_fig:RealScore](b)）では隣接した分布同士の平均値の差が最大の所でも0.05と小さくなっており，全体で大きな一つの分布であるかように観察される．
このことから，大きく二つの分布に分けられるときには上位に正解があり，そうでないときには上位に正解が含まれていないということが期待される．
分割する分布の数（以下，分布数と表記）は，スコアを正解集合と不正解集合に分けると言う観点では二つと考えられるが，二つの分布に分けた時にうまくいかない例が存在するため，二つ以上のクラスタに分けることを考える．
二つの分布で分離した時にうまくいかない例を図[REF_fig:DistNum]に示す．
棒グラフが実際の解の分布（ヒストグラム）を示しており，実線がEMアルゴリズムにより推定された二つ，もしくは三つの分布である．
図中の破線は，スコアが一番大きい分布を正解集合の分布と考えた場合の正解分布と不正解分布の境界となるスコアの値であり，これより大きいスコアを持つ解候補が回答として選ばれる．
二つの分布で分離した場合（図[REF_fig:DistNum](a)）を見ると，スコアが小さいところで一つの大きな分布が計算されており，もう一つの分布はそれ以外の部分を被覆するように，分散が大きな分布が計算されている．
二つの分布で分離し，スコアの高い方の分布を正解分布として回答選択をすると，正解以外の解候補も多数回答に含まれてしまい，回答の精度が悪くなってしまう．
一方，三つの分布で分離した場合（図[REF_fig:DistNum](b)）を見ると，二つの場合と比べ，スコアが大きい分布が新たに計算されている．
三つの分布で分離し，スコアの最も高い分布を正解分布として回答選択をすると，余計なものを含まずに正解を精度良く回答することが可能になる．
パラメタ調整用に用いた質問セット200問（QAC1の1〜50問目と101〜150問目及びQAC2の51〜150問目）では，実際に上位に正解があるかどうかに関わらず，分布の形として図[REF_fig:DistNum]と同様の傾向を持つ質問が約40問あった．
この様な例は，最上位の解候補のスコアと，最下位の解候補のスコアの差が大きい時によく見られた．
最上位の解候補のスコアが，他の解候補よりも格段に高いスコアであった場合，それが正解である可能性が高いと考えられる．
そのため，図[REF_fig:DistNum](a)の様に，二分布に分けた結果を用いて，多数の解候補を回答とするのは望ましくない．
図[REF_fig:DistNum]の例だけでなく，パラメタ調整用の質問セット中の同様の質問においても，図[REF_fig:DistNum](b)の様に分布数を三つにすることで，回答の数が不適当に多くなってしまうことをある程度解消できることが分かった．
このため，我々は二つに分けてうまくいかない例は三つにすればカバーできると考え，混合分布の数は二つか三つに限定した．
あるスコア群を二つの分布に分けるのか，三つの分布に分けるかの決定法には以下のものが考えられる．
指標2，3は，EMアルゴリズムを用いて求められた分布と実際のスコアの並びを観察した結果得られたものである．
MDL (minimum description length)[CITE]を用いて最適な分布数を決定する．
MDLはパラメタで記述されたモデルのクラスからモデルを選択する基準である．
MDLの値が小さくなる方の分布を適切な分布とする．
MDLの値は以下のように計算する．
MDL = - \log\mathit{fit}_m + \frac{3m-1}{2} \log N
\mathit{fit}_m = \sum^{N}_{i=1} p_s(score(AC_i))\nonumber
ここで，[MATH]は仮定する分布の数，[MATH]は仮定した分布の数が[MATH]個のときの実際のスコア分布との適合度の度合であり，Nは優先順位型質問応答システムが出力した解候補の数である．
2項目の[MATH]は，パラメタ数を表している．
各分布には，混合比，平均値，分散という3つのパラメタがあるが，混合比は合計値が1と決まっているために，一つの分布については求める必要がない．
そのため，パラメタ数は[MATH]となる．
MDLの値が小さい方の分布数を採用する．
スコア分布を二つの分布の混合分布と仮定した時，スコアが大きい分布の分散と，小さい分布の分散の比率が閾値[MATH]以上なら分布の数を三つに増やす．
すなわち，スコア分布を二つの分布の混合分布とした時，[MATH]ならば，分布の数を三つにする．
これは，図[REF_fig:DistNum]の例にあるように，二分布で分離した時にスコアの大きな分布が回答を多くとりすぎてしまう場合，スコアの小さいところで一つの大きな分布ができ，スコアの大きい方の分布はその他の部分を被覆するために，分散が大きな分布になっているという観察結果を基にしている．
スコア分布を二つの分布の混合分布と仮定した時，二分布の平均値の差が閾値[MATH]以上の時は，分布の数を三つにする．
すなわち，スコア分布を二つの分布の混合分布とした時，[MATH]ならば，分布の数を三つにする．
これは二分布の平均値の差の値が極近い分布では，全解候補中に正解があっても上位に位置していない場合が多いため，回答数が多くなる傾向にある二分布で正解判定をすると言う考えである．
解候補の正解判断では，まず，複数に分割した分布それぞれが正解集合の分布（以下，正解分布と呼ぶ）であるか，不正解集合のそれ（以下，不正解分布と呼ぶ）であるかを判定する．
その後，正解分布に含まれる解候補を回答とする．
そのために，式([REF_Eq:square])で定義される閾値[MATH]を設け，閾値以上のスコアを持つ解候補を回答とする．
Th_s = \argmax_t {S_{correct}(t)-S_{incorrect}(t)}
{}& S_{correct}(t)= \sum_{i\in D_{correct}} \int^_{t} \phi_i(x) dx
{}& S_{incorrect}(t)= \sum_{j\in D_{incorrect}} \int^_{t} \phi_j(x) dx
{}& D_{correct} =正解分布と判定された分布の番号の集合
{}& D_{incorrest} =不正解分布と判定された分布の番号の集合\nonumber
また，正解分布は以下のように決める．
正解分布と判定されなかった分布は不正解分布とする．
スコアの大きい方の分布を正解分布とする．
以下のものが考えられる．
スコアの大きい方からいくつめの分布までを正解分布とするかあらかじめ決めておく
隣接分布間の距離が大きいところで正解分布と不正解分布とに分ける（[MATH]となるとき，[MATH]番目の分布までを正解分布とする）．
なお，この閾値を設けて回答を決める手法は，Murata et al [CITE]などで用いられている，スコアの閾値に基づく手法に似ているが，確率分布の上で閾値を設定している点が異なる．
本節では，本研究で使用している質問応答システム[CITE]の概要を説明する．
この質問応答システムでは，利用者が自然言語で質問文を入力すると，各解候補のスコアに基づき，解候補群を順序付けて上位から利用者が指定した数だけ提示する．
各解候補のスコアは，知識源の文書中の，各解候補と質問文中に含まれるキーワードとの近さなどを基にしている．
本稿ではこれを優先順位型質問応答システムと呼ぶことにする．
本研究で使用している質問応答システムの全体の構成を図[REF_fig:Ranking-type-QA]に示す．
本システムは主に四つのモジュール，すなわち，質問文解析モジュール，文書検索モジュール，パッセージ検索モジュール，そして解抽出モジュールから構成されている．
解抽出モジュールの中には，解を整形するサブモジュールもある．
利用者が入力した質問文から質問応答に有用な情報を抽出するのが質問文解析モジュールの役割である．
解析により得られる情報を次に示す．
形態素解析および構文解析の結果
キーワード（質問文中の内容語）
人名，地名など質問の求める回答の種類を表す質問型
疑問詞に対応する数量表現（質問型が数量表現であった場合）
本モジュールは質問文解析により得られたキーワードを元に，文書検索を行う．
検索エンジンには，TFIDFによる語の重みづけとベクトル空間法による類似度尺度を用いて，与えられたキーワード集合と各文書の類似度を求めるものを採用している．
文書検索で得られた関連文書の中でも，質問の解となる情報が書かれているのはその一部だけである．
文書全体から解抽出を行なうことは計算量の面で非効率的なので，正解に関わる文脈を小さなコストで先に切り出しておいたほうがよい．
これを行うのがパッセージ検索モジュールである．
パッセージとは，文章における連続した一部分のことであり，パッセージ検索は文書集合から正解を含む可能性の高いパッセージを取り出すために行う．
本システムのパッセージ検索では，一パッセージを三文として抽出を行なっている．
パッセージを三文とした時の有効性は，村田ら[CITE]により考察されている．
それぞれのパッセージには，パッセージ中に出現するキーワードの異なり数などを基にしたスコアが付けられ，スコアが大きいパッセージが次の解抽出モジュールに渡される．
解抽出は，パッセージ検索までの処理で得られたパッセージから，質問の解を抜き出す処理である．
パッセージを文単位に分割し，それぞれの文（これを検索文と呼ぶ）と質問文とを照合することにより，解となる形態素を決定する．
スコアが高い形態素が得られたら，その形態素を中心にして最終的な解候補を生成する．
本システムの文照合は2-gram照合，キーワード照合，係り受け照合，質問型照合の四種の照合からなる．
それぞれの照合において照合の一致の度合に応じて検索文の文字または形態素にスコアが与えられ，全てのスコアの和がその形態素のスコアとなる．
そしてスコアの高い形態素から順に解候補が生成される．
2-gram照合とキーワード照合では，解を含む可能性の高い文の中で，ある形態素を解と仮定した時の質問文との照合の良さを，2-gramとキーワードの観点から測定する．
一方，質問型照合は，質問型と一致する形態素にスコアを与えるために行なわれる．
質問タイプには，人名，地名，組織名，その他数量表現などがある．
係り受け照合では，質問文と検索文との構造の一致の度合を見る．
本システムの係り受け照合では，一文対一文の照合を基本としているが，質問文の内容が検索文の二文以上にわかれて出現している場合もある．
そこで，このような場合には前文の最後の文節を次文の提題の文節に仮想的に係り受けさせるという手法で複数文を連結し，仮想的に一文であるとみなして質問文との照合を行なっている．
形態素[MATH]の最終スコアは，2 gram，キーワード，係り受け，質問型の各照合によって与えられたスコアの和[MATH]で表され，スコアの和の高い形態素[MATH]から，解を整形するサブモジュールを用いて解が作成される．
ここで，[MATH]は検索文である．
S(mor,L_i) = Sb(mor,L_i) + Sk(mor,L_i) + Sd(mor,L_i) +St(mor,L_i)
Sb(mor,L_i)&= 2 gram照合でのスコア
Sk(mor,L_i) &=キーワード照合でのスコア
Sd(mor,L_i)&=係り受け照合でのスコア
St(mor,L_i) &=質問型照合でのスコア
\nonumber
解を整形するモジュールで作られた解候補[MATH]のスコア[MATH]は，解を形成している形態素のうち，スコア[MATH]が最大のものとなる．
複数の異なる検索文から見つかった同じ解候補に対してより高いスコアを付与する，疑似的な多数決方式がこのシステムでは採用されている．
さまざまな質問応答システムにおいて，解候補の冗長性を解の選定に役立てることが有効であることが示されている[CITE][CITE]．
多数決方式はその一つである．
一方で，我々のシステムでは，探索制御が行なわれており指定される数の解が見つかった時点で残りの解候補を調べることはせずに探索を打ち切る．
そのため，探索の過程において，通常の多数決方式は採用できない．
しかし，指定された求める解の数は異なり数である．
そのため，指定された数になるまでにすでに求められている解と同じものが改めて見つかる可能性がある．
そこで，その時にはその解のスコアを出現回数に応じて高くしている．
以下では，複数回同じ解が求められた場合，その解に複数投票が入った，と表現することにする．
多数決方式を用いたときのある解候補[MATH]の最終スコア[MATH]は，以下の式で与えられる．
ここで，[MATH]は解候補のリストであり，[MATH]は[MATH]中の[MATH]の頻度である．
式([REF_Eq:多数決])に示される通り，多数決方式のスコアは単純に頻度を最大のスコアに乗じるのではなく，頻度の対数値を乗じることにより頻度に対するスコアの上がり具合が穏やかになるように調整されている．
このような，頻度に対するスコアの上がり具合を調整する多数決方式の有効性は，村田ら[CITE]により考察がなされており，この手法は，高精度の他の多数決手法と同等程度の性能を持つことが示されている．
質問応答の基本的な仕組みは，先に述べたように，\InH{段階1}知識源となる文書集合の中から，与えられた質問に対する解候補群を見つけること，
\InH{段階2}各解候補に対し，その質問に対する答としての「良さ」を与える数値，すなわち，スコアを付与すること
からなる．
リスト型質問応答の基本は，上記の二段階に加え，\InH{段階3}優先順位型質問応答システムの出力，すなわち，スコア付きの解候補群を正解（と思しき）集合（最終的な回答群）と不正解（と思しき）集合の二つに分割する
ことである．
これは，スコアの値に基づき，上位何件の解候補を正解と判断するかを決定することに等しい．
我々はその為の手法として，解候補の集合を，そのスコアを基にいくつかのクラスタに分離することを考える．
そこで，本手法では，まず，確率密度分布に基づくクラスタリングで用いられる混合分布モデルと同様に\InH{仮説1}あるクラスタ中の解候補のスコアの値密度分布が，ある一つの確率分布に従っており，異なるクラスタは異なるパラメタの確率分布に由来すること，そして，
\InH{仮説2}解候補群全体のスコアの密度分布はこの複数の確率分布の混合分布に従っていること
を仮定する．
次に，各確率分布のパラメタをEMアルゴリズムにより推定し，いくつかの分布に分離する．
最後に，それぞれの分布を正解集合のスコアの分布と不正解集合のスコア分布のどちらであるかを判定し，各解候補がいずれの分布に由来するものなのかを推定し，最終的な正解集合を求める．
ここで，上記クラスタ数はいくつの群に分けて分析をするかを表す一種のパラメタであり，何らかの手法で決める必要がある．
正解集合には何らかの共通点があり1〜2程度の少数のクラスタから構成されることが期待されるが，不正解集合にこのような性質があるとは限らない．
しかし本論文では，手法の分析のしやすさから，2〜3程度のクラスタに分ける場合について検討を行なう．
一方，基本となる優先順位型質問応答において，システムの求める解析精度が十分でないこともある．
例えば，我々の利用しているシステム[CITE]では，順位づけにおいても未だ満足のいくものではない．
同システムでは，MRR値が0.5程度であり，平均すると2位に正解を見つけることができるという評価であるが，実際のところは1/3程度の問題について1位に正解を返し，2〜5位に正解を返すのが1/3程度，残りの問題については全く正解を得ることが出来ていない．
つまり，システムにとって得意な問題と不得意な問題が存在している．
我々は，不得意な問題の場合は，各解候補に対するスコア付けがうまくいっておらず，上述の仮説1，仮説2が成立していないと考えた．
そこで，推定した確率分布のパラメタに基づき，複数に分割された分布それぞれが正解集合の分布であるか，不正解集合のそれかを判定し，正解集合の分布と不正解集合の分布とが明確に分割できるか否かを調べる．
これにより，正解が適切に見つかっているか否かを判断することがある程度可能であると考える．
解候補のスコア分布が正解集合の分布と不正解集合の分布とに分けられるとしている本提案手法では，全ての質問対し，一つ以上の正解があることを前提としており，最低でも一つの回答を出力する．
正解が全くない質問については，正解が適切に見つかっていないと判定された質問の一部ととらえることができるが，現在対応できていない．
優先順位型質問応答システムの出力は解候補とそのスコアの組のリストであり，スコアを数直線上に示すと，図[REF_fig:ScoreDensity]（上）の様になる．
それを視覚的に分かりやすくするために，一定区間で区切ってヒストグラムにしたものが，図[REF_fig:ScoreDensity]（中）である．
これは説明の為に示した図であり，実際の処理ではヒストグラムは求めていない．
本研究では平滑化した確率密度関数を求めるための手法として，スコア分布をいくつかの正規分布の混合分布とみなし，各分布のパラメタを求めるのにEMアルゴリズムを用いている．
本提案手法では，複雑な要因（本手法では，[REF_subsec:解生成]節に示す，解候補のスコア）が重なりあってできるばらつきは正規分布に近付くという，統計学における中心極限定理を基にして，仮定する分布を正規分布とした．
解候補のスコアの分布が，正解集合が成すいくつかの分布と不正解集合のそれとの混合分布であること，並びにそれらの分布がいずれも正規分布であることを仮定すると，混合分布は式([REF_Eq:MixtureDist])で与えられる．
なお，本稿では，各解候補のスコアは全て，各問について各解候補のスコアを最大値で除し，[0,1]の範囲となるように正規化したものを用いる．
ここで，[MATH]はスコアの値に対応する確率変数，[MATH]は仮定する分布数，[MATH]は平均値[MATH]，分散[MATH]の正規分布，[MATH]はそれぞれの確率分布の混合比を決めるパラメタである．
解のスコア付けが正しく行なわれ，スコア分布が混合分布であるという仮説が成り立つのであれば，スコアの平均値が大きい分布が正解集合がなす分布となる．
以降では，スコアの平均値の大きい方の分布から順に番号をつけ[MATH]とする．
解候補スコアの観測値の集合が与えられた場合，式([REF_Eq:MixtureDist])における各パラメタの推定は，EMアルゴリズムにより行なうことができる．
これらの分布のパラメタから次節で述べる手法により正解集合の分布と不正解集合の分布とが明確に分割できると判定できる場合には，スコアにより回答候補群を正解の群と不正解の群に分けられると判断する．
また，使用している優先順位型質問応答システムには，[REF_subsec:解生成]節に示すように，スコア付けに，多数決方式が採用されている．
この多数決スコアがスコアの分布に大きな影響を及ぼしていると考えられる（図[REF_fig:WeightedScore]）．
複数回出現した解候補のスコアはその出現回数に応じて高くなり，複数回出現した解候補のグループが，スコアの高い分布を形成しやすくなり，分布が別れやすくなる．
このことについては[REF_sec:問題判定]節において実験，考察する．
スコアの降順で解候補が並んでおり，[MATH]番目の解候補を[MATH]，その最終スコア[MATH]を正規化したスコアを[MATH]とする．
解候補のスコアが明確に分割できるかどうかの判定は，隣接した正規分布の平均値の差の値の最大値([MATH])，隣接解候補のスコアの差の最大値([MATH])に基づいて行なう．
これは，解候補を二群に分けるという観点において，隣接した正規分布の平均値の差の値の最大値([MATH])が大きいほど，スコア分布が大きく二つのグループに分離できると考えられるからである．
また，解の分布の如何によらず，解候補をスコアにしたがって二群に分けることを考えると，最も素朴な手法は，隣接する解候補のスコアの差が最も大きい箇所で分離するものであろう．
この時，その差の最大値が大きい時ほどスコアの分布が明確に二つに分かれると考えられる．
本稿では，以上の二つの指標，すなわち
[MATH]
[MATH]
を採用することとし，上記分離指標のいずれかを満たす場合を，スコアの分布が明確に分かれていると判断した．
ここで，[MATH]，[MATH]はそれぞれスコア分布が明確に分離できると判断する閾値である．
図[REF_fig:RealScore]は実際に質問応答システムが出力した解候補のスコア分布の例である．
上位30件を採用した．
それぞれの質問文は，図[REF_fig:RealScore](a)では「サッカーのワールドカップフランス大会で日本が対戦した国はどこですか。
」（QAC2subtask2のテストセット中の質問．
IDはQAC2-20055-01）であり，知識源は毎日新聞，読売新聞それぞれの98年と99年の2年分の記事である．
図[REF_fig:RealScore](b)では「小沢征爾はいつからボストン交響楽団の音楽監督を務めていましたか。
」（QAC1のテストセット中の質問．
IDはQAC1-1047-01）であり，知識源は毎日新聞の98年と99年の2年分の記事である．
棒グラフが実際の解の分布（ヒストグラム）を示しており，実線がEMアルゴリズムにより推定された複数の分布，破線がその混合分布である．
図[REF_fig:RealScore](a)は上位の解候補に正解が含まれている場合，図[REF_fig:RealScore](b)は上位の解候補に正解が含まれていない場合であり，正解の位置はそれぞれの図に矢印で示してある．
上位に正解が含まれている場合（図[REF_fig:RealScore](a)）では隣接した分布同士の平均値の差が，最大の所で0.16と大きく，いくつかの分布が独立しているように見え，スコアの大きい分布と小さい分布とに明確に分けられそうである．
それに対して，上位の解候補に正解が含まれていない場合（図[REF_fig:RealScore](b)）では隣接した分布同士の平均値の差が最大の所でも0.05と小さくなっており，全体で大きな一つの分布であるかように観察される．
このことから，大きく二つの分布に分けられるときには上位に正解があり，そうでないときには上位に正解が含まれていないということが期待される．
分割する分布の数（以下，分布数と表記）は，スコアを正解集合と不正解集合に分けると言う観点では二つと考えられるが，二つの分布に分けた時にうまくいかない例が存在するため，二つ以上のクラスタに分けることを考える．
二つの分布で分離した時にうまくいかない例を図[REF_fig:DistNum]に示す．
棒グラフが実際の解の分布（ヒストグラム）を示しており，実線がEMアルゴリズムにより推定された二つ，もしくは三つの分布である．
図中の破線は，スコアが一番大きい分布を正解集合の分布と考えた場合の正解分布と不正解分布の境界となるスコアの値であり，これより大きいスコアを持つ解候補が回答として選ばれる．
二つの分布で分離した場合（図[REF_fig:DistNum](a)）を見ると，スコアが小さいところで一つの大きな分布が計算されており，もう一つの分布はそれ以外の部分を被覆するように，分散が大きな分布が計算されている．
二つの分布で分離し，スコアの高い方の分布を正解分布として回答選択をすると，正解以外の解候補も多数回答に含まれてしまい，回答の精度が悪くなってしまう．
一方，三つの分布で分離した場合（図[REF_fig:DistNum](b)）を見ると，二つの場合と比べ，スコアが大きい分布が新たに計算されている．
三つの分布で分離し，スコアの最も高い分布を正解分布として回答選択をすると，余計なものを含まずに正解を精度良く回答することが可能になる．
パラメタ調整用に用いた質問セット200問（QAC1の1〜50問目と101〜150問目及びQAC2の51〜150問目）では，実際に上位に正解があるかどうかに関わらず，分布の形として図[REF_fig:DistNum]と同様の傾向を持つ質問が約40問あった．
この様な例は，最上位の解候補のスコアと，最下位の解候補のスコアの差が大きい時によく見られた．
最上位の解候補のスコアが，他の解候補よりも格段に高いスコアであった場合，それが正解である可能性が高いと考えられる．
そのため，図[REF_fig:DistNum](a)の様に，二分布に分けた結果を用いて，多数の解候補を回答とするのは望ましくない．
図[REF_fig:DistNum]の例だけでなく，パラメタ調整用の質問セット中の同様の質問においても，図[REF_fig:DistNum](b)の様に分布数を三つにすることで，回答の数が不適当に多くなってしまうことをある程度解消できることが分かった．
このため，我々は二つに分けてうまくいかない例は三つにすればカバーできると考え，混合分布の数は二つか三つに限定した．
あるスコア群を二つの分布に分けるのか，三つの分布に分けるかの決定法には以下のものが考えられる．
指標2，3は，EMアルゴリズムを用いて求められた分布と実際のスコアの並びを観察した結果得られたものである．
MDL (minimum description length)[CITE]を用いて最適な分布数を決定する．
MDLはパラメタで記述されたモデルのクラスからモデルを選択する基準である．
MDLの値が小さくなる方の分布を適切な分布とする．
MDLの値は以下のように計算する．
MDL = - \log\mathit{fit}_m + \frac{3m-1}{2} \log N
\mathit{fit}_m = \sum^{N}_{i=1} p_s(score(AC_i))\nonumber
ここで，[MATH]は仮定する分布の数，[MATH]は仮定した分布の数が[MATH]個のときの実際のスコア分布との適合度の度合であり，Nは優先順位型質問応答システムが出力した解候補の数である．
2項目の[MATH]は，パラメタ数を表している．
各分布には，混合比，平均値，分散という3つのパラメタがあるが，混合比は合計値が1と決まっているために，一つの分布については求める必要がない．
そのため，パラメタ数は[MATH]となる．
MDLの値が小さい方の分布数を採用する．
スコア分布を二つの分布の混合分布と仮定した時，スコアが大きい分布の分散と，小さい分布の分散の比率が閾値[MATH]以上なら分布の数を三つに増やす．
すなわち，スコア分布を二つの分布の混合分布とした時，[MATH]ならば，分布の数を三つにする．
これは，図[REF_fig:DistNum]の例にあるように，二分布で分離した時にスコアの大きな分布が回答を多くとりすぎてしまう場合，スコアの小さいところで一つの大きな分布ができ，スコアの大きい方の分布はその他の部分を被覆するために，分散が大きな分布になっているという観察結果を基にしている．
スコア分布を二つの分布の混合分布と仮定した時，二分布の平均値の差が閾値[MATH]以上の時は，分布の数を三つにする．
すなわち，スコア分布を二つの分布の混合分布とした時，[MATH]ならば，分布の数を三つにする．
これは二分布の平均値の差の値が極近い分布では，全解候補中に正解があっても上位に位置していない場合が多いため，回答数が多くなる傾向にある二分布で正解判定をすると言う考えである．
解候補の正解判断では，まず，複数に分割した分布それぞれが正解集合の分布（以下，正解分布と呼ぶ）であるか，不正解集合のそれ（以下，不正解分布と呼ぶ）であるかを判定する．
その後，正解分布に含まれる解候補を回答とする．
そのために，式([REF_Eq:square])で定義される閾値[MATH]を設け，閾値以上のスコアを持つ解候補を回答とする．
Th_s = \argmax_t {S_{correct}(t)-S_{incorrect}(t)}
{}& S_{correct}(t)= \sum_{i\in D_{correct}} \int^_{t} \phi_i(x) dx
{}& S_{incorrect}(t)= \sum_{j\in D_{incorrect}} \int^_{t} \phi_j(x) dx
{}& D_{correct} =正解分布と判定された分布の番号の集合
{}& D_{incorrest} =不正解分布と判定された分布の番号の集合\nonumber
また，正解分布は以下のように決める．
正解分布と判定されなかった分布は不正解分布とする．
スコアの大きい方の分布を正解分布とする．
以下のものが考えられる．
スコアの大きい方からいくつめの分布までを正解分布とするかあらかじめ決めておく
隣接分布間の距離が大きいところで正解分布と不正解分布とに分ける（[MATH]となるとき，[MATH]番目の分布までを正解分布とする）．
なお，この閾値を設けて回答を決める手法は，Murata et al [CITE]などで用いられている，スコアの閾値に基づく手法に似ているが，確率分布の上で閾値を設定している点が異なる．
