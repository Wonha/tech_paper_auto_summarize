図[REF_fig:1]，表[REF_table:Kappa]，表[REF_table:AveAndSD]に同一の文章群に対する複数人の手による評価結果の例を示す．
これは宇佐美の小論文評価に関する研究[CITE]の中で示された，高校生による584編の小論文データとそれを4人の国語教育専門家が評価した結果のデータから，評点当たりの事例数とその分布や一致具合をまとめたものである．
評価は特定の観点に沿ったものではなく総合的なもので，10段階の絶対評価により施される．
評点は10点が最高点，1点が最低点である．
Krippendorffの考察[CITE]によれば，あるデータ間の[MATH]係数が0.7未満の場合，両データの関連を示すことは困難であることが多いとされる．
表[REF_table:Kappa]において評点の[MATH]係数は全評価者間で0.7を下回っている．
また，表[REF_table:AveAndSD]と図[REF_fig:1]より，評点の分布にも異なりが認められる．
このことから，本例においては評価者の評価基準が共通のものであるとはいい難い．
以上の結果から本研究では，全評価者の評点をまとめた点数ではなく，個々の評価者の評点を再現する評価モデルを推定する方針をとり，前述した10段階で評価する小論文試験の設定に沿って評価行為を模倣する．

文章の自動評価は，入力となる文章についての評点が出力となる．
この評点は，順序関係を持った個別のクラスとみなすことができる．
そこで本研究では，自動評価を，全順序関係にある多クラスに分類されたスコアを回帰的に推定する問題として定式化し，Support Vector Regression (SVR)を用いて評点の予測を行う．
SVRを用いて全順序関係にある多クラスに分類されたスコアを回帰的に推定する先行研究には，岡野原らの研究[CITE]がある．
岡野原らは，評判分類タスクを順序付き多クラス分類問題として定式化した上で，レビューが評価対象に与える評価の度合を二極指標（実数値）で表す手法を提案している．
また，SVRの回帰係数の絶対値がモデル上での重要さに相関することを用いて，レビュー記事の評価決定に重要と思われる表現を導出する手法を提案している．
この中で岡野原らは，（順序関係を考慮しない）多クラス分類問題を解く分類器であるpairwise Support Vector Machine (pSVM) [CITE]とSVRの間で，順序付き多クラス分類問題に対する適合性を比較している．
その結果，SVRがより高い精度で分類を行うことが示されている．
pSVMは，予測クラスを間違えた際のペナルティに全クラス間で差が無いため，SVRに比べて分類モデルに大きな誤差を含む可能性が高いと思われる．
評価者は，様々な言語的要素について文章を捉えて評価を行った上で，その判断結果を評点として数値化する．
本研究ではこの過程を国語教育で参照される言語的要素を素性にとってモデル化する．
学校教育上考えられる様々な試験を想定して，それらで参照される言語的要素をマージし，素性として扱う．
評価対象文章から自動的にそれぞれの素性値を算出する．
得られる数値は，SVRの素性として評価モデルの訓練に用いられる．
以下，提案手法において素性として用いる言語的要素を，説明の分かり易さのためカテゴリ毎に列挙した上で，一部の素性についてその詳細を述べる．
本研究において独自に設定した素性については，素性名の末尾に(*)を付す．
文字数や文数，字種などの表層的特徴に関する素性を表[REF_table:FV]に列挙し，特にFV2について説明する．
この群の素性は，主に，文章の形式面の妥当性についての評価に役立つ．
国語教育上扱われる事項に関連する素性として，FV2は「目的や意図に応じて簡単に書いたり詳しく書いたりする」[CITE]という事項に，FV10は「習得した漢字を使用して記述する」という事項にそれぞれ関連する．
{FV2}：文字数制限には，(I)「〜字以上」，(II)「〜字以内」，(III)「〜字程度」の3種類が存在する．
制限（指定）文字数を[MATH]，評価対象文章の文字数を[MATH]としたとき，下記のように達成度[MATH]を算出することにする．
ただし，(I)(II)については制限が守られなかった場合，達成度を0とする．
(I): &d=1　(II): d=n/r
(III): &d=
\frac{n}{r}, & n\leq r
\frac{2r-n}{r}, & n > r
（バートレッド窓関数の変形）
{FV7}：文は長くなるほど，内部の係り受け関係に曖昧さを生じやすいとされており[CITE]，これを用いる．
単語（特に自立語）の用法や品詞，記法に関する素性を表[REF_table:FW]に列挙する．
国語教育上扱われる事項に関連する素性として，FW3，FW4，FW5は「表現の効果などについて確かめたり工夫したりすること」[CITE]という事項に，FW10は「文章内で数字の表記法を統一する」という事項にそれぞれ関連する．
{FW2}：自立語の異なり数（タイプ数）を延べ数（トークン数）で割った値とする．
ただし用言については活用形を計数の考慮に入れず，異なり数，延べ数ともにその用言の原形を数える．
{FW4}：オノマトペは副詞に分類される．
しかし，論説文におけるオノマトペの使用は特に着目されることが多いと考えられるため，副詞とは別途に扱う．
文末の形式や文内で用いられる文体等に関する素性を表[REF_table:FF]に列挙する．
国語教育上扱われる事項に関連する素性として，FF1，FF9は「表現の効果などについて確かめたり工夫したりすること」[CITE]という事項に，FF7は「文章の敬体と常体の違いに注意しながら書くこと」[CITE]という事項に，FF10は「話し言葉と書き言葉との違いに気付くこと」[CITE]という事項にそれぞれ関連する．
{FF4}：述語が“名詞句＋断定の助動詞（「だ」「である」「です」等）”で構成される文の出現数を，文の総数で割った値とする．
{FF7}：文中の助動詞に着目し，文体が一貫している場合は0，混用が認められる場合は1を素性値とする．
{FF8}：式[MATH]により算出する．
ただし，[MATH]は文の最終文節の表記異なり数，[MATH]は文の総数とする．
同一表層格の多用や文節間の修飾関係の複雑さを捉える素性を表[REF_table:FD]に列挙する．
これらの素性は，主に係り受けの適切さに関わる素性である．
国語教育上扱われる事項に関連する素性として，FD1〜4，FD16は「一文の意味が明確になるように語と語の続き方を考える」[CITE]という事項，FD5〜8は「文の中における主語と述語との関係に注意すること」[CITE]という事項にそれぞれ関連する．
FD6, FD7：格助詞「ガ」，係助詞「ハ」を付属語に持つ文節が文中に出現する回数の最大値を素性値とする．
文中で同じ助詞を繰り返し使用することで，文の表す内容が不明瞭になる場合がある[CITE]．
例：英語の早期教育がもたらす効果が測れないうちに実行に移すことが問題であることは，言うまでもない．
FD14, FD15：一文中における名詞文節の出現回数を用言の出現回数で割った値を全文について平均した値，またその分散を素性値とする．
FD16：一文中で，用言の連用形や接続助詞等によって文が途中で中止される回数の最大値を素性値とする．
中止法の多用は，係り受け関係を曖昧にする原因となりうる[CITE]．
文章のまとまりに関する性質として，「テキスト一貫性」[CITE]と「テキスト結束性」[CITE]が挙げられる．
テキスト一貫性は，概念や事象の間の意味的なつながりの良さを指す．
テキスト一貫性は，隣り合う二文間における一貫性を示す「局所的な一貫性」と，文章全体での話題遷移の一貫性を示す「大域的な一貫性」に区別できる．
一方テキスト結束性は，意味的なつながりではなく，文法的なつながりの良さを指す．
Barzilayら[CITE]は，局所的な一貫性のモデルとして「entity gridモデル」-0.5zwを提案している．
横野ら[CITE]は，結束性に寄与する要素をentity gridモデルに組み込むことで，結束性と局所的一貫性を同時に捉えるモデルを提案している．
横野らは，結束性を考慮する目的で既存手法に下記の手法を組み込んでいる．
語句要素の文間遷移確率の計算に文間の接続関係の考慮を加え，接続関係の種類別に遷移確率を計算する．
意味的な類似性に基づいて語句要素のクラスタリングを行う．
参照表現が正しく機能している割合を素性として導入する．
また，Barzilayらのentity gridにおいて扱われる構文役割は4種類（S:主語，O:目的語，X:その他，---:出現せず）であるが，横野らは構文役割の体系を日本語に特化する目的で，2種類の構文役割（H:主題，R:述部要素）を加えている．
本研究では，文章のまとまりについての特徴を捉える目的に，横野らのモデルに基づいた素性を用いる（表[REF_table:FC]）．
ただし，FC122のみ筆者らが独自に設定する素性である．
接続関係の分類・同定方法，語句要素が持つ構文役割の同定方法，参照表現が機能している割合の導出方法は，それぞれ横野らの方法に従う．
類似性に基づいた語句要素のクラスタリングについては，EDR電子化辞書[CITE]の日本語単語辞書内で同一の概念識別子を持つ語句要素を同じクラスタとして扱う．
クラスタの持つ構文役割は，[MATH]という優先順位(cf., [CITE])に基づいて，クラスタ毎に一つの構文役割を決定する．
また，考慮する遷移確率は文2-gramのみとする．
国語教育上扱われる事項に関連する素性として，FC1〜121は「語と語や文と文との続き方に注意しながら，つながりのある文章を書くこと」[CITE]という事項，FC122は「自分の考えを明確に表現するため，文章全体の構成の効果を考えること」[CITE]という事項にそれぞれ関連する．
{FC122}：並列的に展開して述べる接続関係が文章中に存在する場合に1，存在しない場合に0を素性値とする．
並列的な接続を明示する特定の表現（人手で設定）の有無により，同定する．
以下に，FC1〜FC120の素性値の算出方法を示す．
表[REF_table:EntityGrid]においてentity gridで表される文章は，文1と文2の間，文3と文4の間がそれぞれ論理的結合関係，文2と文3の間が多角的連続関係と捉えられている．
語句要素1は文1で主題，文2で主語，文4でその他の構文役割として，語句要素2は文1と文3で目的語として捉えられている．
このとき，FC1〜36の素性値は以下のようにして求める．
2文間での構文役割の遷移パターンは，合計36通り（「HH」「HS」「HO」…「R-」「X-」「--」）ある．
論理的結合関係で接続する2文間では，合計4カ所の遷移箇所のうち，「HS」「-X」の遷移が1回ずつ，「O-」の遷移が2回出現している．
従って，FC1〜FC36の素性のうち，「HS」と「-X」の遷移確率を表す素性の値は0.25，「O-」の遷移確率を表す素性の値は0.5となる．
その他の33個の素性の値は全て0となる．
FC37〜72の素性値も同様にして求め，「S-」と「-O」の遷移確率を表す素性の値は0.5，その他の34個の素性の値は全て0となる．
拡充的合成関係の接続関係は文章中に出現しないので，FC73〜FC108の素性値は全て0となる．
FC109〜FC114，FC115〜FC120はそれぞれ，文章始端と文章終端にダミー要素（始端をB，終端をE）を持つとした時の遷移パターン「BH」-0.5zw〜「B-」，「HE」-0.5zw〜「-E」の出現確率をFC1〜FC108と同様に算出した結果を値とする．
松吉ら[CITE]は，情報発信者の主観的な態度（モダリティ）に真偽判断や価値判断などの情報を統合した「拡張モダリティ」を提案し，体系化している．
拡張モダリティは主に「態度表明者」，「相対時」，「仮想」，「態度」，「真偽判断」，「価値判断」の6項目から成る（文献[CITE]を参考にした）．
このうち態度と真偽判断について文の特徴を捉え，素性として扱う（表[REF_table:FM]）．
国語教育上扱われる事項に関連する素性として，FM1〜8，FM12は「事実と感想，意見などとを区別すること」[CITE]という事項にそれぞれ関連する．
松吉らは態度を8種類に，真偽判断を9種類に分類している．
この分類に基づいて，機能表現辞書つつじ[CITE]に助動詞型機能表現として収録される機能表現と，分類語彙表[CITE]に「精神および行為／心」として収録される用言を手がかりにしたルールベース手法で，文の態度，真偽判断について分類を行う．
ただし，真偽判断については，肯否極性とアスペクトに関する区別をせずに判断の程度（強さ）のみを扱うこととし，断定，推量，判断程度不明の3種類を扱う．
これら拡張モダリティ体系に準拠する素性(FM1〜FM11)は全て，当該拡張モダリティカテゴリに分類される文が出現する回数を文の総数で割った値とする．
{FM12}：最終文節で思考動詞，知覚・感覚動詞が用いられる文の出現回数を文の総数で割った値を素性値とする．
思考動詞，知覚・感覚動詞であるか否かの判断は，分類語彙表[CITE]を典拠とする．
文章の内容（筆者により書かれた行動，出来事，状態）について，その正しさを意味面で判断することは，本研究の目的としない．
その代わりに，与えられた論題に対して適合した語彙が使用されていることを捉えるための素性を用意する．
論題に含まれる名詞と文章中の名詞が，EDR電子化辞書[CITE]において同一の概念識別子を持つ，もしくは所属概念が直接の上位または下位関係にある場合，論題に適合する語彙として判断する．
このように判断される語彙が文章中の全名詞中で占める割合を素性(FS1)とする．
SVRは，線形カーネルを使用して学習する場合，回帰係数[MATH]の成分値（以下，成分値）を参照することで，各素性がスコア推定モデルに寄与する度合を知ることができる．
これにより，教師データにラベル（評点）をつけた評価者が，各素性に対して「どの程度の配分で評価していたか」，また「加点要素としたか減点要素としたか」を定量化することができる．
前者は成分値の絶対値，後者は成分値の正負に着目することでそれぞれ明らかになる．
この方法により個々の評価者の評価モデルにおいて重要な変量を明らかにする．
これらの特徴を素性間で比較する目的で，下記の2通りの方法で素性値を正規化する．
{192}
[MATH]
[MATH]
[MATH]は任意の文章データにおける任意の素性の素性値，[MATH]は全教師データにおける任意の素性の素性値の集合，[MATH]は集合[MATH]中の第1四分位値，[MATH]は集合[MATH]中の第3四分位値である．
\ding{"C0}は，全教師データ中の素性値が0から1の間に分布するように正規化する方法である．
一方\ding{"C1}は，全教師データの四分位数範囲に位置する素性値が0から1の間に分布するように正規化する方法である．

提案手法の評価のために実験を行う．
SVRの学習にはSVMlightを用いる．
また，素性の抽出には形態素解析器MeCab，係り受け解析器CaboChaを用いる．
教師データには第3章で用いた高校生による小論文を電子化したものを用いる．
これらの小論文は，論題[MATH]「小学校の授業における，英語の早期教育は必要であるか否かに対して意見を述べよ」，論題[MATH]「グラフと説明文を読み，日本人の子育ての態度に関してどのような特色が読み取れるかに関して述べよ」という2種類の論題に沿って書かれている．
また，400字以内と800字以内の2種類の字数制限が存在する．
事例は合計で584事例あり，論題と字数制限毎の内訳は表[REF_table:TrainingDataNum]に示す通りである．
これらの584事例に対して4人の評価者が総合的につけた10段階の評点を，各教師データのラベルとする．
ラベルとなる評点は，下記に示す線形変換を行うことで，評価者系列毎に評点分布の平均が0，分散が1になるよう正規化する．
\textgt{実験1．
評点推定の性能}
教師データを用いてSVRを構築し，各評価者がつけた評点とSVRによる評点推定結果の間の差について検討する．
また，本手法とベースラインで評点推定性能を比較することで，素性設計の妥当性についても検証する．
SVRによる評点推定の評価指標には平均二乗誤差(Mean Square Error)を用いる．
また素性値の正規化に，4章で述べた2通り（\ding{"C0}，\ding{"C1}）の方法を適用し，それぞれを教師データに用いて構築したSVRのMSEを比較する．
評点推定性能のベースラインには，本研究において独自に設定した素性を除いた素性のみでSVRを構築した場合のMSEを設定する．
なお，ベースラインにおける正規化手法には\ding{"C1}の手法を用いた．
SVR構築に以降全て，線形カーネル，コストパラメータ[MATH]を用いる．
それぞれ表[REF_table:MSE]に全教師データを用いた場合(ALL)，論題[MATH]のみ(only[MATH])，論題[MATH] (only[MATH])のみの教師データを用いた場合の5分割交差検定の結果を示す．
なお以降の実験では素性値の正規化に\ding{"C1}の手法を用いる．
\textgt{実験2．
評価モデルの構築}
教師データを全て訓練に用いてSVRを構築し，回帰係数の各成分値について検討する．
表[REF_table:Omega]に，成分値の絶対値が大きいもの上位5素性を正負別に示す．
この実験により，提案手法が国語教育で参照される言語的要素を用いて評価モデルを表現でき，なおかつ個人間での重みの配分の違いを明示できることを確認する．
ただし，FC1からFC120までの素性については，素性が示す意味自体をIDとして表記する．
これらの素性IDはそれぞれ，1文字目が前文，2文字目が後文の構文役割を，3文字目が2文間の接続関係を表す．
構文役割「B」は文章始端，「E」は文章終端のダミー要素に，「N」は前述の「---:出現せず」に対応する．
また接続関係は，1が論理的結合関係，2が多角的連続関係，3が拡充的合成関係に対応する．
例えば，FC1〜FC36の素性群（論理的結合関係で接続する文間の構文役割遷移確率）のうち，前文での構文役割が「H」，後文での構文役割が「N」である語句要素の2文間での遷移確率についての素性は「HN1」と表記する．
\textgt{実験3．
教師データ数と評点推定性能の関係}
教師データの増加に伴う評点推定性能の推移について検討する．
図2に584事例の教師データの部分集合（無作為抽出）を用いた5分割交差検定の結果を示す．
\textgt{実験1の考察}
表[REF_table:MSE]より，素性値の正規化手法には，\ding{"C0}の手法に比べて\ding{"C1}の手法を適用した場合の方が良い結果が得られる傾向がある．
全ての結果において，設定したベースラインよりも低いMSEが得られている．
従来の文章自動評価で用いられて来た素性のみを用いる場合に比べ，本研究において独自に設定した素性を追加する場合の方が，より高い精度で個人の評価モデルを推定できたことがわかる．
このことから，本研究で新たに提案する素性は，評価基準のモデル化に有用な素性であるといえる．
教師データのラベル系列（評価者）別にMSEを比較すると，差がみられる．
これは，評価者が評価の依拠とした言語的要素の中に，本実験で設定した素性群に含まれないものが存在したことに因るものと考えられる．
論題別の評点推定性能に関して，論題[MATH]に沿って書かれた小論文の評点性能は，相対的に低い傾向にある．
論題[MATH]は，ある事柄に関して是非を問う類の論題であり，回答は賛成もしくは反対いずれかの立場をとる2種類に分類される．
そのため，回答の方向性が定められていない論題[MATH]に比べて表現手法や構成に多様性がなく，教師データが偏りやすいと考えられる．
\textgt{実験2の考察}
表[REF_table:Omega]より，「文字数制限の達成度(FV2)」「複合名詞の使用率(FW6)」「真偽判断の程度が『断定』の文の出現率(FM9)」は加点要素，「文末思考知覚感覚動詞使用率(FM12)」「オノマトペ使用率(FW4)」「文末の単調さ(FF8)」は減点要素として，それぞれ一部の評価者の間で共通した傾向があることがわかる．
「HN-」「NH-」の素性は，「ある文で主題として出現する語が隣接する前後の文で出現しない」という文章のつながりの悪さを示す素性である．
これらの素性についても，減点要素とされる傾向にあることがわかる．
提案手法で独自に設定した素性のうち，カテゴリ「表層」「語」「文体」「モダリティ」に該当する素性に有効な（一部の評価者の間で共通して有効な傾向があるとは限らない）素性が多い傾向がみられた．
特に，「文字数制限の達成度(FV2)」「オノマトペ使用率(FW4)」「文末の単調さ(FF8)」などの，国語教育に関連する素性に有効なものが多い．
本手法で用いる素性には，既存手法[CITE] [CITE]でも共通して用いられるものも含まれているが，そのうち回帰係数の大きいものは「文字数(FV1)」「自立語の最大長(FW1)」などの一部分に限られた．
本手法のように総合面での文章評価を国語教育上扱われる言語的要素を用いてモデル化する手法と，そうでない手法では，有効な素性が異なると考えられる．
一方，ほとんど影響を持たない素性も存在する．
カテゴリ「文章のまとまり」に関する素性群には「OE3」「HN3」など，成分値の絶対値が大きくかつ評価者間で極性が一致する傾向にある素性もあるが，大半の素性は成分値が0に近い．
カテゴリ「内容」に関する素性も，全評価者において成分値の絶対値が小さく，あまり評点に影響を与えていないことがわかる．
なお，ここでは絶対値0.01以上の重みをもつ素性を絶対値の大きい素性として扱う．
論題別の評価モデルに関して，論題[MATH]と論題[MATH]では重要な素性が異なる傾向にあることがわかる．
論題[MATH]では，評価者A，Bの評価モデルの推定結果に「真偽判断の程度が『推量』の文の出現率(FM10)」が大きな減点要素として含まれている．
一方，論題[MATH]では評価者A，Bともに加点要素にも減点要素にも含まれていない．
論題[MATH]はデータを参照した上で推量される事柄を述べる性質の論題であるため，推量表現は一般的に用いられる．
他方，論題[MATH]は賛成か反対かを問う論題であるため，断定的な態度をとった文章に比べて，婉曲的な態度の文章は論旨が不明確になりやすいと考えられる．
小論文試験で出題される論題間の異なりは，「内容の異なり」と「形式の異なり」の二種があると考えられる．
本研究では内容面について「論題に示された語と関連する語を使っているかどうか」のみを素性として導入している．
したがって，出題内容の異なりが評価モデルに影響を与えることはないと考えられる．
しかしながら，実験結果に示されたように出題形式の異なりが評価モデルに影響を与えることがある．
評価モデルをより汎用的なものとするために，論題の出題形式を一定の粒度で分類した上で，同類の出題形式の論題に対して同じ評価モデルを適用することが妥当であるかを今後確認する必要がある．
\textgt{実験3の考察}
図2より，全体的にデータの増加に対するMSEの変化は収束傾向にあることがわかる．
