    \documentclass[japanese]{jnlp_1.3c}
\usepackage{jnlpbbl_1.1}
\usepackage[dvips]{graphicx}
\usepackage{tascmac}

\Volume{14}
\Number{3}
\Month{Apr.}
\Year{2007}
\received{2006}{4}{20}
\revised{2006}{7}{28}
\rerevised{2006}{9}{15}
\accepted{2006}{10}{11}

\setcounter{page}{239}

\jtitle{感情生起事象文型パターンに基づいた会話文からの感情推定手法}
\jauthor{松本　和幸\affiref{TOKU} \and 三品　賢一\affiref{TOKU} \and 任　　福継\affiref{TOKU} \affiref{BEIJING} \and 黒岩　眞吾\affiref{TOKU} }

\jabstract{
近年の情報処理技術の発達に伴い，従来の情報処理の分野ではほとんど
取り扱われなかった人間の感性をコンピュータで処理しようとする試みが盛んになってきた．
擬人化エージェントや感性ロボットが人のように振舞うためには，
人間が表出する感情を認識し，自ら感情を表出することが必要である．
我々は，感性ロボットに応用するための感情認識技術について研究している．
自然言語会話文からの感情推定を行う試みは，多くの場合，
表面的な感情表現のみに絞って行われてきた．しかし，人間の発話時には常に何らかの
感情が含まれていると考えられる．
そこで，本稿では，感情語と感情生起事象文型パターンに基づいた感情推定手法を
提案し，実験システムを構築する．
そして，本手法の有効性を調べるため，シナリオ文を対象にその評価実験を行った．
}

\jkeywords{感性情報処理，感情認識，感性コンピュータ，自然言語処理}

\etitle{Emotion Estimation Algorithm based on Emotion Occurrence Sentence Pattern}
\eauthor{Kazuyuki Matsumoto\affiref{TOKU} \and Kenichi Mishina\affiref{TOKU} 
\and Fuji Ren\affiref{TOKU} \affiref{BEIJING} \and \\ Shingo Kuroiwa\affiref{TOKU}} 

\eabstract{
In recent years, approach which tries to process human's sensibility with computer has
become active as information processing technology develops. 
It is necessary to recognize human emotions so that
the anthropomorphic agent and the sensibility robot
may behave like the person, and to express own emotions.
We are researching the emotion recognition technology to apply it to the sensibility robot.
The approach of most emotion estimation targeted only superficial emotion expression.
In this paper, we propose an emotion estimation algorithm based on
the emotion word (or emotion idiom) and the emotion occurrence event sentence pattern.
A  prototype system based on the proposed method has been constructed and
 an evaluation experiment has been carried out. The result shows that the proposed method is effective.
}

\ekeywords{Sensibility information processing, Emotion recognition, Sensibility computer, Natural language processing}

\headauthor{松本，三品，任，黒岩}
\headtitle{感情生起事象文型パターンに基づいた会話文からの感情推定手法}

\affilabel{TOKU}{徳島大学}{The University of Tokushima}
\affilabel{BEIJING}{北京郵電大学}{Beijing University of Posts and Telecommunications}


\begin{document}
\maketitle




\section{従来研究}

現状の対話システムを感情豊かな自然な会話の流れに対応させるためには，
感情状態による発話の制御が必要となる．
人間の感情状態は，対話における相手との発話のやり取りで変化すると考えられる．
感情表出についての研究は，これまでに，コミュニケーションロボット「ifbot」\cite{ifbot}や
擬人化エージェント \cite{Mori}の研究でも行われてきた．
しかし，これらの研究においては，ロボットや擬人化エージェントが感情を表出することで，
ユーザの感情を誘発することを目的としており，ユーザの感情状態を言語から認識することは
ほとんど考慮されていなかった．

ロボットや擬人化エージェントに応用するための，感情インターフェースにおける
感情表出では，相手（ユーザ）の感情状態の認識により自己感情の状態
を適切に変化させることが必要となる．
なぜなら，例えば，ユーザが怒っているのに楽しそうに話すロボットは
人間らしい振る舞いをしているとはいえないからである．
相手感情を認識できてはじめて，人間らしく自然に自己感情を表出できるであろう．
したがって，感情インターフェースの実現のためには，
発話内容，声の抑揚，顔表情などからの話者の感情状態の認識技術が必要不可欠となる．
感情を話者の言葉（発話内容）から認識するためには自然言語文から感情推定を行う必要がある．

自然言語文テキストからの感情の自動抽出や自動判定の研究として以下のようなものがある．

\begin{itemize}

\item {A【感情語彙や感情表現の自動抽出】}\\
文に含まれる感情を抽出する研究として，
大量のテキストデータからの感情表現や評価表現の自動抽出を目的とする
\cite{Nakayama}や，\cite{Kobayashi}，\cite{Kobayashi2}, \cite{Nasukawa}, \cite{Turney}, \cite{Kamps}, \cite{Kudo}, \cite{Fujimura}, \cite{Yano} などがある．
\cite{Nakayama}では，感情表現の基本となる語をシードとして準備しておき，
それらの語との係り受け関係から頻出の感情表現パターンを抽出する．

\item {B【語の好感度を用いた会話文からの感情推定】} \\
会話文から話者の感情を推定する試みとして，
語に好感度（プラスかマイナスの評価）を与え，文毎の事象の望ましさを
推定し，話者の感情の推定を行う手法 \cite{mera},\cite{mera2} が提案されている．

\item {C【ニュース記事の感情判定】} \\
単語と喜怒哀楽との対応関係を示す感情辞書の構築を行い，
Webニュース記事から喜怒哀楽を自動判定する研究として
\cite{Kumamoto}がある．
この手法では，読み手側の立場での感情推定を行う．

\item {D【人手により作成された学習データに基づく感情推定モデルの構築】}\\
テキスト中に含まれる要素と生起感情との因果関係を
付与することで，大量の学習データを作成する試みとして，
\cite{tokuhisa}らの研究がある．
この研究では，対話文コーパスに対し，人物の生起感情（感情クラス）以外に，
感情生起要因や感情強度などのタグを付与した大規模コーパスを構築し，
感情推定への応用を目標としている．

\item {E【結合価パターンへの感情生起の付与】}\\
\cite{TanakaTsutom}らは，
文を構成する用言と格要素（名詞＋助詞）の意味的用法を体系化した結合価パターン（文型パターン）
に対し，生起する感情の種類と，生起要因，生起主体などを記述した辞書の構築を行っている．

\end{itemize}

手法A，Cでは，いずれも文中に出現する単語が示す感情的な意味に着目し，
文の感情判定や単語の感情極性判定に利用している．
\cite{Kobayashi}, \cite{Fujimura}, \cite{Nasukawa}などは，
単語に positive, negative の二極指標を与えることによって
評価表現の判定を行っているが，
我々人間は，会話において発話内容から快か不快かの単純な感情のみならず，
「喜怒哀楽」に代表されるような複雑な感情を理解することができる．
したがって，より複雑な感情を推定するためには，
語の感情的意味の範囲を快/不快からさらに広げて考慮すべきであると考える．
手法Bでは，文末の様相などの情報から，最終的には複数の感情を推定することが可能である．
また，手法Dや手法Eでは，文型や文脈を考慮することにより，
多くの複雑な感情を推定することを目標としている．
これらの研究から，会話文には語の感情的意味のみからでは判定できないような文が多く，
そのような文に対しては，
文全体，複数の文からなるテキストが示す感情的意味からの感情推定手法が必要であることが分かる．
本研究では，感情を表す語や表現を収集・分類し，感情辞書を構築した．
さらに，感情表現の文型パターンを収集し，パターンごとに感情生起のルールを作成することで，
話者が生起している感情を推定する手法を提案する．


\section{提案手法}

文中の格要素や述語をfeatureとして機械学習によるポジティブまたはネガティブの
推定を行う研究\cite{Takamura}，\cite{Nasukawa}, \cite{Kobayashi}，\cite{Okanohara}は多数あるが，
文型ごとに感情を対応付けし，ポジティブ・ネガティブ以外の感情（例えば「喜び」や「悲しみ」）を推定する研究は少ない．
文型パターンへの感情生起に関する情報の付与は，\cite{TanakaTsutom}でも行われているが，
情緒生起情報として感情の種類のほかに生起要因などの情報を付与している点や，
格要素に当てはまる語に関わらず1つのパターンに対し1種類の感情生起を記述している点で，本研究とは異なる．
また，本手法においては，文型が登録されていない文でも，
感情を表す語や表現を登録しておくことによって，「感情表出発話」としての感情推定を行うことができる．

本手法では，単体で感情を表現することが可能な単語を「感情語」と定義する．
また，感情を表現するような慣用句（イディオム）を「感情イディオム」と定義する．
感情語と感情イディオムの例を以下に示す．

\begin{itemize}

\item 感情語（名詞）  「楽しさ」，「恐ろしさ」，「憤慨」，「涙雨」  
\item 感情語（形容詞） 「あくどい」，「痛々しい」，「嬉しい」，「おぞましい」 
\item 感情語（副詞） 「嫌でも」，「思いの外」，「折悪しく」，「心置きなく」 
\item 感情語（動詞） 「喜ぶ」，「楽しむ」，「怒る」 
\item 感情イディオム 「へそを曲げる」，「耳にたこができる」，「心がはずむ」

\end{itemize}

\begin{figure}[b]
\begin{center}
    \includegraphics[scale=0.26]{flowchart.eps}
\caption{提案手法の流れ}
\label{fig:flow}
\end{center}
\end{figure}


本研究で提案する感情推定の大まかな流れを図\ref{fig:flow}に示す．
まず，感情推定対象の発話テキスト（1発話ターン）が入力されると，前処理として文末などに含まれる不要な記号を削除し，文毎に分割を行う(Step1)．
この処理は，係り受け解析時に記号類が文末要素として判定されてしまうことを避けるために行う．
また，このとき，記号「？」や「！」は疑問文判定や感嘆文判定に用いるため，モダリティの要素として抽出しておく．
次に，前処理された文を係り受け解析する(Step2)．
    係り受け解析には係り受け解析器の「南瓜」(CaboCha)，\cite{cabocha2}を用いる．
その後，文節ごとに格助詞の検出を行い，文の表層格の決定を行う(Step3)．
このとき，表層格要素はすべて述語（文末要素）に係るものとする．
そして，抽出された格要素，修飾語，述語に感情語辞書を参照して感情属性を付与する(Step4)．
感情語辞書とは，感情語やイディオムを分類し，収録した辞書のことである．
また，感情属性とは主に感情の種類を示す言葉であり，本手法では22種類の基本的な感情属性を定義している（表\ref{tb:ema}参照）．
辞書中には，感情語ごとに感情属性が1つ以上付与されている．
次に，格要素や述語に係っている修飾語により，被修飾要素の感情属性の値の更新を行う(Step5)．
修飾語が感情属性を持たない場合は感情属性の値の更新は行わない．

その後，感情生起事象文型パターンとの照合を行い(Step6)，
一致すれば，感情生起事象文とみなされ，感情生起ルールに基づいて感情属性値が与えられる．
モダリティ要素が存在すれば，モダリティによる感情属性更新ルールに基づき，文全体の感情属性値を更新する(Step7)．
最後に，感情パラメータの計算を行い(Step8)，感情推定結果として，複数の感情属性を候補として出力する．
出力された各感情属性は強度を持ち（感情属性の値），大きいほどその感情が強く表れているとする．
1つの発話に感情の種類が1つも付与されなかった場合は，感情推定結果として「無感情」が付与されたとする．

以下，3.1節で「感情語・感情イディオム」について記述する．
また，3.2節で「意味属性イメージ値」，3.3節で「感情生起事象文型パターン」について記述し，
3.4節で「感情パラメータ」，
3.5節で「修飾語とモダリティによる感情属性値の更新ルール」について記述する．
また，3.6節では，全体の処理の流れを具体例を用いて説明する．
\subsection{感情語・感情イディオム}

本研究では，単体で感情を表すような単語（感情語）と
イディオム（感情イディオム）をまとめた辞書を感情辞書として構築した．
この辞書を参照し，文中に含まれる感情語と感情イディオムに対して
感情属性値（各感情属性の有無）を付与する．
感情語とその感情属性値の例を表\ref{tb:eword_ex}に示す．

\begin{table}[b]
\begin{center}
\caption{感情語の感情属性値}
\begin{tabular}{|c|c|}
\hline
感情語	&	感情属性値	\\ \hline \hline
楽しさ	&	楽しみ(1.0)	\\ \hline
恐ろしい	&	恐れ(1.0)	\\ \hline
憤慨	&	怒り(1.0)	\\	\hline
悲観する	&	悲しみ(1.0)，不安(1.0)	\\ \hline
\end{tabular}
\label{tb:eword_ex}
\end{center}
\end{table}
\begin{table}[p]
\begin{center}
\caption{22種類の感情属性の定義}
\begin{tabular}{|c|p{12cm}|}
\hline
感情属性名 & \multicolumn{1}{|c|}{定義} \\ \hline \hline
喜び	& いいことがあって嬉しく思い，心がはずむような思いをすること．\\ \hline
期待	& こうなりたい，こうなってほしい等，今よりも好ましくなるだろうその実現を願うこと．\\ \hline
怒り	& 腹がたつこと．我慢できない不快な気持ちを覚えたり，言動に表したりすること．\\ \hline
嫌悪	& ある人や物事に対して不快な気持ちをもつこと．また，その気持ちを行動や態度に表す．\\ \hline
悲しみ	& 心が痛むこと．つらい気持ち．心がしめつけられる気持ち．\\ \hline
驚き	& 突然予測もしなかったようなことにであったりして，一瞬心臓が止まるような気持ちになる．また，今まで知らなかった（気づかなかった）ことが事実だと知らされ，普段の落ち着きを失ったり自分がうかつであることを思い知らされたりする．\\ \hline
恐れ	& それに近づくと無事に済みそうもないと思われて避けたいと思う気持ち．また，何か嫌いなことが起こるのではないかという心配する．\\ \hline
受容	& 社会や個人が受け入れて自分のものとして取り込むこと．心が広く，人をよく受け入れ，過ちなども許すようなことに近い意味．\\ \hline
恥	& 自分の欠点や失敗などを恥ずかしく思うこと．\\ \hline
誇り	& 自分のこと，または自分の立場に自信をもち，名誉に感じること． \\ \hline
感謝	& 誰か（何か）に対してありがたいと思うこと．\\ \hline
平静	& 何も感情が起こっていない状態． \\ \hline
賞賛	& 相手のことを褒め称える気持ち． \\ \hline
軽蔑	& 相手のことをを劣っているものとして見下す気持ち． \\ \hline
愛	& 対象をいつくしみ，大切にしたいと思う気持ち． \\ \hline
楽しみ	& 現在の状況を楽しいと思い，心が浮かれている状態． \\ \hline
興奮	& ある物事に対して心を動かされ，気が昂ぶっている状態．\\ \hline
後悔	& 過去に起こった出来事に対し，悔しがる気持ち． \\ \hline
安心	& 不安や心配が無く，心が安らいでいる状態．\\ \hline
不安	& 悪い結果になるのではないかと思って心が落ち着かない状態． \\ \hline
尊敬	& 相手を自分より優れていると思い，尊び，敬う気持ち． \\ \hline
好き	& 誰か（何か）を好きだと思う気持ち．\\ \hline
\end{tabular}
\label{tb:ema}
\end{center}
\vspace{\baselineskip}
\begin{center}
\caption{基本13感情}
\begin{tabular}{|p{1.3cm}|p{1.3cm}|p{1.3cm}|p{1.3cm}|p{1.3cm}|}
\hline 
怒り	&	期待	&	不安	&	嫌悪	& 楽しみ \\ \hline
恐れ	&	喜び	&	平静	& 	受容	& −	\\ \hline
後悔	&	尊敬	&	悲しみ	&	驚き	& −	\\ \hline
\end{tabular}
\label{tb:13kind}
\end{center}
\end{table}

感情語と感情イディオムに対して付与する感情属性として定義した22種類の感情属性とその定義を，表\ref{tb:ema}に示す．
ここで，この22種類を初期感情属性として定義した過程について述べる．
まず，感情の種類を定義するにあたって，Plutchik \cite{Plutchik}の定義した基本8感情に，
「尊敬」「楽しみ」「不安」「後悔」の4感情と「平静」を加えた13感情を基本13感情として定義した（表\ref{tb:13kind}参照）．
次に，日本語語彙大系の一般名詞属性体系中の感情に関する語彙を調べ，
13感情に当てはまらず，新たな感情として定義可能であるものを分類し，抽出していった
ところ，全部で表\ref{tb:ema}に示す22種類となった．

また，感情語や感情イディオムの中には，
この22種類の感情のどれにも当てはまらなかったり，
他に適切な感情の種類が考えられる語（例．語：「やけくそ」 → 感情：「自暴自棄」）もあり，
これらを強制的に22種類中のどれかに
分類することは好ましくないと考えたため，
付与する際はこの22種類以外の感情属性も許容し，新たな感情属性定義の作成を行うこととした．
新たに追加された感情属性の一部を表\ref{tb:newema}に示す．

\begin{table}[b]
\begin{center}
\caption{新たに追加された感情属性の例}
\begin{tabular}{|p{1.4cm}|p{1.4cm}|p{1.4cm}|p{1.4cm}|p{1.4cm}|p{1.4cm}|} 
\hline
憤り & 非難 & 当惑 & 可笑しさ & 失望 & 畏怖 \\ \hline 
憎しみ & 悔しさ & 呆れ & 嫉妬 & 罪悪感 & 自暴自棄 \\ \hline
羨望 & 恨み & 興味 & 淋しさ & 倦怠感 & ためらい \\ \hline
不平不満 & 焦燥感 & 憂鬱 & 自信 & 無力感 & 不審 \\ \hline
憧れ & — & — & — & — & — \\ \hline
\end{tabular}
\label{tb:newema}
\end{center}
\end{table}
\begin{table}[b]
\begin{center}
\caption{感情属性の分類}
\begin{tabular}{|c|p{11.5cm}|}
\hline
正感情属性 & 期待，感謝，賞賛，喜び，好き，愛，楽しみ，誇り，受容，安心，尊敬，可笑しさ，自信，憧れ \\ \hline
負感情属性 & 怒り，不安，軽蔑，嫌悪，恐れ，後悔，悲しみ，恥，憤り，非難，当惑，失望，憎しみ，悔しさ，呆れ，
嫉妬，罪悪感，恨み，淋しさ，倦怠感，ためらい，不平不満，焦燥感，憂鬱，無力感，不審，自暴自棄  \\ \hline
\end{tabular}
\label{tb:emotion_pn}
\end{center}
\end{table}
これらの感情属性は，ポジティブまたはネガティブに分類できるので，
表\ref{tb:emotion_pn}に示すような定義を行った．
感情辞書の構築作業は，抽出対象である日本語語彙大系\cite{jlexicon}，
感情表現辞典\cite{Nakamura}，分類語彙表\cite{bunrui}に含まれる単語（副詞，形容詞，名詞，感動詞，動詞など）と，
イディオムから，「単独で感情を表現できる語，イディオムならば抽出」を抽出基準として，作業者1人により抽出した．
さらに，抽出された語とイディオムに対して感情属性（感情の種類）を付与する作業を作業者1人が人手により行った．
例えば，「怒り」を単独で表現可能な語として「憤慨」や「憤激」，
イディオムでは「腹を立てる」のような表現を抽出する．
各単語，イディオムに付与する感情属性については作業者自身の判断に任せた．

具体的には，感情語（名詞，動詞）と感情イディオムは，主に日本語語彙大系，
感情表現辞典，分類語彙表などの辞書からの抽出を行った．
日本語語彙大系から抽出した名詞は，
一般名詞体系の「精神」以下に含まれる単独で感情を表現できる語である．
また，感情表現辞典からは，辞典中で定義されている10種類＋複合感情に分類されている
全ての単語，イディオム（感情表現）を抽出した．
分類語彙表からは，【2.3000 心】〜【2.3042 欲望・期待・失望】に含まれる語から抽出した．

さらに，形容詞と副詞における感情語は，「現代形容詞用法辞典」\cite{adjective}と
「現代副詞用法辞典」\cite{adverb}からの抽出を行った．
抽出基準としては，辞典中に感情的な暗示が記されている単語を
抽出した．具体的には，辞典中の解説文と用例を参照しながら，
単語1つ1つに対し暗示されている感情などを初期定義の
22種類の感情に当てはまるかどうかを判断しながら抽出を行った．
また，22種類の感情には当てはまらないが，
その単語が感情を表す言葉であると判定できるものは抽出し，
後に新たに感情属性の定義を行うこととした．
品詞ごとの感情語と感情イディオムの総数を表\ref{tb:eword}に示す．

\begin{table}[t]
\begin{center}
\caption{感情語・感情イディオムの総数}
\begin{tabular}{|p{2cm}|p{2cm}|p{2cm}|p{2cm}|p{2cm}|p{2cm}|}
\hline
副詞	&	形容詞	&	名詞	&	動詞 & 感動詞 & イディオム	\\ \hline
4890	&	1834	& 1438	&  937  & 81     & 582		\\ \hline
\end{tabular}
\label{tb:eword}
\end{center}
\end{table}
また，1つの語，またはイディオムに複数の感情属性を付与しても良いこととした．
さらに，追加した感情属性については，全ての単語への感情属性付与作業が終了してから
見直しを行い，単語への感情属性の追加・修正を行った．

\subsection{意味属性イメージ値}

\begin{table}[b]
\begin{center}
\caption{意味属性イメージ値}
\begin{tabular}{|r||l|r|}
\hline
意味属性番号	&	意味属性名	&	イメージ値	\\ \hline \hline
120	&	のけ者・じゃま者	&	-1	\\ \hline
196	&	弱虫	&	-1	\\ \hline
199	&	働き者	&	1	\\ \hline
200	&	怠け者	&	-1	\\ \hline
669	&	反吐〔へど〕	&	-1	\\ \hline
1141	&	善	&	1	\\ \hline
1142	&	悪	&	-1	\\ \hline
\end{tabular}
\label{tb:image_sem}
\end{center}
\end{table}

日本語語彙大系における一般名詞に関して，意味属性に対するイメージ値として，
正か負の値を付与した．正，負のどちらのイメージも持たないような意味属性にはイメージ値として0を付与した．
意味属性のイメージ値の例を表\ref{tb:image_sem}に示す．
名詞は属している意味属性のイメージ値を持つことになる．
なお，1つの名詞が複数の意味属性に属する場合，イメージ値は0と判定する．一般名詞の意味属性の総数は2715あり，
そのうち162種類に正のイメージ値，273種類に負のイメージ値を付与した．
この方法によって感情辞書に含まれていない一般名詞に対してのイメージ値の付与を行う．
なお，感情辞書に含まれる一般名詞は，
付与されている感情属性の種類（正感情属性または負感情属性）によってイメージ値が決まる．

イメージ値は，感情語や感情イディオムが含まれない場合（含まれている語から感情属性値が得られない場合）に，
モダリティとの組み合わせにより感情の種類を判定するために用いる．
具体的には，負のイメージ値を持つ語と不確定（未確認）の様相を持つモダリティが共起している場合，
「不安」という感情を生起させ，逆に
正のイメージ値を持つ語に不確定の様相を持つモダリティが共起する場合には「期待」という
感情を生起させるという処理を行う．
表\ref{tb:imvrule}に，意味属性イメージ値とモダリティの共起ルールを示す．
例えば，文末に「悪者でしょう」という表現が含まれる場合，
意味属性「悪者」と不確定様相と判定される「〜でしょう」とが共起していると判定し，
（負の意味属性に属する語） + （不確定様相）となり，「不安」を生起する．

\begin{table}[t]
\begin{center}
\caption{意味属性イメージ値とモダリティの共起ルール}
\begin{tabular}{|c|c|c|}
\hline
意味属性イメージ値	&	モダリティ	&	生起感情	\\ \hline \hline
正	&	不確定（未確認）様相	&	期待=0.5	\\ \hline
負	&	不確定（未確認）様相	&	不安=0.5	\\ \hline
\end{tabular}
\label{tb:imvrule}
\end{center}
\end{table}

\subsection{感情生起事象文型パターン}

本研究では，感情を生起すると考えられる感情動作や感情状態を記述した文を，
感情生起事象文と定義する．
感情生起事象文に当てはまる文のパターンに，
感情生起主体がどういった感情を生起しているかを付与したものを
感情生起事象文型パターン辞書として構築する．


\begin{table}[t]
\begin{center}
\caption{感情生起事象文型パターンの例}
    \footnotesize\renewcommand{\baselinestretch}{}\selectfont
    \begin{tabular}{|l|l|p{3cm}|c|}
\hline
\multicolumn{2}{|c|}{文型パターン} &  \multicolumn{1}{|c|}{生起感情($E_s$)} & 感情生起主体($N_s$) \\ \hline \hline
N1[3]-に|N2[1000]-を|遣る気-が	 & 	ある	 & 	期待	&	N1	\\ \hline
N1[4]-が	 & 	慌てる	 & 	驚き	&	N1	\\ \hline
N1[1253]-が|N2[41,238]-に	&	込み上げる	&	N1の感情属性	&	N2	\\ \hline
N1[4]-が	 & 	いじける	 & 	悲しみ \& 嫌悪	&	N1	\\ \hline
N1[4]-は|N2[2415,*]-に／で|頭-が	 & 	痛い	 & 	不安 \& 嫌悪	&	N1	\\ \hline
N1[4]-が|N2[*]-で／に	&	泣く	 &	if（N2が負感情属性）$E_s = 悲しみ$  	&	N1	\\
			&		 &	if（N2が正感情属性）$E_s = 喜び$		&		\\ \hline
N1[3]-が|N2[1000]-を|胸-に	 & 	抱く	 & 	期待	&	N1	\\ \hline
N1[4]-が|N2[1000]-に／で|胸-を	 & 	痛める	 &  悲しみ	&	N1	\\ \hline
N1[3]-が|N2[3]-に|迷惑-を	&	掛ける	&	嫌悪	&	N2	\\ \hline
N1[4]-が|N2[1000]-で|落ち着き-を	 & 	失う	 & 	驚き	&	N1	\\ \hline
N1[*]-が|N2[4]-に	 & 	嬉しい	 & 	喜び	&	N1	\\ \hline
N1[410,11,235]-が|N2[4]-の|不意-を	&	襲う	&	驚き	&	N2	\\ \hline
N1[4]-は|気-が	 & 	重い	 & 	不安 	&	N1	\\ \hline
N1[*]-が|N2[4]-に	 & 	思いがけない	 & 	驚き	 &	N1	\\ \hline
N1[3]-が|N2[*]-に／より|頭-を	 & 	抱える	 & 	不安	&	N1	\\ \hline
N1[4]-が|N2[*]-を|鼻-に	 & 	掛ける	 & 	誇り	&	N1	\\ \hline
N1[4]-は|N2[1000]-が	 & 	悲しい	 & 	悲しみ	&	N1	\\ \hline
N1[4]-が|N2[4]-の|鼻-を	&	折る	&	恥	&	N2	\\ \hline	
N1[3]-は|N2[1000]-が	 & 	悔しい	 & 	後悔	&	N1	\\ \hline
N1[*]-が|N2[3,535]-に	 & 	怖い	 & 	恐れ	 &	N1	\\ \hline
N1[43,885,341]-が	 & 	寂しい	 & 	悲しみ	&	N1	\\ \hline
N1[4]-が|N2[*]-に	 & 	痺れる	 & 	興奮	&	N1	\\ \hline
N1[3]-が|N2[*]-を	 & 	自慢|する	 & 	誇り	&	N1	\\ \hline
\end{tabular}
\label{tb:patterns}
\end{center}
\end{table}

具体的には，感情生起事象文型として，日本語語彙大系\cite{jlexicon}に収録されている用言意味属性から
「感情動作」と「感情状態」に属する用言パターン1615種類（感情状態 275，感情動作 1340）を
基本感情生起事象文型パターンとして抽出し，感情の種類と感情生起条件を付与した．
（各文型パターンには文中の格スロットに入る名詞の意味属性制約が設定されている．）
感情生起条件には，感情生起の主体を定義している．
例えば，「N1-が N2-に 怯える」という感情生起事象ならば，
事象の主体であるN1が「恐れ」という感情を生起していることを定義する．
また，格スロットに入る単語によって異なる感情が生起するような場合には，
単語の意味制約（好感度やイメージ値，感情属性値など）による条件も付加した．
表\ref{tb:patterns}に，感情生起事象文型パターンと，生起感情，その生起主体の例を示す．
文中において感情生起主体が省略されている場合などは，
話者を感情生起主体とみなして感情推定を行う．
しかし，話者以外の人物が感情生起主体の場合には，
他者の感情生起に対する話者の感情生起を推定する必要がある．
この場合，話者と他者との関係（社会的地位や親密度）などの違いによって
生起する感情が異なってくる．
そこで，本手法では，各感情生起事象文型パターン毎に
感情生起主体の感情生起条件のみを記述し，
入力文中の感情生起主体が話者であると判定したときのみ，
感情生起事象として感情生起条件を適用し，話者の感情推定を行う．
入力文が感情生起事象文型パターンに当てはまるかどうかの判定条件として，
述語の一致を用いる．
述語が入力文のものと一致する文型パターンを，その文の感情生起事象として採用する．
さらに，述語が一致する文型パターンが複数存在するとき，
文中に含まれる単語の意味属性類似度を選択の基準とする．
具体的には，文における単語意味属性類似度の和の平均値
が最大値をとる文型パターンを採用することにする．

単語意味属性類似度は各単語の，日本語語彙大系で定義されたシソーラスにおける意味属性により求めることができる．
単語意味属性の類似度を求める式を式\ref{eq:sim}に示す．
\begin{equation}\label{eq:sim}
単語意味属性類似度 \ \ sim(W_i, N_i) = \frac{（共通の親のシソーラスの根からの深さ）*2}{W_iとN_iのシソーラスの根からの深さの和} 
\end{equation}

$W_i$は文中の格要素の単語の意味属性を表しており，
$N_i$は，文型パターン中の格スロットに付与されている意味属性を示す．

式\ref{eq:conc}に，文における単語意味属性類似度の平均値($AVG_s$)を求める式を示す．
式\ref{eq:conc}中の $n$ は，文型パターン中の格スロット数を表す．
式\ref{eq:conc}中のそれぞれの格要素ごとの類似度 $sim(W_i, N_i)$ は，\cite{Kawahara}らの
格フレーム類似度の算出で用いられている方法と同様に，
ある単語が複数の意味属性に属する場合には，単語意味属性類似度が最大の意味属性を採用することにする．
\begin{equation}\label{eq:conc}
AVG_s = \frac{ \sum^{n}_{i=0} sim(W_i, N_i) }{ n }
\end{equation}
また，格スロットに具体的な単語が設定されている場合（「N1-が 大志-を 抱く」の「大志」など），
その単語に一致すれば類似度を1，一致しない場合には類似度を0とする．

以下，述語が一致する場合の
文型パターンの照合処理から感情生起条件適用までの流れについて述べる．


\begin{enumerate}
\item 入力文中の，モダリティ要素などを取り除いた述語が一致する文型パターンを検索し，
該当するものが複数ある場合は，式\ref{eq:conc}により値 $AVG_s$ を求め，
最大値をとる文型パターンを採用する．
\item 採用した文型パターンに付与されている感情生起条件を適用する．
各格要素の人物判定には話者ごとに自身または他者の呼び名を記述した人物辞書が必要であるが，
文中で代名詞を用いている場合には，意味属性が「対称」なら対話相手，
「自称」なら話者自身，その他ならば他の人物（あるいは物）であると判定する．
\item 感情生起条件に一致すれば，その感情が感情生起主体に生起していると推定される．
以下，感情生起主体が話者の場合は(4)，それ以外の場合は(5)のように処理される．
\item 感情生起主体が話者であれば，採用された文型パターンに付与されている
感情生起条件に基づき，話者の感情を推定する．
このとき，推定された話者の感情は，3.4節で述べる感情パラメータ計算において述語の感情属性値ベクトルとして計算される．
\item 感情生起主体が話者以外であれば
話者以外の感情生起とみなし，これを保持し，
3.5節で述べるモダリティの感情属性値更新ルール（動作主体が話者以外）に当てはまる場合に，話者の感情が推定される．
また，(4)と同様，推定された感情は述語の感情属性値ベクトルとして計算される．

\end{enumerate}

述語が一致せず，感情生起事象として判定されない場合には感情表出発話文とみなし，
次節で述べる感情パラメータを計算することによって話者の感情推定が行われる．\\

\subsection{感情パラメータ}

感情表出発話文には感情を表す単語やイディオムが含まれていることが多い．
そこで，本手法では，文に含まれる感情語や感情イディオムからその文における話者の感情表出の程度を計算する．

まず，文に含まれる各感情の強度を示す値として感情属性値を定義する．
また，文から計算される感情の値として感情パラメータを定義する．
感情パラメータとは，文中の格要素に付与された感情属性値を感情の種類ごとに合成したものを指す．

また，感情パラメータは，$（感情属性の種類数）*（文中の格要素数+1）$ の
感情属性値ベクトルで表現する．
感情辞書で照合した語やイディオムに，
複数の感情属性が付与されている場合には，その全ての種類が
感情パラメータ計算式に代入されることになる．
各感情パラメータは，0か正の値をとる．
\begin{equation}\label{eq:ea}
EA = \sum^{n-1}_{i=0} ea_{i} * w_i  + ea_p * w_p
\end{equation}

式\ref{eq:ea}は，文の感情パラメータ計算式であり，
式\ref{eq:ea}における$ea_{i}$は，感情属性値ベクトルを表し，$w_i$は，各格要素ごとの重みを表す．
また，$ea_p$は述語の感情属性値ベクトルで，$w_p$は述語への重みを表す．

1発話中の感情パラメータは1文ごとに計算されるが，
感情は記憶の一種であり，発話中において記憶と
同じように忘却されていくであろうという考えに基づき，
エビングハウスの提案した忘却曲線\cite{eb}の近似式を用いることにより，
同一発話テキスト中の前の文から計算されたパラメータとの合成を行う．
感情パラメータ合成の計算式を式\ref{eq:ep}に示す．
式中の$EA_n$は，観測中の文から得られた最新の感情属性値ベクトルを表し，
$EA_t$は，それまでに計算された感情属性値ベクトルを表す．
\begin{equation}\label{eq:ep}
EP = EA_n + \sum^{n-1}_{t=0} \frac{1}{(n-t+\frac{1}{n})^{(n-1)}}*EA_t  
\end{equation} 

また，それぞれの感情パラメータを計算する際，
感情属性値の値に掛ける重みは，格要素の種類ごとに異なる．
主体・客体に好感度またはイメージ値がある場合にはそれを考慮して
重みが決定される．
心理学の分野では，人間はプラスイメージの対象を
優先して評価する場合が多いことが S-V-Oポジティビティ\cite{Inomata}として知られている．

そこで，正のイメージ値，または感情属性を持つ要素ほど重みを大きくする，
格要素ごとの重みを決定するルールを定義する．

表\ref{tb:svoBias}に示すように，
主体への重みを$w_s$，客体への重みを$w_o$とし，その値を定義した．
また，述語への重み$w_p$は1.5とする．
本手法では，表層格決定処理時に
深層格決定は行わないが，
主体，客体は，表層格の種類（ガ／ハ格，ヲ格）と当てはまる語の意味属性（人物，事物）から
判定を行う．

\begin{table}[t]
\begin{center}
\caption{格要素重み決定ルールの一部}
\begin{tabular}{|r|c|c|}
\hline
\multicolumn{1}{|c|}{格要素の種類}	& 格要素の好感度（イメージ値）	& 	重み		\\ \hline \hline
ガ／ハ格（人物）［主体(Subject)］	& 正		&	$w_s = 1.4$		 \\ \hline
ガ／ハ格（人物）［主体(Subject)］   & 0		&	$w_s = 1.0$		\\ \hline
ガ／ハ格（人物）［主体(Subject)］    & 負	& $w_s = 0.5$		\\ \hline
ヲ格（人物／事物）［客体(Object)］ & 正	&	$w_o = 1.2$		 \\ \hline
ヲ格（人物／事物）［客体(Object)］ & 0      &	$w_o = 0.7$		\\ \hline
ヲ格（人物／事物）［客体(Object)］ & 負	&	$w_o = 0.3$		 \\ \hline
\multicolumn{1}{|c|}{その他の格}	&	正	&	$w_{other} = 0.7$	\\ \hline
\multicolumn{1}{|c|}{その他の格}	&	0	&	$w_{other} = 0.5$	\\ \hline
\multicolumn{1}{|c|}{その他の格}	&	負	&	$w_{other} = 0.4$	\\ \hline
\end{tabular}
\label{tb:svoBias}
\end{center}
\end{table}

感情パラメータ計算により，述語が感情生起事象文型パターンに当てはまらない場合にも，
感情語と感情イディオムを含んでいる文（感情表出発話文）からの感情推定を行うことが可能となる．
また，述語が感情生起事象文型パターンに当てはまり，話者の感情が推定されている場合には，
その推定感情の種類と値を述語の感情属性値ベクトルとした上で，感情パラメータを計算する．
（この場合，感情属性付与処理において述語単体に付与された感情属性は考慮しない．）

\subsection{修飾語とモダリティによる感情属性値の更新ルール}

文中の格要素や述語を修飾する語が存在する場合，
それらが被修飾要素の感情属性値の増減や変化に関わることをルールとして定義した（表\ref{tb:shushoku}）．
修飾語，または修飾句のタイプによって，被修飾要素の感情属性への変化の与え方が異なる．
本手法では，「直接修飾型」と「程度変化型」の修飾語を定義する．
修飾語が直接修飾型である場合，被修飾要素の感情属性の有無に関わらず，
修飾語の感情属性に書き換えられることとする．
これは，直接修飾型に分類されるような形容詞や副詞などは，感情に大きく影響を与えるものと考えたためである．
例えば，「美しい」などの直接修飾型の形容詞によって「花子」という語が修飾されるとすると，
被修飾要素「花子」に付与されている感情属性は打ち消され，修飾要素「美しい」の持つ感情属性「賞賛」に書き換えられることになる．
一方，被修飾要素の感情属性値の大きさに変化を与えるのが程度変化型の修飾語である．
表\ref{tb:shushoku}に示すように，程度の違いによって「強め」，「弱め」に分類した．
このタイプに分類される修飾語は主に副詞である．

\begin{table}[b]
\begin{center}
\caption{修飾語による感情属性値更新ルール}
\begin{tabular}{|l|l|l|}
\hline 
\multicolumn{2}{|c|}{修飾語の種類} & \multicolumn{1}{|c|}{更新処理}				\\ \hline \hline
直接修飾型修飾語 & \multicolumn{1}{|c|}{修飾語の例}	 & \multicolumn{1}{|c|}{被修飾語の感情属性値を書き換え}       \\ \cline{2-3}
	& 悲しい（感情属性値=“悲しみ”） & 感情属性値を“悲しみ”に書き換え \\ \cline{2-3}
        & 楽しい（感情属性値=“喜び”） & 感情属性値を“喜び”に書き換え \\ \cline{2-3}
        & 美しい（感情属性値=“賞賛”） & 感情属性値を“賞賛”に書き換え \\ \hline \hline
程度変化型修飾語	& \multicolumn{1}{|c|}{修飾語の例}	  & \multicolumn{1}{|c|}{被修飾語の感情属性値の強度を増減}	 \\ \cline{2-3}
	& とても，かなり，すごく，...（強め）	& 被修飾語の感情属性値に1.2を掛ける \\  \cline{2-3}
	& 少し，ちょっと，あまり，...（弱め）	& 被修飾語の感情属性値に0.9を掛ける \\ \hline
\end{tabular}
\label{tb:shushoku}
\end{center}
\end{table}

これらの修飾語のタイプの判定のために，感情辞書とは別に，
形容詞と副詞を上記の2タイプに分類した修飾語辞書を準備した．
この辞書には程度の値なども記述している．

また，修飾語には，上で述べた2つのタイプのものと，
文のモダリティの変化に影響するものがある．
例として，「おそらく，雨が降るだろう」のように，「おそらく」という副詞には
「未来」や「予測」という暗示があり，文末の「だろう」という予測の意味を持つ表現を伴うことが多い．
よって，副詞には文末の様相と同様のはたらきを持つものも存在するので，修飾語辞書に
モダリティとしての属性（モダリティの種類）の登録も行っておく．

また，モダリティを文全体の感情属性値に影響させるルールを定義した．
基本ルールとして，不確定様相や過去様相なら，感情属性値を減少させる．
モダリティの種類ごとに不確定の度合い（やや弱い不確定=0.2，不確定=0.4，やや強い不確定=0.6）を
不確定の程度値として定義する．
具体的には，文の感情属性値ベクトルに $(1.0 - 不確定の程度値)$ を掛ける処理を行う．
この 1.0 という値は基準値であり，確定している事象であれば不確定の程度値が0.0ということであるから，
文の感情属性値ベクトルは減少しないことになる．一方，不確定の程度が高くなるほど文の感情属性値ベクトルが減少する．

\begin{table}[b]
\begin{center}
\caption{モダリティによる感情属性値更新ルール}
\begin{tabular}{|c|p{4cm}|p{7cm}|l|}
\hline
種類	& 文末例 &	\multicolumn{2}{|c|}{条件と更新処理} \\ \hline \hline
許可			& V-てよい，V-てかまわない   &	 $Em(V) \geq 0 \ and \ Sbj =“話者”$  &  期待 (+0.5) \\ \cline{3-4}
			&    &	$Em(V) \geq 0 \ and \ Sbj =“他者”$	& 受容 (+0.5) \\ \hline
禁止			& V-てはいけない，V-な   &	$Em(V) \geq 0 \ and \ Sbj =“話者”$	&  不安 (+0.5) \\ \cline{3-4}
			&    &	$Em(V) ＜ 0 \ and \ Sbj =“他者”\ and \ Asp =“乱暴”$		&  嫌悪 (+0.5) \\ \hline
依頼			& V-てくれ 	&  $Em(V) \geq 0 \ and \ Sbj =“他者”$		& 期待 (+0.5) \\ \hline
希望			& V-たい，V-てほしい，V-てもらいたい &  $Em(V) \geq 0 $  	& 期待 (+0.5) \\ \hline
恩恵			& V-てもらう，V-てくれる	&  $Em(V) \geq 0 \ and \ Sbj =“他者”$	& 感謝 (+0.5) \\ \hline
恩恵			& V-てあげる	& $Em(V) \geq 0 \ and \ Sbj =“話者”$ & 受容 (+0.5) \\ \hline
\end{tabular}
\label{tb:modality}
\end{center}
\end{table}

不確定様相とは，述べられている事象が
まだ未実施である場合や，未確認であるような場合に用いる表現を指す．
一方，過去様相（確認様相）は既に過去に確認済みの事象の場合に用いる表現を指す．
他に，モダリティの種類（「許可」，「禁止」，「依頼」など）ごとに，
表\ref{tb:modality}に示すような感情属性値更新ルールを定義した．
表\ref{tb:modality}中の$Sbj$は，動作主体を表す．
本研究では，モダリティの持つ属性として「確認／未確認(Asc)」，「時制(Time)」，「態度(Asp)」を定義する．
表\ref{tb:modality}中の$Em$は，述語の感情属性が正感情属性か負感情属性かを判定する関数である．
式\ref{eq:emfunc}に関数の定義を示す．$sign$は符号関数を表す．
また，$ea_i$ は，述語動詞(V)の感情属性値を表し，
\pagebreak
関数$em$は感情属性ごとの正負を判定するものである．
\begin{equation}
\label{eq:emfunc}
Em(V) = sign \left( \frac{ \sum^{n}_{i=0}em(ea_i) }{n} \right) 
\end{equation} 



\subsection{感情推定の例}

ここで，(a)「私が優しい花子の言葉に感謝するだろう．」という文（発話テキスト）から
感情推定する例を各ステップごとに示しながら処理の流れを説明する．

\begin{figure}[b]
\begin{center}
    \includegraphics[scale=0.23]{Step5-fig.eps}
\caption{Step5 修飾語による感情属性更新処理}
\label{fig:step5}
\end{center}
\end{figure}

\newcommand{\StepLabel}[1]{}
    \StepLabel{〈Step1〉}
まず，入力された発話テキスト(a)を「．」や「！」などの句点に基づき，文毎に分割を行う．
(a)は1文のみで構成される発話テキストなので，分割処理は行われない．
また，(a)には「？」（疑問符）や「！」（感嘆符）のような記号や，
その他の記号は含まれないと判定される．

    \StepLabel{〈Step2〉}
次に，南瓜による係り受け解析を行う．
具体的には，〈Step1〉で分割された一文ごとに解析を行う．

\StepLabel{〈Step3〉}
係り受け解析された結果に基づいて，表層格決定処理が行われる．
(a)では，ガ格は「私」，ニ格は「言葉」，述語は「感謝する」と決定される．
また，ニ格に係る修飾句として「優しい花子の」が抽出される．
ここで，述語に付属している文末表現は，モダリティ要素として抽出しておく．

    \StepLabel{〈Step4〉}
次は，文中の語と感情辞書との照合を行う．
具体的には，格要素ごとに感情属性が含まれるかどうかを判定する．
ここで，図\ref{fig:step5}に示すように，
感情語として登録されている「優しい」に感情属性「賞賛」が付与される．
係り受け関係から，ニ格への修飾句「優しい花子」となり，これが感情属性「賞賛」を
持つことになる．また，修飾型は「優しい」のものをそのまま継承して「直接修飾型」となる．

    \StepLabel{〈Step5〉}
ここで，修飾語による感情属性値の更新ルールが適用される．
(a)の場合，修飾句「優しい花子」が「言葉」に係り，ニ格の感情属性値は上書きされ，
「賞賛=1.0」となる．

    \StepLabel{〈Step6〉}
次に，文型パターンの照合処理が行われるが，(a)の場合，
文型パターン「N1-が N2-に 感謝する」に一致し，生起主体=「私」であり，(a)から推定される感情は
話者の生起感情となる．そして，文型パターンに付与されているルールに基づき，述語感情属性として「感謝=1.0」が付与される．

    \StepLabel{〈Step7〉}
文中にモダリティがあるかどうかの判定が行われる．
(a)に含まれる推定のモダリティ「だろう」により，文感情属性値の更新が行われる．
この「だろう」の不確定の度合いが「やや弱い不確定」であれば，不確定値は0.2となり，
文感情属性値ベクトルに$(1-0.2)$を掛け合わせることで，結果として，
｛$賞賛=0.8, 感謝=0.8$｝という感情属性値が得られる．

    \StepLabel{〈Step8〉}
最後に感情パラメータの計算が行われるが，発話テキスト中の文が1文のみなので，
式\ref{eq:ea}により，
\\
$EP = EA = \{感謝 = 0.8 * 1.5 ，賞賛 = 0.8 * 0.7\} $
\\
という計算が行われ，話者の生起感情として，｛感謝=1.2, 賞賛=0.56｝という結果が出力される．



\section{評価実験2}

評価実験1の結果から，単純な文からの感情推定に失敗する原因として「文脈誤り」が多かった．
したがって，対話の流れ（会話全体のムード）に応じて感情推定を行う必要がある．
そこで，各シナリオの登場人物ごとに感情状態を保持し，
感情の持続性を考慮した感情パラメータ蓄積ルールを適用することにより対話全体の雰囲気を考慮することにした．
\subsection{感情の持続性}
感情は，一時的なものと継続的なものの2種類に分けることができる．
一時的な感情の場合，生起した時点から発話が進むにしたがって減少し，収束していくと考えられる．
一方，継続的な感情は，対話中にほとんど減少しないと考えられる．
感情の種類について述べている\cite{emotion_psychology}によると，
感情を継続性と対人性の観点から分類すると，
表\ref{tb:emotion_category}のようになる．

\begin{table}[b]
\begin{center}
\caption{感情の分類}
\begin{tabular}{|c|c|c|p{8cm}|}
\hline
分類名 & 継続性 & 対人／自我 & 属する感情 \\ \hline \hline
衝動 & なし & 自我  & 悲しみ・可笑しさ・怒り（侮辱）・憤り・照れ（謙遜）・喜び（懐かしさ）\\ \hline
反応 & なし & 対人  & 驚き・恥・悔しさ・安心・当惑・恐怖・畏怖・失望 \\ \hline
態度 & あり & 対人  & 愛（尊敬・崇拝・愛着・責任感・勇気）・憎しみ・嫉妬・哀れみ・罪悪感・興味（美しさ・ユーモア・憧れ）・恋・軽蔑・恨み・嫌悪（醜さ）・感謝・羨望  \\ \hline
気分 & あり & 自我  & 幸福・誇り・淋しさ・楽しさ・倦怠感・不平不満（執着，頑固，意地っ張り）・焦燥感・憂鬱・不安・希望（勇気・野心・意志）・自信（優越感）・無力感（劣等感・せつなさ・後悔） \\ \hline
\end{tabular}
\label{tb:emotion_category}
\end{center}
\end{table}

したがって，
継続的感情は，発話の進行に影響されず感情状態が維持させる．
また，一時的感情は発話の進行に伴い，
1発話テキストにおける感情パラメータの合成時と同様に，
同じ対話中の過去に生起した感情を忘却曲線の近似式によって減衰させ，
最新の感情パラメータに足し合わせる．
また，対話が終了するまで継続的感情を蓄積し続けることにより，
後に生起した感情よりも強度が大きくなってしまうことを避けるため，
継続的感情と一時的感情とで減少の割合を変更することで対処する．
具体的には継続的感情は一時的感情よりも減少率を低くする．
この感情の持続性を考慮したルールを感情パラメータ蓄積ルールとする．
ここで，ある発話者による2発話における感情パラメータを合成する例を示す．

対話例として，表\ref{tb:para_ex}に示すように各話者ごとの発話において感情パラメータが計算されたとする．
表中の感情パラメータは，1発話テキスト内のみで計算されたものとする．発話は，$U_{A1}, U_{B1}, U_{A2}, U_{B3}$ の順に行われたとする．
この対話中の$U_{A2}$ において，直前の発話 $U_{A1}$ で計算された感情パラメータとの合成を行う．
一時的感情と継続的感情の減少の割合の比を 1.5 と定義し，計算を行う．
計算の過程を図\ref{fig:katei}に示す．

\begin{table}[b]
\begin{center}
\caption{各発話ごとの感情パラメータの例}
\begin{tabular}{|c|c|l|}
\hline
\multicolumn{1}{|c|}{発話者}	&	発話番号	&	\multicolumn{1}{|c|}{感情パラメータ}	\\ \hline \hline
A	& $U_{A1}$	&	喜び=0.70, 誇り=0.60	\\ \hline
B	& $U_{B1}$ 	&	驚き=1.00, 嫌悪=1.00	\\ \hline 
A	& $U_{A2}$ 	&	怒り=0.50, 悲しみ=1.00, 受容=0.60	\\ \hline
B	& $U_{B2}$ 	&	期待=0.50, 不安=1.00, 嫌悪=1.00		\\ \hline
\end{tabular}
\label{tb:para_ex}
\end{center}
\end{table}

\begin{figure}[b]
\vspace{\baselineskip}
\begin{center}
    \includegraphics[scale=0.34]{katei.eps}
\caption{感情パラメータの合成}
\label{fig:katei}
\end{center}
\end{figure}


評価実験2として，1発話のみからでは推定が困難な場合に，
直前の発話から推定された感情パラメータを利用する
感情パラメータ蓄積ルールによる効果が得られるかどうかを確かめるための実験を行った．

\subsection{対象データ}

評価実験1に用いた同じシナリオ文（5種類，合計1774文）と人手による解のデータを実験対象とした．

\subsection{実験結果}

\begin{figure}[b]
\begin{center}
    \includegraphics[scale=0.25]{14-3ia13f6.eps}
\caption{感情状態の時間的推移}
\label{fig:etra}
\end{center}
\end{figure}

図\ref{fig:etra}は，実験システムにおいて，
ある話者の感情状態（嫌悪）の時間的変化を表示させたところである．
感情パラメータ蓄積ルール適用前と，適用後の発話ごとの評価スコアの平均を比較すると（表\ref{tb:score_comp}参照），
適用前が0.42で，適用後が0.47と，適用後の方が高くなっている．
また，表\ref{tb:paraHyoka}に示す通り，成功率も上がっている．
実験1で推定に失敗したような文脈を考慮する必要のある短い文からの推定に効果があったと考えられる．
一方，この評価実験において，シナリオの場面転換による時間経過を考慮しなかったため，
本来ならば0になっているべき感情が推定されてしまうような誤りも見られた．表\ref{tb:error_param}にその例を示す．


\subsection{考察}

感情パラメータ蓄積ルールを適用することにより，
前の発話からの感情の持続性を考慮することができ，
成功率が57\%から76\%へと大幅に改善された．
しかし，依然として人手による正解感情と推定結果との完全一致率は低かった．
また，感情推定の成功率を上げるために，
話者自身の発話による感情状態の維持に加え，
直前の対話者の発言の影響を考慮する必要があると考える．

\begin{table}[t]
\begin{minipage}{0.4\textwidth}
\begin{center}
\caption{評価スコアの比較}
\begin{tabular}{|c|r|r|}
\hline
シナリオ番号 & 適用前 & 適用後 \\ \hline \hline
1	&	0.42	&	0.47 \\ \hline
2	&	0.41	&	0.48 \\ \hline
3	&	0.42	&	0.46 \\ \hline
4	&	0.42	&	0.48 \\ \hline
5	&	0.46	&	0.48 \\ \hline
\hline
全体	&	0.42	&	0.47	\\ \hline
\multicolumn{3}{c}{　}\\
\multicolumn{3}{c}{　}\\
\multicolumn{3}{c}{　}\\
\multicolumn{3}{c}{　}
\end{tabular}
\label{tb:score_comp}
\end{center}
\end{minipage}
\hfill
\begin{minipage}{0.5\textwidth}
\begin{center}
\caption{感情パラメータ蓄積ルール適用後の評価結果}
\begin{tabular}{|l|r|}
\hline
評価スコア & 発話テキスト数 \\ \hline \hline
0.9 $\leq$ score	&	3	\\ \hline
0.8 $\leq$ score ＜ 0.9 & 0	\\ \hline
0.7 $\leq$ score ＜ 0.8 &	10	\\ \hline
0.6 $\leq$ score ＜ 0.7 &	111	\\ \hline
0.5 $\leq$ score ＜ 0.6 &	1235	\\ \hline
0.4 $\leq$ score ＜ 0.5 &	97	\\ \hline
0.3 $\leq$ score ＜ 0.4 &	138	\\ \hline
0.2 $\leq$ score ＜ 0.3 &	105	\\ \hline
0.1 $\leq$ score ＜ 0.2 &	24	\\ \hline
0.0 $\leq$ score ＜ 0.1 &	51	\\ \hline
\end{tabular}
\label{tb:paraHyoka}
\end{center}
\end{minipage}
\end{table}

\begin{table}[t]
\begin{center}
\caption{誤り例}
\begin{tabular}{|c|c|p{6.5cm}|c|c|}
\hline
発話番号 & 話者 & 発話文 & 推定結果 & 人手による正解感情 \\ \hline \hline
97	& S &	ひどいなあ，その言い方． & 非難 & 非難 \\ \hline
98	& A &	事実でしょ？それより，早く仕事に戻りなさいよ！！お昼休みはとっくに過ぎてるの！みんなカンカンよ？ & 怒り，軽蔑 & 怒り \\ \hline
99	& S &	はいはい．わかりました．じゃあな．また明日． & 受容 & 受容 \\ \hline
\multicolumn{5}{|c|}{—場面転換—} \\ \hline
100	& A & …いつでも来たい時にって言ったくせに…．& 軽蔑 & 悲しみ \\ \hline
\end{tabular}
\label{tb:error_param}
\end{center}
\end{table}


\end{document}
