言い直し表現の特徴と抽出の方針
\subsection{言い直し表現の特徴}
言い直し（以下では「換言」とも言う）とは，下記の例に示すように，前に言ったこ
との誤りを訂正してもう一度言ったり，話の途中で言い淀んでしまってもう一度言う
といった表現を示す．

\Vspace
                  「はい，（かしこ）\(\underline{かしこまり}\)ました．」

                  「（わたし）\(\underline{わたくし}\)鈴木が承りました．」

\Vspace
以下では，言い直しによって訂正される対象となる部分（括弧で示した部分）を「換
言前音節列（又は換言前文節）」と呼び，また言い直しによって訂正された部分（下
線で示した部分）を「換言後音節列（換言後文節）」と呼ぶ．さて，言い直し表現の
出現位置と種類について考える．換言前音節列は，後で換言後音節列によって訂正さ
れる部分であるから，一種の誤りと見なすことができ，それを削除すれば発話者の意
図した文になると考えられる．このような観点から，会話テキストデータベース（Ａ
ＴＲ音声翻訳通信研究所）に収録された「旅行に関する対話」の対話例を対象に，言
い直し表現が出現した位置を分類すると表１の通りとなる．この表から，換言前の音
節列の約80％が正しい文の文節境界の位置に挿入された形になっていることが分か
る．
\begin{table}[htbp]
  \begin{center}
    \caption{言い直しの出現位置の傾向}
    \label{tab:1}
    \medskip
\epsfile{file=fig/6.eps,height=99mm}
  \end{center}
\end{table}

次に，換言前音節列と換言後音節列が連続する場合について，言い直しのタイプを分
類すると表２の結果を得る．この表から，言い直しの大半（表2の中の切り捨てタイ
プと置き換えタイプを除く約60％が該当）は，間違った表現をそれと同一内容を表す
正しい表現への言い換えとなっており，繰り返しの構造を持っていることが分かる．
\subsection{言い直し表現抽出の方針}
前節の考察に従い，本論文では言い直し表現抽出の第１ステップとして，文節境界位
置に現れる繰り返しタイプの言い直し表現を対象にその抽出法を考える．

ところで，抽出の対象とする言い直し表現は文節境界に現れることから，言い直し表
現自体は文節で，換言前表現の始点，終点は共に文節境界であると考えることができ
る．また，繰り返しタイプの言い直しでは，換言前音節列と換言後音節列は連続して
おり，両者は類似した音節を持つ可能性が高いから，隣接した２つの文節の音節を比
較すれば，言い直し表現が抽出できると期待される．
\begin{table}[htbp]
  \begin{center}
    \caption{言い直しパターンのタイプ}
    \label{tab:2}
    \medskip
\epsfile{file=fig/7.eps,height=161mm}
    \vspace*{-3mm}
  \end{center}
\end{table}

以上から，ここでは，図1に示すように，以下の2つの段階に分けて言い直し表現を抽
出する．

\noindent{\bf 第１段階}　：言い直しを含む音節文の文節境界を推定する．
\begin{figure}[bp]
  \bigskip
  \bigskip
  \begin{center}
\epsfile{file=651_8.eps}
    \medskip
    \caption{言い直し対象の検出の概要}
    \label{fig:1}
  \end{center}
\end{figure}

\noindent
{\bf 第２段階}　：連接する２つの文節間で音節列を比較し，類似性の高い文節の組
の前方の文節を「換言前音節列」と判定する．
言い直し表現の抽出法
\subsection{言い直しを含む文節境界の推定}
\subsubsection{文節境界推定の基本的考え方}
言い直しを含む音節列の文節境界を推定する方法について考える．従来，べた書きさ
れた日本語かな文の文節境界を推定する方法として，マルコフ連鎖モデルを用いた方
法~\cite{araki:97:a}が提案されている．この方法は，図2-(i)に示すように，文節内で
は文字間の連鎖強度が高いことに着目して，文字連鎖確率値が落ち込むところを仮文
節境界と推定するもので，具体的には，文節境界は以下の２つの手順で決定される．
\Vspace
\begin{enumerate}
\item かな文字列の前方から順にマルコフ連鎖確率を求め，連鎖確率がある閥値以
下(落ち込み)となる文字を$x_i$とする．($x_i$の直前に文節境界がある可能性が高
い)
\item 文字$x_i$の直前に文節境界記号bを挿入し，この記号と前方文字との連鎖確率
を求める．確率がある閥値以上(立ち上がり)になったとき，bの位置を文節境界と判
定する．
\end{enumerate}
\Vspace

なお，(1)，(2)共に，連鎖確率の評価では，正しく文節境界記号の挿入されたべた書
きかな文から得られた連鎖確率を使用する．

ところで，この方法は，文法的にも意味的にも正しい日本文を対象に提案された方法
である．言い直しを含む文では，換言前音節列の部分で発話の中断や言い誤りが起こ
っているため，仮文節境界の判定に用いた連鎖確率の「落ち込み」や「立ち上がり」
が必ずしもシャープには現れない危険性があり，上記の方法を，言い直しを含む文に
そのまま適用するのは適切でないと考えられる．そこで，言い直し音節列の挿入され
た文節境界の性質について考えると以下のことが分かる~\cite{araki:96:a}．

まず，換言前音節列の始点に当たる文節境界では，その境界の直前の文字列は正しい
文字列であるので，前方向(順方向)のマルコフ連鎖確率値が落ち込む位置を求めれ
ば，その位置が換言前音節列の始点となっている可能性が高い．

これに対して，換言前音節列の終点に当たる文節境界では，その境界の直前の文字列
は言い直し対象の一部(言い誤りなど)であるので，前方向(順方向)のマルコフ連鎖確
率値が必ずしも落ち込むとは限らない．しかし，その境界の後方の音節列は正しく言
い直された音節列であるので，後方向(逆方向)のマルコフ連鎖を使用すれば，連鎖確
率の落ち込みによってその位置を抽出できる可能性が高い．

以上から，本論文では，図2-(iv)のように前方向(順方向)と後方向(逆方向)のマルコ
フ連鎖確率値を組み合わせることによって文節境界を判定する．
\vfill
\begin{figure}[p]
  \begin{center}
\epsfile{file=fig/10.eps,height=180mm}
    \medskip
    \caption{言い直し列を含んだ音節文の仮文節境界の推定法}
    \label{fig:2}
  \end{center}
\end{figure}
\subsubsection{文節境界の推定}

文節境界の推定では，前方法，後方向のマルコフ連鎖モデルを使用することを述べた
が，ここではさらに，文節境界をまたがる文字連鎖の確率をも考慮し，３つの方法を
考える．以下では，\cite{araki:97:a}で用いられた下記の記号を用いて，各方法を定
義する．
\Vspace
\begin{enumerate}
\item FBL:
文節境界記号bと前方文字との連鎖確率の「立ち上がり」を順方向に評価する方法
\item BBL:
文節境界記号bと後方文字との連鎖確率の「立ち上がり」を逆方向に評価する方法
\item FL:
文節間をまたがる音節間の結合力(「落ち込み」のみ)を順方向に評価する方法
\item BL:
文節間をまたがる音節間の結合力(「落ち込み」のみ)を逆方向に評価する方法
\end{enumerate}
\Vspace

なお，ここでは，マルコフ連鎖確率として３重マルコフモデルを用いる．また，以下
では，複数の方法を組み合わせて使用するときの文節境界の判定条件を記号
「・(and)」，「+(or)」で表す．
\Vspace
\begin{enumerate}
\item {\bf 第一の方法}：《単純な双方向型の推定》(FBL+BBL法:図3-(i))\\
連鎖確率の小さいところを抽出し，その位置に文節境界を表す記号bを挿入したと
き，記号bについての双方向のマルコフ連鎖確率値の少なくともどちらか一つが，あ
る閾値より大きくなるところを文節境界と推定する．
\item {\bf 第二の方法}：《順方向挟み込み型を併用した双方向型の推定》(FL・
(FBL+BBL)法:図3-(ii))\\
第一の方法に加えて，文節境界をまたがる文字間の連鎖確率を順方向に評価す
る．
\item {\bf 第三の方法}：《双方向挟み込みを併用した双方向型の推定》(FL・BL・
(FBL+BBL)法:図3-(iii))
\footnote{3.1.3で後述するように，１つの文節境界だけを用いてマッチングを行う
方式１の場合には，文節境界の中で換言前音節列の始点に当たる文節境界の検出精度
を高くすることが必要となる．その場合には，換言前音節列は一種の誤り文字列と見
なすことができるから，逆方向のマルコフ連鎖モデルとしてＢＢＬを用いる効果は少
ないが，ＢＬを用いる効果は大きい（誤り文字列の場合はＢＬが落ち込む）と考えら
れることから，FL・BL・ (FBL+BBL)法よりもFL・BL・FBL法が有効と考えられる．両
者の比較については，５．の実験結果で議論される．}\\
第一の方法に加えて，文節境界をまたがる文字間の連鎖確率を順方向と逆方法から評
価する．
\end{enumerate}
\Vspace
\subsubsection{言い直し音節列の判定}

第１段階の方法で得られた文節境界のうち，任意の境界から始まる３つの連続した文
節境界を順に，第１，第２，第３文節境界と呼ぶ．連続した文節の類似性を判定する
には，これらの文節境界に挟まれた文字列を比較すればよいが，これらの文節境界は
必ずしも正しいとは保証されない．
\begin{figure}[tbp]
  \begin{center}
\epsfile{file=fig/12.eps,height=140mm}
    \medskip
    \caption{マルコフモデルによる文節境界の推定方法}
    \label{fig:3}
  \end{center}
\end{figure}
特に，３つの文節境界が共にすべて正しい確率
は，一つの境界が正しい場合よりも低下するから，なるべく少ない数の境界を使用し
て言い直し表現を抽出できるのが望ましい．しかし，逆に，使用できる文節境界が少
ない場合は，文節間の類似性判定の精度が低下する恐れがある．

これらの点を考慮して，ここでは，文節間の類似性を判定する方法（マッチング法）
として，以下の３つの方法を考える．
\newpage
\begin{enumerate}
\item {\bf 方式1}：１つの文節境界だけを使用する方法
\item {\bf 方式2}：連続した2つの文節境界を使用する方法
\item {\bf 方式3}：連続した3つの文節境界を使用する方法
\end{enumerate}
\Vspace

以下，これらの３つの方法の詳細を述べる．  まず，隣接する任意の2つの文節候補
をそれぞれ，$B_1 = x_1x_2 \cdots x_m$，および，$B_2 = x_{m+1}x_{m+2}\cdots
x_{m+n}$とする．
\bigskip

{\bf 【方式1のマッチング方法】}
\Vspace
\begin{enumerate}
\item 与えられた文節の先頭を始点として，長さ$l$文字（$l$は平均文節長の２〜３倍
程度）の\break
音節列$X=x_1 x_2 \cdots x_l$（但し，$X$の中に先頭文字$x_1$と等しい文
字$x_i$が存在する．すなわち，$x_1=x_i$）を取り出す．
\item $x_1$,$x_2$, $\cdots$,$x_l$を図４のように横と縦にならべたマトリックス
を考え，$x_1=x_i$となる$x_i$\break
の位置$i$ (但し，$2 \le i \le l$)を換言後文節の
開始点とする．
\item 換言前文節候補の$i-1$個の音節列$x_1x_2 \cdots x_{i-1}$の少なくと
も$j=(i-1)-k$個の$j$（ここで，$1 \le j \le i-1$)に対して，式$x_j=x_{j+i-1}$が成
り立つ時，$i-1$個の音節列$x_1x_2 \cdots x_{i-1}$
を換言前音節列として抽出する．ここで，$k$はハミング距離であり，実験的に最適値
を定める．
\end{enumerate}

\bigskip

{\bf 【方式2のマッチング法】}
\Vspace
\begin{enumerate}
\item ２つの文節候補$B_1$と$B_2$において，$B_1$を換言前文節候補とし，$B_2$の
文字列の中からその部分列として，$B_1$の文節長$m$と同じ長さの音節列$B_2 =
x_{m+1}x_{m+2} \cdots x_{2m}$を取\break
り出す．
\item $m-k$個以上の$j$(ここで，$ 1 \le j \le m$)について$x_j = x_{m+j}$である場
合に，$B_1$を換言\break
前音節列とする．ただし，$x_j$と$x_{m+j}$はそれぞれ文
節$B_1$と$B_2$の中の$j$番目の音節を\break
表す．
\end{enumerate}

\bigskip

{\bf 【方式3のマッチング法】}
\Vspace
\begin{enumerate}
\item[~] 第1，第2，および第3の文節境界によって決定される音節列$B_1$およ
び，$B_2$の組に対して，少なくとも$m-k$個の$j$ (但し，$j$は$n$と$m$の中で小さい方の
値に対して，$ 1 \le j \le m$(または$n$))について $x_j = x_{m+j}$となる場合に，$B_1$を
換言前音節列とする．
\end{enumerate}
\begin{figure}[htbp]
  \begin{center}
\epsfile{file=fig/14.eps,height=190mm}
    \medskip
    \caption{マッチングによる言い直し対象の検出方法}
    \label{fig:4}
  \end{center}
\end{figure}
言い直し表現の抽出精度の推定

前章で述べた方法は，文節境界の推定と文節間の類似性判定の２つの手順から構成さ
れる．そこで，本章では，文節境界の推定精度（適合率$P_b$と再現率$R_b$），及
び，文節間の類似性の推定精度（適合率$P_m$と再現率$R_m$）が与えられた時，最終
的に抽出される言い直し表現の抽出精\break
度（適合率$P_t$と再現率$R_t$）を推定する方
法について考える．

\subsection{文節抽出精度の推定}

文節境界推定の結果から，マッチングの3方式に必要な文節がどれだけ正確に抽出で
きるか考える．
\begin{flushleft}
  \bf (１)任意の文節の先頭位置が正しい確率
\end{flushleft}

まず，実験標本に含まれている正しい文節境界の数を$n$，文節境界の候補として検出
した境界の数を$n_1$，そのうち正しい文節境界の数を$n_0$とすると，推定された文
節境界の適合率$P_b$，再現率$R_b$は，それぞれ，
\begin{equation}
  P_b = n_0 / n_1，R_b = n_0 / n
\end{equation}
であるから，正しく推定された文節境界の数を$N_{1max}$と置く
と，$N_{1max}$は$n_0$に等しく，
\begin{equation}
     N_{1max} = n_0 = n R_b
\end{equation}
\begin{flushleft}
  \bf (２)正しく取り出される文節の数
\end{flushleft}

推定された文節境界から，どれだけの数の文節が正しく取り出せるかを考える．正し
い文節は，連続する２つの文節境界が正しい時に得られる．そこでまず，先頭の文節
境界を考えると，(1)から，そのような境界は，$n_0$個得られる．次に，これら
の$n_0$個の境界に続く文節境界がどれだけ正しく決定されているかを考える．但
し，ここでは，$n$, $n_0$, $n_1$はいずれも１より十分大きい値とする．ある正しく
決定された文節境界(始点)の後に初めて現れる文節境界としては，
\Vspace
\begin{enumerate}
\item  正しく文節境界として検出されたもの($n_0$)
\item  誤って文節境界と判定されたもの($n_1 - n_0$)
\item  見過ごされてしまったもの($n - n_0$)
\end{enumerate}
\Vspace
の３種が考えられる．全体では，$n_0+(n_1-n_0)+(n-n_0)=n+n_1-n_0$通りの可
能性があるが，このうち(1)の場合のみ正しい文節が得られる．どの可能性も文
節開始点と独立に現れると仮定すると，(1)が現れる確率は$n_0/(n+n_1-n_0)$であ
る．以上から，正しく抽出された文節の数は，$N_{2max}$は，
\begin{equation}
 N_{2max} = n_0 \times n_0 / (n+n_1-n_0)
\end{equation}
と推定される．ここで，(1)および(2)式を用いて書き替えると，
\begin{equation}
  N_{2max} = n \times R_b \times \gamma
\end{equation}
但し $\gamma= P_bR_b  / (R_b+P_b-R_bP_b)$．

\begin{flushleft}
  \bf (３)連続して正しく取り出せる文節の組の数
\end{flushleft}

この場合は，連続した3つの文節境界が正解であることが必要である．
連続する2つの文節境界が正しい文節境界の組みの数は(3)式で与えられるから，
連続した３つの文節境界が正解となる組の数$N_{3max}$は，(2)と同様の議論に
よって，$N_{2max}$の$ \gamma$倍となるから，
\begin{equation}
　N_{3max} = n \times R_b \times \gamma^2
\end{equation}
\subsection{言い直し表現の抽出精度の推定}
\begin{flushleft}
  \bf (１)言い直し表現の総合的な抽出精度
\end{flushleft}

文節間の音節類似性を判定するマッチング処理で，言い直し表現が正しく言い直
しとして抽出できるのは，正しい文節境界を持つ文節候補の中からのみと考えら
れる．これに対して，誤った言い直し表現は，文節境界が正しい場合からも，ま
た，文節境界が誤った場合からも抽出さ\break
れる．そこで，正しい文節境界を持つ文
節に含まれる言い直し表現が，正しく言い直しと判定\break
される割合を$\alpha$とし，言
い
直しでない文節を間違って言い直しと判定する割合を$\beta$とする．また，\break
文節境
界
推定実験で得られた文節の数を$N$，その中の正しい文節境界を持つ文節に含まれ
る言い直し表現の数を$M$とする．この時，マッチング実験において正しく言い直
しと判定されるものは，$\alpha M$件，誤って言い直しと判定されるもの
は，$\beta (N-M)$件
であるから，総合的な（第１段階と第２段階を組み合わせたときの）言い直し表
現の抽出精度（適合率$P_t$と再現率$R_t$）は，
\begin{equation}
 P_t =\alpha M /\{ \alpha M +\beta (N-M) \}
\end{equation}
\begin{equation}
 R_t =\alpha M / m
\end{equation}
となる．但し，$m$は標本全体に含まれる言い直し文節の数を示す．
ここで，$m$は既知としてよいから，$N$, $M$, $\alpha$, $\beta$の４つのパラメータの値
が分かれば，$P_t$, $R_t$は計算できる．そこで，以下では，これらの値を求める．
\begin{flushleft}
  \bf (２)文節数とその中の換言文節数（NとM）
\end{flushleft}

ここで，第１段階の文節境界の推定で得られる言い直し文節候補の数$N$とその中に含
まれる言い直し表現の数$M$を考える．$N$は，３つのマッチング方式いずれの場合も共通
で，
\begin{equation}
　N = n_1  = n R_b  / P_b
\end{equation}

次に，標本内の文節のうち，言い直し表現の含まれる割合を$a(=m/n)$とする．第2
段階では，第1段階で正しく抽出された文節($N_{1max}$, $N_{2max}$, $N_{3max}$)
の中に含まれた言い直しのみが抽出の可能性を持つ．そこで，第１段階で抽出された
文節も同じ割合で言い直し文節を含むと仮定すれば，その数$M$は，
\begin{equation}
  M = a \times N_{imax}(但し，i=1,2,3)
\end{equation}
となる．
\begin{flushleft}
  \bf (３)言い直し判定の確率（$\alpha$と$\beta$）
\end{flushleft}

ここで，すべての文節境界$N$が正しい場合を考え，正しい文節境界を持つ$N$個の
文節の中に，$m$個の言い直し表現が含まれていたとする．また，この標本に対し
て文節のマッチング処理によって，$m_1$個の文節が言い直しと判定され，
そのうち正しく判定されたものは$m_t$個だったとすると，マッチングの精度
（適合率$P_m$と再現率$R_m$）は，
\begin{equation}
 P_m = m_t  / m_1 , R_m = m_t  / m
\end{equation}
で与えられる．この時，$\alpha$は，定義により，$\alpha=R_m$である．
また，$\beta$は，以下のように求められる．すなわち，言い直しでない文節数は
$N-m$件存在するのに対して，このうちの$m_1-m_t$件を言い直しと判定した
ことになるから，$\beta=(m_1 - m_t)\;$/$\;(N - m)$．ここで，全文節$N$に含ま
れる言い直し文節$m$の割合を$a(=m/N)$とおき，(10)式を使用する
と，$\beta$は，
\begin{equation}
 \beta ={} \frac{\alpha R_m (1-P_m)} {P_m (1- \alpha)}
\end{equation}
以上で，第１段階と第２段階の方法の精度（それぞれ，$P_b$，$R_b$および
$P_m$，$R_m$）が分かれば，それを結合した総合的な抽出精度
($P_t$ , $R_t$)が推定できる．

