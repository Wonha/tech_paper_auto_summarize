自己組織化マップを用いた最近傍検索手法の有効性を調べるために，類似画像検索実験と文書検索実験を行なった．
以下で実験の概要および実験結果について述べる．
類似画像検索実験では，Corelデータベースから抽出した42,381件のカラー写真画像を用いた．
また，このうち，424件(全体の1 %)の画像データをランダムに抽出し，検索画像とした．
これらの画像データから，表[REF_Tab:ImageFeatures]に示すような，次元数の異なる4種類の特徴量ベクトルを作成した．
自己組織化マップを用いた最近傍検索の精度を調べるためには，検索された画像のうち，どれが正解であるかという情報が必要である．
このため，各検索画像と全画像データとの間のユークリッド距離を線形探索により求め，距離の小さい400件を正解データとした．
与えられた検索画像から，自己組織化マップを用いた最近傍検索により，上位400件の検索結果を出力し，これを正解データと比較することにより適合率を算出した．
自己組織化マップを用いた最近傍検索では，検索条件によって適合率は変化する．
適合率が変化する主な要因は，1次元マップ上の総ユニット数，および，検索の際に用いる近傍数である．
ここで，近傍数とは，探索候補の絞り込みの際にいくつのユニットを参照したかを意味しており，具体的には，検索質問の属するユニットに加え，その近傍のユニットをいくつ参照したかを示す．
以下では，検索質問の属するユニットのみを参照したときは近傍数1，検索質問の属するユニットに加え，その左右両側のユニットを参照したときは近傍数3というように表すことにする．
なお，近傍数3の際，検索質問が1次元マップ上の左端(あるいは右端)のユニットに属している場合には，そのユニットの右側(あるいは左側)しか参照しない．
図[REF_Fig:ImageResults]は，ユニット数が10あるいは20，近傍数3のときの適合率曲線を示している．
横軸方向は検索結果数を，縦軸方向は平均適合率を表しており，グラフは上位[MATH]件の結果が検索された時点での平均適合率をプロットしたものである．
図から分かるように，検索結果数が増えるに連れ平均適合率は単調に減少しており，次元数が大きほど適合率が減少する度合が大きくなっている．
しかし，ユニット数10，近傍数3およびユニット20，近傍数3のいずれの条件下でも，上位100件程度の近傍検索では，近似解の精度がほぼ100 %に達している．
一方，従来の近似検索手法[CITE]での実験結果では，最も次元数が高い256次元のデータから近傍検索数10件の検索を行うのに，全データ数の約1割程度の距離計算回数を費やすことで約90 %の近似解の精度が得られたと報告している．
このことから，他の近似検索手法と比べ，提案手法による検索精度の高さが分かる．
また，表[REF_Tab:ImageResults]は，さまざまな条件のもとでの平均[MATH]適合率と検索質問1件当たりの平均距離計算回数を示している．
表[REF_Tab:ImageResults]から分かるように，同じ検索条件のもとでは，適合率は次元数が大きくなるにつれ低下する傾向にあるが，距離計算回数は次元数によらずにほぼ一定である．
したがって，本手法は，次元数が増大した場合にも高速性が失われることはない．
なお，距離計算回数が次元数によらず一定である理由は，各ユニットに割り当てられるデータ数が概ね平均化しているためである．
図[REF_Fig:UnitNumDat]に，ユニット数20の際に各ユニットに割り当てられたデータ数を示すが，1次元マップ上の各ユニットに割り当てられるデータ数が極端にばらついていないことを読み取ることができる．
また，特徴量ベクトルから1次元自己組織化マップに基づく多次元インデキシングを行うのに要したCPU時間は，ユニット数10の場合，RGB-48に対しては525秒，HSI-192, HAAR-256, HSI-432に対してはいずれも1000秒程度であり，次元数の増加にともないインデキシング時間が極端に増加するということはなかった．
なお，今回実験を行ったマシンのOSはLinux，CPUはIntel Xeon 2.4GHz，主記憶容量は1,024Kバイトである．
参考のために，各画像特徴量に対するSR-treeの平均距離計算回数を表[REF_Tab:SRtree]に示す．
SR-treeでは，検索対象データに対する多次元インデクスを作成する際に多次元空間を木構造を用いて階層的に分割しているが，検索時には木構造の内部ノードとの距離計算も行うため，検索対象データ数よりも多くの距離計算が行われることがある．
表[REF_Tab:SRtree]では，検索対象データとの平均距離計算回数を括弧内に示している．
表[REF_Tab:SRtree]から分かるように，SR-treeの場合には，与えられた検索質問に距離的に近い検索結果を上位何件求めるかにより距離計算回数が異なるが，検索件数が増えるに従い距離計算回数は単調に増加する傾向にある．
上位1件のみを求める場合には距離計算回数はきわめて少ないが，それ以外の場合にはいずれの特徴量においても自己組織化マップを用いた検索よりも計算回数が多くなっている．
実際に類似検索を行う際には，上位1件のみの検索結果だけが必要であることは稀であると考えられるため，この場合には自己組織化マップを用いた提案手法のほうが高速な検索を行うことが可能である．
[REF_Sec:ImageRetrieval]において，類似画像検索を対象にした実験結果を示した．
画像特徴量の次元数は，数10 [MATH]数100次元程度であるが，これよりも次元数が大きい場合の手法の有効性を調べるために，ベクトル空間モデル(vector space model; VSM)に基づく文書検索を対象とした実験を行なった．
なお，文書検索では通常，検索質問中の索引語が現われる文書しか対象にしないため，転置ファイル[CITE]に基づく方法が用いられ，この場合には高速な検索を行うことが可能である．
ここでの実験は，次元数が大きい場合にも提案手法が有効かどうかを検証することを主な目的として行ったものである．
ベクトル空間モデルでは，文書中から索引語を抽出し，文書を索引語の出現頻度に基づくベクトルで表現する[CITE]．
文書ベクトルの次元数は，文書集合全体にわたる索引語の総数と等しいため，次元数はきわめて大きくなる．
本実験では，情報検索評価用のテストコレクションであるMEDLINEを用いた．
MEDLINEは，検索対象文書1,033文書，検索質問30文書から成る小規模なコレクションであり，各検索質問には，どの文書が適合しているかという適合情報が用意されている．
なお，各検索質問に対する平均適合文書数は23.2文書である．
まず前処理として，MEDLINEコレクションから``a''や``about''などの不要語439単語，および全文書中に1回しか出現しなかった単語を削除した．
その後，ポーター・アルゴリズム(Porter algorithm)[CITE]によるステミングを行なった結果，4,329個の索引語が得られた．
以上の処理により得られた索引語から4,329次元の文書ベクトルを構成した．
この際，索引語の重み付けとして，局所的重み付けには対数化索引語頻度を，大域的重み付けにはエントロピーを，文書正規化にはコサイン正規化を用いた[CITE]．
文書検索の評価では，通常のベクトル空間モデルに基づく最近傍検索(線形探索)と自己組織化マップを用いた最近傍検索の両者とも30件の検索結果を出力し，出力結果をMEDLINEの適合情報と比較することにより適合率を求めた．
この際，自己組織化マップを用いた最近傍検索では，ユニット数20，近傍数3の条件で検索を行なった．
図[REF_Fig:DocResults]に，文書検索の適合率曲線を示すが，自己組織化マップを用いた検索のほうがわずかながら良い結果を与えている．
なお，ベクトル空間モデルに基づく検索の[MATH]適合率は0.53であり，自己組織化マップを用いた検索の[MATH]適合率は0.58であった．
また，自己組織化マップを用いた最近傍検索の平均距離計算回数は1検索質問当たり141回であり，これは線形探索の約1/7に相当する．
以上はMEDLINEコレクションの適合情報に対する評価であるが，次に，自己組織化マップによる最近傍検索の近似誤差について述べる．
ベクトル空間モデルの検索結果を正解とみなした場合，自己組織化マップを用いた検索結果の[MATH]適合率は0.68であった．
したがって，上位30件までの検索では32 %の近似誤差が生じていることになる．
しかし，近似誤差があるにもかかわらず，MEDLINEの適合情報に対する評価では，通常のベクトル空間モデルよりも適合率が高くなっている．
潜在的意味インデキシング(latent semantic indexing; LSI)[CITE]などによる検索では，次元数を削減すると検索精度が逆に向上することなどから，高次元空間そのものにおける検索が質的に良い検索結果を与えるとは限らない．
我々の提案した手法の近似の程度と検索精度の関係等を調査することは，今後の課題である．
自己組織化マップを用いた最近傍検索手法の有効性を調べるために，類似画像検索実験と文書検索実験を行なった．
以下で実験の概要および実験結果について述べる．
類似画像検索実験では，Corelデータベースから抽出した42,381件のカラー写真画像を用いた．
また，このうち，424件(全体の1 %)の画像データをランダムに抽出し，検索画像とした．
これらの画像データから，表[REF_Tab:ImageFeatures]に示すような，次元数の異なる4種類の特徴量ベクトルを作成した．
自己組織化マップを用いた最近傍検索の精度を調べるためには，検索された画像のうち，どれが正解であるかという情報が必要である．
このため，各検索画像と全画像データとの間のユークリッド距離を線形探索により求め，距離の小さい400件を正解データとした．
与えられた検索画像から，自己組織化マップを用いた最近傍検索により，上位400件の検索結果を出力し，これを正解データと比較することにより適合率を算出した．
自己組織化マップを用いた最近傍検索では，検索条件によって適合率は変化する．
適合率が変化する主な要因は，1次元マップ上の総ユニット数，および，検索の際に用いる近傍数である．
ここで，近傍数とは，探索候補の絞り込みの際にいくつのユニットを参照したかを意味しており，具体的には，検索質問の属するユニットに加え，その近傍のユニットをいくつ参照したかを示す．
以下では，検索質問の属するユニットのみを参照したときは近傍数1，検索質問の属するユニットに加え，その左右両側のユニットを参照したときは近傍数3というように表すことにする．
なお，近傍数3の際，検索質問が1次元マップ上の左端(あるいは右端)のユニットに属している場合には，そのユニットの右側(あるいは左側)しか参照しない．
図[REF_Fig:ImageResults]は，ユニット数が10あるいは20，近傍数3のときの適合率曲線を示している．
横軸方向は検索結果数を，縦軸方向は平均適合率を表しており，グラフは上位[MATH]件の結果が検索された時点での平均適合率をプロットしたものである．
図から分かるように，検索結果数が増えるに連れ平均適合率は単調に減少しており，次元数が大きほど適合率が減少する度合が大きくなっている．
しかし，ユニット数10，近傍数3およびユニット20，近傍数3のいずれの条件下でも，上位100件程度の近傍検索では，近似解の精度がほぼ100 %に達している．
一方，従来の近似検索手法[CITE]での実験結果では，最も次元数が高い256次元のデータから近傍検索数10件の検索を行うのに，全データ数の約1割程度の距離計算回数を費やすことで約90 %の近似解の精度が得られたと報告している．
このことから，他の近似検索手法と比べ，提案手法による検索精度の高さが分かる．
また，表[REF_Tab:ImageResults]は，さまざまな条件のもとでの平均[MATH]適合率と検索質問1件当たりの平均距離計算回数を示している．
表[REF_Tab:ImageResults]から分かるように，同じ検索条件のもとでは，適合率は次元数が大きくなるにつれ低下する傾向にあるが，距離計算回数は次元数によらずにほぼ一定である．
したがって，本手法は，次元数が増大した場合にも高速性が失われることはない．
なお，距離計算回数が次元数によらず一定である理由は，各ユニットに割り当てられるデータ数が概ね平均化しているためである．
図[REF_Fig:UnitNumDat]に，ユニット数20の際に各ユニットに割り当てられたデータ数を示すが，1次元マップ上の各ユニットに割り当てられるデータ数が極端にばらついていないことを読み取ることができる．
また，特徴量ベクトルから1次元自己組織化マップに基づく多次元インデキシングを行うのに要したCPU時間は，ユニット数10の場合，RGB-48に対しては525秒，HSI-192, HAAR-256, HSI-432に対してはいずれも1000秒程度であり，次元数の増加にともないインデキシング時間が極端に増加するということはなかった．
なお，今回実験を行ったマシンのOSはLinux，CPUはIntel Xeon 2.4GHz，主記憶容量は1,024Kバイトである．
参考のために，各画像特徴量に対するSR-treeの平均距離計算回数を表[REF_Tab:SRtree]に示す．
SR-treeでは，検索対象データに対する多次元インデクスを作成する際に多次元空間を木構造を用いて階層的に分割しているが，検索時には木構造の内部ノードとの距離計算も行うため，検索対象データ数よりも多くの距離計算が行われることがある．
表[REF_Tab:SRtree]では，検索対象データとの平均距離計算回数を括弧内に示している．
表[REF_Tab:SRtree]から分かるように，SR-treeの場合には，与えられた検索質問に距離的に近い検索結果を上位何件求めるかにより距離計算回数が異なるが，検索件数が増えるに従い距離計算回数は単調に増加する傾向にある．
上位1件のみを求める場合には距離計算回数はきわめて少ないが，それ以外の場合にはいずれの特徴量においても自己組織化マップを用いた検索よりも計算回数が多くなっている．
実際に類似検索を行う際には，上位1件のみの検索結果だけが必要であることは稀であると考えられるため，この場合には自己組織化マップを用いた提案手法のほうが高速な検索を行うことが可能である．
[REF_Sec:ImageRetrieval]において，類似画像検索を対象にした実験結果を示した．
画像特徴量の次元数は，数10 [MATH]数100次元程度であるが，これよりも次元数が大きい場合の手法の有効性を調べるために，ベクトル空間モデル(vector space model; VSM)に基づく文書検索を対象とした実験を行なった．
なお，文書検索では通常，検索質問中の索引語が現われる文書しか対象にしないため，転置ファイル[CITE]に基づく方法が用いられ，この場合には高速な検索を行うことが可能である．
ここでの実験は，次元数が大きい場合にも提案手法が有効かどうかを検証することを主な目的として行ったものである．
ベクトル空間モデルでは，文書中から索引語を抽出し，文書を索引語の出現頻度に基づくベクトルで表現する[CITE]．
文書ベクトルの次元数は，文書集合全体にわたる索引語の総数と等しいため，次元数はきわめて大きくなる．
本実験では，情報検索評価用のテストコレクションであるMEDLINEを用いた．
MEDLINEは，検索対象文書1,033文書，検索質問30文書から成る小規模なコレクションであり，各検索質問には，どの文書が適合しているかという適合情報が用意されている．
なお，各検索質問に対する平均適合文書数は23.2文書である．
まず前処理として，MEDLINEコレクションから``a''や``about''などの不要語439単語，および全文書中に1回しか出現しなかった単語を削除した．
その後，ポーター・アルゴリズム(Porter algorithm)[CITE]によるステミングを行なった結果，4,329個の索引語が得られた．
以上の処理により得られた索引語から4,329次元の文書ベクトルを構成した．
この際，索引語の重み付けとして，局所的重み付けには対数化索引語頻度を，大域的重み付けにはエントロピーを，文書正規化にはコサイン正規化を用いた[CITE]．
文書検索の評価では，通常のベクトル空間モデルに基づく最近傍検索(線形探索)と自己組織化マップを用いた最近傍検索の両者とも30件の検索結果を出力し，出力結果をMEDLINEの適合情報と比較することにより適合率を求めた．
この際，自己組織化マップを用いた最近傍検索では，ユニット数20，近傍数3の条件で検索を行なった．
図[REF_Fig:DocResults]に，文書検索の適合率曲線を示すが，自己組織化マップを用いた検索のほうがわずかながら良い結果を与えている．
なお，ベクトル空間モデルに基づく検索の[MATH]適合率は0.53であり，自己組織化マップを用いた検索の[MATH]適合率は0.58であった．
また，自己組織化マップを用いた最近傍検索の平均距離計算回数は1検索質問当たり141回であり，これは線形探索の約1/7に相当する．
以上はMEDLINEコレクションの適合情報に対する評価であるが，次に，自己組織化マップによる最近傍検索の近似誤差について述べる．
ベクトル空間モデルの検索結果を正解とみなした場合，自己組織化マップを用いた検索結果の[MATH]適合率は0.68であった．
したがって，上位30件までの検索では32 %の近似誤差が生じていることになる．
しかし，近似誤差があるにもかかわらず，MEDLINEの適合情報に対する評価では，通常のベクトル空間モデルよりも適合率が高くなっている．
潜在的意味インデキシング(latent semantic indexing; LSI)[CITE]などによる検索では，次元数を削減すると検索精度が逆に向上することなどから，高次元空間そのものにおける検索が質的に良い検索結果を与えるとは限らない．
我々の提案した手法の近似の程度と検索精度の関係等を調査することは，今後の課題である．
