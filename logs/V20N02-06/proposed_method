まず以下の例文を見て欲しい．
{
[l]{例文：} {彼は2008年4月から週に3回ジョギングを1時間行ってきたが，昨日ケガをして走れなくなり，今朝9時に病院に行った．
}
}
本稿の研究対象である時間情報表現は時間軸上の時点もしくは時区間を表現するテキスト中の文字列とする．
時間情報表現は以下の四つの分類に分けられる．
\ding{"AC}日付表現・\ding{"AD}時刻表現は「2008年4月」「昨日」「今朝9時」といった，時点もしくは時区間の時間軸上の位置を定義することを目的として用いられる表現である．
\ding{"AE}時間表現は「1時間」といった，時間軸上の位置に焦点をあてずに時区間幅を定義することを目的として用いられる表現である．
\ding{"AF}頻度集合表現は「週に3回」といった，時間軸上複数の時区間を定義することを目的として用いられる表現である．
これら時間情報表現の曖昧性を解消しながら時間軸上の特定の区間に写像することを正規化と呼ぶ．
日付・時刻表現において，表層の情報だけで正規化ができる表現と，文脈の情報を用いなければ正規化ができない表現がある．
前者を定時間情報表現(fully-specified temporal expression)と呼び，後者を不定時間情報表現(underspecified temporal expression)と呼ぶ．
上の例では「2008年4月」が定時間情報表現であり，「昨日」「今朝9時」が不定時間情報表現である．
時間情報表現の正規化には計算機で扱う日付や時刻を扱うための国際標準ISO-8601形式への変換が一般的である．
しかしながら，自然言語では表現できるが，ISO-8601形式では直接表現できない時間情報表現がある．
例えば，時間表現や頻度集合表現は時間軸上不定な場合が多くISO-8601形式だけでは表現できず，\modified{TimeMLの\timexiiiにおいてさまざまな拡張形式が提案されている．
}
想定する時間情報表現解析では手がかりとして，テキストが書かれた日付・時刻を表す文書作成日時を用いることを仮定している．
例えば，文書作成日時が2008年9月1日であれば，「昨日」は2008年8月31日（ISO-8601形式では``2008-08-31''）を表し，「今朝9時」は2008年9月1日午前9時（同``2008-09-01T09:00''）を表す．
本節では日本語時間情報表現に対するアノテーション基準の概略を示す．
アノテーション基準は，言語資源管理に関する国際標準ISO/TC 37/SC 4において，2009年に採用されたISO-24617-1の元になっているTimeML [CITE] \timexiiiタグの仕様に準拠している．
以下，\timexiiiのタグの\modified{日本語適応について}説明する．
細かな点で日本語に合うように変更しており，合わない部分については次節で説明する．
アノテーション対象は日付表現・時刻表現・時間表現・頻度集合表現の4種類である．
図[REF_fig:example]にアノテーション事例を示す．
日付表現は「一九二九年二月」「前日」のような日暦に焦点をあてた表現である．
時刻表現は「午前十時ごろ」「午後六時ごろ」「昼」「九日昼」のような一日のうちのある時点に焦点をあてた表現である．
日付表現と時刻表現の区別は時間軸上の粒度の区別でしかない．
便宜上不定の現在を表す「今」という表現を時刻表現に分類する．
時間表現は「その間」のような時間軸上の両端に焦点をあてておらず，期間を表すことに焦点をあてている表現である．
頻度集合表現は「毎日」のような複数の日付・時刻・時間に焦点をあてた表現である．
この分類は，解析の方便のために導入したものである．
時間軸上一つもしくは複数の時点・時区間を表現するものをアノテーション対象である時間情報表現とする．
現在のアノテーション基準では\timexiiiタグの入れ子を許さない．
日付・時刻表現の線形結合はこれを一つの日付・時刻表現として切り出す．
例えば「九日昼」のように日付表現と時刻表現が連接する場合には一つの時刻表現として切り出す．
時間を表す際に，開始時点と終了時点を明示している場合には，開始時点と終了時点とを別々の日付・時刻表現として切り出す．
例えば「午前十時ごろから午後六時ごろまで」は一つの時間表現として切り出さず，「午前十時ごろ」と「午後六時ごろ」の二つの時刻表現として切り出す．
事象が起こる期間を表すために，今後，関連する事象表現に対し，この二つの時刻表現への参照関係を付与する予定である．
頻度集合表現は，文字列上できるだけ短い単位を切り出す．
例えば「毎日」を頻度集合表現として切り出すが，「毎日午前十時ごろから午後六時まで」は現在のところ頻度集合表現として切り出していない．
\timexiiiタグの属性のうち\tid, \type, \value, \valuefromsurface, \freq, \quant, \modを概説する．
また，作業・分析用に導入した\definiteについて説明する．
\tid属性は一文書中の各時間情報表現に付与される識別子である．
各時間情報表現を一意に同定するために用い，今後同一指示，参照，事象表現との時間的順序を表す際に用いる．
\type属性はDATE, TIME, DURATION, SETの四つの値を持つ．
それぞれ日付表現・時刻表現・時間表現・頻度集合表現を意味する．
\value及び\valuefromsurface属性は時間情報表現が含意する日付・時刻・時間の値を表す．
値としてISO-8601形式を自然言語表現向けに拡張したものを用いる．
このうち\valueは文脈情報を用いて正規化を行った値を付与し，\valuefromsurface属性は文脈情報を用いずに文字列の表層表現のみから判定できる値を付与する．
\modified{ここで\valueと\valuefromsurface属性の違いについて例を用いて説明する．
「２０１３年４月」という表現は，文脈を用いなくても表層の文字列から時間軸上に一意に曖昧性解消ができる．
「４月」という表現に対して，文脈情報からそれが2013年の「４月」であるとわかる場合には以下のように記述する（ここで属性にわりあてる値の詳細については[REF_subsec:value]節に示す）．
}定時間情報表現は\valueと\valuefromsurfaceの値は同じになるが，不定時間情報表現は同じになるとは限らない．
{
[l]と\valuefromsurface {[MATH]TIMEX3 @type="DATE" @value="2013-04" @valueFromSurface="2013-04"[MATH]２０１３年４月[MATH]/TIMEX3[MATH]
[MATH]TIMEX3 @type="DATE" @value="2013" @valueFromSurface="2013"[MATH]２０１３年[MATH]/TIMEX3[MATH]の予定ですが[MATH]TIMEX3 @type="DATE" @value="2013-04" @valueFromSurface="XXXX-04"[MATH]４月[MATH]/TIMEX3[MATH]は…}
}
\freq, \quant属性は頻度集合表現に付与される頻度情報及び量化子情報である．
属性にわりあてる値の詳細を[REF_subsec:freqquant]節に示す．
\mod属性は時間情報表現のモダリティを表す．
例えば「2000年以前」をアノテーションするために\mod属性にON_OR_BEFOREという値をわりあてることにより「以前」というモダリティを表現する．
属性にわりあてる値の詳細を[REF_subsec:mod]節に示す．
\modified属性は``true'', ``false''のいずれかの値を持ち，\value属性が，文脈情報により定時間情報が得られる時間情報表現は``true''の値を持ち，その他の時間情報表現は``false''の値を持つ．
\modified{言い換えると，日付・時刻表現が時間軸上の特定時区間に写像できる場合と時間・頻度集合表現の時間幅が特定できる場合に``true''の値を持ち，そうでない場合に``false''の値を持つ．
} \modified{例えば，以下の例はともに\temporalfunctionが``false''の例である．
「１０日」という表現は，文脈から「４月」ということがわかるが，何年かまではわからないために定時間情報が得られない．
なお，\definite属性は作業・分析の便宜上導入したもので，元のISO-TimeMLの\timexiiiには規定されていない．
}
{
[l] {[MATH]TIMEX3 @type="DATE" @value="XXXX-04" @valueFromSurface="XXXX-04" @definite="false"[MATH]４月[MATH]/TIMEX3[MATH]の予定ですが[MATH]TIMEX3 @type="DATE" @value="XXXX-04-10" @valueFromSurface="XXXX-XX-10" @definite="false"[MATH]１０日[MATH]/TIMEX3[MATH]は…}
}
作成したコーパスに対し上記属性を付与した．
他の属性として，記事配信日時など特別な意味を表す時間情報表現に付与する@functionInDocument，同一指示を表す@anchorTimeID，時間表現の開始位置と終了位置を表す@beginPoint, @endPoint，アノテーション時の問題点を自由記述する@commentがある．
これらの情報は作業者が気づいた範囲で付与を行ったが完全ではない．
各表現に付与する\value及び\valuefromsurfaceはISO-8601形式を基として，自然言語が表す時間情報向けに拡張したものである．
\modifiedは文脈情報を用いて正規化を行った値を付与し，\valuefromsurface属性は文脈情報を用いずに文字列の表層表現のみから判定できる値を付与する．
ISO-8601の標準表記では，日付・時刻表現をXXXX-XX-XXTXX:XX:XXの形で表す．
日付表現に対する値の事例を表[REF_tbl:date-value]に示す．
自然言語向けの拡張により，ISO-8601では表現できない季節・四半期・年度などが表現できるようになっている．
曜日表現に対する値の事例を表[REF_tbl:date-value-dofw]に示す．
曜日表現が表すWXXの数値部分は年内の暦週の番号を表す．
日本語でよく用いられる「第３水曜」のような月内の暦週の番号を表す方策がとられていない．
\modified{これについては5.2節で詳説する．
}
時刻表現に対する値の事例を表[REF_tbl:time-value]に示す．
自然言語向けの拡張により，「朝」「昼」「夜」などが表現できるようになっている．
\modified{*が付与されている「未明」と「深夜」は日本語新聞記事に頻出したために\valuefromsurfaceの値を独自に導入した．
\valueにはどちらも「夜」と同じくTNIをわりあてる．
詳しくは5.3節で説明する．
}
時間表現に対する値の事例を表[REF_tbl:duration-value]に示す．
基本的にISO-8601の時間表現と同じであり，接頭辞としてPを付与し，その後に数値とともにそれぞれ年，月，日，時間，分，秒，週を表すY, M, D, H, M, S, Wを接尾辞として付与する．
月(M)と分(M)を区別するために日と時間の境界にTを付与する．
「今」「近年」「今後」など不定な表現に対する値の事例を表[REF_tbl:date-value-undef]に示す．
これらは全て自然言語向けに導入した値である．
頻度集合表現は上記\value属性を流用しながら次節に示す\freq, \quant属性を組み合わせることによって表現される．
頻度集合表現は\value, \freq, \quant属性を組み合わせることにより複雑な時間情報を表現する．
頻度情報を表すためには，期間を表す\value属性とともに，\freq属性にnXをわりあてることにより，焦点をあてている期間中に事象がn回起こることを示す．
例えば「週に２回」を表現する際には以下のようにアノテーションする．
{
[l]{「週に２回」} {[MATH]TIMEX3 type="SET" value="P1W" freq="2X"[MATH]週に２回[MATH]/TIMEX3[MATH]}
}
\quant属性には「毎日」「毎週」「毎１０月」といった表現にEACHをわりあて，「１０日おき」「３日毎」といった表現にEVERYをわりあてる．
この際\value属性には期間を表す値だけでなく，日付・時刻を表す値が入ることがある．
以下に例を示す．
{
[l]{「毎日」「毎１０月」「１０日おき」} {[MATH]TIMEX3 type="SET" value="P1D" quant="EACH"[MATH]毎日[MATH]/TIMEX3[MATH]
[MATH]TIMEX3 type="SET" value="XXXX-10" quant="EACH"[MATH]毎１０月[MATH]/TIMEX3[MATH]
[MATH]TIMEX3 type="SET" value="P10D" quant="EVERY"[MATH]１０日おき[MATH]/TIMEX3[MATH] }
}
頻度集合表現は，できるだけ文字列上小さな単位で切り出しているため，現在のところ上記定義で意味論的表示に曖昧性が生じていない．
例えば「毎日午前十時ごろから午後六時まで」のような表現の場合，表現全体の単位で切り出すとすると，\value, \freq, \quant属性のみで曖昧性なく意味論的表示に落とすことは困難である．
これは，時間情報表現間の時間的順序関係のアノテーションにおいて今後対処していきたい．
時間情報表現は接尾表現をともない，様々なモダリティを表現する．
\mod属性は時刻・時間表現に対するモダリティ修飾情報である．
表[REF_tbl:mod]に取りうる値の一覧と例を示す．
日付・時刻・時間表現に共通して用いられる\mod属性としてSTART, MID, END, APPROXがある．
例えば，「６０年代初頭」「１０月半ば」「約４０年」は以下のようにアノテーションする．
{
[l]{「６０年代初頭」「１０月半ば」「約４０年」} {[MATH]TIMEX3 type="DATE" value="196X" mod="START"[MATH]６０年代初頭[MATH]/TIMEX3[MATH]
[MATH]TIMEX3 type="DATE" value="XXXX-10-XX" mod="MID"[MATH]１０月半ば[MATH]/TIMEX3[MATH]
[MATH]TIMEX3 type="DURATION" value="P40Y" mod="APPROX"[MATH]約４０年[MATH]/TIMEX3[MATH] }
}
日付・時刻表現に対する\mod属性として，BEFORE, AFTER, ON_OR_BEFORE, ON_OR_AFTERがある．
例えば「１９９８年以前」は以下のようにアノテーションする．
{
[l]{「１９９８年以前」} {[MATH]TIMEX3 type="DATE" value="1998" mod="ON_OR_BEFORE"[MATH]１９９８年以前[MATH]/TIMEX3[MATH] }
}
時間表現に対する\mod属性として，EQUAL_OR_LESS, EQUAL_OR_MORE, LESS_THAN, MORE_THANがある．
例えば「１０分以内」は以下のようにアノテーションする．
{
[l]{「１０分以内」} {[MATH]TIMEX3 type="DURATION" value="PT10M" mod="EQUAL_OR_LESS"[MATH]１０分以内[MATH]/TIMEX3[MATH] }
}
\modified{本節では[MATH]TIMEX3[MATH]の日本語適応について問題となった事例について個別に紹介する．
基本的には\valuefromsurfaceに日本語特有の表示を用い，\valueにTimeMLに適合した表示を用いる．
必要に応じて韓国語のデータK-TimeML [CITE]に準拠したKorean Timebank 1.0/2.0でどのような扱いを行っているのかを付記する．
}
\modified{日本語に\timexiiiを適応するうえで一番大きな問題として，和暦の問題がある．
日本語では元号法に基づいた「昭和」「平成」などの年表記がテキスト中に出現する．
これについては\valuefromsurfaceに「明治」「大正」「昭和」「平成」を表現する``M'', ``T'', ``S'', ``H''の接頭子を二ケタの数字表現に付与することで記述し，\valueに西暦に換算したものを記述することとする．
上記四つ以外の元号については\value相当に西暦を記述するのみで対処する．
元号以外の時代名（例：「江戸時代」）については，時間情報表現として切り出しを行うのみで，\value相当は空白とした．
}
{
[l]{和暦の扱い} {[MATH]TIMEX3 type="DATE" @value="1985" @valueFromSurface="S60"[MATH]昭和60年[MATH]/TIMEX3[MATH] }
}
\modified{旧暦に対しては，\valuefromsurfaceにおいて日付表現の表示の末尾に''Q''を付与し旧暦を表し，明示的に新暦の暦日が記述されている場合にのみ\value相当に記述する．
}
\modified{皇紀に対しては，\valuefromsurfaceにおいて表示の最初に''JY''を付与し皇紀を表し，\value相当に西暦を記述する．
}
\modified{韓国語（韓国・北朝鮮），中国語（中国・台湾）なども同様の問題が起きうるが，公開されている文書を見る限り\value相当に西暦を記述することで対処している．
}
\modified{欧米地域では年単位の週番号を利用する傾向がある一方，東アジア地域では「第三木曜」など月単位の週番号を利用する傾向がある．
このため，韓国より\timexiiiに対して月単位の週番号を記述可能にする拡張が提案されている．
具体的には以下のように\valuefromsurfaceの日相当部分に週番号を記述する．
\valueにはカレンダーを参照することによりISO-8601の標準表記XXXX-XX-XX形式の値をわりあてた．
}
{
[l]{月次の週番号の扱い} {[MATH]TIMEX3 type="DATE" @value="2013-01-17"
@valueFromSurface="XXXX-XX-W3-4"[MATH]第三木曜[MATH]/TIMEX3[MATH] }
}
\modified{以下では日本語適応において問題となった雑多な事例について紹介する．
基本的に\valuefromsurfaceにおいて日本語に限定した形式で正規化を行い，\value相当は正規表現などを用いて正規化を行う．
}
旬（月の細分類）上旬，中旬，下旬
\valuefromsurfaceにおいては``1J''(上旬), ``2J''(中旬), ``3J''(下旬)などと日本語に限定した形式を導入し，\valueには``XXXX-XX-(0[123456789][MATH]10)'' (上旬)のように正規表現を用いて正規化を行った．
未明・午前・真夜中
\valuefromsurfaceにおいては新聞記事などで頻出する表現に対応するため``DW''（未明; \valueは``NI''(夜)相当）・``FN''（午前; \valueは``MO''(朝)相当）・``MN''（真夜中; \valueは``NI''(夜)相当）を導入した．
学期
\valuefromsurfaceにおいては学期を表現する記号として``G''を導入した．
\valueは何学期制かが不明なので空白である事例が多い．
国民の祝日
国民の祝日は，国立天文台が官報で公表する「春分日」「秋分日」やハッピーマンデー制度が適用される四つの祝日も含めて\value相当にその年の正しい日付を記述する．
休日
時間情報表現として切り出すが，具体的にいつなのかわからない場合が多く，\valueは空白とした．
お盆
\value相当に``SU''（夏）を記述する．
十干十二支
時間情報表現として切り出すが，具体的にいつなのかわからない場合が多く，\valueは空白とした．
\modified{本節では作業環境と作業対象であるBCCWJについて詳しく説明する．
}
\modified{アノテーション作業にはXML Editor oXygenを利用した．
DTDやXML Schemaを記述することにより時間表現の切り出し部分や属性にわりあてる値などを統制することができる．
時間表現の切り出しはマウスもしくはキーボードで対象となる文字列を選択したうえでCtrl-eとタイプし，タグを選択することで，XMLタグ（閉じタグも含む）が挿入される．
この状態で画面右の属性項目を記述することにより，XMLファイルを編集することができる．
}
\modified{言語資源に対するアノテーションにおいて，ある一定の基準を守ったうえで複数の作業者の主観を尊重してそれぞれの作業者間の判断の揺れを許す場合，基準を厳格化し作業者間の判断の揺れを許さない場合の2通りの統制手法がある．
本論文の時間情報表現の特定の時間軸上への写像作業は後者の統制手法を取るために図[REF_fig:pair]のようにペアプログラミングのような手法を取った．
1台のPCに，キーボード二つ・マウス二つ・ディスプレイ二つを接続し，ディスプレイはミラーリングを行う．
一つのPCを共有したうえで，作業者がアノテーション作業を行い，作業監督者がアノテーション仕様の改訂を行う．
}
\modified{アノテーション作業は1人の作業者と1人の作業監督者により行った．
1回目のアノテーション時の作業時間は7時間15分週2日勤務で約2か月だった．
1回目のアノテーション直後（1回目見直し）と6か月後（2回目見直し）に見直しを行った．
1回目の見直し作業はアノテーション結果を帳票形式で出力したうえで，属性に関する見直しを行った．
2回目の見直し作業は再度XML Editor上で行った．
アノテーションデータは1回目の見直し作業が終わった時点で公開しており，利用者から誤りの指摘があった場合に修正を行っている．
}
\modified{このアノテーション作業の準備段階の\timexiiiの切り出しの一致率は95%以上であり，切り出しの不一致の多くが単純な見落としであった．
属性についての一致率は，一つの時刻・時間に複数の意味論的表示を許す\value, \valuefromsurfaceを除いて90%以上である．
}
\modified{作業対象であるBCCWJ [CITE]について概説する．
BCCWJのコアデータは，OW:白書，PB:書籍，PN:新聞，OC: Yahoo!知恵袋，PM:雑誌，OY: Yahoo!ブログの六つのレジスタからなり，それぞれ約5万語単位で，アノテーションすべき優先順位に基づいた部分集合が規定されている．
上記全レジスタの部分集合``A''と比較的時間表現が多いレジスタであるPN(新聞)の部分集合``B''をアノテーション対象とした．
}
\modified{表[REF_tbl:data]にデータの概要を示す．
表中「ファイル数」はアノテーションしたファイルの数，ファイル数の「うち時間表現あり」は時間表現を一つ以上含むファイルの数を表す．
}
\modified{OC, OYなどのユーザー生成コンテンツはサンプリングの長さにもよるが1ファイルに時間情報表現が一つも含まれないものがある一方，OW, PB, PN, PMなどのユーザー生成コンテンツ外のほとんどは時間表現が必ず一つ以上含まれている．
OWの中で時間表現を一つも含まない1ファイルは「平成16年度森林・林業白書」であった．
文単位では，OW, PNが時間情報表現を含む割合が最も多く，PBが時間情報表現を含む割合が最も少なかった．
}
\modified{本節ではアノテーションした情報について，時間情報表現の正規化の観点から分析を行う．
表[REF_tbl:result:stat]に文書作成日時を示すタグを除いた\typeごとのタグの出現数を曖昧性解消の観点から二つの視点で四つに分割して示す．
一つ目の視点は\temporalfunctionが``true''か``false''かである．
``true''の場合，時間軸上に時区間が特定可（``DURATION''と``SET''は時間幅が特定可）であることを意味し，``false''の場合，時間軸上に時区間が特定不可であることを意味する．
二つ目の視点は\valueと\valuefromsurfaceの値が一致する（``=''で表記）か，一致しない（``[MATH]''で表記）かである．
一致する場合人手による文脈を用いた正規化作業が行われていないことを意味し，一致しない場合人手による文脈を用いた正規化作業が行われたことを意味する．
}
\modified{まず日付表現(``DATE'')について，時区間特定可（\temporalfunctionが``true''）であるものの多くが，人手による曖昧性解消が行われている(\value[MATH] \valuefromsurface)ことがわかる．
このことから本アノテーションの目的とする時間表現の正規化作業の重要性がうかがえる．
レジスタにもよるが，OW白書やPN新聞など，出版年・発行年月日が明らかであるものほど曖昧性解消がよく行われる傾向がある．
日付表現の曖昧性解消は，和暦から西暦への換算や，西暦二ケタ表記から西暦四ケタ表記への換算，さらに年が省略されている表現の文脈や文書作成日時に基づく年の補完によるものがあり，白書の多くの事例がこの暦の換算作業であった．
他のレジスタは曖昧性がない表現が多いわけではなく，文書作成日時など曖昧性を解消するに足る情報がデータ中に含まれていないことにより，具体的な時間軸上の区間を指し示すことができない事例が多かった．
部分的に情報を補完すること（例えば「３日」という表現に対し９月であることまでがわかるが，何年であるかまではわからないので，\value="XXXX-09-03"をわりあてること）も含まれており，時区間特定不可（\temporalfunctionが``false''）であるが人手による曖昧性解消が行われている(\value[MATH] \valuefromsurface)ものがこれにあてはまる．
}
\modified{次に時刻表現(``TIME'')については，PBの1件を除いて時区間特定可であるものの殆どが人手による曖昧性解消が行われている．
時刻表現の曖昧性解消は，日付が省略されている場合の日付の補完のほか，午前と午後の曖昧性解消が含まれる．
日付表現と同様に出版年月日がわかる新聞記事の曖昧性解消がよく行われている一方，OC Yahoo!知恵袋やPM雑誌は，お店の営業時間など時間軸上の特定の時刻を表現しないものが多かった．
}
\modified{時間表現(``DURATION'')と頻度集合表現については，時間軸上の時区間を特定することを目的とせず，時間幅が特定できれば\temporalfunctionが``true''になると定義している．
実際に時間軸上の時区間に写像する際には，日付・時刻表現や事象表現との時間的順序関係（TimeMLの\tlink）を定義することが必要になる．
}
