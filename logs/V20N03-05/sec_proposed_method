本研究では，返信の態度分類を行うことで，ツイート間の論述構造を解析する手法を提案する．
返信では，返信先の主張に対する態度や，ユーザそのものに対する態度が表明される．
これらの態度を分類することで，ツイート内容やユーザ間の関係を用いてツイート空間の構造を解析することができる．
本節では返信で表明される態度分類の手法について述べる．
\addspan{
本稿における表記の使い分けを明確にするため，Twitterにおけるいくつかの投稿形式を整理する．
@で始まる投稿であり，特定のツイートに対する返信として投稿すること．
Twitterの提供する機能であり，関係が記録されている．
ある投稿をそのままの形でフォロワーに拡散すること．
Twitterの提供する機能である．
ある投稿を必要に応じて編集しつつ，自身のコメントを付加して投稿すること．
「（自分の投稿）[RQ]T @（返信元のアカウント名）（返信元の投稿）」のような形式を取る．
Twitterの提供する機能ではないが，使用者が多い．
なお，自身のコメントを付加していないものについても非公式リツイートとして扱う．
本稿では，「返信」という表記は，特に断りのない限り「返信」と「非公式リツイート」の二つをまとめたものを表す．
分けて扱う必要がある場合においては，前者を「返信」，後者を「引用」と表記する．
また，単に「リツイート」「RT」と表記した場合は「公式リツイート」を指すものとする．
}
返信には様々な意図のツイートが存在する．
相手の発言に同調，あるいは反発するツイートもあれば，相手や周囲に疑問を投げかけるツイート，引用して情報を補足するツイートなどもある．
ツイート空間の論述構造を分析するためには，これらの多様なツイートを，その投稿の意図に従いいくつかのグループに分類する必要がある．
そこで本研究では，返信で表明される態度を，「同意」「反論」「疑問」「その他」の4クラスに分類するタスクを考える．
\addspan{それぞれのクラスの定義と，その例を以下に示す．
例は，上のツイートに対して，下のツイートが返信である．
}
主張の支持\addspan{([REF_ex:agree1])([REF_ex:agree2])}や感情的な同調（感謝や崇拝\addspan{([REF_ex:agree3])}も含む）など，返信先のツイートに対して明確な同意の意図が感じられるもの．
\addspan{…コスモ石油千葉製油所LPGタンクの爆発により、千葉県、近隣圏に在住の方に有害物質が雨などと一緒に飛散するという虚偽のチェーンメールが送られています。
千葉県消防地震防災課に確認したところ、そのようなことはないと確認できました。
…
[MATH]本当ですか安心です}
\addspan{コスモ石油が否定「火災で有害物質降る」のメール連鎖http://.
..
[MATH]デマです。
みんな冷静になろう。
}
\addspan{天皇陛下は、宮内庁が京都御所に避難してほしいと要望したのを…お断りになったそうじゃないか。
…私は心から尊敬します。
[MATH]天皇陛下！万歳！＼(T-T)／}  \suspend{enumerate}
主張の否定\addspan{([REF_ex:counter1])}や感情的な反発\addspan{([REF_ex:counter2])([REF_ex:counter3])}など，明確な反論の意図が感じられるもの．
発言者に対し強く注意を促すようなもの\addspan{([REF_ex:counter4])}も含める．
\resume{enumerate}
\addspan{…コスモ石油の爆発で有害物質の雨が降る件はデマ。
広げてしまった方はツイート削除の上、訂正を／コスモ石油が否定…
[MATH]火災で壊滅した、コスモ石油のコンビナートにあった科学燃料の詳細を記者会見で発表して報道しろ！「危険というのはデマです。
」なんて情報で納得するわけないだろ！}
\addspan{…東京まで健康被害が現れるようなPuは飛んでこない…RT @YYY:もしプルトニウムが漏れてたら東京から逃げますか？…
[MATH]（怒）}
\addspan{…日本政府は事故の重大性をまったく認識していない。
今すぐに多国籍軍を総動員して封じ込めないとチェルノブイリ以上の被害が出る
[MATH]馬鹿左翼、煽るな。
}
\addspan{…食料がありません。
脱水、低血糖が徐々にきています。
デマじゃない…見捨てないで下さい【from茨城県鹿島コンビナート地区】
[MATH]せめて公式RTしてください。
元の発信者の名前消すとか非公式RTよりひどい。
救助を必要としてる人が、誰だかわからなくなると思いませんか？そのせいで救助が遅れたらと想像できませんか？}  \suspend{enumerate}
返信先に対して情報を要求している\addspan{([REF_ex:question1])}が，明確な反論とは言えないもの．
情報源を要求するようなもの\addspan{([REF_ex:question2])}や，引用部に対する疑問の吐露なども含まれる．
\resume{enumerate}
\addspan{…コスモ石油の爆発で有害物質の雨が降る件はデマ。
広げてしまった方はツイート削除の上、訂正を／コスモ石油が否定…
[MATH] JFEケミカル等含めた火災による被害が無いと言うことでよろしいですか？}
\addspan{…コスモ石油の爆発により有害物質が雲などに付着し、雨などといっしょに降るので…コピペとかして皆さんに知らせてください！！
[MATH] NHKのニュースでは今のところ有毒物質が発生することはないと言っていますが、あなたのツイートのソースは何ですか？}  \suspend{enumerate}
上記のどれにも分類できないもの．
\resume{enumerate}
\addspan{千葉県、近隣圏に在住の方に有害物質が雨などと一緒に飛散するという虚偽のチェーンメールが送られています。
…
[MATH]そうであったとしても、雨カッパとかは持ってた方が良いよね。
}
\addspan{…千葉県、近隣圏に在住の方に有害物質が雨などと一緒に飛散するという虚偽のチェーンメールが
[MATH]硫黄分の多い原油が燃えると酸性雨につながる可能性があるので、それに尾ひれはひれがついたものと推測します。
}
これらの4クラスを設計した意図について\addspan{，上記の例を参照しつつ}述べる．
ツイート空間の整理に必須なのが，対立構造の抽出である．
そのために「同意」と「反論」の2クラスを設定する．
「同意」のクラスによって結びつけられたツイート群は，何らかの主張やユーザに対して同様の態度を表明し，「反論」のクラスによって結びつけられたツイート群は，何らかの主張やユーザに対して異なる態度を表明する．
この2クラスを設定することで，ツイート空間を，同じ態度を表明するツイートクラスタの集合として整理できる．
なお，「同意」や「反論」については態度が明確なもののみを分類する．
前述したように，これら2クラスがツイート間の論述構造を解析する上で中心的な役割を果たすため，曖昧な態度のツイートをこれらの2クラスに分類しないように注意する必要がある．
\addspan{ ([REF_ex:agree1])([REF_ex:agree2])([REF_ex:counter1])([REF_ex:other1])([REF_ex:other2])は，「コスモ石油の爆発で有害物質の雨が降るというのはデマ」という主旨のツイートに対する返信である．
([REF_ex:agree1])は主旨を受け入れているので「同意」，([REF_ex:counter1])は納得しないことを主張しているので「反論」に分類する．
([REF_ex:agree2])は「デマです」と返信しているのでやや紛らわしい例であるが，「冷静になろう」という記述から「危険はない」と考えていることが読み取れ，返信先のツイートの内容に「同意」していると判断できる．
([REF_ex:other1])は，主旨を受け入れてはいるが，完全に安心はしていないことが読み取れることから，同意とは言えず，「その他」に分類する．
また，([REF_ex:other2])は主旨を受け入れてはいるが，返信先の情報への同意よりも自分の考えを表明するためのツイートと読み取れる．
このように補足の意図を持つツイートも「その他」に分類する．
} \addspan{ ([REF_ex:counter4])は発言者に対し強く注意を促すものの例である．
この例のように不用意な拡散をたしなめるものは，拡散しようとするユーザへの反論としてとらえられる．
}
「同意」と「反論」の2クラスは，著者間の対立関係を表すのに対して，「疑問」と「その他」の2クラスは，著者間に対立構造は存在しない．
従って，ツイート空間において重要なツイートとしてツイートAがあるとき，それに同意または反論するツイートは重要な存在であるが，その他の関係にあるツイートは，論述構造を明らかにする上で重要ではない．
一方で疑問関係は，論述構造を整理する上で重要である．
情報の信憑性を判断する際に，その情報に疑問を持つユーザの存在は，信憑性が低いことを示唆していると考えられるためである．
さらに，その疑問に対する回答は，有益な情報となる場合が多いと考えられる．
([REF_ex:question1])は純粋な疑問，すなわち質問の例である．
この質問に対する回答があれば，被害状況を詳しく把握できる可能性がある．
次に，([REF_ex:question2])は情報源を求めている例である．
これは，懐疑的な返信ではあるが，明確な反論とはいえないため，疑問に分類する．
\addspan{ ([REF_ex:agree2])([REF_ex:counter2])([REF_ex:counter3])のような感情的な同調あるいは反発のツイートは，内容（引用の場合は付加部分）には有用な情報は含まれていないが，}誰が誰に同調，あるいは反発したかというユーザ同士の関係を推測することは，論述構造分析の助けになると考えられる．
したがって本研究においては，感情に基づくと考えられるツイートについても，「同意」や「反論」として同等に扱い分類を行なっている．
返信ツイートの分類を行うにあたり，正解データを準備する．
本稿で行う実験で使用するデータは，ホットリンク社より提供された，2011年の\addspan{3月11日から3月29日まで}のツイートデータ（以下hottoコーパス）である．
hottoコーパスには，#tsunamiや#jishinなど震災に関連するハッシュタグまたはキーワードが含まれるツイートと，そのツイートを投稿したユーザやそのプロフィール情報などが収録されている．
収集対象ユーザ数は約100万人，ツイート数は約2億1千万ツイート\addspan{であり，本研究では全てのデータを利用した．
}また，各ツイートには公式リツイート（以下RT）や返信の関係が含まれており，これらはそのまま利用した．
ただし，hottoコーパスには引用関係が記録されていないので，以下の方法で復元した（図[REF_fig:recognizing-qts]参照）．
ツイートに``[RQ]T username''というパターンが出てくるとき，そのパターンに続く部分（図[REF_fig:recognizing-qts]左上で，「現在、」から始まる網掛けの部分）をどこかのツイートから引用したと考える．
そして，ユーザ``username''のツイートの中で，投稿日時が引用ツイートよりも前のものをすべて検索する．
これらのツイート群に対し，引用部のテキストとの類似度を\addspan{文字トライグラム}のオーバーラップ係数で計算し，これが最大になるものを引用元と推定する．
\addspan{オーバーラップ係数は，文字トライグラムの集合XとYに対し，以下の式で定義される．
{
}}なお，`[RQ]T username1 comment1 [RQ]T username2 comment2 ''のように引用が何段階が行われているケースの場合，引用元と考え検索対象とするのは``username1''のツイートのみである．
図[REF_fig:recognizing-qts]では，\addspan{あるユーザ}のツイートを検索した結果，右側真ん中のツイートの類似度が最も高かったため，左上のツイートの引用元と推定している．
ただし，オーバーラップ係数の最大値が0.4未満である場合は引用元が見つからなかったとする．
返信関係のアノテーションには，震災の際に出回ったデマ一覧を参考に，20個のトピックを選択した．
\addspan{トピックは，デマの内容を端的に説明する短い文である．
}デマ一覧を利用したのは，東日本大震災の時に情報の信憑性で問題に上がったことと，反論関係が比較的多い割合で含まれると考えたからである．
\addspan{それぞれのトピックに関連するツイートを収集するために，クエリとしてトピック中の単語を設定する．
} \addspan{選んだトピックとクエリを表[REF_tab:20query]に示す．
} \addspan{これらのトピックは，クエリで検索できるツイートから，十分な数の返信を抽出できるように選択した．
}具体的には，後で述べるように，返信・引用が各100個ずつ以上取得できるような\addspan{トピックと}クエリを選んだ．
各クエリ\addspan{で}hottoコーパスを検索し，リツイート数が多い順に並べる．
上位のツイートから順に，返信ツイートを取得する．
なお，あるユーザ間で相互の返信が続いている場合には，反論の応酬であるなど重要な論述構造が存在する可能性があり，有用なデータとなるため，返信ツイートが続いている限り全て取得している．
このようにして，各クエリを用い返信・引用をそれぞれ100個ずつ，20トピックで計\addspan{4000}ツイートを集める．
\addspan{この中に}重複するツイートがあった場合には一つを残して削除し，トピック毎の返信ツイートを補充した．
以上により，計4000個の返信ツイート（以降データセットA）を準備した．
データセットAに対し，三人のアノテーター（以下X・Y・Z）の手により，前項で述べた方針に従い4クラスのラベル付けを行った．
アノテーションの一致度合いを表[REF_tab:class_annotation]に示す．
4000ツイートのうち，3人のラベルが一致したツイートは2690ツイートであった．
ラベルの一致度を評価するため，ペアワイズにCohenのカッパ係数を計算した．
ただし[MATH]は対応クラスの出現数の一致率，[MATH]は対応クラスの偶然の一致率である．
XY間が0.660，XZ間が0.621，YZ間が0.641となり，十分な一致と見なせる．
3人のアノテーションが一致した2690ツイートを集めたものをデータセットBとする．
返信の態度を教師有り学習で分類する手法について述べる．
学習に用いる素性は大まかに3種類に分かれ，ツイート内容に関す\addspan{る}素性，ツイート間の素性，ユーザ間の素性である．
ツイート内容の素性は，単語ユニグラム，単語バイグラム，URL数，ハッシュタグ数，デマ否定単語の有無，反論表現との一致度である．
これらの素性では，返信ツイートであればツイート全文，引用ツイートであれば追加部分（ツイート全体から引用箇所以降を除いたもの）を対象とし，本文中のアカウント名やURL，ハッシュタグを正規表現により取り除く．
取り除いたアカウント・URL・ハッシュタグに対しては，それぞれに対し0個・1個・2個以上を含むという3値の素性を作る．
この設定は，\addspan{実験に用いたツイートデータを観察した結果，} URLを1個も含まない場合と1個以上含む場合には大きな差があると見られ，また，1個だけ含む場合と多数を含む場合にも大きな差があると見られる一方で，3個か4個かには大きな差はない\addspan{と見られたため導入した．
}不要箇所を取り除いた後の本文に対して，MeCab [CITE]による形態素解析を行い，単語ユニグラムと単語バイグラムを抽出する．
\addspan{デマ否定単語の有無}とは，ツイート本文が\addspan{デマの否定を示す単語}を含むかどうかを表すもので，\addspan{デマ否定単語}は「デマ」「ガセ」「誤報」「虚報」「削除」「訂正」の6つとした．
これらの単語は必ずしもデマを否定していることを示すとは限らないが，返信で用いられる場合では，デマの否定に用いられるケースが多く，反論の抽出に有効と考えられる．
反論表現との一致度とは，あらかじめ作成した反論表現辞書を用い，反論に固有の表現をどの程度含んでいるかを表す．
反論表現辞書は，データセットAの中から反論を表すと思われる表現を人手で抽出して作成する．
それらの表現にはデマを否定する表現も含まれるが，相手に対する感情的な反発を表す表現なども含まれる．
表[REF_tab:反論表現]に反論表現の例を示す．
なお，この二種類の表現は厳密に区別できるわけではない．
例えば，表[REF_tab:反論表現]のその他の表現例の「余計なこと書くな」については，「余計なこと」が指す内容がデマの可能性もある．
実際にはこれら二種類を分けて扱う必要はないが，反論表現をたくさん集めることが，デマによる否定以外の反論を認識する上で有効である．
また，一見すると反論を表す表現であるが，反論表現辞書に含めるべきでないものも存在する．
例えば，「それはデマです」は反論表現として挙げた一方で，「デマです」「デマらしいです」は反論表現にはふさわしくないことがある．
例えば，以下のようなケースが存在する．
デマです，注意！RT @XXX:（デマを否定する情報）RT @YYY:（デマ情報）
デマらしいですRT @XXX:（デマを否定する情報）RT @YYY:（デマ情報）
この場合，引用元との間には共にデマを否定しているという“同意”の関係が成り立っているため，反論表現としてはふさわしくない．
このように，伝聞形で使われそうな表現などは反論表現辞書から除外している．
実際に収集した100個の反論表現は付録に載せた．
以上のように作成した反論表現辞書を用い，反論表現との一致度を求め，素性として使用する．
まず，反論表現辞書中の各反論表現に対して，その単語バイグラムをどの程度含むかを求める．
例えば，反論表現辞書が「それ／は／デマ／です」「これ／デマ／ね」の二つからなる場合を考える．
「デマ／です」を含むツイートがあった場合，「それ／は／デマ／です」の3個のバイグラムのうち1個を含むので1/3，「これ／デマ／ね」の2個のバイグラムは1個も含まないので0となる．
これらのうちの最大値（この場合は1/3）を，反論表現との一致度とする．
実際には反論表現は100個あるので，それら100個に対して計算を行い，最大値を反論表現との一致度としている．
返信先のツイートとの間\addspan{の関係についての}素性では，ツイートのタイプ，空文，単語バイグラムのコサイン類似度を使用する．
ツイートのタイプとは，引用かどうかを表す．
空文とは，引用でありながらも自身のコメントを付加していないものに発火する素性である．
単語バイグラムのコサイン類似度とは，返信ツイートの単語バイグラム（引用ツイートの場合は，ツイート全体から引用箇所を除いた部分）と，返信先ツイートの単語バイグラムのコサイン類似度である．
返信先のユーザとの間\addspan{の関係についての}素性として，返信の回数，返信の方向性，RTの回数，RTの方向性，共通のツイートをRTした回数，共通のURLをツイートに含んだ回数，共通のツイートに返信した回数を利用する．
返信の回数は，hottoコーパスの中から，返信している2ユーザ間で返信が行われた回数である．
方向性とは，2ユーザ間の返信の履歴を調べ，双方向のやりとりがある，返信相手への返信のみがある，返信がない，のいずれかを指す．
RTの回数や方向性についても同様である．
これらの素性はユーザ間の関係から返信による態度を推測するために使われる．
例えば，RTが相互でたくさん行われている場合，新たな発言も「同意」である可能性が高い\addspan{と考えられる}．
返信が一方的なものであった場合，それらの発言は「反論」である可能性がある\addspan{と考えられる}．
また，共通のツイートをRTした回数，共通のURLをツイートに含んだ回数，共通のツイートに返信した回数の3つは，第三者を媒介して表れる素性である．
例えば，よく共通のツイートをRTしているユーザ同士での返信があった場合は，「同意」の可能性が高い\addspan{と考えられる}．
\addspan{これらの素性の設定における仮定の妥当性は，[REF_subsec:cross]節で検証する．
}
\addspan{以上，各素性の設計について述べたが，本研究において特に重要と考えているのは，反論表現辞書との一致度および構造的特徴の利用である．
ここでいう構造的特徴とは，返信か引用かや，返信先のユーザとの間の関係についての各素性であり，これらはTwitter上の返信構造により生じる素性である．
また，反論表現辞書は，前述したように返信で用いられることの多い表現を元に作成しており，これらもまたTwitter上の返信構造により生じる素性と言える．
次節の評価では，返信構造により生じるこれらの素性がどの程度性能に寄与するのかについても示す．
}
本節では，\addspan{返信に限らない全てのツイート間の関係認識を行うことを考える．
その際，前節までで述べた}返信の態度分類を，直接的に返信関係のない一般のツイート間の論述関係分析に応用する手法について述べる．
一般に，返信のツイートが全ツイートに占める割合は非常に少ないため，前節までで作成した分類器をそのまま適用するのは難しい．
特に，反論表現辞書の有効性は低いと考えられる．
反論表現辞書に含まれる表現は，返信先への態度を表す際に利用されることの多い表現であり，返信になっていない一般のツイートに含まれる可能性は低い．
\addspan{返信の関係にない一般のツイート間に対して4クラスの分類を行うには，その言語的な内容を利用することが考えられる．
例えば，ツイート間の反論関係は，含意関係認識課題[CITE]における文間の矛盾関係(RTE3 [CITE])に相当する．
文間の矛盾関係の認識に取り組んだMarneffeら[CITE]は，RTE3のテストデータに対して精度22.95%，再現率19.44%を達成した．
また，日本語を対象とした場合，NTCIR9-RITE [CITE]およびNTCIR10-RITE2において，矛盾関係を含む含意認識課題であるMC (multi class)タスクが取り扱われており，RITE2のフォーマルランにおける矛盾関係認識性能は，精度52.17%，再現率19.67%が最高性能であった．
これらの認識性能が示す通り，言語的な内容に基づく文間の矛盾関係の認識は容易ではない．
}
そこで本節では，\addspan{返信態度の分類器}をツイート間の関係分析に拡張する手法について述べる．
具体的には，ツイートペアが与えられた時に，両ツイートおよび両ユーザ，および関連するツイート・ユーザに拡張したネットワークを作り，ネットワーク内に存在する返信関係を分類器で解く．
その結果から，元のツイートペアの間の関係を推測する．
さらに，\addspan{後述する文間関係認識}を用いて，ツイート間の関係を推測する手法についても述べ，それぞれの分類性能や差異について考察する．
一般のツイートの内容や意図は広範囲に渡る．
意見の主張に始まり，ニュースなどの拡散，さらに他愛もないつぶやきや独り言の類も多い．
これら全てのツイートを整理することはできない．
したがって，整理が完了した際の有用性を考慮し維持しながら範囲を狭めることが必要である．
そこで，\addspan{[REF_sec:classification_setting]節で定義した，トピックに関連するツイート群を収拾し，}それらを整理するタスクを考える．
\addspan{同じトピックに属するツイート間には，そのトピックに対する同意，反論などの観点から関係を付与できると考えられる．
各ツイートがあるトピックに属するか否かを決定する手法については，本稿の手法の対象外であり，人手で行う．
}
本節では，同じ\addspan{トピックに属する}ツイートのペアが与えられた場合に，関係を分類するという問題を解く．
\addspan{分類する関係は}，返信の関係分類の際と同じく，「同意」，「反論」，「疑問」，「その他」の四つとする．
同様の主張や感情を示すなど，明確な同意の意図が感じられるもの．
対立する主張や感情を示すなど，明確な反論の意図が感じられるもの．
情報・情報源の要求や，疑問の吐露など．
上記のどれにも分類できないもの．
これらの分類基準は，返信の場合と似ているが全く同じにはならない．
前述したように，ツイート間の関係は，トピックに関する\addspan{主張間の関係}としてとらえられる．
返信の関係が存在しないツイートペアにおいては，お互いに対する単純な賛成や反対，感情的な同調や反発などは表れにくい．
また，お互いに対する直接的な質問もまず存在しないため，「疑問」はかなり出現頻度が少ないと予想されるが，存在した場合には重要であると考え，\addspan{分類対象の関係に含める}．
なお，ツイート間のトピックが明らかに異なる場合についても，この4クラスに分類しようとすれば「その他」のラベルを付けることは可能である．
しかし，「その他」のツイートはツイート空間の整理には有用でないため，ツイート間のトピックが明らかに異なる事例は除外する．
上記のタスクを行うにあたり，正解データを準備する．
データはhottoコーパスより集める．
まず，11個のトピックを用意する．
これらのトピックは返信の分類のために集めたときのもの\addspan{（表[REF_tab:20query]）}の中から選択した．
対応するクエリを用いて検索されたツイートのうち，RT数が上位のものから30件ずつ集める．
RT数上位のものから順に集めるのは，それらのツイートは多くのユーザの目に触れるものであり，論述構造を分析・整理する意義が大きいためである．
\addspan{ただし，疑問を呈するツイートのRT数が上位に来ることは少ないため，この集め方では疑問の関係は少ないデータとなる．
}クエリは，該当トピックをうまく集められそうなものを選んでいるが，中にはトピックに関連するツイートだけを集めるようなクエリの調整が難しく，実際にトピックに対応するツイートの数は30未満になるものもある．
トピック，クエリ，トピックに関連するツイートの数を表[REF_tab:11query]に示す．
これらの11トピックに対し，ペアワイズな全てのツイートの組み合わせを考える．
例えば，「イソジンを飲むと放射能対策になる」のトピックに関しては，27個のツイートが存在するので，その組み合わせは全部で351個ある．
これらの組み合わせについて，前述した4クラスのラベル付けを行う．
ラベル付けは，\addspan{アノテーション経験の豊富な一人のアノテーター}の手により行った．
アノテーションの結果を表[REF_tab:pair_annotation]に示す．
「同意」の割合が高く，予想した通り「疑問」の割合は非常に少ないことが分かる．
また，このアノテーション済のデータを，以降データセットCと呼ぶ．
同じトピックの中でのツイートペアの関係分類を，返信関係分類器を用いて行う手法について述べる．
大まかな方針としては，直接の返信の関係が見当たらない場合，ツイートやユーザからなるネットワークを拡張し，返信の関係を探す．
前節で述べた反論表現辞書などを用いることで，返信関係にないツイートペアに比べ格段に関係が推測しやすい．
そして，返信分類器の出力の結果を元のツイートペア間の関係の推測に用いることとする．
まず，直接返信の関係になっている場合が最も直接的な経路である（図[REF_fig:direct_repqt]）．
図のリンクについている名称は関係を表している．
リンク関係には「author」「RT」「返信」の三種類がある．
authorはツイートとそのツイートの投稿者の間に，RTはツイートとそのツイートをリツイートしたユーザの間に生じる関係である．
このケースでは，前節の分類器の結果をそのまま使用する．
分類器の学習には，データセットBの全データ（2690個）を用いる．
次に，その周囲のツイートやユーザまで拡張したネットワークを考え，考えられる様々な経路で元のツイートペアを結ぶ．
その経路内に返信・引用関係が存在する場合，前節で提案した分類器を用いて各クラスのスコアを算出する．
\addspan{最後に各クラス毎にスコアの和を計算し，最もスコアの高いクラスに分類する．
}元のツイートペアを結ぶ経路として以下のものを導入する．
まず，両ツイートをリツイートしているユーザがいる場合を考える（図[REF_fig:both_RT]）．
本稿では，リツイートは同意であるという仮定を置いている．
しかしながら，反論の意図を持ってリツイートしている場合もあるため，片方をリツイートしたユーザ数に対し，両方をリツイートしたユーザ数の割合が大きいときほど同意とみなしやすいと考え，\addspan{aをリツイートしたユーザ集合とbをリツイートしたユーザ集合の間の}ジャッカード係数を同意のスコアとする．
次に，\addspan{片方のツイートの投稿者が，もう片方のツイートに対し他のツイートで返信している場合}を考える（図[REF_fig:other_repqt]）．
このケースでは，a--b間の関係をa1--b間が表していると考え，スコアには，ロジスティック回帰\addspan{により求められた各クラス毎}の確率値を用いる．
さらに，片方をリツイートしてもう片方に返信しているユーザがいる場合を考える（図[REF_fig:RT_and_repqt]）．
このケースでは，リツイートは同意であるという仮定に基づき，a--b間の関係をc1--b間が表していると考え，同様に返信分類器の出力（\addspan{ロジスティック回帰により求められた各クラス毎の}確率値）を用いる．
以上のようなルールは，要求に応じて拡張が可能である．
例えば，aをリツイートしたユーザCとbをリツイートしたユーザDの間に返信関係があった場合に，分類器によるその関係の出力を用いることができる．
ただし，ルールを増やすほど精度は下がると考えられるため，本稿では上記のルールに限定する．
本節では，2文を与えたときにその間の意味的関係を返す文間関係認識器を用いてツイート間の関係を分類する手法について述べる．
文間関係認識の部分課題に位置づけられる含意関係認識は，前述の通りワークショップが開催されるなど広く研究されている．
含意関係認識課題で取り扱われている関係の種類を以下に示す．
一方の文（テキスト[MATH]）を真としたとき，他方の文（仮説[MATH]）も真であると判断できる\addspan{文対}
川端康成は「雪国」などの作品でノーベル文学賞を受賞した
川端康成は「雪国」の著者である
文中の事象が同時に成立し得ない\addspan{文対}
モーツァルトはザルツブルグで生まれた
モーツァルトはウィーンで生まれた
上記以外\addspan{の文対}
\addspan{川端康成は小説家である}
\addspan{川端康成は大阪で生まれた}
本稿で取り扱う4つの関係とは，含意が同意に，矛盾が反論に対応するが，同意は厳密な含意ではなく，反論は矛盾しているとは限らない．
そこで，水野ら[CITE]の同意，対立関係を対象とした文間関係認識器を用いる．
彼らの定義する同意，対立関係は，本稿で定義する同意，反論関係とほぼ対応する．
\addspan{疑問関係は取り扱えないため，同意，反論，その他の3種類の関係に分類する．
}
まず，\addspan{図[REF_fig:srr_example]を用いて，}彼らの手法を簡潔に述べる．
次に，本課題のために変更した点について述べる．
入力された2文それぞれに対して，形態素解析[CITE]，係り受け解析[CITE]，述語項構造解析[CITE]，拡張モダリティ解析[CITE]，評価極性判定を行う．
\addspan{図[REF_fig:srr_example]では，係り受け構造を文の上下の矢印で示す．
}
\addspan{テキスト中には，仮説の内容と関連の低い情報も含まれている．
そこで，まず，テキスト中で仮説と内容的に対応する部分を同定する．
後段の関係分類では，対応する名詞間や述語間の関係を考慮することで，文間の関係を同定する．
テキスト中で仮説に対応する部分の同定は，文節アライメント，局所構造アライメント，文節アライメントの選択という3段階で行われる．
以下にそれぞれの手続きを示す．
}
\addspan{文節中に含まれる内容語の類似・関連性に基づいて文節間に文節アライメントを付与する．
文節中の内容語が類似しているとき，それらが含まれる文節間にアライメントを付与する．
図[REF_fig:srr_example]では，「イソジンで([MATH])」と「イソジンを([MATH])」が，イソジンという内容語が共通することからアライメントされる．
}
\addspan{内容語の類似・関連性は，その表層だけでなく，日本語WordNet [CITE]や動詞含意関係データベース[CITE]を用いて，意味的な類似度にも基づいて判断される．
図[REF_fig:srr_example]において，「防ぐ([MATH])」と「回避できる([MATH])」は，意味的に類似しているためアライメントされる．
}
\addspan{文節アライメントによってアライメントされた文節の中には，文全体の意味を考えるとアライメントすべきではない場合がある．
例えば，「イソジンを飲んで被曝を防ぐ」と「ワカメの味噌汁を飲むと良い」という2文を考える．
2文間で「飲む」が共通しているが，その対象は異なっているため，アライメントすべきではない．
}
\addspan{この問題に対して，文中の依存構造および述語項構造を対応付けるのが局所構造アライメントである．
図[REF_fig:srr_example]において，文節アライメントされる「被曝を([MATH]) \--被曝を([MATH])」と，「防ぐ([MATH]) \--回避できる([MATH])」に着目する．
これらは[MATH]側，[MATH]側のいずれにも依存構造が存在し，この構造間にアライメントを付与するのが局所構造アライメントである．
「イソジンで([MATH]) \--イソジンを([MATH])」と「防ぐ([MATH]) \--回避できる([MATH])」は，[MATH]側には依存構造が存在するが，[MATH]側には直接の依存関係は存在しない．
しかしながら，「飲むと([MATH])」を介して依存構造の繋がりが存在する．
本研究では水野らと同様に，4文節まで介しても良いという上限を設けた．
}
\addspan{文節アライメントされた文節対のうち，局所構造アライメントもされている文節対のみを選択する．
}
アライメント結果を入力として，まず，同意および対立と，その他との分類を行い，次に，同意と対立の分類を行う．
1つめの分類は，仮説側の文節が全て\addspan{テキストにアライメントされたか}によって判断される．
2つめの分類について，対応付けられた述語が，否定の関係にあるか，評価極性が異なるか，反義の関係にある場合，対立に分類され，いずれにも当てはまらないものは同意に分類される．
本研究で対象としている，\addspan{ツイートデータ}には，述語間の否定，評価極性，反義\addspan{に基づいて分類可能な対立文対}だけでなく，「〜というのはデマです」や「〜という事実はありません」といった\addspan{述語}の後方での否定・反論も少なくない．
そこで，このような表現を否定表現と呼び，対応付けられた述語よりも後方に否定表現が現われた場合，同意ならば対立に，対立ならば同意に関係を反転させる工程を付け加えた．
本研究で利用した否定表現は，「誤り，ねつ造，誇張，嘘，誤報，デマ，今のところない，ソースがありません，事実はありません，根も葉もない噂，根拠がない，ニュースはない」である．
これらは，評価データ以外のツイートから収集した．
表[REF_tab:反論表現]に示される反論表現とは，一般ツイート中の表現である点が異なるが，重なる表現も存在する．
\addspan{図[REF_fig:srr_example]において，[MATH]側の「回避できる」は，その後方の「というのはデマだ」という表現によって否定されており，この2文は対立関係に分類される．
}
彼らの文間関係認識手法は，\addspan{仮説}が単文（一つの述語といくつかの項からなる文）であることを前提としている．
しかし，ツイートに含まれる文は，単文であることは少ない．
そこで，\addspan{まず，トピックと2つのツイートの間の関係をそれぞれ同定し，次にこれら2つの関係に基づいてツイート間の関係を同定する．
このとき，トピックが仮説に，ツイートがテキストに対応する．
図[REF_fig:rel_classification_1]に，トピックを用いてツイート間の関係を求める手法を示す．
まず，関係を求めたい2つのツイートに対して，ツイートとトピックとの間の関係を求める．
その際，ツイートは，まず文分割され，次に収集用クエリが全て含まれる文のみが選択される．
そのような文が複数存在する場合は，一番後ろの一文を選択する．
図[REF_fig:rel_classification_1]は，中心にトピック，上下にツイートから選択された文を表している．
上側の文はいずれも同意で，下側の文は，一方が同意で，他方が対立に分類されている．
最後に，求められた2つの関係から，ツイート間の関係を分類する．
トピックとツイートとの間の関係から導かれるツイート間の関係の組み合わせを，以下に示す．
} \addspan{
2つの関係のうち1つでも「その他」[MATH]「その他」
2つの関係がいずれも「同意」[MATH]「同意」
2つの関係がいずれも「対立」[MATH]「同意」
2つの関係が異なる，すなわち「同意・対立」または，「対立・同意」[MATH]「反論」
}以降，本手法を「文間関係認識手法1」と呼ぶ．
ツイート間の関係を直接同定する手法も評価する．
まず，文間関係認識手法1と同様に，ツイートを文分割し，収集用クエリを含む文を選択する．
次に，関係を求めたい任意の2ツイートについて，選択された2文間の関係を求める．
同定された文間関係は，同意はそのまま同意関係に対応し，対立は反論関係に対応する．
以降，本手法を「文間関係認識手法2」と呼ぶ．
本節では，前節で述べた一般のツイート間の関係認識手法の評価を行う．
本研究の目的は，図[REF_fig:map]のように，ツイート間の論述関係を可視化し，ユーザに情報の「裏」を提示し，情報の価値判断を支援することである．
誤分類事例が多いと，正しく情報の裏を取ることができないため，高い精度を実現することが重要であり，その上で再現率を上げていく戦略をとる．
本稿では，論述関係の可視化を実現するために必要な程度の数のツイートに対して，正しく関係分類が行えたかに着目して評価する．
また，ネットワーク拡張手法，文間関係認識手法がそれぞれどのように有効であったかを考察する．
正解の関係ラベルを付与したデータセットCの各ツイートペアについて，関係分類実験を行った．
ネットワーク拡張手法について，図[REF_fig:direct_repqt]〜図[REF_fig:RT_and_repqt]に示すいずれのパターンにも当てはまらない場合は，関係を出力しない．
実験結果の精度を表[REF_tab:rel_res_prec]に，再現率を表[REF_tab:rel_res_rec]に，全トピックのマクロ平均と併せて示す．
N/Aは，その関係に分類された事例が存在しなかったことを示す．
ネットワーク拡張手法は，簡単なパターンの追加だけで，分類された事例は少ないものの，直接の返信関係にないツイート間の関係分類を行うことができた．
文間関係認識に基づく手法について，一部のトピックについては，多くの事例を高精度で分類できている．
いずれの手法でも分類された事例数の少なかったトピックとして，「東大が入学を取り消し」，「埼玉の水道水に異物が混入し危険」などがある．
\addspan{本節では，まず，ネットワーク拡張手法の分類結果について考察し，文間関係認識手法1および2との比較を行う．
次に，文間関係認識手法1と2について比較する．
}
\addspan{ネットワーク拡張手法について，図[REF_fig:direct_repqt]から図[REF_fig:RT_and_repqt]の各パターンごとの分類性能を表[REF_tab:各パターンの精度]に示す．
表の各列は，各パターンを単独で使用して，ツイートa，b間の関係を分類した場合の分類精度を示している．
ただし，両方をリツイートするパターン（図[REF_fig:both_RT]）は，それぞれのツイートをリツイートしたユーザ集合間のジャッカード係数を同意のスコアとするものであるため，閾値0.01以上の場合のみ同意と判定することとしている．
このとき，直接返信のパターン（図[REF_fig:direct_repqt]）は，返信態度の分類器をそのまま適用した場合と同等である．
反論関係は「福島から避難した子供には教科書が配布されない」に対して1件の誤分類が存在するのみであったが，同意関係への分類精度はマクロ平均で0.953と高かった．
次に，拡張した各パターンの結果について，まず，両方をリツイートするパターン（図[REF_fig:both_RT]）について，本研究ではリツイートは同意関係であるという仮定を置いているため，本パターンでは反論関係への分類は行われない．
同意関係への分類精度は比較的高く，本パターンの有効性が示されている．
今後は，リツイート後のツイートも参照し，同意関係ではないリツイートも考慮することで，同意関係の分類精度向上，反論関係への分類も行うことが考えられる．
次に，他のツイートで返信のパターン（図[REF_fig:other_repqt]）は，適合する場合が少なかっために，分類された事例も少なかった．
分類性能は，反論事例の分類精度が最も高かったが，分類された事例数が少ないことが問題である．
最後に，片方をリツイート・もう片方に返信のパターンは，分類された事例は同意・反論とも多かった．
分類精度については，同意関係は，両方をリツイートするパターン・他のツイートで返信するパターンと同程度の精度で分類することができたが，反論関係の分類精度はあまり高くなかった．
}
\addspan{ネットワーク拡張手法の分類性能を向上させるためには，}パターンの拡張や，ネットワークを構成するツイートやユーザの増加が考えられる．
前者は，ネットワークをより広範囲にわたって探索して，関係を探してくるようにすることによって，分類可能事例を増やす．
ただし，ノイズの多いパターンを採用することで精度は下がる可能性が高い．
例えば，元のツイート間のパスが長くなるほど，そのリンク関係の信用度も下がると考えられる．
本研究で目指すツイート空間の整理は，大量のツイートをまとめるよりは，少数でも重要なツイートを高精度で分類，整理することが有効であると考えているので，ルールの拡張は最適点を見つける問題に帰着することになる．
一方で，後者の対策である，ネットワーク探索の対象となるツイートそのものを増やすことは有効であると考えられる．
処理を適用するツイートを増やすことで，パターンを拡張することなく，新しいリンクが見つかる可能性は高い．
\addspan{ネットワーク拡張手法と，文間関係認識手法1および2を比較して，ネットワーク拡張手法でのみ正しく分類できた事例として，「救援物資の空中投下は法律で禁止されている」の反論事例の一つを以下に示す．
}
【デマ３３】「日本では物資の空中投下が認められていない」そんなことはありません。
なんと驚いた情報です！日本では物資の空中投下が認められていないんだそう！とっくに自衛隊が孤立被災者に実施してると思ってた。
これでは本当に孤立者が死んでしまう。
救出前にヘリで食糧を落として何が悪いんだろう。
わたしは今これを知り怒りで全身が震えてます。
みなさんリツイートをお願い！
\addspan{a，bのいずれも，「法律」については言及されておらず，さらにaは括弧による引用に対して否定する構造となっていたため，文間関係認識手法1，2のいずれも反論関係に分類できなかった．
ネットワーク拡張手法では，片方をリツイート・もう片方に返信のパターン（図[REF_fig:RT_and_repqt]）によって分類された．
パターン中のc1として使われたツイート，すなわちaをリツイートしたユーザによるツイートbへの返信は全部で7ツイート存在した．
そのうちの3つを以下に示す．
}
@XXXXX【お願いします】問題のツイート削除してください！このままでは本当に物資の空中投下が出来ないと誤解されます。
物資が遅れている、投下より安全な輸送を優先している、これは事実です。
しかしツイッター上では議論がずれてしまってる現状をご理解ください！
@XXXXXこのツイートはデマです。
すぐに削除してください。
情報に正確性の無いものを拡散させないようお願いします。
ツイートでの発言も、常識を忘れないで下さい。
拡散させたいときは、ちゃんと調べて情報元などをしっかり確認した上でして下さい。
迷惑になります。
@XXXXXこれデマだそうですね投下始まったそうで''孤立状態の被災者に対しヘリコプターを使った食料の投下も始まった'' http://www.xxx./xxx.htmlこんな時にデマ流さないで！
\addspan{これらのツイートは全て反論であり，他の4ツイートも全て反論であった．
返信の分類器によりこれらを正しく「反論」と分類できたため，最終的に出力されるスコアも「反論」が最も高く，} a, b間の関係を正しく分類することができた．
\addspan{次に，文間関係認識手法1と2の結果について比較する．
全体的には，手法2の方が精度，再現率ともに優れていた．
同意関係について手法2の方が優れていた事例について分析したところ，2ツイートがいずれも同一の文を引用している事例が大多数であった．
以下に例を示す．
} \addspan{
ツイッターもテレビもメディアを扱う人は考えねばならないことがある。
誤報について\ulinej{福島・双葉病院患者置き去り報道の悪意。
}医師・看護師は患者を見捨てたりしていなかった
記事:\ulinej{福島・双葉病院患者置き去り報道の悪意。
}医師・看護師は患者を見捨てたりしていなかった—誤報流した新聞は全力で訂正しろ！
} \addspan{ツイート1と2で，下線部は共通している．
下線部は，これらのツイートが言及している記事のタイトルであり，この共通部分の関係が同意と分類された結果，ツイート間の関係も同意と正しく分類された．
手法1では，ツイート中にトピックと同意関係にある1文が存在しないため，対応できなかった．
} \addspan{反論関係について手法2の方が優れていたトピックとして「救援物資の空中投下は法律で禁止されている」があげられる．
以下の例では，下線部の関係が対立に分類されたことで，ツイート間の関係が反論に正しく分類された．
} \addspan{
孤立してる被災地に物資が届いていない。
不足マップ作って空と陸から支援できないものか？知り合いは徒歩でおにぎりを届けてるらしい。
\ulinej{ヘリで空中投下できると良い。
}インターネット接続設備も情報のやりとりの為に必須。
\ulinej{自衛隊が物資の空中投下が出来ないという噂はデマだったのでマスコミのみなさんのヘリで孤立した避難場所への物資の空中投下はできないのでしょうか？}政府で許可が下りないのなら即非常措置をお願いしたい。
} \addspan{手法1で反論関係に分類されるのは，一方のツイート中にトピックに同意する文が含まれ，他方のツイート中に対立する文が含まれている場合である．
上記の例では，ツイート3でトピックに関連する文は，対象物である「物資」が省略されており，「法律」に対する言及もなされていないため，トピックに対して同意関係に分類されなかった．
そのため，ツイート間の関係もその他に分類された．
}
\addspan{一方で，反論関係について手法1の方が優れていたトピックとして「双葉病院の医師が患者を置き去りにした」が挙げられる．
以下の例において，ツイート5，6の下線部は，手法2では，ツイート5中の「見捨てていません」に相当する表現がツイート6に含まれていなかったため，対立関係に分類できなかったが，手法1ではトピックとの関係分類において，それぞれ対立，同意に分類され，反論関係に分類することができた．
} \addspan{
TUFの報道番組が大熊町双葉病院の職員は患者を残して逃げたと報道しましたが違います。
事実は職員は一生懸命患者を搬送してから避難しました。
これが真実です。
私の父は双葉病院の主任の1人です。
\ulinej{双葉病院の職員は患者を見捨てていません。
}ご理解ご…
\ulinej{福島第1原発の10キロ圏内にあり避難指示が出た同町の双葉病院で、患者を避難させるため自衛隊が到着した際、病院内は高齢の入院患者128人だけで、医師や病院職員らがいなかったことが分かった。
}最低だよ酷すぎる。
この病院から避難所に移送された患者が14人も亡くなってる
}
以上より，手法2が有利なトピックは，2つのツイートに類似した表現が含まれる場合であることが分かった．
特に，両方のツイートが同じ文を引用し，それに対する意見を述べているようなトピックにおいて顕著であった．
一方で手法1は，トピックを適切に作文できれば，2つのツイートが類似していない場合に有利であることが分かった．
水野らの文間関係認識の問題点は，複数文同士の関係分類に\addspan{直接は}対応できないことである．
\addspan{そのため，手法1および2では，文分割を行った．
} \addspan{今後は，文をまたぐ照応解析や共参照解析を行うことで，関係分類の精度をより向上させ，再現率も向上させることが考えられる．
}一般的に文をまたぐ照応解析\addspan{や共参照解析}の実現は難しいが，ツイートを対象とした場合，\addspan{参照先}となる単語が最大でも140文字以内に含まれていることを活用することで，問題の難易度を下げられる可能性がある．
今回の実験で得た結果を元に，「イソジンを飲むと放射能対策になる」のトピックに関するツイート空間の論述構造グラフを作成した．
作成の手順は以下である．
まず，「イソジンを飲むと放射能対策になる」に対応する\addspan{351}個のツイートペアに対し，ネットワーク拡張による手法と文間関係認識による手法のそれぞれで関係分類を試みる．
1つ以上の手法で「反論」か「疑問」と識別したツイートペアについてはそれらの関係で結ぶ．
\addspan{関係が結ばれたツイートペアを全て集めたものを，グラフに載せるツイートの集合とする．
次に，そのツイート集合内に生じる全てのツイート間のペアのうち，すでに「反論」か「疑問」の関係がついたペア以外については，} 1つ以上の手法で「同意」と識別されたものがあれば，「同意」関係で結ぶ．
以上の流れで論述構造グラフを作成することで，「反論」や「疑問」といった重要な関係を抽出しつつ，無闇にツイート数を増やすことのないグラフを得ることができる．
今回の実験結果を元に作成できたグラフを図[REF_fig:graph]に示す．
グラフ中の\addspan{双方向矢印}は「反論」，\addspan{結合点が丸になっている線}は「同意」と分類された関係を表し，実線はネットワーク拡張による手法，破線は文間関係認識による手法で分類した関係を表す．
\addspan{なお，図[REF_fig:graph]中のツイート間では，どちらの手法でも分類できた例はなかった．
}ただし，これらの分類結果が誤っていた関係には×印を付与してある．
この実験では，「疑問」を識別することはできなかった．
なお，図を描くにあたっては，最も多くの関係を持つツイート「イソジン飲まないで！放射性ヨウ素が集まるのを抑制する効果なし…」を便宜上中心に据えた．
このグラフから以下のことが言える．
まず，中心ツイートと，図の左上にある二つのツイート（「甲状腺に問題がない人なら…」「ちょ，イソジン等内服以外の…」）は三角形に結ばれているが，これはネットワーク拡張による手法と文間関係認識が相補的に寄与することで実現している．
\addspan{ツイート間の関係を独立に表示するだけでなく，3ツイート以上の相互の関係を示すことで，ユーザにとっての分かりやすさやシステムの信頼性を高められる可能性がある．
}このように，\addspan{精度を重視した}両手法を組み合わせることで，\addspan{システムの信頼性を高め，説得力のある論述構造をユーザに提供できる可能性が高まる．
}また，中心のツイートと，その下のツイート（「薄めたイソジンならOK？…」）の間の反論関係を取得している点も特徴である．
グラフを作る際に集めたツイートは「イソジンを飲むと放射能対策になる」というトピックに関連するツイートであり，このトピックに対する立場で言えば，中心のツイートとその下のツイートは反論関係にあるとは言えない．
しかしながら，海藻が効果があるかどうかという点で見ればこの二つのツイートは反論関係にあり，取得したい情報である．
このように多様な情報の論述構造を取得するのが，本研究の目指すところである．
現状の課題として，クラス分類を行った関係に対して誤りが多いことが挙げられる．
正しく分類されている関係のみを見ることができれば，ユーザは十分な情報を得ることができるが，間違って分類されている関係が混在していると，情報を取得するにあたり混乱を招くこととなる．
より実用性のある論述構造を得るには，分類の精度を高めなければならない．
また，「疑問」の関係にあるツイートやURLを含むツイートを取得し，論述構造グラフに組み込むことも目指している．
本研究では，返信の態度分類を行うことで，ツイート間の論述構造を解析する手法を提案する．
返信では，返信先の主張に対する態度や，ユーザそのものに対する態度が表明される．
これらの態度を分類することで，ツイート内容やユーザ間の関係を用いてツイート空間の構造を解析することができる．
本節では返信で表明される態度分類の手法について述べる．
\addspan{
本稿における表記の使い分けを明確にするため，Twitterにおけるいくつかの投稿形式を整理する．
@で始まる投稿であり，特定のツイートに対する返信として投稿すること．
Twitterの提供する機能であり，関係が記録されている．
ある投稿をそのままの形でフォロワーに拡散すること．
Twitterの提供する機能である．
ある投稿を必要に応じて編集しつつ，自身のコメントを付加して投稿すること．
「（自分の投稿）[RQ]T @（返信元のアカウント名）（返信元の投稿）」のような形式を取る．
Twitterの提供する機能ではないが，使用者が多い．
なお，自身のコメントを付加していないものについても非公式リツイートとして扱う．
本稿では，「返信」という表記は，特に断りのない限り「返信」と「非公式リツイート」の二つをまとめたものを表す．
分けて扱う必要がある場合においては，前者を「返信」，後者を「引用」と表記する．
また，単に「リツイート」「RT」と表記した場合は「公式リツイート」を指すものとする．
}
返信には様々な意図のツイートが存在する．
相手の発言に同調，あるいは反発するツイートもあれば，相手や周囲に疑問を投げかけるツイート，引用して情報を補足するツイートなどもある．
ツイート空間の論述構造を分析するためには，これらの多様なツイートを，その投稿の意図に従いいくつかのグループに分類する必要がある．
そこで本研究では，返信で表明される態度を，「同意」「反論」「疑問」「その他」の4クラスに分類するタスクを考える．
\addspan{それぞれのクラスの定義と，その例を以下に示す．
例は，上のツイートに対して，下のツイートが返信である．
}
主張の支持\addspan{([REF_ex:agree1])([REF_ex:agree2])}や感情的な同調（感謝や崇拝\addspan{([REF_ex:agree3])}も含む）など，返信先のツイートに対して明確な同意の意図が感じられるもの．
\addspan{…コスモ石油千葉製油所LPGタンクの爆発により、千葉県、近隣圏に在住の方に有害物質が雨などと一緒に飛散するという虚偽のチェーンメールが送られています。
千葉県消防地震防災課に確認したところ、そのようなことはないと確認できました。
…
[MATH]本当ですか安心です}
\addspan{コスモ石油が否定「火災で有害物質降る」のメール連鎖http://.
..
[MATH]デマです。
みんな冷静になろう。
}
\addspan{天皇陛下は、宮内庁が京都御所に避難してほしいと要望したのを…お断りになったそうじゃないか。
…私は心から尊敬します。
[MATH]天皇陛下！万歳！＼(T-T)／}  \suspend{enumerate}
主張の否定\addspan{([REF_ex:counter1])}や感情的な反発\addspan{([REF_ex:counter2])([REF_ex:counter3])}など，明確な反論の意図が感じられるもの．
発言者に対し強く注意を促すようなもの\addspan{([REF_ex:counter4])}も含める．
\resume{enumerate}
\addspan{…コスモ石油の爆発で有害物質の雨が降る件はデマ。
広げてしまった方はツイート削除の上、訂正を／コスモ石油が否定…
[MATH]火災で壊滅した、コスモ石油のコンビナートにあった科学燃料の詳細を記者会見で発表して報道しろ！「危険というのはデマです。
」なんて情報で納得するわけないだろ！}
\addspan{…東京まで健康被害が現れるようなPuは飛んでこない…RT @YYY:もしプルトニウムが漏れてたら東京から逃げますか？…
[MATH]（怒）}
\addspan{…日本政府は事故の重大性をまったく認識していない。
今すぐに多国籍軍を総動員して封じ込めないとチェルノブイリ以上の被害が出る
[MATH]馬鹿左翼、煽るな。
}
\addspan{…食料がありません。
脱水、低血糖が徐々にきています。
デマじゃない…見捨てないで下さい【from茨城県鹿島コンビナート地区】
[MATH]せめて公式RTしてください。
元の発信者の名前消すとか非公式RTよりひどい。
救助を必要としてる人が、誰だかわからなくなると思いませんか？そのせいで救助が遅れたらと想像できませんか？}  \suspend{enumerate}
返信先に対して情報を要求している\addspan{([REF_ex:question1])}が，明確な反論とは言えないもの．
情報源を要求するようなもの\addspan{([REF_ex:question2])}や，引用部に対する疑問の吐露なども含まれる．
\resume{enumerate}
\addspan{…コスモ石油の爆発で有害物質の雨が降る件はデマ。
広げてしまった方はツイート削除の上、訂正を／コスモ石油が否定…
[MATH] JFEケミカル等含めた火災による被害が無いと言うことでよろしいですか？}
\addspan{…コスモ石油の爆発により有害物質が雲などに付着し、雨などといっしょに降るので…コピペとかして皆さんに知らせてください！！
[MATH] NHKのニュースでは今のところ有毒物質が発生することはないと言っていますが、あなたのツイートのソースは何ですか？}  \suspend{enumerate}
上記のどれにも分類できないもの．
\resume{enumerate}
\addspan{千葉県、近隣圏に在住の方に有害物質が雨などと一緒に飛散するという虚偽のチェーンメールが送られています。
…
[MATH]そうであったとしても、雨カッパとかは持ってた方が良いよね。
}
\addspan{…千葉県、近隣圏に在住の方に有害物質が雨などと一緒に飛散するという虚偽のチェーンメールが
[MATH]硫黄分の多い原油が燃えると酸性雨につながる可能性があるので、それに尾ひれはひれがついたものと推測します。
}
これらの4クラスを設計した意図について\addspan{，上記の例を参照しつつ}述べる．
ツイート空間の整理に必須なのが，対立構造の抽出である．
そのために「同意」と「反論」の2クラスを設定する．
「同意」のクラスによって結びつけられたツイート群は，何らかの主張やユーザに対して同様の態度を表明し，「反論」のクラスによって結びつけられたツイート群は，何らかの主張やユーザに対して異なる態度を表明する．
この2クラスを設定することで，ツイート空間を，同じ態度を表明するツイートクラスタの集合として整理できる．
なお，「同意」や「反論」については態度が明確なもののみを分類する．
前述したように，これら2クラスがツイート間の論述構造を解析する上で中心的な役割を果たすため，曖昧な態度のツイートをこれらの2クラスに分類しないように注意する必要がある．
\addspan{ ([REF_ex:agree1])([REF_ex:agree2])([REF_ex:counter1])([REF_ex:other1])([REF_ex:other2])は，「コスモ石油の爆発で有害物質の雨が降るというのはデマ」という主旨のツイートに対する返信である．
([REF_ex:agree1])は主旨を受け入れているので「同意」，([REF_ex:counter1])は納得しないことを主張しているので「反論」に分類する．
([REF_ex:agree2])は「デマです」と返信しているのでやや紛らわしい例であるが，「冷静になろう」という記述から「危険はない」と考えていることが読み取れ，返信先のツイートの内容に「同意」していると判断できる．
([REF_ex:other1])は，主旨を受け入れてはいるが，完全に安心はしていないことが読み取れることから，同意とは言えず，「その他」に分類する．
また，([REF_ex:other2])は主旨を受け入れてはいるが，返信先の情報への同意よりも自分の考えを表明するためのツイートと読み取れる．
このように補足の意図を持つツイートも「その他」に分類する．
} \addspan{ ([REF_ex:counter4])は発言者に対し強く注意を促すものの例である．
この例のように不用意な拡散をたしなめるものは，拡散しようとするユーザへの反論としてとらえられる．
}
「同意」と「反論」の2クラスは，著者間の対立関係を表すのに対して，「疑問」と「その他」の2クラスは，著者間に対立構造は存在しない．
従って，ツイート空間において重要なツイートとしてツイートAがあるとき，それに同意または反論するツイートは重要な存在であるが，その他の関係にあるツイートは，論述構造を明らかにする上で重要ではない．
一方で疑問関係は，論述構造を整理する上で重要である．
情報の信憑性を判断する際に，その情報に疑問を持つユーザの存在は，信憑性が低いことを示唆していると考えられるためである．
さらに，その疑問に対する回答は，有益な情報となる場合が多いと考えられる．
([REF_ex:question1])は純粋な疑問，すなわち質問の例である．
この質問に対する回答があれば，被害状況を詳しく把握できる可能性がある．
次に，([REF_ex:question2])は情報源を求めている例である．
これは，懐疑的な返信ではあるが，明確な反論とはいえないため，疑問に分類する．
\addspan{ ([REF_ex:agree2])([REF_ex:counter2])([REF_ex:counter3])のような感情的な同調あるいは反発のツイートは，内容（引用の場合は付加部分）には有用な情報は含まれていないが，}誰が誰に同調，あるいは反発したかというユーザ同士の関係を推測することは，論述構造分析の助けになると考えられる．
したがって本研究においては，感情に基づくと考えられるツイートについても，「同意」や「反論」として同等に扱い分類を行なっている．
返信ツイートの分類を行うにあたり，正解データを準備する．
本稿で行う実験で使用するデータは，ホットリンク社より提供された，2011年の\addspan{3月11日から3月29日まで}のツイートデータ（以下hottoコーパス）である．
hottoコーパスには，#tsunamiや#jishinなど震災に関連するハッシュタグまたはキーワードが含まれるツイートと，そのツイートを投稿したユーザやそのプロフィール情報などが収録されている．
収集対象ユーザ数は約100万人，ツイート数は約2億1千万ツイート\addspan{であり，本研究では全てのデータを利用した．
}また，各ツイートには公式リツイート（以下RT）や返信の関係が含まれており，これらはそのまま利用した．
ただし，hottoコーパスには引用関係が記録されていないので，以下の方法で復元した（図[REF_fig:recognizing-qts]参照）．
ツイートに``[RQ]T username''というパターンが出てくるとき，そのパターンに続く部分（図[REF_fig:recognizing-qts]左上で，「現在、」から始まる網掛けの部分）をどこかのツイートから引用したと考える．
そして，ユーザ``username''のツイートの中で，投稿日時が引用ツイートよりも前のものをすべて検索する．
これらのツイート群に対し，引用部のテキストとの類似度を\addspan{文字トライグラム}のオーバーラップ係数で計算し，これが最大になるものを引用元と推定する．
\addspan{オーバーラップ係数は，文字トライグラムの集合XとYに対し，以下の式で定義される．
{
}}なお，`[RQ]T username1 comment1 [RQ]T username2 comment2 ''のように引用が何段階が行われているケースの場合，引用元と考え検索対象とするのは``username1''のツイートのみである．
図[REF_fig:recognizing-qts]では，\addspan{あるユーザ}のツイートを検索した結果，右側真ん中のツイートの類似度が最も高かったため，左上のツイートの引用元と推定している．
ただし，オーバーラップ係数の最大値が0.4未満である場合は引用元が見つからなかったとする．
返信関係のアノテーションには，震災の際に出回ったデマ一覧を参考に，20個のトピックを選択した．
\addspan{トピックは，デマの内容を端的に説明する短い文である．
}デマ一覧を利用したのは，東日本大震災の時に情報の信憑性で問題に上がったことと，反論関係が比較的多い割合で含まれると考えたからである．
\addspan{それぞれのトピックに関連するツイートを収集するために，クエリとしてトピック中の単語を設定する．
} \addspan{選んだトピックとクエリを表[REF_tab:20query]に示す．
} \addspan{これらのトピックは，クエリで検索できるツイートから，十分な数の返信を抽出できるように選択した．
}具体的には，後で述べるように，返信・引用が各100個ずつ以上取得できるような\addspan{トピックと}クエリを選んだ．
各クエリ\addspan{で}hottoコーパスを検索し，リツイート数が多い順に並べる．
上位のツイートから順に，返信ツイートを取得する．
なお，あるユーザ間で相互の返信が続いている場合には，反論の応酬であるなど重要な論述構造が存在する可能性があり，有用なデータとなるため，返信ツイートが続いている限り全て取得している．
このようにして，各クエリを用い返信・引用をそれぞれ100個ずつ，20トピックで計\addspan{4000}ツイートを集める．
\addspan{この中に}重複するツイートがあった場合には一つを残して削除し，トピック毎の返信ツイートを補充した．
以上により，計4000個の返信ツイート（以降データセットA）を準備した．
データセットAに対し，三人のアノテーター（以下X・Y・Z）の手により，前項で述べた方針に従い4クラスのラベル付けを行った．
アノテーションの一致度合いを表[REF_tab:class_annotation]に示す．
4000ツイートのうち，3人のラベルが一致したツイートは2690ツイートであった．
ラベルの一致度を評価するため，ペアワイズにCohenのカッパ係数を計算した．
ただし[MATH]は対応クラスの出現数の一致率，[MATH]は対応クラスの偶然の一致率である．
XY間が0.660，XZ間が0.621，YZ間が0.641となり，十分な一致と見なせる．
3人のアノテーションが一致した2690ツイートを集めたものをデータセットBとする．
返信の態度を教師有り学習で分類する手法について述べる．
学習に用いる素性は大まかに3種類に分かれ，ツイート内容に関す\addspan{る}素性，ツイート間の素性，ユーザ間の素性である．
ツイート内容の素性は，単語ユニグラム，単語バイグラム，URL数，ハッシュタグ数，デマ否定単語の有無，反論表現との一致度である．
これらの素性では，返信ツイートであればツイート全文，引用ツイートであれば追加部分（ツイート全体から引用箇所以降を除いたもの）を対象とし，本文中のアカウント名やURL，ハッシュタグを正規表現により取り除く．
取り除いたアカウント・URL・ハッシュタグに対しては，それぞれに対し0個・1個・2個以上を含むという3値の素性を作る．
この設定は，\addspan{実験に用いたツイートデータを観察した結果，} URLを1個も含まない場合と1個以上含む場合には大きな差があると見られ，また，1個だけ含む場合と多数を含む場合にも大きな差があると見られる一方で，3個か4個かには大きな差はない\addspan{と見られたため導入した．
}不要箇所を取り除いた後の本文に対して，MeCab [CITE]による形態素解析を行い，単語ユニグラムと単語バイグラムを抽出する．
\addspan{デマ否定単語の有無}とは，ツイート本文が\addspan{デマの否定を示す単語}を含むかどうかを表すもので，\addspan{デマ否定単語}は「デマ」「ガセ」「誤報」「虚報」「削除」「訂正」の6つとした．
これらの単語は必ずしもデマを否定していることを示すとは限らないが，返信で用いられる場合では，デマの否定に用いられるケースが多く，反論の抽出に有効と考えられる．
反論表現との一致度とは，あらかじめ作成した反論表現辞書を用い，反論に固有の表現をどの程度含んでいるかを表す．
反論表現辞書は，データセットAの中から反論を表すと思われる表現を人手で抽出して作成する．
それらの表現にはデマを否定する表現も含まれるが，相手に対する感情的な反発を表す表現なども含まれる．
表[REF_tab:反論表現]に反論表現の例を示す．
なお，この二種類の表現は厳密に区別できるわけではない．
例えば，表[REF_tab:反論表現]のその他の表現例の「余計なこと書くな」については，「余計なこと」が指す内容がデマの可能性もある．
実際にはこれら二種類を分けて扱う必要はないが，反論表現をたくさん集めることが，デマによる否定以外の反論を認識する上で有効である．
また，一見すると反論を表す表現であるが，反論表現辞書に含めるべきでないものも存在する．
例えば，「それはデマです」は反論表現として挙げた一方で，「デマです」「デマらしいです」は反論表現にはふさわしくないことがある．
例えば，以下のようなケースが存在する．
デマです，注意！RT @XXX:（デマを否定する情報）RT @YYY:（デマ情報）
デマらしいですRT @XXX:（デマを否定する情報）RT @YYY:（デマ情報）
この場合，引用元との間には共にデマを否定しているという“同意”の関係が成り立っているため，反論表現としてはふさわしくない．
このように，伝聞形で使われそうな表現などは反論表現辞書から除外している．
実際に収集した100個の反論表現は付録に載せた．
以上のように作成した反論表現辞書を用い，反論表現との一致度を求め，素性として使用する．
まず，反論表現辞書中の各反論表現に対して，その単語バイグラムをどの程度含むかを求める．
例えば，反論表現辞書が「それ／は／デマ／です」「これ／デマ／ね」の二つからなる場合を考える．
「デマ／です」を含むツイートがあった場合，「それ／は／デマ／です」の3個のバイグラムのうち1個を含むので1/3，「これ／デマ／ね」の2個のバイグラムは1個も含まないので0となる．
これらのうちの最大値（この場合は1/3）を，反論表現との一致度とする．
実際には反論表現は100個あるので，それら100個に対して計算を行い，最大値を反論表現との一致度としている．
返信先のツイートとの間\addspan{の関係についての}素性では，ツイートのタイプ，空文，単語バイグラムのコサイン類似度を使用する．
ツイートのタイプとは，引用かどうかを表す．
空文とは，引用でありながらも自身のコメントを付加していないものに発火する素性である．
単語バイグラムのコサイン類似度とは，返信ツイートの単語バイグラム（引用ツイートの場合は，ツイート全体から引用箇所を除いた部分）と，返信先ツイートの単語バイグラムのコサイン類似度である．
返信先のユーザとの間\addspan{の関係についての}素性として，返信の回数，返信の方向性，RTの回数，RTの方向性，共通のツイートをRTした回数，共通のURLをツイートに含んだ回数，共通のツイートに返信した回数を利用する．
返信の回数は，hottoコーパスの中から，返信している2ユーザ間で返信が行われた回数である．
方向性とは，2ユーザ間の返信の履歴を調べ，双方向のやりとりがある，返信相手への返信のみがある，返信がない，のいずれかを指す．
RTの回数や方向性についても同様である．
これらの素性はユーザ間の関係から返信による態度を推測するために使われる．
例えば，RTが相互でたくさん行われている場合，新たな発言も「同意」である可能性が高い\addspan{と考えられる}．
返信が一方的なものであった場合，それらの発言は「反論」である可能性がある\addspan{と考えられる}．
また，共通のツイートをRTした回数，共通のURLをツイートに含んだ回数，共通のツイートに返信した回数の3つは，第三者を媒介して表れる素性である．
例えば，よく共通のツイートをRTしているユーザ同士での返信があった場合は，「同意」の可能性が高い\addspan{と考えられる}．
\addspan{これらの素性の設定における仮定の妥当性は，[REF_subsec:cross]節で検証する．
}
\addspan{以上，各素性の設計について述べたが，本研究において特に重要と考えているのは，反論表現辞書との一致度および構造的特徴の利用である．
ここでいう構造的特徴とは，返信か引用かや，返信先のユーザとの間の関係についての各素性であり，これらはTwitter上の返信構造により生じる素性である．
また，反論表現辞書は，前述したように返信で用いられることの多い表現を元に作成しており，これらもまたTwitter上の返信構造により生じる素性と言える．
次節の評価では，返信構造により生じるこれらの素性がどの程度性能に寄与するのかについても示す．
}
本節では，\addspan{返信に限らない全てのツイート間の関係認識を行うことを考える．
その際，前節までで述べた}返信の態度分類を，直接的に返信関係のない一般のツイート間の論述関係分析に応用する手法について述べる．
一般に，返信のツイートが全ツイートに占める割合は非常に少ないため，前節までで作成した分類器をそのまま適用するのは難しい．
特に，反論表現辞書の有効性は低いと考えられる．
反論表現辞書に含まれる表現は，返信先への態度を表す際に利用されることの多い表現であり，返信になっていない一般のツイートに含まれる可能性は低い．
\addspan{返信の関係にない一般のツイート間に対して4クラスの分類を行うには，その言語的な内容を利用することが考えられる．
例えば，ツイート間の反論関係は，含意関係認識課題[CITE]における文間の矛盾関係(RTE3 [CITE])に相当する．
文間の矛盾関係の認識に取り組んだMarneffeら[CITE]は，RTE3のテストデータに対して精度22.95%，再現率19.44%を達成した．
また，日本語を対象とした場合，NTCIR9-RITE [CITE]およびNTCIR10-RITE2において，矛盾関係を含む含意認識課題であるMC (multi class)タスクが取り扱われており，RITE2のフォーマルランにおける矛盾関係認識性能は，精度52.17%，再現率19.67%が最高性能であった．
これらの認識性能が示す通り，言語的な内容に基づく文間の矛盾関係の認識は容易ではない．
}
そこで本節では，\addspan{返信態度の分類器}をツイート間の関係分析に拡張する手法について述べる．
具体的には，ツイートペアが与えられた時に，両ツイートおよび両ユーザ，および関連するツイート・ユーザに拡張したネットワークを作り，ネットワーク内に存在する返信関係を分類器で解く．
その結果から，元のツイートペアの間の関係を推測する．
さらに，\addspan{後述する文間関係認識}を用いて，ツイート間の関係を推測する手法についても述べ，それぞれの分類性能や差異について考察する．
一般のツイートの内容や意図は広範囲に渡る．
意見の主張に始まり，ニュースなどの拡散，さらに他愛もないつぶやきや独り言の類も多い．
これら全てのツイートを整理することはできない．
したがって，整理が完了した際の有用性を考慮し維持しながら範囲を狭めることが必要である．
そこで，\addspan{[REF_sec:classification_setting]節で定義した，トピックに関連するツイート群を収拾し，}それらを整理するタスクを考える．
\addspan{同じトピックに属するツイート間には，そのトピックに対する同意，反論などの観点から関係を付与できると考えられる．
各ツイートがあるトピックに属するか否かを決定する手法については，本稿の手法の対象外であり，人手で行う．
}
本節では，同じ\addspan{トピックに属する}ツイートのペアが与えられた場合に，関係を分類するという問題を解く．
\addspan{分類する関係は}，返信の関係分類の際と同じく，「同意」，「反論」，「疑問」，「その他」の四つとする．
同様の主張や感情を示すなど，明確な同意の意図が感じられるもの．
対立する主張や感情を示すなど，明確な反論の意図が感じられるもの．
情報・情報源の要求や，疑問の吐露など．
上記のどれにも分類できないもの．
これらの分類基準は，返信の場合と似ているが全く同じにはならない．
前述したように，ツイート間の関係は，トピックに関する\addspan{主張間の関係}としてとらえられる．
返信の関係が存在しないツイートペアにおいては，お互いに対する単純な賛成や反対，感情的な同調や反発などは表れにくい．
また，お互いに対する直接的な質問もまず存在しないため，「疑問」はかなり出現頻度が少ないと予想されるが，存在した場合には重要であると考え，\addspan{分類対象の関係に含める}．
なお，ツイート間のトピックが明らかに異なる場合についても，この4クラスに分類しようとすれば「その他」のラベルを付けることは可能である．
しかし，「その他」のツイートはツイート空間の整理には有用でないため，ツイート間のトピックが明らかに異なる事例は除外する．
上記のタスクを行うにあたり，正解データを準備する．
データはhottoコーパスより集める．
まず，11個のトピックを用意する．
これらのトピックは返信の分類のために集めたときのもの\addspan{（表[REF_tab:20query]）}の中から選択した．
対応するクエリを用いて検索されたツイートのうち，RT数が上位のものから30件ずつ集める．
RT数上位のものから順に集めるのは，それらのツイートは多くのユーザの目に触れるものであり，論述構造を分析・整理する意義が大きいためである．
\addspan{ただし，疑問を呈するツイートのRT数が上位に来ることは少ないため，この集め方では疑問の関係は少ないデータとなる．
}クエリは，該当トピックをうまく集められそうなものを選んでいるが，中にはトピックに関連するツイートだけを集めるようなクエリの調整が難しく，実際にトピックに対応するツイートの数は30未満になるものもある．
トピック，クエリ，トピックに関連するツイートの数を表[REF_tab:11query]に示す．
これらの11トピックに対し，ペアワイズな全てのツイートの組み合わせを考える．
例えば，「イソジンを飲むと放射能対策になる」のトピックに関しては，27個のツイートが存在するので，その組み合わせは全部で351個ある．
これらの組み合わせについて，前述した4クラスのラベル付けを行う．
ラベル付けは，\addspan{アノテーション経験の豊富な一人のアノテーター}の手により行った．
アノテーションの結果を表[REF_tab:pair_annotation]に示す．
「同意」の割合が高く，予想した通り「疑問」の割合は非常に少ないことが分かる．
また，このアノテーション済のデータを，以降データセットCと呼ぶ．
同じトピックの中でのツイートペアの関係分類を，返信関係分類器を用いて行う手法について述べる．
大まかな方針としては，直接の返信の関係が見当たらない場合，ツイートやユーザからなるネットワークを拡張し，返信の関係を探す．
前節で述べた反論表現辞書などを用いることで，返信関係にないツイートペアに比べ格段に関係が推測しやすい．
そして，返信分類器の出力の結果を元のツイートペア間の関係の推測に用いることとする．
まず，直接返信の関係になっている場合が最も直接的な経路である（図[REF_fig:direct_repqt]）．
図のリンクについている名称は関係を表している．
リンク関係には「author」「RT」「返信」の三種類がある．
authorはツイートとそのツイートの投稿者の間に，RTはツイートとそのツイートをリツイートしたユーザの間に生じる関係である．
このケースでは，前節の分類器の結果をそのまま使用する．
分類器の学習には，データセットBの全データ（2690個）を用いる．
次に，その周囲のツイートやユーザまで拡張したネットワークを考え，考えられる様々な経路で元のツイートペアを結ぶ．
その経路内に返信・引用関係が存在する場合，前節で提案した分類器を用いて各クラスのスコアを算出する．
\addspan{最後に各クラス毎にスコアの和を計算し，最もスコアの高いクラスに分類する．
}元のツイートペアを結ぶ経路として以下のものを導入する．
まず，両ツイートをリツイートしているユーザがいる場合を考える（図[REF_fig:both_RT]）．
本稿では，リツイートは同意であるという仮定を置いている．
しかしながら，反論の意図を持ってリツイートしている場合もあるため，片方をリツイートしたユーザ数に対し，両方をリツイートしたユーザ数の割合が大きいときほど同意とみなしやすいと考え，\addspan{aをリツイートしたユーザ集合とbをリツイートしたユーザ集合の間の}ジャッカード係数を同意のスコアとする．
次に，\addspan{片方のツイートの投稿者が，もう片方のツイートに対し他のツイートで返信している場合}を考える（図[REF_fig:other_repqt]）．
このケースでは，a--b間の関係をa1--b間が表していると考え，スコアには，ロジスティック回帰\addspan{により求められた各クラス毎}の確率値を用いる．
さらに，片方をリツイートしてもう片方に返信しているユーザがいる場合を考える（図[REF_fig:RT_and_repqt]）．
このケースでは，リツイートは同意であるという仮定に基づき，a--b間の関係をc1--b間が表していると考え，同様に返信分類器の出力（\addspan{ロジスティック回帰により求められた各クラス毎の}確率値）を用いる．
以上のようなルールは，要求に応じて拡張が可能である．
例えば，aをリツイートしたユーザCとbをリツイートしたユーザDの間に返信関係があった場合に，分類器によるその関係の出力を用いることができる．
ただし，ルールを増やすほど精度は下がると考えられるため，本稿では上記のルールに限定する．
本節では，2文を与えたときにその間の意味的関係を返す文間関係認識器を用いてツイート間の関係を分類する手法について述べる．
文間関係認識の部分課題に位置づけられる含意関係認識は，前述の通りワークショップが開催されるなど広く研究されている．
含意関係認識課題で取り扱われている関係の種類を以下に示す．
一方の文（テキスト[MATH]）を真としたとき，他方の文（仮説[MATH]）も真であると判断できる\addspan{文対}
川端康成は「雪国」などの作品でノーベル文学賞を受賞した
川端康成は「雪国」の著者である
文中の事象が同時に成立し得ない\addspan{文対}
モーツァルトはザルツブルグで生まれた
モーツァルトはウィーンで生まれた
上記以外\addspan{の文対}
\addspan{川端康成は小説家である}
\addspan{川端康成は大阪で生まれた}
本稿で取り扱う4つの関係とは，含意が同意に，矛盾が反論に対応するが，同意は厳密な含意ではなく，反論は矛盾しているとは限らない．
そこで，水野ら[CITE]の同意，対立関係を対象とした文間関係認識器を用いる．
彼らの定義する同意，対立関係は，本稿で定義する同意，反論関係とほぼ対応する．
\addspan{疑問関係は取り扱えないため，同意，反論，その他の3種類の関係に分類する．
}
まず，\addspan{図[REF_fig:srr_example]を用いて，}彼らの手法を簡潔に述べる．
次に，本課題のために変更した点について述べる．
入力された2文それぞれに対して，形態素解析[CITE]，係り受け解析[CITE]，述語項構造解析[CITE]，拡張モダリティ解析[CITE]，評価極性判定を行う．
\addspan{図[REF_fig:srr_example]では，係り受け構造を文の上下の矢印で示す．
}
\addspan{テキスト中には，仮説の内容と関連の低い情報も含まれている．
そこで，まず，テキスト中で仮説と内容的に対応する部分を同定する．
後段の関係分類では，対応する名詞間や述語間の関係を考慮することで，文間の関係を同定する．
テキスト中で仮説に対応する部分の同定は，文節アライメント，局所構造アライメント，文節アライメントの選択という3段階で行われる．
以下にそれぞれの手続きを示す．
}
\addspan{文節中に含まれる内容語の類似・関連性に基づいて文節間に文節アライメントを付与する．
文節中の内容語が類似しているとき，それらが含まれる文節間にアライメントを付与する．
図[REF_fig:srr_example]では，「イソジンで([MATH])」と「イソジンを([MATH])」が，イソジンという内容語が共通することからアライメントされる．
}
\addspan{内容語の類似・関連性は，その表層だけでなく，日本語WordNet [CITE]や動詞含意関係データベース[CITE]を用いて，意味的な類似度にも基づいて判断される．
図[REF_fig:srr_example]において，「防ぐ([MATH])」と「回避できる([MATH])」は，意味的に類似しているためアライメントされる．
}
\addspan{文節アライメントによってアライメントされた文節の中には，文全体の意味を考えるとアライメントすべきではない場合がある．
例えば，「イソジンを飲んで被曝を防ぐ」と「ワカメの味噌汁を飲むと良い」という2文を考える．
2文間で「飲む」が共通しているが，その対象は異なっているため，アライメントすべきではない．
}
\addspan{この問題に対して，文中の依存構造および述語項構造を対応付けるのが局所構造アライメントである．
図[REF_fig:srr_example]において，文節アライメントされる「被曝を([MATH]) \--被曝を([MATH])」と，「防ぐ([MATH]) \--回避できる([MATH])」に着目する．
これらは[MATH]側，[MATH]側のいずれにも依存構造が存在し，この構造間にアライメントを付与するのが局所構造アライメントである．
「イソジンで([MATH]) \--イソジンを([MATH])」と「防ぐ([MATH]) \--回避できる([MATH])」は，[MATH]側には依存構造が存在するが，[MATH]側には直接の依存関係は存在しない．
しかしながら，「飲むと([MATH])」を介して依存構造の繋がりが存在する．
本研究では水野らと同様に，4文節まで介しても良いという上限を設けた．
}
\addspan{文節アライメントされた文節対のうち，局所構造アライメントもされている文節対のみを選択する．
}
アライメント結果を入力として，まず，同意および対立と，その他との分類を行い，次に，同意と対立の分類を行う．
1つめの分類は，仮説側の文節が全て\addspan{テキストにアライメントされたか}によって判断される．
2つめの分類について，対応付けられた述語が，否定の関係にあるか，評価極性が異なるか，反義の関係にある場合，対立に分類され，いずれにも当てはまらないものは同意に分類される．
本研究で対象としている，\addspan{ツイートデータ}には，述語間の否定，評価極性，反義\addspan{に基づいて分類可能な対立文対}だけでなく，「〜というのはデマです」や「〜という事実はありません」といった\addspan{述語}の後方での否定・反論も少なくない．
そこで，このような表現を否定表現と呼び，対応付けられた述語よりも後方に否定表現が現われた場合，同意ならば対立に，対立ならば同意に関係を反転させる工程を付け加えた．
本研究で利用した否定表現は，「誤り，ねつ造，誇張，嘘，誤報，デマ，今のところない，ソースがありません，事実はありません，根も葉もない噂，根拠がない，ニュースはない」である．
これらは，評価データ以外のツイートから収集した．
表[REF_tab:反論表現]に示される反論表現とは，一般ツイート中の表現である点が異なるが，重なる表現も存在する．
\addspan{図[REF_fig:srr_example]において，[MATH]側の「回避できる」は，その後方の「というのはデマだ」という表現によって否定されており，この2文は対立関係に分類される．
}
彼らの文間関係認識手法は，\addspan{仮説}が単文（一つの述語といくつかの項からなる文）であることを前提としている．
しかし，ツイートに含まれる文は，単文であることは少ない．
そこで，\addspan{まず，トピックと2つのツイートの間の関係をそれぞれ同定し，次にこれら2つの関係に基づいてツイート間の関係を同定する．
このとき，トピックが仮説に，ツイートがテキストに対応する．
図[REF_fig:rel_classification_1]に，トピックを用いてツイート間の関係を求める手法を示す．
まず，関係を求めたい2つのツイートに対して，ツイートとトピックとの間の関係を求める．
その際，ツイートは，まず文分割され，次に収集用クエリが全て含まれる文のみが選択される．
そのような文が複数存在する場合は，一番後ろの一文を選択する．
図[REF_fig:rel_classification_1]は，中心にトピック，上下にツイートから選択された文を表している．
上側の文はいずれも同意で，下側の文は，一方が同意で，他方が対立に分類されている．
最後に，求められた2つの関係から，ツイート間の関係を分類する．
トピックとツイートとの間の関係から導かれるツイート間の関係の組み合わせを，以下に示す．
} \addspan{
2つの関係のうち1つでも「その他」[MATH]「その他」
2つの関係がいずれも「同意」[MATH]「同意」
2つの関係がいずれも「対立」[MATH]「同意」
2つの関係が異なる，すなわち「同意・対立」または，「対立・同意」[MATH]「反論」
}以降，本手法を「文間関係認識手法1」と呼ぶ．
ツイート間の関係を直接同定する手法も評価する．
まず，文間関係認識手法1と同様に，ツイートを文分割し，収集用クエリを含む文を選択する．
次に，関係を求めたい任意の2ツイートについて，選択された2文間の関係を求める．
同定された文間関係は，同意はそのまま同意関係に対応し，対立は反論関係に対応する．
以降，本手法を「文間関係認識手法2」と呼ぶ．
本節では，前節で述べた一般のツイート間の関係認識手法の評価を行う．
本研究の目的は，図[REF_fig:map]のように，ツイート間の論述関係を可視化し，ユーザに情報の「裏」を提示し，情報の価値判断を支援することである．
誤分類事例が多いと，正しく情報の裏を取ることができないため，高い精度を実現することが重要であり，その上で再現率を上げていく戦略をとる．
本稿では，論述関係の可視化を実現するために必要な程度の数のツイートに対して，正しく関係分類が行えたかに着目して評価する．
また，ネットワーク拡張手法，文間関係認識手法がそれぞれどのように有効であったかを考察する．
正解の関係ラベルを付与したデータセットCの各ツイートペアについて，関係分類実験を行った．
ネットワーク拡張手法について，図[REF_fig:direct_repqt]〜図[REF_fig:RT_and_repqt]に示すいずれのパターンにも当てはまらない場合は，関係を出力しない．
実験結果の精度を表[REF_tab:rel_res_prec]に，再現率を表[REF_tab:rel_res_rec]に，全トピックのマクロ平均と併せて示す．
N/Aは，その関係に分類された事例が存在しなかったことを示す．
ネットワーク拡張手法は，簡単なパターンの追加だけで，分類された事例は少ないものの，直接の返信関係にないツイート間の関係分類を行うことができた．
文間関係認識に基づく手法について，一部のトピックについては，多くの事例を高精度で分類できている．
いずれの手法でも分類された事例数の少なかったトピックとして，「東大が入学を取り消し」，「埼玉の水道水に異物が混入し危険」などがある．
\addspan{本節では，まず，ネットワーク拡張手法の分類結果について考察し，文間関係認識手法1および2との比較を行う．
次に，文間関係認識手法1と2について比較する．
}
\addspan{ネットワーク拡張手法について，図[REF_fig:direct_repqt]から図[REF_fig:RT_and_repqt]の各パターンごとの分類性能を表[REF_tab:各パターンの精度]に示す．
表の各列は，各パターンを単独で使用して，ツイートa，b間の関係を分類した場合の分類精度を示している．
ただし，両方をリツイートするパターン（図[REF_fig:both_RT]）は，それぞれのツイートをリツイートしたユーザ集合間のジャッカード係数を同意のスコアとするものであるため，閾値0.01以上の場合のみ同意と判定することとしている．
このとき，直接返信のパターン（図[REF_fig:direct_repqt]）は，返信態度の分類器をそのまま適用した場合と同等である．
反論関係は「福島から避難した子供には教科書が配布されない」に対して1件の誤分類が存在するのみであったが，同意関係への分類精度はマクロ平均で0.953と高かった．
次に，拡張した各パターンの結果について，まず，両方をリツイートするパターン（図[REF_fig:both_RT]）について，本研究ではリツイートは同意関係であるという仮定を置いているため，本パターンでは反論関係への分類は行われない．
同意関係への分類精度は比較的高く，本パターンの有効性が示されている．
今後は，リツイート後のツイートも参照し，同意関係ではないリツイートも考慮することで，同意関係の分類精度向上，反論関係への分類も行うことが考えられる．
次に，他のツイートで返信のパターン（図[REF_fig:other_repqt]）は，適合する場合が少なかっために，分類された事例も少なかった．
分類性能は，反論事例の分類精度が最も高かったが，分類された事例数が少ないことが問題である．
最後に，片方をリツイート・もう片方に返信のパターンは，分類された事例は同意・反論とも多かった．
分類精度については，同意関係は，両方をリツイートするパターン・他のツイートで返信するパターンと同程度の精度で分類することができたが，反論関係の分類精度はあまり高くなかった．
}
\addspan{ネットワーク拡張手法の分類性能を向上させるためには，}パターンの拡張や，ネットワークを構成するツイートやユーザの増加が考えられる．
前者は，ネットワークをより広範囲にわたって探索して，関係を探してくるようにすることによって，分類可能事例を増やす．
ただし，ノイズの多いパターンを採用することで精度は下がる可能性が高い．
例えば，元のツイート間のパスが長くなるほど，そのリンク関係の信用度も下がると考えられる．
本研究で目指すツイート空間の整理は，大量のツイートをまとめるよりは，少数でも重要なツイートを高精度で分類，整理することが有効であると考えているので，ルールの拡張は最適点を見つける問題に帰着することになる．
一方で，後者の対策である，ネットワーク探索の対象となるツイートそのものを増やすことは有効であると考えられる．
処理を適用するツイートを増やすことで，パターンを拡張することなく，新しいリンクが見つかる可能性は高い．
\addspan{ネットワーク拡張手法と，文間関係認識手法1および2を比較して，ネットワーク拡張手法でのみ正しく分類できた事例として，「救援物資の空中投下は法律で禁止されている」の反論事例の一つを以下に示す．
}
【デマ３３】「日本では物資の空中投下が認められていない」そんなことはありません。
なんと驚いた情報です！日本では物資の空中投下が認められていないんだそう！とっくに自衛隊が孤立被災者に実施してると思ってた。
これでは本当に孤立者が死んでしまう。
救出前にヘリで食糧を落として何が悪いんだろう。
わたしは今これを知り怒りで全身が震えてます。
みなさんリツイートをお願い！
\addspan{a，bのいずれも，「法律」については言及されておらず，さらにaは括弧による引用に対して否定する構造となっていたため，文間関係認識手法1，2のいずれも反論関係に分類できなかった．
ネットワーク拡張手法では，片方をリツイート・もう片方に返信のパターン（図[REF_fig:RT_and_repqt]）によって分類された．
パターン中のc1として使われたツイート，すなわちaをリツイートしたユーザによるツイートbへの返信は全部で7ツイート存在した．
そのうちの3つを以下に示す．
}
@XXXXX【お願いします】問題のツイート削除してください！このままでは本当に物資の空中投下が出来ないと誤解されます。
物資が遅れている、投下より安全な輸送を優先している、これは事実です。
しかしツイッター上では議論がずれてしまってる現状をご理解ください！
@XXXXXこのツイートはデマです。
すぐに削除してください。
情報に正確性の無いものを拡散させないようお願いします。
ツイートでの発言も、常識を忘れないで下さい。
拡散させたいときは、ちゃんと調べて情報元などをしっかり確認した上でして下さい。
迷惑になります。
@XXXXXこれデマだそうですね投下始まったそうで''孤立状態の被災者に対しヘリコプターを使った食料の投下も始まった'' http://www.xxx./xxx.htmlこんな時にデマ流さないで！
\addspan{これらのツイートは全て反論であり，他の4ツイートも全て反論であった．
返信の分類器によりこれらを正しく「反論」と分類できたため，最終的に出力されるスコアも「反論」が最も高く，} a, b間の関係を正しく分類することができた．
\addspan{次に，文間関係認識手法1と2の結果について比較する．
全体的には，手法2の方が精度，再現率ともに優れていた．
同意関係について手法2の方が優れていた事例について分析したところ，2ツイートがいずれも同一の文を引用している事例が大多数であった．
以下に例を示す．
} \addspan{
ツイッターもテレビもメディアを扱う人は考えねばならないことがある。
誤報について\ulinej{福島・双葉病院患者置き去り報道の悪意。
}医師・看護師は患者を見捨てたりしていなかった
記事:\ulinej{福島・双葉病院患者置き去り報道の悪意。
}医師・看護師は患者を見捨てたりしていなかった—誤報流した新聞は全力で訂正しろ！
} \addspan{ツイート1と2で，下線部は共通している．
下線部は，これらのツイートが言及している記事のタイトルであり，この共通部分の関係が同意と分類された結果，ツイート間の関係も同意と正しく分類された．
手法1では，ツイート中にトピックと同意関係にある1文が存在しないため，対応できなかった．
} \addspan{反論関係について手法2の方が優れていたトピックとして「救援物資の空中投下は法律で禁止されている」があげられる．
以下の例では，下線部の関係が対立に分類されたことで，ツイート間の関係が反論に正しく分類された．
} \addspan{
孤立してる被災地に物資が届いていない。
不足マップ作って空と陸から支援できないものか？知り合いは徒歩でおにぎりを届けてるらしい。
\ulinej{ヘリで空中投下できると良い。
}インターネット接続設備も情報のやりとりの為に必須。
\ulinej{自衛隊が物資の空中投下が出来ないという噂はデマだったのでマスコミのみなさんのヘリで孤立した避難場所への物資の空中投下はできないのでしょうか？}政府で許可が下りないのなら即非常措置をお願いしたい。
} \addspan{手法1で反論関係に分類されるのは，一方のツイート中にトピックに同意する文が含まれ，他方のツイート中に対立する文が含まれている場合である．
上記の例では，ツイート3でトピックに関連する文は，対象物である「物資」が省略されており，「法律」に対する言及もなされていないため，トピックに対して同意関係に分類されなかった．
そのため，ツイート間の関係もその他に分類された．
}
\addspan{一方で，反論関係について手法1の方が優れていたトピックとして「双葉病院の医師が患者を置き去りにした」が挙げられる．
以下の例において，ツイート5，6の下線部は，手法2では，ツイート5中の「見捨てていません」に相当する表現がツイート6に含まれていなかったため，対立関係に分類できなかったが，手法1ではトピックとの関係分類において，それぞれ対立，同意に分類され，反論関係に分類することができた．
} \addspan{
TUFの報道番組が大熊町双葉病院の職員は患者を残して逃げたと報道しましたが違います。
事実は職員は一生懸命患者を搬送してから避難しました。
これが真実です。
私の父は双葉病院の主任の1人です。
\ulinej{双葉病院の職員は患者を見捨てていません。
}ご理解ご…
\ulinej{福島第1原発の10キロ圏内にあり避難指示が出た同町の双葉病院で、患者を避難させるため自衛隊が到着した際、病院内は高齢の入院患者128人だけで、医師や病院職員らがいなかったことが分かった。
}最低だよ酷すぎる。
この病院から避難所に移送された患者が14人も亡くなってる
}
以上より，手法2が有利なトピックは，2つのツイートに類似した表現が含まれる場合であることが分かった．
特に，両方のツイートが同じ文を引用し，それに対する意見を述べているようなトピックにおいて顕著であった．
一方で手法1は，トピックを適切に作文できれば，2つのツイートが類似していない場合に有利であることが分かった．
水野らの文間関係認識の問題点は，複数文同士の関係分類に\addspan{直接は}対応できないことである．
\addspan{そのため，手法1および2では，文分割を行った．
} \addspan{今後は，文をまたぐ照応解析や共参照解析を行うことで，関係分類の精度をより向上させ，再現率も向上させることが考えられる．
}一般的に文をまたぐ照応解析\addspan{や共参照解析}の実現は難しいが，ツイートを対象とした場合，\addspan{参照先}となる単語が最大でも140文字以内に含まれていることを活用することで，問題の難易度を下げられる可能性がある．
今回の実験で得た結果を元に，「イソジンを飲むと放射能対策になる」のトピックに関するツイート空間の論述構造グラフを作成した．
作成の手順は以下である．
まず，「イソジンを飲むと放射能対策になる」に対応する\addspan{351}個のツイートペアに対し，ネットワーク拡張による手法と文間関係認識による手法のそれぞれで関係分類を試みる．
1つ以上の手法で「反論」か「疑問」と識別したツイートペアについてはそれらの関係で結ぶ．
\addspan{関係が結ばれたツイートペアを全て集めたものを，グラフに載せるツイートの集合とする．
次に，そのツイート集合内に生じる全てのツイート間のペアのうち，すでに「反論」か「疑問」の関係がついたペア以外については，} 1つ以上の手法で「同意」と識別されたものがあれば，「同意」関係で結ぶ．
以上の流れで論述構造グラフを作成することで，「反論」や「疑問」といった重要な関係を抽出しつつ，無闇にツイート数を増やすことのないグラフを得ることができる．
今回の実験結果を元に作成できたグラフを図[REF_fig:graph]に示す．
グラフ中の\addspan{双方向矢印}は「反論」，\addspan{結合点が丸になっている線}は「同意」と分類された関係を表し，実線はネットワーク拡張による手法，破線は文間関係認識による手法で分類した関係を表す．
\addspan{なお，図[REF_fig:graph]中のツイート間では，どちらの手法でも分類できた例はなかった．
}ただし，これらの分類結果が誤っていた関係には×印を付与してある．
この実験では，「疑問」を識別することはできなかった．
なお，図を描くにあたっては，最も多くの関係を持つツイート「イソジン飲まないで！放射性ヨウ素が集まるのを抑制する効果なし…」を便宜上中心に据えた．
このグラフから以下のことが言える．
まず，中心ツイートと，図の左上にある二つのツイート（「甲状腺に問題がない人なら…」「ちょ，イソジン等内服以外の…」）は三角形に結ばれているが，これはネットワーク拡張による手法と文間関係認識が相補的に寄与することで実現している．
\addspan{ツイート間の関係を独立に表示するだけでなく，3ツイート以上の相互の関係を示すことで，ユーザにとっての分かりやすさやシステムの信頼性を高められる可能性がある．
}このように，\addspan{精度を重視した}両手法を組み合わせることで，\addspan{システムの信頼性を高め，説得力のある論述構造をユーザに提供できる可能性が高まる．
}また，中心のツイートと，その下のツイート（「薄めたイソジンならOK？…」）の間の反論関係を取得している点も特徴である．
グラフを作る際に集めたツイートは「イソジンを飲むと放射能対策になる」というトピックに関連するツイートであり，このトピックに対する立場で言えば，中心のツイートとその下のツイートは反論関係にあるとは言えない．
しかしながら，海藻が効果があるかどうかという点で見ればこの二つのツイートは反論関係にあり，取得したい情報である．
このように多様な情報の論述構造を取得するのが，本研究の目指すところである．
現状の課題として，クラス分類を行った関係に対して誤りが多いことが挙げられる．
正しく分類されている関係のみを見ることができれば，ユーザは十分な情報を得ることができるが，間違って分類されている関係が混在していると，情報を取得するにあたり混乱を招くこととなる．
より実用性のある論述構造を得るには，分類の精度を高めなければならない．
また，「疑問」の関係にあるツイートやURLを含むツイートを取得し，論述構造グラフに組み込むことも目指している．
