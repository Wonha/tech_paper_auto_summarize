検索実験
\label{sec:jikken}
\subsection{実行時間}
\label{sec:jikan}
AND 検索，AND+W 検索，AND+W+D 検索を対象に検索時間を評価した．
AND+W 検索は AND+W+D 検索アルゴリズムをほぼそのまま利用して作成した．
AND 検索はキーワードのノード集合を作成する過程で出現キーワード数を計数す
ることで実現した．

検索対象データベースは 1995 年 3 月から 1997 年 2 月までに収集した日本語ニュースである（表~\ref{tab:database}）．
入力したのは 1997 年 
3 月のニュース記事からランダムに選んだ 500 記事の各先頭行 500 行である．これらの記事は検索対
象データ
ベースに含まれていない．また入力の平均文字数は 92.7 文字と長い．このた
めキーワードが完全一致する用例はほとんどない．

実験手順は以下のとおりである．
\begin{table}
 \begin{center}
  \caption{検索時間の比較(秒)}
  \label{tab:jikan}
  \begin{tabular}{l|rrr}\hline\hline
   手法 & \multicolumn{1}{c}{AND} & \multicolumn{1}{c}{AND+W} &
\multicolumn{1}{c}{AND+W+D}\\\cline{2-4}
   総時間 & 25,573.1 & 33,201.6 & 33,426.9\\
   一回の緩和の平均時間 & 2.33 & 3.02 & 3.04 \\\hline 
  \end{tabular}
 \end{center}
\end{table}
入力の各文を形態素解析して自立語キーワードを抽出する．そして各文でキー
ワード数 1 になるまで条件を自動的に緩和しながら検索
を行ってその累積時間を計測した
\footnote{利用したワークステーションの記憶容量は 256MB であり，処理速度は {\it SPECint92} $=202.9$，{\it SPECfp92} $=259.5$ である．
 }
．
結果を表~\ref{tab:jikan} に示す．緩和の合計回数は 3 手法で等しく 
10,989 回である．

この表から語順を考慮した AND+W 手法と AND+W+D 手法 でも AND 検索にくら
べて約 1.3 倍の時間増だったことがわかる．また AND+W と AND+W+D を比
較すると，時間の差はほとんどなく変位の有無の影響はほとんどなかったこと
がわかる．

1 回の緩和，すなわち利用者が 1 つキーワードを減少するよう指示した時に
要した平均検索時間(総時間$/10,989$)を 2 行目に記した．これによれば AND 
検索で 2 秒，AND+W，AND+W+D で 3 秒程度である．ただし総時間に
はキーワードの出現位置をディスクからメモリに転送する初期処理の時間を含めて
おり，この時間がかなりの部分を占めている．
初期処理が終了した後の 1 回の緩和に要する時間は語順と変位を考慮
しても 1 ないし 2 秒であり実用上満足できる速度であった．
以上の実験より語順と変位を考慮しても AND 検索なみに十分高速に検索でき
ることを確認した．
\subsection{検索文数の絞り込み効果}
\label{sec:siborikomi}
\ref{sec:teian}~節の終わりに述べたようにキーワード数を 1 まで緩和すれ
ば，AND，AND+W，AND+W+D 手法で検索できる用例集合は同じである．
しかし実際にはキーワード
数の大きなところで検索を打ち切るので利用者の見る用例数は語順の制約の有
無で違ってくる．
この違いを前節と同じ入力を使って評価した．

語順を考慮した手法 AND+W
\footnote{AND+W と AND+W+D は同じキーワード集合に対して同じ用例集合を検
索するので，ここでは AND+W で代表する．}と
AND 検索それぞれについて，各キーワード数での検索用例数を計測した．結果を
図~\ref{fig:kazu} に示す．検索用例数は入力 500 文で合計したものである．横軸
はキーワード数で縦軸は対数を取った検索数である．また，このグラフの一部
の検索用例数を表~\ref{tab:kazu} に示す．

\begin{figure}
 \begin{center}
\epsfile{file=108.eps,height=10cm}
  \caption{各キーワード数での検索用例数（500 入力での合計）}
  \label{fig:kazu}
 \end{center}
\end{figure}
\begin{table}
 \begin{center}
  \caption{各キーワード数での検索用例数（500 入力での合計）}
  \label{tab:kazu}
   \begin{tabular}{r|r|r}\hline\hline
    \multicolumn{1}{c|}{キーワード数} & \multicolumn{1}{c|}{AND} & \multicolumn{1}{c}{AND+W(+D)}\\\cline{1-3}
    1 & 54,374,495 & 59,258,536\\
    2 & 13,923,270 & 11,338,161\\
    3 & 3,470,894 & 2,088,640\\
    $\vdots$ & $\vdots$ & $\vdots$\\\hline
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  \end{tabular}
 \end{center}
\end{table}
アルゴリズムの説明で述べたように，文は含有キーワード数が最大の時に一度
表示するだけである．このため図~\ref{fig:kazu} の 2 つのグラフの面積は
等しくなる．表~\ref{tab:kazu} から明らかなようにキーワード数 1 の部分
で AND+W 検索の検索用例数が AND 検索の結果を大きく超えている．この結果キーワー
ド数 が 1 以外の部分では AND+W 検索の検索数は AND より小さく押さえられ
ている．
すなわち語順制約を使うことでキーワード数が 1 より大きい部分で検索結果
数を絞り込むことができたことが確認できる．

しかし，語順による絞り込みの効果が十分であるとは言えない．キーワード数が小さ
い部分での絶対的な検索数が大きいのが問題である．例えば 3 語のキーワー
ドで検索する用例数は平均で $4,177$（$= 2,088,640/500$） に達した．このような
用例も検索する可能性があるため絞り込み効果は十分でない．
逆に 50 程度の検索用例数を許容すると仮定すればキーワードの語順を考え
ない場合でも 10 語以上含む入力であれば許容範囲の検索数となる．語順を使っ
た場合は 8 語以上で許容範囲となる．
\vspace*{-4mm}
\subsection{検索結果の満足度}
\vspace*{-0.5mm}
\label{sec:manzoku}
語順に変位の制約を加えると検索結果に優先順位をつけることができる．この
順位が妥当であれば検索用例数の多さの問題は解決できる．そこで著者らはこ
の順位の妥当性を検証するため 3 手法の検索結果の満足度の高さを主観的に
評価して比較した．
実験要領は以下の通りである．
\begin{itemize}
\item 被験者\\
翻訳者 3 名．このうち 1 名はニュース翻訳の経験が豊富である．残りの 2 名はニュー
ス翻訳を直接担当しているわけではないが翻訳の経験は豊富である．いずれの被験者
も検索手法については知らされていない．
\item 入力表現\\
現実の入力を想定して 58 の日本語表現を作成した．具体的には先の実験で
使用した 500 文から文をランダムに抽出し，それらの一部を切り出して作成した．
すなわちカットアンドペーストで入力することを想定した．
長さの平均は 22.6 文字，最大の入力は 62 文字，最小の入力は 14 文字である．
\item 出力\\
一つの入力に対して各 3 手法の上位 5 個の日本語検索結果を印刷して提示し
た．この時，各手法の検索結果の提示順序を 1 つの入力ごとに変更して，検
索手法と結果の対応がわからなくなるようにした．
また照合したキーワードを $<>$ で囲んで表示した．被験者は最初のキーワードか
ら最後のキーワードが出現した区間を中心に評価した．これはキーワードで検
索した部分以外に偶然類似した部分があった場合にこれを評価しないためである．
\item 評価手法\\
 検索した部分の正しい英訳があると想定したときの満足度を次の 2 種類で評
価した．
 \begin{itemize}
  \item 相対評価\\
   3 手法すべての結果を見て，最も満足度の高い結果を 5 点として，以下この
結果との満足度の差を下記の要領で評価した．
   \begin{center}
   \begin{tabular}{llr}
        全く差がない &  & 5\\
        わずかに差がある & (わずかに劣る) & 4\\
        差がある & (劣る) & 3\\
        かなり差がある & (かなり劣る) & 2\\
        非常に差がある & (非常に劣る) & 1\\
   \end{tabular}
   \end{center}
  \item 絶対評価\\
  翻訳を行うときに英訳があればどの程度役に立つかを以下の 5 段階で絶対
評価した．
   \begin{center}
   \begin{tabular}{llr}
        非常に役に立つ & (非常に良い) & 5\\
        かなり役に立つ & (良い) & 4\\
        まあ役に立つ & (ふつう) & 3\\
        あまり役に立たない & (悪い) & 2\\
        全然役に立たない & (非常に悪い) & 1\\
   \end{tabular}
   \end{center}
 \end{itemize}
\end{itemize}
評価シートの実例を付録に示す．
3 名の評価結果の平均値を表~\ref{tab:soutai} と~\ref{tab:zettai} に示す．
\begin{table}
 \begin{center}
  \caption{相対評価結果}
  \label{tab:soutai}
  \begin{tabular}{c|ccc}\hline\hline
   被験者  &  AND & AND+W & AND+W+D\\\hline
   A & $2.88$ & $2.94$ & $3.60$\\ 
   B & $2.99$ & $3.07$ & $3.90$\\ 
   C & $3.07$ & $3.21$ & $3.80$\\\hline
   平均 & $2.98$ & $3.08$ & $3.77$\\\hline 
  \end{tabular}
 \end{center}
\end{table}
\begin{table}
 \begin{center}
  \caption{絶対評価結果}
  \label{tab:zettai}
  \begin{tabular}{c|ccc}\hline\hline
   被験者  &  AND & AND+W & AND+W+D\\\hline
   A & $2.78$ & $2.81$ & $3.13$\\ 
   B & $2.84$ & $2.98$ & $3.44$\\ 
   C & $3.02$ & $3.10$ & $3.44$\\\hline
   平均 & $2.88$ & $2.96$ & $3.34$\\\hline 
  \end{tabular}
 \end{center}
\end{table}

また各手法の違いを検定するため平均値の差の $t$--検定を行った．
手法間の $t$ --値を表~\ref{tab:soutaiT} と \ref{tab:zettaiT} に
示す
\footnote{二つの母分散が等しい場合とそうでない場合で計算したところ表中の桁
数で値は変わらなかった．}
．
\begin{table}
\vspace*{-4mm}
 \begin{center}
  \caption{相対評価の $t$--値}
  \label{tab:soutaiT}
  \begin{tabular}{c|rr}\hline\hline
& AND & AND+W \\\hline
AND+W & 1.55 & \\
AND+W+D & 13.28 & 11.77 \\\hline
  \end{tabular}
 \end{center}
\bigskip
 \begin{center}
  \caption{絶対評価の $t$--値}
  \label{tab:zettaiT}
  \begin{tabular}{c|rr}\hline\hline
& AND & AND+W \\\hline
AND+W & 1.44 & \\
AND+W+D & 8.73 & 7.23 \\\hline
  \end{tabular}
 \end{center}
\end{table}
$t_{0.025}(\infty) = 1.960$ であるからどちらの表でも AND+W+D と AND 
，AND+W+D と AND+W の組み合わせでは有意水準 5\% で帰無仮説（平均値に差がない）を棄却できる
\footnote{$t_{0.0005}(\infty) = 3.291$ であり 0.1\% であっても棄却でき
る．}
．
一方， AND と AND+W では 5\% 有意水準の棄却はできない．以上の結果より
次のことが結論できる．
\begin{itemize}
 \item AND 検索と AND 検索に語順制約を加えた AND+W 検索では AND+W 検索
の方が満足度が高くなる傾向は認められたが，統計的に有意な差はなかった．
 \item AND+W+D 検索の満足度は AND 検索と AND+W 検索のいずれの満足度よ
り高くなった．またこれは統計的に有意な差であった．
\end{itemize}
以上より提案手法の精度が最も高かったと結論できる．
\vspace*{-1.5mm}
\subsection{議論}
\vspace*{-0.5mm}
本章の実験結果のまとめを示す．
\begin{itemize}
 \item 検索時間は AND 検索が有利であったが語順と変位を加えても  1.3 倍
程度の時間増であった．
 \item 語順制約を追加することで検索結果を絞り込む効果は確認できた．し
かし，短い入力に対する絞り込み効果は十分ではなかった．
 \item 変位の制約を加えると検索結果に順位付けができる．この効果を計
測したところ有効性を有意に検出できた．
\end{itemize}

今回の実験から，カットアンドペースト方式の入力では AND+W+D 検索と AND 検索を
使うのが良いと著者らは考えている．AND+W+D 検索は最も満足度が高かったからであ
る．
AND 検索は今回の満足度の実験の結果は一番低かった．しかし，速度の面
は最も優れている．また入力の表現が長い部分で
は検索結果の数も問題にならない．そこで長い表現を検索する場合に AND+W+D 
検索を補完する意味で利用する価値があると考える．

一方 AND+W 検索と AND+W+D 検索の両方を使う必要性は小さいと言え
る．両者は基本的に同じ検索結果となるからである．ただし，これは本稿のように入
力表現を原文のカットアンドペーストで作成する場合に限る．
利用者が直接キーワード列を入力する場合には変位の情報を使えない．このため語順だ
けを使った AND+W 検索を使う必要も生じる
\footnote{著者らのシステムにもキーワードを直接
入力する機能があり，この場合には AND と AND+W 検索を利用している．}
．
