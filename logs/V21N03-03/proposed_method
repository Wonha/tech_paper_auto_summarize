大学入試センター試験の『国語』では，毎年，大問4題が出題される[CITE]．
その大問構成を表[REF_table:questions]に示す．
この表に示すように，現代文に関する出題は，第1問の「評論」と第2問の「小説」であり，『国語』の半分を占めている．
第1問の「評論」は，何らかの評論から抜き出された文章（本文）と，それに対する6問の設問から構成される．
6問の内訳は，通常，以下のようになっている．
漢字の書き取り問題が5つ出題される．
本文中の傍線部について，その内容や理由が問われる．
本文全体にかかわる問題で，2006年以降は本文の論の進め方や本文の構成上の特徴などが問われる．
一方，第2問の「小説」は，何らかの小説から抜き出された文章（本文）と，それに対する6問の設問から構成される．
6問の内訳は，通常，以下のようになっている．
語句の意味内容を問う問題が3つ出題される．
本文中の傍線部を参照し，登場人物の心情・人物像・行動の理由などが説明問題の形で問われる．
本文全体の趣旨や作者の意図，表現上の特徴などが問われる．
これらの設問のうち，「評論」「小説」の両者の問2から問5を傍線部問題と呼ぶ．
傍線部問題の具体例を図[REF_fig:2011M-E5]に示す．
この図に示すように，傍線部問題は，原則として5つの選択肢の中から正解を一つ選ぶ5択問題である．
傍線部問題の配点は，2009年度本試験では，第1問32点，第2問33点の計65点であり，現代文の配点100点の約2/3を占める．
本研究では，2001年度から2011年度の奇数年の大学入試センター試験の本試験および追試験の『国語』（2005年以前は『国語I・II』）を使用する．
ただし，諸般の事情により，本文等が欠けているものがあり，それらは使用しない．
表[REF_table:all]に，本研究で使用する傍線部問題の一覧を示す．
なお，以降では，設問を指し示すIDとして，以下のような4つの情報を盛り込んだ形式を採用する．
年度（4桁）
試験区分（M:本試験，S:追試験）
出題区分（E:評論，N:小説）
設問番号（2, 3, 4, 5）
たとえば，図[REF_fig:2011M-E5]に示した，2011年度本試験第1問「評論」の問5は，「2011M-E5」と表す．
なお，この例に示したとおり，(2)と(3)の間に，ハイフォン`-'を挟む．
センター試験『国語』現代文傍線部問題では，正解となる選択肢の根拠が必ず本文中に存在すると指摘されている[CITE]．
そして，その根拠となる部分は，傍線部の付近に存在することが多いことが，板野の分析によって明らかにされている[CITE]．
我々は，これらの知見に基づき，傍線部問題を，図[REF_fig:formalization]に示すように定式化する．
この定式化は，次のことを意味する．
それぞれの設問を入力とする．
設問は，本文[MATH]，設問文[MATH]，選択肢集合[MATH]から構成されるものとする．
（図[REF_fig:2011M-E5]では，これらのうち，本文[MATH]を除いた，設問文[MATH]と選択肢集合[MATH]を示している．
）
設問文[MATH]と本文[MATH]から，選択肢と照合する本文の一部[MATH]を定める．
選択肢集合[MATH]の中から，実際に本文の一部[MATH]と照合する部分集合[MATH]を定める．
これは，選択肢の事前選抜に相当する．
設問文の極性[MATH]を判定する．
この関数は，設問文[MATH]が「適当なもの」を要求している場合に[MATH]を，「適当でないもの」を要求している場合に[MATH]を返すものとする．
事前選択済の選択肢集合[MATH]に含まれる選択肢[MATH]と，本文の一部[MATH]との照合スコア[MATH]を計算する．
これに設問文の極性[MATH]をかけたものを，その選択肢の最終スコアとする．
事前選択済の選択肢集合[MATH]に含まれる選択肢[MATH]のなかで，最終スコアが最大のものを，解として出力する．
この定式化の特徴は，図[REF_fig:formalization]に示した(a)--(d)の4つの関数に集約される．
これらの背後にある考え方について，以下で説明する．
正解の選択肢の根拠となる箇所は，多くの場合，本文中の傍線部の周辺にあると考えるのが妥当である．
先に述べたように，この点についての詳細な分析が，板野によってなされている[CITE]．
実際，我々人間が傍線部問題を解くとき，本文中の傍線部の前後に注目するのは，標準的な戦略である．
このような戦略は，選択肢[MATH]を本文[MATH]全体と照合するのではなく，あらかじめ，本文から，根拠が書かれていそうな部分[MATH]を抜き出し，[MATH]と[MATH]の照合スコアを計算することで，具体化できる．
本文の一部を取り出す方法として，
本文の先頭から，当該傍線部までを[MATH]とする，
一つ前の設問で参照された傍線部から，当該傍線部までを[MATH]とする，
傍線部の前後のある範囲を[MATH]とする，
などの方法が考えられ，これらと，採用する単位（文または段落）を組み合わせることにより，多くのバリエーションが生まれることになる．
もちろん，設問毎に，設問文[MATH]や本文[MATH]に応じて異なる（適切な）方法を採用してもよい．
関数[MATH]は，これらの方法を抽象化したもので，以下のような関数として定義する．
なお，厳密に言えば，設問文[MATH]には一つ前の設問の傍線部の情報は含まれないが，その情報は本文を参照することによって得られるものと仮定する．
事実，センター試験では，傍線部にはA, B, C, Dの記号が順に振られるため，当該傍線部がBであれば，一つ前の設問の傍線部はAであることがわかる．
本文の一部[MATH]が，選択肢[MATH]とどの程度整合するか（その根拠となりうるか）を，照合スコア[MATH]として抽象化する．
本来的には，整合するかしないかの2値であるが，そのような判定を機械的に下すのは難しいので，0から1の実数をとるものとする．
ほとんどの傍線部問題の設問文は，「最も適当なものを，次の１〜５のうちから一つ選べ」という形式となっている．
しかし，2001S-E4のように，「適当でないものを，次の１〜５のうちから一つ選べ」という形式も存在する．
このような「適当でないもの」を選ぶ設問に対しては，照合スコアを逆転させる（照合スコアが最も小さなものを選択する）のが自然である．
上記のような設問形式に応じた選択法の変更を採用するために，設問文[MATH]の極性を判定する関数[MATH]を導入する．
この関数は，設問が「適当なもの」を要求している場合に[MATH]を，「適当でないもの」を要求している場合に[MATH]を返すものとする．
本定式化では，「設問文と5つの選択肢をよく読めば，本文を参照せずとも，正解にはならない選択肢のいくつかをあらかじめ排除できる」場合が存在すると考え，選択肢の事前選抜を明示的に導入する．
事前選抜[MATH]は，選択肢集合[MATH]と設問文[MATH]から，[MATH]の部分集合を返す関数として定式化する．
前節の定式化に基づいて傍線部問題ソルバーを実装するためには，[MATH], [MATH], [MATH], [MATH]の4つの関数を実装する必要がある．
表[REF_table:implementation]に，今回実装した方法の概要を示す（詳細は，以下で説明する）．
なお，前節の定式化では，正解と考えられる選択肢を一つ出力する形になっているが，実際のシステムは，選択肢を照合スコア順にソートした結果（すなわち，それぞれの選択肢の順位）を出力する仕様となっている．
なお，照合スコアが一致した場合は，選択肢番号の若いものを上位とする．
照合スコア[MATH]，および，選択肢の事前選抜[MATH]の実装には，オーバーラップ率を用いる．
オーバーラップ率の定義には，服部と佐藤の定式化[CITE]を採用する．
この定式化では，まず，ある集合[MATH]を仮定する．
この集合の要素が，オーバーラップ率を計算する際の基本単位となる．
集合[MATH]としては，たとえば，文字集合[MATH]，形態素集合[MATH]，あるいは，文字[MATH]-gramの集合[MATH]などを想定する．
オーバーラップ率の算出の出発点となる式は，2つの文字列[MATH]と[MATH]に共通に出現する集合[MATH]の要素の数を求める次式である．
ここで，[MATH]は，文字列[MATH]における[MATH]の出現回数を表す．
この値を，[MATH]の長さ，あるいは，[MATH]と[MATH]の長さの和で正規化することにより，オーバーラップ率を定義する．
\mathrm{overlap_ratio}_D(E; t_1, t_2) & = \frac{overlap}(E; t_1, t_2)\sum_{e\in E} \mathrm{fr}(e, t_2)
\mathrm{overlap_ratio}_B(E; t_1, t_2) & = \frac{2  \mathrm{overlap}(E; t_1, t_2)}\sum_{e\in E} \mathrm{fr}(e, t_1) + \sum_{e\in E} \mathrm{fr}(e, t_2)
前者の[MATH]は，[MATH]の長さのみで正規化したもので，方向性を持った(directional)オーバーラップ率となる．
後者の[MATH]は，[MATH]と[MATH]の長さの和で正規化したもので，方向性を持たない，双方向性(bidirectional)のオーバーラップ率となる．
本文の一部[MATH]と選択肢[MATH]の照合スコアには，方向性を持ったオーバーラップ率[MATH]を用いる．
ここで，オーバーラップを測る際の単位（要素）集合[MATH]として，以下の4種類を実装した．
[MATH]:文字集合
[MATH]:文字bigramの集合
[MATH]:形態素表層形の集合
[MATH]:形態素原形の集合
いずれの場合も，句読点は要素に含めなかった．
形態素解析器にはmecab-0.994を，形態素解析辞書には，ipadic-2.7.0またはunidic-2.1.0を用いた．
すなわち，[MATH]と[MATH]は，それぞれ2種類存在することになる．
設問文の極性判定は，文字列マッチングで実装した．
具体的には，正規表現「/(適切|適当)でないものを/」に一致した場合はnegative ([MATH])，それ以外はpositive ([MATH])と判定する．
対象とした問題は限られているので，極性判定結果は，人間の判断とすべて一致する．
段落(P)単位および文(S)単位の抽出を実装した．
抽出する領域は，連続領域を採用した．
すなわち，抽出単位，抽出開始点，抽出終了点の3つの情報によって，抽出領域は定まる．
抽出開始・終了点は，当該傍線部を含む単位（段落または文）を基準点0とし，その前後何単位であるかを，整数で表す．
たとえば，S-[MATH]-[MATH]は，当該傍線部を含む文と，その前[MATH]文，後[MATH]文を表す（全部で[MATH]文となる）．
この他に，本文先頭(a)，前問の傍線部の位置(b)，本文末尾(e)という3種類の特別な位置を指定できるようにした．
さらに，当該傍線部を含む文を除外するというオプション([MATH])も実装した．
選択肢の事前選抜には，次の方法を採用した．
それぞれの選択肢[MATH]において，以下に示す事前選択スコア[MATH]を計算する．
このスコアは，他の選択肢[MATH]との双方向文字オーバーラップ率[MATH]の平均値である．
得られた事前選択スコアが低い選択肢を，選択肢集合から除外する．
（最終順位付けでは，かならず5位とする）
なお，この実装は，いわば「もっとも仲間はずれの選択肢を一つ除外する」という考え方に基づいている．
