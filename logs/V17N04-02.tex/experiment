\section{評価実験} \label{sec:evaluation}


\subsection{評価データ}

Googleの検索結果を人手により分類したものを評価用の正解データとして用いた．
正解データ作成にあたり20代の男女10人に協力を頼んだ．
協力者が自由にクエリを入力して，
Googleの検索結果上位30件を
タイトルとスニペットのみから分類してもらい，
15セットの正解データ
（平均クラスタ数 3.6，最大クラスタ数 5，最小クラスタ数 2，
クラスタに含まれる文書数の平均 9.040）を得た．
正解データ作成のために協力者が選んだクエリを表{\ref{tab:query}に示す．
検索結果を30件としたのは，検索エンジンのユーザの54\%が上位10件以内，
73\%が上位20件以内の検索結果しか閲覧しないという調査結果\cite{Jansen03}から，
検索結果30件をクラスタリングすることで十分な情報をユーザに与えられると
考えたためである．
なお，情報の少なさや内容の曖昧さから協力者が分類できないと判断した文書や
文書数が1であるクラスタは正解データから除外した．


\begin{table}[t]
    \caption{評価に用いたクエリ} \label{tab:query}
\input{03table01.txt}
\end{table}


\subsection{評価方法}

本研究の手法と比較手法のそれぞれを用いて，15セットの評価データの
クラスタリングを行い，その性能を比較した．
比較手法は，名詞の重み上位順に（\ref{sec_weight}節の概要の(1)のリスト$S$の順に）
指定されたクラスタ数だけ重要語を抽出し，重要語を含む文書集合を文書クラスタとするという，
\ref{sec:intro}章で述べた従来手法\cite<e.g.,>{Hirao06,Narita03,Zamir98}とした．

両手法において，名詞の重み付けには\ref{subsubsec:weight}節の手法を用いた．
また，システムが出力するクラスタ（以下，システムクラスタと呼ぶ）
の数$n$は各正解データセットのクラスタ数とした．
なお，正解クラスタ数より少ない重要語しか抽出できなかった場合には，
空のクラスタを出力したとみなして評価を行った．
さらに，提案手法によるクラスタリングにおいて，
\ref{sec_WM}節における閾値を$C_W=2$，$C_{WM}=0.6$と設定した．


\subsection{評価基準}

評価基準として，F値，CR (clustering ratio), OR (overlapping ratio) を用いる．
これらの値はすべて各データセットごとに計算する．

クラスタリングの精度を表すF値は以下の手順で求めることができる\cite{Orihara08}．
まず，システムクラスタ$SC_i\ (1 \leq i \leq n)$と正解クラスタ$AC_j\ (1 \leq j \leq n)$
のすべての対に対して，F値$F(SCi,ACj)$を次式で計算する．
\begin{align}
F(SC_i, AC_j) &= \frac{2 \times R(SC_i, AC_j) \times P(SC_i, AC_j)}{R(SC_i, AC_j) + P(SC_i, AC_j)}\\
R(SC_i, AC_j) &= \frac{|SC_i \cap AC_j|}{|AC_j|}\\
P(SC_i, AC_j) &= \frac{|SC_i \cap AC_j|}{|SC_i|}
\end{align}
次に，次式の$F(M)$が最大となるようなシステムクラスタと正解クラスタの一対一対応$M$を求め，
そのときの値をこのシステムクラスタの F 値とする．
\begin{equation}
  F(M) = \sum_{(SC_i,AC_j)\in{M}} \frac{|AC_j|}{\sum_{k=1}^n |AC_k|}\ F(SC_i,AC_j)
\end{equation}
これは，システムクラスタと正解クラスタを2つの頂点集合として，
それらの間の枝の重みを$\frac{|AC_j|}{\sum_{k=1}^n |AC_k|}F(SC_i, AC_j)$とする
二部グラフの最大マッチング問題を解くことに相当する．

CRは文書集合のうちのどれだけの割合の文書をクラスタに分類できるかを
表しており，次式で計算される\cite{Narita03}．
なお，{$N$}は検索結果の文書数である．
\begin{equation}
CR = \frac{\displaystyle\left|\bigcup_{i=1}^n SC_i\right|}{N}
\end{equation}
本研究で扱っている共通の語句に基づくクラスタリング手法では，
どのクラスタにも属さない文書が生じてしまう可能性がある．
したがってCRが高い（1に近い）ほうが望ましい結果であると言える．

ORはクラスタ間で文書が重複する割合の平均であり，次式で計算される．
\begin{equation}
OR = \frac{1}{{ }_n{C}_2} \sum_{i=1}^n \sum_{j=i+1}^n \frac{|SC_i \cap SC_j|}{|SC_i \cup SC_j|}
\end{equation}
この値は単純に低いほど（もしくは高いほど）望ましいというわけではなく，
正解クラスタのOR値に近いほうが望ましい結果であると言える．



