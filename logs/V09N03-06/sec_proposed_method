我々は，旅行に関する約8万件のモデル化文書を格納した2枚の市販の電子ブック[CITE]を対象とした音声対話情報検索システムTARSANを作成した[CITE]．
TARSANでは，モデル化文書を項目に分割して全文検索を行ない，特に「地名」項目に注目して，効率的に適合文書を絞り込み，その適合文書の特定の項目を提示する音声検索対話を実現した．
TARSANで実現した対話例を表[REF_tab:travel]に示す．
[htp]  \centering
このように，実用規模のテキストデータからユーザの検索条件に合致するものを絞り込む対話では，ユーザは検索条件の追加や変更を繰り返すことで目的とする文書にたどりつく(usr2[MATH]5)．
このような対話を効率的に行なうには，システムが主導に立って対話の流れを制御し，1)検索条件が不十分な場合にはユーザに入力を要求したり(sys1,2)，2)ユーザが次に検索条件を追加／変更するための付加的な情報を提示したり(sys3,4)することが効率的である．
TARSANで実現した「旅行」をドメインとする対話では，「地名」という特殊な検索条件に注目し，これを利用することで，効率的な対話を実現した．
すなわち，地名を必須条件とし，地名の階層構造を用いて検索結果をグループ化する処理を行なうことにより，表[REF_tab:travel]に示したような対話を実現した．
TARSANにおける対話は，旅行という単一のドメインに限定したものであった．
そこで，TARSANで手続き的に実現した「対話の流れを制御するために用いる項目(以下，対話項目と呼ぶ)」を宣言的に記述できるようにすることで，複数のドメインを対象とするよう拡張した．
以下では，旅行ドメインにおける「地名」の役割を分析し，他のドメインに適用する手法について説明する．
単一ドメイン(旅行)に関する情報検索の対話を複数のドメインに適用するにあたり，問題となるのは，異なるドメインにおいては異なる意味で用いられる多義語である．
しかし，当面の目標として，旅行というドメインで確立した手法を他のドメインに適用することとしたので，旅行以外のドメインとして，互いの関連性が少ない，「プロ野球[CITE]」と「映画[CITE]」を選んだ．
そして，表[REF_tab:genre]に示すジャンル名がユーザの質問文に現れた場合に，そのジャンル名が属するドメインに決定する．
これまでに述べたような検索対話を一般化するために，TARSANの対話で果たした地名項目の役割を以下に示すデフォルト対象項目，必須条件項目，シソーラス項目，優先条件項目という四つの「対話項目」に分類し，ジャンルごとにそれぞれの宣言的に指定できるようにした．
また，これらの対話項目を参照して，対話の流れを制御する機能を実現した．
表[REF_tab:ditem]に，各ドメインにおける典型的なジャンルごとの対話項目の例を示し，以下で，各対話項目について説明する．
ユーザが検索対象項目を明示しない場合に，システムがユーザに提示する項目．
モデル化文書のラベルである「名称」項目は必ずデフォルト対象項目とする．
また，後述する「シソーラス項目」をデフォルト対象項目として指定すると，検索結果が多い場合，検索条件として与えたシソーラス項目のひとつ下の階層の項目値で検索結果のグルーピングを行なう(表[REF_tab:travel] sys3,4)．
ユーザによる指定を必須とする条件項目．
ここで指定された必須条件がユーザによって指定されていない場合には，システムがいわゆる「問い返し」によってユーザに指定を要求する(表[REF_tab:travel] sys2)．
項目値をグループ化するための階層情報(シソーラス)をシステムが保持している項目であり，ユーザがこの項目を検索条件として指定した場合に，この情報を利用すると，その後の絞込みに有益な項目である．
例えば，旅行の所在地項目には，「都道府県」，「市町村」という階層が存在するが，検索条件として，都道府県名が与えられ，検索結果が多い場合には，市町村でグルーピングを行ない，応答文を生成する．
また，実際のデータのテキスト中に存在しない階層(例えば，旅行の所在地項目では，都道府県をいくつかにグルーピングした「東海地方」などの地方名，プロ野球の所属球団をグルーピングした「リーグ名」など)も，システムがシソーラス項目として仮想的な階層情報を保持しており，ユーザからそうした実際のデータのテキスト中に存在しない階層を検索条件として指定された場合にも，実際のテキスト中に存在する項目値に展開して検索を行ない（例えば，プロ野球で，「セリーグ」と指定された場合には．
現在の６球団と「大洋」，「国鉄」の８球団に展開する），応答文に関して，上記と同様のグルーピングを行なう．
ユーザが明示的に変更しない限り，検索条件として付与する項目．
対話外からも指定できるだけでなく，ジャンル名を含む文で指定された検索条件も優先条件項目とする．
優先条件項目以外の条件項目は，それ以外の条件を変更した場合に残すかどうかをシステムが確認するが，優先条件項目は，それ以外の検索条件を変更した場合に確認しない．
以上の対話項目を2種類のドメイン(プロ野球[CITE]，映画[CITE])について作成した．
プロ野球，映画をドメインとする対話例を表[REF_tab:baseball], [REF_tab:cinema]に示す．
[thp]  \centering
[thp]  \centering
前節で述べたように，複数のドメインを検索できるようにした予備実験システムを作成し，それを用いて対話収集および使用感についてのアンケートを行なったところ，以下の問題点が判明した．
複数のドメインにまたがる情報を一回の入力文で得られるとユーザが誤解する．
複数のドメインにまたがる入力文の例を以下に示す．
「山口百恵が主演した映画にちなんだ温泉を知りたい。
」
「プロ野球選手だった俳優が出演した邦画を教えて。
」
最初の例は映画ドメインと旅行ドメインにまたがり，二番目の例は野球ドメインと映画ドメインにまたがっている．
特定の用途に対して効率的な対話戦略(対話の進め方)をシステムが行なうと，ユーザはシステムが万能の対話戦略を保持していると誤解する．
仮に一つの対話エージェントが複数の対話戦略を保持している場合---特にある対話戦略は効率的であるが用途が限られており，別の対話戦略はいろんな用途に適用できるが，あまり効率的でないような場合---には，ユーザは対話戦略間の格差に戸惑い，不快に感じる．
現状のシステムが指示照応などの対話処理に関して十分な能力を持っていないために，システムの能力に合わせた入力をユーザが行わないと，ユーザは適切な応答が得られない．
表[REF_tab:compare]は，複数の候補に対する検索条件を単一の文脈でユーザが比較した対話例である．
この対話例では，ユーザが箱根と日光の情報を比較しようとして，うまく対話を進めているが，非常に煩雑であり，対話システムの能力を知らずに，このように円滑な検索対話を行なえるユーザは少ない．
前章で述べた三つの問題点は，ユーザとの対応をシステムが一つの「対話エージェント(対話の窓口)」しか保持していないことに起因すると仮定した．
すなわち，対話エージェントが唯一であると，その対話エージェントがユーザとの対話のすべてを扱うことになり，このことでシステムに何ができて何ができないかをユーザにわかりにくくしていると考えられる．
そこで，システムの能力をユーザにわかりやすくするために，複数の対話エージェントを擁する対話モデルを提案する．
このように複数の対話エージェントを用いることで，ユーザはシステムにできることとできないことがわかりやすくなる．
本対話モデルにおける各対話エージェントは，図[REF_fig:eachagent]に示す以下の五つの情報を保持する．
情報検索の自然言語対話を行なうための汎用的な知識であり，全対話エージェントに共通のもの
個々の対話エージェントが扱うドメインにおけるジャンル名や個々のジャンルに属する項目などの知識
[REF_sec:ditem]節で述べた個々のジャンルの対話項目
個々の対話エージェントがユーザと対話を行なった検索履歴
各対話エージェントが，その個性(他の対話エージェントと異なることをアピールする属性)を決定する情報[CITE]
以下では，個々の対話エージェントが，上記のドメイン知識，対話戦略，文脈をそれぞれに保持することで変化する対話について説明する．
[REF_ssec:issue]節で述べた最初の問題点を解決するために，検索を行なう対話エージェントを異なるドメインごとに用意した．
このような対話エージェントをドメインエージェントと呼ぶ．
ドメインエージェントのイメージを図[REF_fig:agentD]に示す．
ドメインエージェントは，各ドメインにおいて初歩的な対話戦略を保持し，ユーザとシステム間のやりとりが可能な対話エージェントである．
ユーザがそれまで対話しているドメインと異なるドメインに関する入力を行った場合には，その異なるドメインに割り当てられたドメインエージェントが応答を行なう．
したがって，こうしたドメインエージェントを用意することで，ユーザは自分と対話している対話エージェントがドメインにまたがる質問を受理できないと気づき，ドメインにまたがる質問を行わないようになることが期待される．
[REF_ssec:issue]節の例1に対するドメインエージェントを導入した例を表[REF_tab:d-agent]に示す．
この例では，ユーザが入力した質問文に対して，映画に関するドメインエージェント(C.agt)と旅行に関するドメインエージェント(T.agt)がそれぞれ，自分が可能な応答を行なっている．
このように，ドメインエージェントを用いることで，システムが異なるドメインにまたがる質問を受理できないことがユーザに理解されると期待する．
[REF_ssec:issue]節で述べた二番目の問題点を解決するために，情報検索に関する特定の対話戦略ごとに割り当てた対話エージェント，--対話戦略エージェント--を用意した．
対話戦略エージェントのイメージを図[REF_fig:agentS]に示す．
対話戦略エージェントは，単一のドメインにおいて，情報提供者側が用意した対話戦略ごとに定義される．
本稿の実験システムでは，旅行のドメインに対して，以下の二種類の対話戦略エージェントを用意した．
必須条件を目的地とし，付加条件を宿泊料と立地条件とする．
付加条件がユーザに指定されない場合，出張エージェントはあらかじめ定義された付加条件の値をユーザに提案する．
また，デフォルトの結果項目として出張エージェントが応答する項目はホテルの名前とその電話番号である．
必須条件はレジャー施設と参加人数であり，それ以外の項目はオプショナルである．
ユーザがオプショナルの項目を指定しない場合，リクレーションエージェントがあらかじめ定義された値をユーザに提案する．
デフォルトの結果項目としてレクレーションエージェントが応答する項目は出張エージェントと同様，ホテルの名前とその電話番号である．
対話戦略エージェントは，ユーザがシステムを容易に使えるようにするだけでなく，単一ドメインにおいても，タスクに応じていろんな対話戦略が存在することをユーザに気づかせることができる．
旅行ドメインのドメインエージェントと，出張エージェントを用いた対話の比較を表[REF_tab:s-agent]に示す．
表[REF_tab:s-agent]からわかるように，ユーザは対話戦略エージェントを用いることによって，容易に自分の目標を達成できている．
[ht]
\centering
[REF_ssec:issue]節で述べた最後の問題点を解決するために，一連の検索条件ごとに同一の対話戦略を持つ複数の対話エージェント--文脈エージェント--を利用できるようにした．
文脈エージェントを用いると，ユーザは同一の対話戦略を用いて異なる検索条件で一度に検索することができるようになる．
文脈エージェントのイメージを図[REF_fig:agentS]に示す．
典型的な検索条件，例えば，旅行ドメインにおける有名な観光地やプロ野球ドメインにおける人気球団などは，それらの検索条件を予め与えた文脈エージェントを用意している．
また，ユーザが対話の課程で別々の検索条件を割り当てた対話エージェントを文脈エージェントとして扱うこともできる．
所在地の検索条件に「箱根」と「日光」を予めそれぞれ割り当てた二つの文脈エージェントを用いた対話例を表[REF_tab:c-agent]に示す．
表[REF_tab:compare]と表[REF_tab:c-agent]を比較するとわかるように，ユーザは複数の文脈エージェントを用いることによって，自分が比べたいと思っている候補を容易に比較できている．
我々は，旅行に関する約8万件のモデル化文書を格納した2枚の市販の電子ブック[CITE]を対象とした音声対話情報検索システムTARSANを作成した[CITE]．
TARSANでは，モデル化文書を項目に分割して全文検索を行ない，特に「地名」項目に注目して，効率的に適合文書を絞り込み，その適合文書の特定の項目を提示する音声検索対話を実現した．
TARSANで実現した対話例を表[REF_tab:travel]に示す．
[htp]  \centering
このように，実用規模のテキストデータからユーザの検索条件に合致するものを絞り込む対話では，ユーザは検索条件の追加や変更を繰り返すことで目的とする文書にたどりつく(usr2[MATH]5)．
このような対話を効率的に行なうには，システムが主導に立って対話の流れを制御し，1)検索条件が不十分な場合にはユーザに入力を要求したり(sys1,2)，2)ユーザが次に検索条件を追加／変更するための付加的な情報を提示したり(sys3,4)することが効率的である．
TARSANで実現した「旅行」をドメインとする対話では，「地名」という特殊な検索条件に注目し，これを利用することで，効率的な対話を実現した．
すなわち，地名を必須条件とし，地名の階層構造を用いて検索結果をグループ化する処理を行なうことにより，表[REF_tab:travel]に示したような対話を実現した．
TARSANにおける対話は，旅行という単一のドメインに限定したものであった．
そこで，TARSANで手続き的に実現した「対話の流れを制御するために用いる項目(以下，対話項目と呼ぶ)」を宣言的に記述できるようにすることで，複数のドメインを対象とするよう拡張した．
以下では，旅行ドメインにおける「地名」の役割を分析し，他のドメインに適用する手法について説明する．
単一ドメイン(旅行)に関する情報検索の対話を複数のドメインに適用するにあたり，問題となるのは，異なるドメインにおいては異なる意味で用いられる多義語である．
しかし，当面の目標として，旅行というドメインで確立した手法を他のドメインに適用することとしたので，旅行以外のドメインとして，互いの関連性が少ない，「プロ野球[CITE]」と「映画[CITE]」を選んだ．
そして，表[REF_tab:genre]に示すジャンル名がユーザの質問文に現れた場合に，そのジャンル名が属するドメインに決定する．
これまでに述べたような検索対話を一般化するために，TARSANの対話で果たした地名項目の役割を以下に示すデフォルト対象項目，必須条件項目，シソーラス項目，優先条件項目という四つの「対話項目」に分類し，ジャンルごとにそれぞれの宣言的に指定できるようにした．
また，これらの対話項目を参照して，対話の流れを制御する機能を実現した．
表[REF_tab:ditem]に，各ドメインにおける典型的なジャンルごとの対話項目の例を示し，以下で，各対話項目について説明する．
ユーザが検索対象項目を明示しない場合に，システムがユーザに提示する項目．
モデル化文書のラベルである「名称」項目は必ずデフォルト対象項目とする．
また，後述する「シソーラス項目」をデフォルト対象項目として指定すると，検索結果が多い場合，検索条件として与えたシソーラス項目のひとつ下の階層の項目値で検索結果のグルーピングを行なう(表[REF_tab:travel] sys3,4)．
ユーザによる指定を必須とする条件項目．
ここで指定された必須条件がユーザによって指定されていない場合には，システムがいわゆる「問い返し」によってユーザに指定を要求する(表[REF_tab:travel] sys2)．
項目値をグループ化するための階層情報(シソーラス)をシステムが保持している項目であり，ユーザがこの項目を検索条件として指定した場合に，この情報を利用すると，その後の絞込みに有益な項目である．
例えば，旅行の所在地項目には，「都道府県」，「市町村」という階層が存在するが，検索条件として，都道府県名が与えられ，検索結果が多い場合には，市町村でグルーピングを行ない，応答文を生成する．
また，実際のデータのテキスト中に存在しない階層(例えば，旅行の所在地項目では，都道府県をいくつかにグルーピングした「東海地方」などの地方名，プロ野球の所属球団をグルーピングした「リーグ名」など)も，システムがシソーラス項目として仮想的な階層情報を保持しており，ユーザからそうした実際のデータのテキスト中に存在しない階層を検索条件として指定された場合にも，実際のテキスト中に存在する項目値に展開して検索を行ない（例えば，プロ野球で，「セリーグ」と指定された場合には．
現在の６球団と「大洋」，「国鉄」の８球団に展開する），応答文に関して，上記と同様のグルーピングを行なう．
ユーザが明示的に変更しない限り，検索条件として付与する項目．
対話外からも指定できるだけでなく，ジャンル名を含む文で指定された検索条件も優先条件項目とする．
優先条件項目以外の条件項目は，それ以外の条件を変更した場合に残すかどうかをシステムが確認するが，優先条件項目は，それ以外の検索条件を変更した場合に確認しない．
以上の対話項目を2種類のドメイン(プロ野球[CITE]，映画[CITE])について作成した．
プロ野球，映画をドメインとする対話例を表[REF_tab:baseball], [REF_tab:cinema]に示す．
[thp]  \centering
[thp]  \centering
前節で述べたように，複数のドメインを検索できるようにした予備実験システムを作成し，それを用いて対話収集および使用感についてのアンケートを行なったところ，以下の問題点が判明した．
複数のドメインにまたがる情報を一回の入力文で得られるとユーザが誤解する．
複数のドメインにまたがる入力文の例を以下に示す．
「山口百恵が主演した映画にちなんだ温泉を知りたい。
」
「プロ野球選手だった俳優が出演した邦画を教えて。
」
最初の例は映画ドメインと旅行ドメインにまたがり，二番目の例は野球ドメインと映画ドメインにまたがっている．
特定の用途に対して効率的な対話戦略(対話の進め方)をシステムが行なうと，ユーザはシステムが万能の対話戦略を保持していると誤解する．
仮に一つの対話エージェントが複数の対話戦略を保持している場合---特にある対話戦略は効率的であるが用途が限られており，別の対話戦略はいろんな用途に適用できるが，あまり効率的でないような場合---には，ユーザは対話戦略間の格差に戸惑い，不快に感じる．
現状のシステムが指示照応などの対話処理に関して十分な能力を持っていないために，システムの能力に合わせた入力をユーザが行わないと，ユーザは適切な応答が得られない．
表[REF_tab:compare]は，複数の候補に対する検索条件を単一の文脈でユーザが比較した対話例である．
この対話例では，ユーザが箱根と日光の情報を比較しようとして，うまく対話を進めているが，非常に煩雑であり，対話システムの能力を知らずに，このように円滑な検索対話を行なえるユーザは少ない．
前章で述べた三つの問題点は，ユーザとの対応をシステムが一つの「対話エージェント(対話の窓口)」しか保持していないことに起因すると仮定した．
すなわち，対話エージェントが唯一であると，その対話エージェントがユーザとの対話のすべてを扱うことになり，このことでシステムに何ができて何ができないかをユーザにわかりにくくしていると考えられる．
そこで，システムの能力をユーザにわかりやすくするために，複数の対話エージェントを擁する対話モデルを提案する．
このように複数の対話エージェントを用いることで，ユーザはシステムにできることとできないことがわかりやすくなる．
本対話モデルにおける各対話エージェントは，図[REF_fig:eachagent]に示す以下の五つの情報を保持する．
情報検索の自然言語対話を行なうための汎用的な知識であり，全対話エージェントに共通のもの
個々の対話エージェントが扱うドメインにおけるジャンル名や個々のジャンルに属する項目などの知識
[REF_sec:ditem]節で述べた個々のジャンルの対話項目
個々の対話エージェントがユーザと対話を行なった検索履歴
各対話エージェントが，その個性(他の対話エージェントと異なることをアピールする属性)を決定する情報[CITE]
以下では，個々の対話エージェントが，上記のドメイン知識，対話戦略，文脈をそれぞれに保持することで変化する対話について説明する．
[REF_ssec:issue]節で述べた最初の問題点を解決するために，検索を行なう対話エージェントを異なるドメインごとに用意した．
このような対話エージェントをドメインエージェントと呼ぶ．
ドメインエージェントのイメージを図[REF_fig:agentD]に示す．
ドメインエージェントは，各ドメインにおいて初歩的な対話戦略を保持し，ユーザとシステム間のやりとりが可能な対話エージェントである．
ユーザがそれまで対話しているドメインと異なるドメインに関する入力を行った場合には，その異なるドメインに割り当てられたドメインエージェントが応答を行なう．
したがって，こうしたドメインエージェントを用意することで，ユーザは自分と対話している対話エージェントがドメインにまたがる質問を受理できないと気づき，ドメインにまたがる質問を行わないようになることが期待される．
[REF_ssec:issue]節の例1に対するドメインエージェントを導入した例を表[REF_tab:d-agent]に示す．
この例では，ユーザが入力した質問文に対して，映画に関するドメインエージェント(C.agt)と旅行に関するドメインエージェント(T.agt)がそれぞれ，自分が可能な応答を行なっている．
このように，ドメインエージェントを用いることで，システムが異なるドメインにまたがる質問を受理できないことがユーザに理解されると期待する．
[REF_ssec:issue]節で述べた二番目の問題点を解決するために，情報検索に関する特定の対話戦略ごとに割り当てた対話エージェント，--対話戦略エージェント--を用意した．
対話戦略エージェントのイメージを図[REF_fig:agentS]に示す．
対話戦略エージェントは，単一のドメインにおいて，情報提供者側が用意した対話戦略ごとに定義される．
本稿の実験システムでは，旅行のドメインに対して，以下の二種類の対話戦略エージェントを用意した．
必須条件を目的地とし，付加条件を宿泊料と立地条件とする．
付加条件がユーザに指定されない場合，出張エージェントはあらかじめ定義された付加条件の値をユーザに提案する．
また，デフォルトの結果項目として出張エージェントが応答する項目はホテルの名前とその電話番号である．
必須条件はレジャー施設と参加人数であり，それ以外の項目はオプショナルである．
ユーザがオプショナルの項目を指定しない場合，リクレーションエージェントがあらかじめ定義された値をユーザに提案する．
デフォルトの結果項目としてレクレーションエージェントが応答する項目は出張エージェントと同様，ホテルの名前とその電話番号である．
対話戦略エージェントは，ユーザがシステムを容易に使えるようにするだけでなく，単一ドメインにおいても，タスクに応じていろんな対話戦略が存在することをユーザに気づかせることができる．
旅行ドメインのドメインエージェントと，出張エージェントを用いた対話の比較を表[REF_tab:s-agent]に示す．
表[REF_tab:s-agent]からわかるように，ユーザは対話戦略エージェントを用いることによって，容易に自分の目標を達成できている．
[ht]
\centering
[REF_ssec:issue]節で述べた最後の問題点を解決するために，一連の検索条件ごとに同一の対話戦略を持つ複数の対話エージェント--文脈エージェント--を利用できるようにした．
文脈エージェントを用いると，ユーザは同一の対話戦略を用いて異なる検索条件で一度に検索することができるようになる．
文脈エージェントのイメージを図[REF_fig:agentS]に示す．
典型的な検索条件，例えば，旅行ドメインにおける有名な観光地やプロ野球ドメインにおける人気球団などは，それらの検索条件を予め与えた文脈エージェントを用意している．
また，ユーザが対話の課程で別々の検索条件を割り当てた対話エージェントを文脈エージェントとして扱うこともできる．
所在地の検索条件に「箱根」と「日光」を予めそれぞれ割り当てた二つの文脈エージェントを用いた対話例を表[REF_tab:c-agent]に示す．
表[REF_tab:compare]と表[REF_tab:c-agent]を比較するとわかるように，ユーザは複数の文脈エージェントを用いることによって，自分が比べたいと思っている候補を容易に比較できている．
