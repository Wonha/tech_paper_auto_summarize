一般に，コーパスを設計する際は少なくとも次の点を考慮する必要がある．
コーパスの使用目的は何か．
文章に対してどのような言語情報をアノテーションするか．
何をコーパスの素材（元となる文章）にするか．
どのような仕様でアノテーションするか．
KNBコーパスは，ブログを対象とした自然言語処理技術のためのデータの提供を目的としている．
具体的には，多くの自然言語処理タスクで基盤的な役割を果たしている形態素解析，係り受け解析，格・省略・照応解析，固有表現抽出と，ブログを対象とする場合に重要になる文境界の検出，情報アクセス・情報分析研究にとっての要となる評判分析を対象としている．
従って，KNBコーパスにアノテーションする言語情報は，形態素情報，係り受け情報，格・省略・照応情報，固有表現情報，文境界位置，評価表現情報となる．
次に，何をKNBコーパスの素材とするかであるが，選択肢としては，WWW上に既に存在するブログ記事を用いるか，本研究のために新たにブログ記事を執筆するかの2つが考えられる．
前者の場合，記事を大量に収集できるが，記事の著作権処理が困難になることが予想される．
後者は逆に，記事の著作権譲渡にあらかじめ同意してもらうことで，著作権に関する問題はクリアできるが，収集できる記事の量が前者に比べて大幅に少なくなることが予想される．
結局，我々は，多数の大学生にアルバイトとして記事を執筆してもらうことで，ある程度の記事数を確保できる見通しが得られたため，後者のアプローチを採用した．
記事のテーマは執筆者である大学生に自由に決めてもらうことも可能だが，我々は，アノテーション対象の評価表現が文中に含まれやすく，かつ，大学生にとって比較的身近であると考えられる「京都観光」\inhibitglue「携帯電話」「スポーツ」「グルメ」の4つのテーマをあらかじめ設定した．
執筆してもらったブログ記事は全て文章のみであり，画像や動画等は含まれていない．
アノテーション仕様については，選択肢として，KNBコーパス用に新規に設計するか，既存のタグ付きコーパスの仕様を流用，拡張するかの2つが考えられる．
前者にはコーパスをブログ記事に特化したものにすることができるという利点があるが，コーパスユーザにとっては，全く新規の仕様は広く流通している既存のコーパスの仕様に比べて扱いにくいものとなることが予想される．
後者の場合，ユーザにとって扱いやすいコーパスとなるが，既存の仕様ではカバーできないブログの言語現象が存在する恐れがある．
我々は当初，既存の仕様を用いる場合，評価表現に関しては川田らのものを，それ以外のアノテーションには京大コーパスのものを第一候補として考えていた．
川田らの仕様は，他の評価表現アノテーションの仕様と異なり，評価表現を単にマークするだけでなく，「当為」「要望」「採否」等の意味的な細分類を付与する．
この細分類情報は，従来以上に詳細な情報分析技術を実現するための重要な要素であると我々は考えている．
一方，京大コーパスの仕様は，京大コーパスだけでなく，近年盛んに研究利用されている日本語WWWコーパスのアノテーションにも使用されており[CITE]，解析済みコーパスの仕様の中でもっとも広く流通しているものということができる．
そこで我々は，川田らの評価表現アノテーションの仕様と京大コーパスの仕様をブログ記事に予備的に適用し，記述しきれない言語現象が存在するかを調査した．
その結果，後述するように，誤変換，脱字，衍字，口語的表現などの形態素に関する仕様の追加と，係り受けに関しての若干の仕様拡張，文境界と括弧表現についての仕様の策定を行えば，ほぼ対応可能であるという見通しが得られた．
最終的に，川田らの仕様と京大コーパスの仕様をベースに，以降で述べるいくつかの拡張を加えることでKNBコーパスのアノテーション仕様とすることに決定した．
完成したKNBコーパスは249記事，4,186文から成る．
テーマごとの記事数，文数，形態素数は表[REF_tab:breakdown]の通りである．
執筆に加わった大学生は計81名である．
京都観光について執筆したのは計72名，携帯電話については計67名，グルメについては計34名，スポーツは計18名である．
以下では，KNBコーパスへアノテーションされている各種言語情報の仕様について例とともに説明する．
新聞記事とは違い，ブログ記事では，例文(\ex{1})のような境界が明確な文だけでなく，例文(\ex{2})にあるような境界が不明確な文もある（以下，\eos{}はアノテーションされた文境界を，\lf{}は元の記事における改行を表す）．
\eenumsentence{
私はプリペイド携帯をずっと使っている．
\eos{}
ヒマな大学生の人はチケット買って西京極でボクと握手！\lf \eos{} } \eenumsentence{
なぜか清水寺に着きました笑\eos{}
京都のほうだったような・・・ \eos{}まぁ観光スポット多いですもんね？京都は．
\eos{} } KNBコーパスでは，原則的には，母語話者の直観に基づき一文として最も適切だと思われる個所で文を区切った．
それ以外に，(\ex{1})に挙げる個別的な方針を導入した．
\eenumsentence{
{日付だけからなる行も一文とする}
2006年10月09日\lf \eos{}
{URLだけからなる行も一文とする}
http://www.shigureden.com/\lf \eos{}
{箇条書きの一行一行をそれぞれ一文とする}
・藤井大丸\lf \eos{}
・紀伊國屋書店\lf \eos{}
{途中にURLが含まれていても，全体を一文とする}
http://url/とでも入力すると，\lf http//url/ \lfと出ます．
\eos{}
{途中に文末によく現れる記号があっても，明らかな一文である場合は区切らない}
散歩？？かな．
\lf \eos{}
{文頭，文末の記号は一文に含める}
そんな日本語ないか．
笑\lf \eos{}
脱力．
ORZ \lf \eos{}
P.S.数年前，電車の.
..
\eos{}
} CSJでは，対象が話し言葉であり，文の終わりが不明確であるという特徴がより顕著である．
そこで「節単位」という「文」に概ね相当する単位を規定し，文境界アノテーションを施している[CITE]．
京大コーパスでは括弧表現は削除されていたが，ブログ記事の括弧表現は，新聞記事と比べると，本文と密接不可分な内容のものが多く無視できない．
例文(\ex{1})はKNBコーパスの括弧表現の例である．
\eenumsentence{
ここもＦｏｏｄ\key{（}パンメインでカレーとか\key{）}の量は少なかったなー
貴重な\key{（}まぁどのへんが貴重なのかはわからないけど\key{）}時間を無駄にしてしまう．
どでかい神楽松明\key{（}激しく燃えている！\key{）}を担いで，狭い鞍馬街道をどこからともなく練り歩き出す．
}一方で，ブログ記事の括弧表現は多種多様で，文内に埋め込まれたままだと，係り受け等のアノテーションが困難になる．
そこで，括弧表現を文中から取り出して一つの独立した文とした．
例文(\ex{2})は例文(\ex{1})から括弧表現を抽出したものである．
\enumsentence{ {{# S-ID:KN012_Gourmet_6-1-23}}
ここもＦｏｏｄ\key{（}パンメインでカレーとか\key{）}の量は少なかったなー} \eenumsentence{
{{# S-ID:KN012_Gourmet_6-1-23-01}}
ここもＦｏｏｄの量は少なかったなー
{{# S-ID:KN012_Gourmet_6-1-23-02 括弧タイプ：例示括弧位置：7 括弧始：（括弧終：）}}
パンメインでカレーとか}「#」の行には文IDを表すS-IDをはじめ，直下の文の各種情報が記述されている．
抽出され一文になった括弧表現は，元の文の直後に置かれ，新たに文IDが与えられる．
具体的には，元の文のID末尾に「-01」を付与し，抽出されて別の文となった文のIDには「-02」「-03」「-04」等を付与する．
例えば例文(\ex{-1})はIDが「KN012_Gourmet_6-1-23」だが，括弧抽出後は，「KN012_Gourmet_6-1-23-01」(\ex{0}a)と「KN012_Gourmet_6-1-23-02」(\ex{0}b)の二文になる．
なお，括弧表現の元の文における位置情報が記録されており，復元も可能である．
例文(\ex{0}b)における「括弧位置：7」がその情報にあたり，「7」は括弧の開始位置を字数により示している．
さらに，抽出された括弧文には，読み，日付，金額，場所，同義，例示，その他のいずれかの括弧タイプが与えられる．
以下にKNBコーパスにおける括弧タイプとその例を挙げる．
\enumsentence{
印象に残ったのは，「御髪（みかみ）神社」．
ソフトバンクが前夜に予想外割を発表したこともあって，この日（１０月２４日）の情報通信株は面白いことになりそうという意識があった．
また付いてくる麦飯とキャベツと赤だしの味噌汁がおかわり自由で，私は豚カツ１２０ｇ（１０５０円）と一緒に，ごはんを４杯，みそしるを２杯，キャベツをもともとよそられていた量のの１．
３倍は食べてしまう．
まずは自転車で三条口（西大路三条）へと向かう．
１５〜２０，ブル（ど真ん中）を狙って例えば１５を三回あてれば自分の陣地になりそっから点数が入る，というものである．
Ｗｅｂが使えない，通話料がやけに高いので電話をわざわざ公衆電話からかけたりする，携帯会社が謳うオトクげなサービス（誕生日割りなど）をほとんど受けられない．
．
．
私は携帯電話が嫌いで（高校入学時に買わされたが），電源を入れているときの方が少ない．
}括弧表現はコーパス全体で137回出現した．
その内訳を表[REF_tab:paren-breakdown]に挙げる．
「その他」に分類される括弧文のほとんどは，上の例にあるような，本文に対する補足説明と呼べるものだった．
なお，表[REF_tab:breakdown]では，抽出された括弧表現も一文としてカウントしている．
形態素アノテーションでは，形態素と呼ばれる，当該言語において意味をもつ最小の単位に文を分割し，各形態素に読み，原形，品詞，活用型，活用形を付与する．
形態素は，文の構造を解析する上での最も基本的な単位である．
KNBコーパスでは京大コーパスと同様に，形態素単位，タグ単位，文節単位の3段階で階層的に文を分割している．
タグ単位とは，基本的に自立語1語を核として，その前後に存在する接頭辞，接尾辞，助詞，助動詞などの付属語をまとめたものである．
タグ単位は，格・省略・照応関係と係り受け関係のアノテーションで使用される．
文節単位は，1語あるいは複数の自立語を核として，その前後に存在する接頭辞，接尾辞，助詞，助動詞などの付属語をまとめたものであり，係り受け関係のアノテーションで使用される．
また，文節境界はタグ単位境界でもある．
例として表[REF_tab:morph]に，「半年ほど前に携帯電話の機種変更をしました．
」という文を対象にした形態素，タグ単位，文節単位のアノテーションを示す．
形態素単位と文節単位の他にタグ単位を用意するのは，格・省略・照応アノテーションの際，形態素より大きく文節より小さい単位でアノテーションする必要があるためである．
例えば「５００メートル地点」という表現に対しては，「５００メートル」と「地点」の間に修飾格関係が成立する旨をアノテーションするが，「５００メートル地点」は全体で1文節であり，また，「５００メートル」は「５００」と「メートル」の2つの形態素に分かれる．
このため，「５００メートル」を1つの単位としてまとめるタグ単位の導入が必要になる．
KNBコーパスの形態素アノテーションは，品詞・活用体系，フォーマットともに京大コーパスの仕様に準拠しているが，次のようなブログの特徴に対応するため仕様を拡張した．
\eenumsentence{
誤変換，脱字，衍字
口語的表現（方言，外国語，擬音・擬態語，言い淀み）
創造的表現（記号，Webで頻出のスラング）}以下，それぞれについて詳述する．
下に例を挙げる．
矢印[MATH]の右側が誤変換，脱字，衍字の例である．
\eenumsentence{
誤変換：「通信機能が内蔵されたもの」[MATH]「通信機能が内臓されたもの」
脱字：
「早めに行かないと」[MATH]「早めにかないと」
「属するようになり」[MATH]「属するようなり」
衍字：
「何が安いのか，考えて買っていきます．
」[MATH]「何が安いのか，考えて買いっていきます．
」
「高級な料亭や，焼肉屋，[MATH]ダイニングも多い．
」[MATH]「高級なり料亭や，焼肉屋，[MATH]ダイニングも多い．
」
}誤変換あるいは脱字を含む文は，元の誤った表現を残しつつ，正式な書き方・表現に基づいてアノテーションすることとした．
例えば「早めにかないと」なら「早めに行かないと」としてアノテーションした．
加えて，コーパス中に用意されているメモ欄に，「ER:（正しい書き方）」のように，誤りフラグERと正しい書き方を記載することとした．
このメモはタグ単位に与えられている．
表[REF_tab:misspelling]左に脱字のアノテーション例を挙げる．
衍字を含む文は，衍字が語句の内部にある場合と，語句の前あるいは後ろに接している場合の2通りに分けて対応した．
前者の場合，上述した誤変換あるいは脱字の場合と同様にアノテーションする．
つまり，元の表現を残しつつ，正式な書き方・表現に基づいてアノテーションし，メモ欄には誤りフラグERと正しい書き方を記載する．
後者の場合，衍字とそれが接している語句を別々の形態素としてアノテーションし，メモ欄には誤りフラグERと正しい書き方を記載する．
一方，タグ単位としては1つにまとめる．
表[REF_tab:misspelling]右に衍字のアノテーション例を挙げる．
KNBコーパス全体では，誤変換，脱字，あるいは衍字が102回出現した．
その内訳は，「京都観光」では43回，「携帯電話」では30回，「グルメ」では20回，「スポーツ」では9回である．
方言や外国語，擬音・擬態語，意図的な言い淀み等がこれに該当する．
後述するように，結局これらの表現は元の形のままでアノテーションしている．
CSJにおいても，融合，省略，フィラー，断片化といった口語表現特有の現象を，元の表現そのままでアノテーションしており，元のテキストを可能な限りそのままの形で正確に記述するという我々の方針と一致している．
方言では活用をどう記述するかが問題となる．
我々は，京大コーパスとの互換性と文法記述の正確性を最大限確保するため，既存の活用に該当しない方言に対して，形態素解析器JUMANの活用記述法に準拠しつつ，新たな活用を定義した．
例として，関西方言の「や」に関連するものと，それに対応する標準語の（つまりJUMANに既存の）活用情報を例文(\ex{1})に挙げる．
\eenumsentence{
「面倒やん」[MATH]ナ形容詞ヤ列基本形
（「面倒だ」[MATH]ナ形容詞基本形）
「悲しくなったりするんやろ〜？」[MATH]ナ形容詞ヤ列基本推量形異表記
（「悲しくなったりするんだろう？」[MATH]ナ形容詞ダ列基本推量形）
「小さいもんやのに」[MATH]判定詞ヤ列基本連体形
（「小さいものなのに」[MATH]判定詞ダ列基本連体形）
「もの大切にしいや」[MATH]（終助詞につき無活用）}また，全ての方言に対して，メモ欄に「DI」(dialect)と記載した．
方言は全体で114回出現した．
その内訳は，「京都観光」では40回，「携帯電話」では45回，「グルメ」では3回，「スポーツ」では26回である．
本研究における外国語とは，固有表現やURL（の一部），日本語として日常的に用いられている名詞（「ＨＤＤ」「ＰＤＦ」等）を除く，外国語の表現全てを指す．
例として，「今日は３限をさぼらせて友達を連れて祇園界隈へＧＯ！！」という文における「ＧＯ」がある．
外国語のアノテーションでは，どのような日本語の品詞を割り当てるべきかが問題になる．
KNBコーパスでは，外国語の形態素に対し，原則として，サ変名詞，普通名詞，形容詞のいずれかを割り当てることとした．
\eenumsentence{
サ変名詞：「祇園界隈へＧＯ！！」
普通名詞：「予想ＧＵＹ」
形容詞：「京都ＬＯＶＥなので」（ナ形容詞ダ列基本連体形）}読みは英単語アルファベットそのままとした．
外国語のフレーズは，１単語１形態素とし，フレーズ全体で１タグ単位とした．
例えば「ｗｉｔｈ\kuuhaku{}ｍｙ\kuuhaku{}ｆｒｉｅｎｄ」なら，３つの形態素と２つの空白から成る１フレーズなので，５形態素１タグ単位となる．
アルファベットで書かれたものに限定してKNBコーパスにおける外国語を集計した結果，外国語に該当する表現が16個存在した．
テーマ別に見ると，「京都観光」には8表現，「携帯電話」には3表現，「グルメ」には5表現で，「スポーツ」には存在しなかった．
擬音語・擬態語として，KNBコーパスでは，辞書には登録されていない，『ピリリリリリ』『ポフュー』等が出現した．
\eenumsentence{
「携帯『ピリリリリリ』」
「『ポフュー』って粉が出て」} JUMANでは，「ごくごく（飲む）」や「どしどし（応募する）」のような既知の擬音語・擬態語を副詞としているため，KNBコーパスでもこれに倣い，これらを全て副詞とした．
JUMANに未登録の擬音語・擬態語をKNBコーパスから抽出したところ，16語が得られた．
テーマ別に見ると，「京都観光」から3語，「携帯電話」から8語，「グルメ」から2語，「スポーツ」から3語が得られた．
言い淀みの例を以下に挙げる．
\eenumsentence{
牛乳を入れて[MATH]ぎゅうにゅ[MATH]にゅ[MATH]牛乳ねぇぇぇー！
現voda[MATH]もといソフトバンクモバイル}これらは未定義語として，メモ欄に「言い淀み」と記載する．
KNBコーパス全体で言い淀みは4回出現した．
その内訳は，「携帯電話」では1回，「グルメ」では2回，「スポーツ」では1回である．
顔文字等の記号や，「サーバ」を意味する「鯖」等のWeb上で多用されるスラングはブログ特有の表現といえるが，これらを創造的表現と呼ぶことにする．
KNBコーパスにおけるスラングは，「サーバ」を意味する「鯖」と，「マスコミ」を意味する「マスゴミ」，「終わった」を意味する「オワタ」があった．
\eenumsentence{
ＭＮＰ鯖が落ちているから．
マスゴミで報道されてしまったし，}スラングも，他の表現と同様に京大コーパスとの互換性を最大限保つよう配慮する．
例えば上記の「鯖」は，普通名詞として扱う．
なおスラングには，メモ欄に「スラング：（正式あるいは一般的な表記）」を付記している．
KNBコーパス全体におけるスラングの出現回数は3回で，いずれも「携帯電話」に関する記事において出現した．
人がうなだれている姿を現す「ｏｒｚ」や顔文字，「！！」「．
．
．
」のような同じ記号の連続は１形態素の記号とした．
\eenumsentence{
自分の部屋で紅茶をいれ，一人で味わいましたｏｒｚ
京都大好きな人が増えていけばいいなと密かに思ってます（＊＾-＾＊）
住んでみて改めて思います！！
厳かさに畏れを抱く．
．
．
}「ｏｒｚ」（変種も含む）と顔文字の出現頻度を調べたところ，KNBコーパス全体では26回だった．
テーマ別で見ると，「京都観光」では11回，「携帯電話」では8回，「グルメ」では5回，「スポーツ」では2回だった．
一方，「ー」「〜」などの長音記号は，それを含む形態素，あるいは直前の形態素の一部とし，独立した記号とはしない．
また，長音記号付きの形態素は，対応する標準的な表現の異表記としてアノテーションした．
\eenumsentence{
気分悪くなってきたのでやめまーす笑
動詞性接尾辞ます型基本形異表記
（cf.「（やめ）ます」は「動詞性接尾辞ます型基本形」）
誰か一緒にいこ〜！！
子音動詞カ行促音便形意志形異表記
（cf.「（一緒に）行こう」は「子音動詞カ行促音便形意志形」）}長音記号に関するもの以外で，標準的表現の異表記としてアノテーションされている表現として「分厚っ」や「すげぇ」，「大好きだあ」などがある．
これら標準的表現の異表記を集計したところ，KNBコーパス全体では38表現存在した．
その内訳は，「京都観光」が15表現，「携帯電話」が8表現，「グルメ」が11表現，「スポーツ」が4表現である．
係り受けアノテーションでは，タグ単位間と文節間の２種類の係り受け関係を京大コーパスに準拠する形式でアノテーションした．
係り受け関係は，自然言語処理において，文の構文的意味的構造を表す最も一般的な手段である．
タグ単位間と文節間の係り受け関係の例を図[REF_fig:dep-tag]と図[REF_fig:dep-bunsetsu]に挙げる．
係り受け関係として，京大コーパスと同様，通常の係り受け関係の他に，並列関係と同格関係がある．
CSJでは話し言葉特有の現象に対応すべく独自の仕様を設けている．
例えば，文節の倒置に対応するために右から左への係り受けを許し（図[REF_fig:dep-csj-inversion]の実線．
「これは」が倒置され，左の文節「耐えられないんです」に係っている）\inhibitglue，また，言い差し，ねじれに対応するために係り先のない文節を認めている（図[REF_fig:dep-csj-nejire]の実線．
「目標は」の係り先として適切なものがない）\inhibitglue．
KNBコーパスでは，京大コーパスとの互換性を重視し，上記のような特殊な仕様は避けることとした．
つまり図[REF_fig:dep-csj-inversion]と図[REF_fig:dep-csj-nejire]に相当する現象に対しても，図中の破線にあるように，左から右へ，最も適切と思われる文節に係るようにアノテーションするという方針にした．
例えば，例文（\ex{1}）（図[REF_fig:dep-knb-nejire]）のように，記事の執筆者の誤りによって係り先の文節が括弧に入れられ，括弧抽出処理によって別の文になっている場合があった．
\enumsentence{壊れる（画面が見えなくなる前に）他の携帯を手に入れようと}
この例文は括弧抽出処理を経て次のように分けられる．
\eenumsentence{
壊れる他の携帯を手に入れようと
画面が見えなくなる前に}つまり，閉じ括弧位置の間違いのため，「壊れる」の本来の係り先「前に」がなくなっている．
これに対して，上記方針に従い，抽出された本来の係り先文節（例文（\ex{0}）の「前に」）の係り先文節（「入れようと」）に係るものとした．
京大コーパスに準拠する形式で，格・省略・照応のアノテーションを付与した．
これらの情報は，係り受け関係よりさらに踏み込んだ文の意味構造や，文よりさらに大きい単位である談話の構造について知る手段となる．
格アノテーションでは，用言の場合，その用言に係る要素との間の意味的関係を当該用言に付与する．
ここでいう意味的関係とは，ガ格，ヲ格，ニ格，ト格，デ格，カラ格などの格助詞に対応する関係や，「〜を通じて」「〜として」などの複合辞に対応する関係，さらには，格助詞や複合辞に対応するものが無い「外の関係」と呼ばれる関係がある．
「は」や「も」などの副助詞でマークされる要素に対しては，例文(\ex{2})のように，これらのいずれかの関係のうち意味的に合致するものが選ばれる．
格アノテーションは体言間の意味的関係も対象とする．
その場合，体言の必須格を表すノ格や体言の補足的情報を表す修飾格などが付与される．
例文(\ex{1})と(\ex{2})に用言格アノテーションの例を，例文(\ex{3})と(\ex{4})に体言格アノテーションの例を挙げる．
下線が引いてある用言あるいは体言への格アノテーションが括弧内に書かれている．
\enumsentence{一ユーザとしては，かなり使いでがある．
（ガ格：使いで，トシテ格：ユーザ）} \enumsentence{ Foodは量が少ない．
（ガ格：量，外の関係：Food）} \enumsentence{フツウの携帯ユーザーの仲間入り（ノ格：ユーザー）} \enumsentence{年間最大１万８千円程度（修飾：年間，修飾：最大）}省略アノテーションは，それと係り受け関係にあるはずの要素が省略されている場合，その要素の指示対象と意味的関係を付与する．
意味的関係は格アノテーションのものと同様である．
以下に省略アノテーションの例を挙げる．
\enumsentence{ 4，5回しか行ったことないけど．
（ガ格：一人称）} \enumsentence{だって携帯の会社変えたらアドレスとか全部変わるもんね．
面倒やん．
（ガ格：変わる）} \enumsentence{時雨殿に行った．
[MATH]残念ながら閉館していたので…（ガ格：時雨殿）} \enumsentence{私の使っている携帯電話に最近原因不明の黒い横線が入るようになってしまった．
…もちろんプリペイド携帯電話．
…現実の使用の上ではそんなに困ることもない…（ガ格：私，ヲ格：電話）}表[REF_tab:cases-breakdown]に，格・省略アノテーションの結果明らかになった，KNBコーパスにおける最頻出の意味的関係上位5つの出現回数を挙げる．
いずれのテーマにおいても，ガ格，ヲ格，ニ格，ノ格，修飾格が上位5つを占めた．
照応アノテーションでは，ある表現が既出のものと同じ対象を指示している場合，その表現（照応表現と呼ぶ）に対して対応する既出表現の位置情報を付与する．
例文(\ex{1})，(\ex{2})，(\ex{3})に照応アノテーションの例を挙げる．
\enumsentence{父と野球．
父は野球が好きだった．
（父[MATH] 1文前）} \enumsentence{実は，この２大勢力時代という表現は正確ではない．
本当はもう１勢力あるのだ．
それが『ネギ』である．
（勢力[MATH] 1文前）} \enumsentence{困ったことに，友人たちの間では僕は携帯電話を持ち歩かないことで有名だ．
が，それは事実とは反している．
携帯は持ち歩いている．
（電話[MATH] 2文前）}
例文(\ex{0})に関して，下線の「携帯」は2文前の「携帯電話」と同じ対象を指示しているが，照応アノテーションの単位はタグ単位なので，「電話」のみと[MATH]で結んでいる．
照応アノテーションは，明示的に書かれている表現に対してだけでなく，省略された表現に対してもなされる．
例えば，例文([REF_ex:sigureden])と([REF_ex:yokosen])に対しては，それぞれ例文(\ex{1})と(\ex{2})のようにアノテーションする．
\enumsentence{時雨殿に行った．
…残念ながら閉館していたので…（時雨殿[MATH] 1文前）} \enumsentence{私の使っている携帯電話に最近原因不明の黒い横線が入るようになってしまった．
…もちろんプリペイド携帯電話．
…現実の使用の上ではそんなに困ることもない…（私[MATH] 2文前，電話[MATH] 2文前）}結局，照応アノテーションでは，形態素や係り受けのアノテーションと違い，京大コーパスからの仕様拡張の必要は無かった．
KNBコーパス全体における照応表現の出現回数は9,881回だった．
テーマ別に見ると，「京都観光」では3,620回，「携帯電話」では3,146回，「グルメ」では1,939回，「スポーツ」では1,176回だった．
固有表現アノテーションでは，文中の人名や地名，日付，時間表現等をマークする．
固有表現は解析システムの辞書に登録されていない場合が多く，何も手段を講じなければ未知語として扱われ，解析誤りを引き起こしうる．
解析システムをより頑健にするには，本コーパスの固有表現アノテーションのような，固有表現自動抽出を学習するためのデータが必要である．
KNBコーパスの固有表現は，京大コーパスと同様に，IREXの仕様に準拠してアノテーションされている．
固有表現は次の8つのいずれかに分類される．
\eenumsentence{
ORGANIZATION…組織名
LOCATION…地名
PERSON…人名
ARTIFACT…固有物名
PERCENT…割合表現
MONEY…金額表現
DATE…日付表現
TIME…時間表現}上記分類以外に，それら分類のいずれにも属さない，あるいは判定が困難な場合に用いるOPTIONALという分類基準がある．
例文(\ex{1})に例を挙げる．
\eenumsentence{
近鉄ファンだった．
（近鉄：ORGANIZATION）
京都を回ってみようと思います☆（京都：LOCATION）
あの孫社長が携帯業界に参入してきた．
（孫：PERSON）
初めてバンホーテンココアを飲んだときも衝撃でしたが，（バンホーテンココア：ARTIFACT）
乗車率９０％程度だろうか．
（９０％：PERCENT）
蕎麦の一杯や定食の一人前が８００円から１０００円もする．
（８００円：MONEY，１０００円：MONEY）
来シーズンもプロ野球戦線が盛り上がるといいですね〜．
（来シーズン：DATE）
９時過ぎに出発する．
（９時：TIME）} [REF_sec:case-ellipsis-anaphora]節の格・省略・照応アノテーションと同様，固有表現アノテーションにおいても，京大コーパス(IREX)の仕様の拡張は必要なかった．
アノテーションの結果，KNBコーパスには固有表現が2,073個含まれていることが分かった．
その内訳を表[REF_tab:NE-breakdown]に挙げる．
KNBコーパスにおける評価とは，ある対象に対して述べられた肯定的，もしくは否定的判断や態度，叙述を指す．
典型的には，「お酒は美味しかったですよ．
」のような，ある対象に対する肯定的／否定的な判断や態度がそれにあたる．
また，「昼食が２万３千円〜だった．
」のような事実的な言明であっても，その事実がある対象への肯定的／否定的評価に結びつくなら，それも評価に含める．
評価表現アノテーションでは，川田ら(川田他2009)に基づき，何らかの評価を含む文に対して次の情報を付与する．
\eenumsentence{
評価保持者：その文における評価を発信している人や団体．
評価表現：文中での評価を表している部分．
評価タイプ：評価の種類と評価の極性．
極性は，「[MATH]」が肯定的評価で「[MATH]」が否定的評価を表す．
評価保持者による提言や助言，対策を表す言明である．
典型的には，「〜すべきだ」「〜しましょう」といったものがこれにあたる．
評価保持者の要望や要請を表す言明である．
典型的には，「〜してほしい」「〜を求める」などがこれにあたる．
評価保持者の欲求や喜怒哀楽，好き嫌いといった感情を表す言明である．
典型的には，「〜が好き」「〜が悲しい」などがこれにあたる．
評価保持者による賛成や反対，称賛，批判などの感情の言明がこれにあたる．
典型的には，「〜が素晴らしい」「〜が納得できない」などがこれにあたる．
評価保持者による，評価対象に対する利点や欠点，特徴や課題について述べた言明である．
典型的には，「〜効果がない」「〜がうるさい」などがこれにあたる．
評価保持者が評価対象を積極的に利用したり，新たな製品や制度などを採用する姿勢を述べた言明である．
典型的には，「〜を利用する」「〜を導入する」「〜を採用する」などがこれにあたる．
評価対象によって引き起こされた良い／悪い状況や個別的経験について述べられた言明である．
典型的には，「〜が壊れた」「〜を受賞した」などがこれにあたる．
評価対象：評価の対象．
}例文(\ex{1})と(\ex{2})に，「おかきやせんべいの店なのだが，これがオイシイ．
」と「貧乏人臭い，なんか怪しげな人っぽいといった類のものです．
」という文への評価表現アノテーションを挙げる．
\eenumsentence{
おかきやせんべいの店なのだが，これがオイシイ．
評価保持者：［著者］
評価表現：オイシイ
評価タイプ：批評[MATH]
評価対象：おかきやせんべい} \eenumsentence{
貧乏人臭い，なんか怪しげな人っぽいといった類のものです．
評価保持者：［不定］
評価表現：貧乏人臭い，なんか怪しげな人っぽいといった類のものです．
評価タイプ：批評[MATH]
評価対象：［プリペイドユーザー］}［[MATH]］でマークされているものは，文中に存在しない評価保持者，評価対象である．
(\ex{0})で評価保持者が［不定］となっているのは，その評価が執筆者や特定の個人，団体によるものではなく，世間一般の評価であることを示している．
一文に複数の評価が含まれていることもある．
次の例では，「しょぼかった」「画面も小さかった」「音も３和音とかやった」の3つの評価表現が一文に含まれている．
\eenumsentence{
最初はカメラもしょぼかったし，画面も小さかったし，音も３和音とかやった．
評価保持者：
［著者］
［著者］
［著者］
評価表現：
しょぼかった
画面も小さかった
音も３和音とかやった
評価タイプ：
批評[MATH]
メリット[MATH]
メリット[MATH]
評価対象：
カメラ
画面
音
} (\ex{0})の(1) (2) (3)は対応しており，例えば，評価「しょぼかった」の評価保持者は「［著者］」，評価タイプは「批評[MATH]」，評価対象は「カメラ」となる．
評価表現アノテーションは一文内で完結しない場合が頻繁にある．
例えば例文(\ex{1})のように，評価の対象と評価表現が（近接する）異なる文に書かれている場合がそうである．
例文(\ex{1})の2文目は，1文目に書かれている対象「ココア・オレ」に対する評価を述べている．
\eenumsentence{
私はココア・オレを買います．
これは何度飲んでも衝撃です．
評価保持者：［著者］
評価表現：衝撃です
評価タイプ：感情[MATH]
評価対象：［ココア・オレ］}異なる文に分断された評価対象と評価表現は多くの場合，格・省略・照応関係で結ばれている．
従って評価表現アノテーションは，格・省略・照応関係のアノテーションと合わせてなされるべきである．
[REF_sec:case-ellipsis-anaphora]節で述べた通り，KNBコーパスでは格・省略・照応関係もアノテーションされており，例文(\ex{0})の2文は照応表現「これ」を介して次のように関連づけられる．
\eenumsentence{
私はココア・オレを買います．
これは何度飲んでも衝撃です．
（これ[MATH]ココア・オレ）}
KNBコーパス全体を評価表現アノテーションした結果，2,045文（48.85%）の文に何らかの評価表現が含まれていた．
その内訳は表[REF_tab:eval-breakdown]の通りである．
表において，「当」「要」「感[MATH]」等はそれぞれ「当為」「要望」「感情[MATH]」等を表す．
以上で述べた通り，KNBコーパスのアノテーションは多岐にわたり，そのままでは（人間にとって）可読性が低い．
そこで，アノテーションを可視化したHTMLファイルを別途用意した．
図[REF_fig:visualize]は，「悩んだ末，カシオのＧ’ｚｏｎｅという，衝撃や水濡れに強いのがウリの機種に決めました．
」という文へのアノテーションを可視化した例である．
図[REF_fig:visualize]の上段が，係り受けと格・省略・照応，固有表現，評価表現のアノテーションを可視化したもので，下段が形態素のアノテーションを可視化したものである．
係り受け関係はタグ単位に基づくものを可視化している．
また，「濡れに」に係っている「衝撃や」と「水」は並列関係にあるとアノテーションされているので「P」(Parallel)とラベル付けされている．
格・省略アノテーションに関して，例えば「決めました．
」はガ格とニ格を取り，それぞれ，省略されている一人称と，直前のタグ単位「機種」がそれらの要素となっている．
加えて，「（悩んだ）末」という時間格を取る．
照応アノテーションの例として，「機種」が一文前の「機種」と照応関係にあるとアノテーションされている．
固有表現として「カシオ」と「Ｇ’ｚｏｎｅ」の２つがこの例文中にある．
前者は企業名なので「ORGANIZATION」，後者は製品名であり「ARTIFACT」となる．
この例文中の評価情報として「衝撃や水濡れに強いのがウリの機種に決めました」がある．
この評価保持者は［著者］である．
評価保持者が［著者］あるいは［不定］の場合，可視化HTML中では明示しない．
評価タイプは「採否[MATH]」であり，評価対象は「衝撃や水濡れに強いのがウリの機種」となる．
評価表現は「衝撃や水濡れに強いのがウリの機種に決めました」で，この箇所は係り受けの可視化において当該文字列が黄色でマークされている．
図[REF_fig:visualize]下段の形態素アノテーションの可視化では，形態素ごとに，表出形，読み，原形，品詞，活用型と活用形を示している．
また，文節境界とタグ単位境界もこの箇所で明記している．
KNBコーパスの構築から配布までの手順は次の通りである．
記事の収集
文境界／括弧抽出アノテーション
形態素／係り受け／格・省略・照応／固有表現アノテーション
評価表現アノテーション
誹謗・中傷・宣伝的内容の削除
アノテーション可視化HTMLの生成
記事の収集は，独自にブログサーバを設置し，大学生にアルバイトとして記事を書いてもらうことで収集した．
その際，記事執筆にあたった全ての大学生から記事の著作権譲渡の承諾を得た．
手順(2)と(3)は，自動でアノテーションした後，人手修正を施した．
(3)の自動アノテーションでは，京大コーパスと同様，JUMAN／KNPを用いた．
一方，(4)は全て人手で行った．
また(2) (3) (4)に関して，京大コーパスと同様，アノテーション基準の見直しと再アノテーションというサイクルを何度か繰り返して行った．
その後，元のブログ記事にある，特定の個人，団体に対する誹謗や中傷，宣伝的な内容を人手でチェックし，削除，あるいは伏せ字化した．
最後に，全てのアノテーションを可視化したHTMLファイルを自動生成した．
完成したKNBコーパスのパッケージ(4.2 MB)は，京都大学情報学研究科—NTTコミュニケーション科学基礎研究所共同研究ユニットのホームページからダウンロードできる．
京大コーパスとは異なり，コーパスのパッケージには，アノテーションだけでなく記事の本文も含まれている．
