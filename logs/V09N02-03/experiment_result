本論文では,さまざまな類似尺度について一対多関係を推定する問題における性能を比較する.
比較においては,類似尺度が利用する情報を基本的な情報にそろえ,利用する情報に影響を受けないようにし,公正な比較となるようにしたい.
そこで,本論文で扱う類似尺度は下記に示すパラメータ[MATH]で利用できる情報をもとに計算できる類似尺度とした.
実際に使用されている類似尺度の多くはこの[MATH]から計算される.
次にこれらのパラメータの定義を示す.
このパラメータによって,本論文で扱う類似尺度は表現される.
パラメータ
ラベル[MATH]に対する二値パターンをそれぞれ二値n次元のベクトル[MATH] [MATH] [MATH]とする.
このとき, [MATH]が[MATH]にどれだけ類似しているかを以下のパラメータを用いて推定する.
ただし, [MATH]である.
それぞれのパラメータは,
a:二つのラベルが同時に現れるデータの数,
b: [MATH]が現れ, [MATH]は現れないデータの数,
c: [MATH]が現れ, [MATH]は現れないデータの数,
d:二つのラベルがどちらとも現れないデータの数
を表す.
これらのパラメータを情報としてとらえると, [MATH]は二つの出現パターンがどれだけ一致しているかを見るための情報となり, [MATH]は二つの出現パターンがどれだけ一致しないかを見るための情報となる.
実験では,これらの情報から出現パターン間の類似度を計算し,その類似度が高ければ,二つの出現パターンは包含関係ではないかと推定する.
このとき用いる類似尺度は, [MATH]が関係集合[MATH]の要素である場合,高いスコアを与える関数であるとする.
また,対称性を持つ類似尺度の場合,包含するラベルであるかそれとも包含されるラベルであるかを判断することができないため,本論文では,対称性を持つ類似尺度の場合は,出現回数の多いラベルを包含するラベルとして出現パターンの包含関係を推定した.
本論文では,一対多関係を推定する問題において,文字認識の分野で提案されている補完類似度に注目し,これとこれまでに提案されている類似尺度の性能を比較する.
この節では,補完類似度[CITE]について説明する.
本来,補完類似度は文字認識の分野のもので,劣化印刷文字を高い精度で認識できるように考案された類似度である.
劣化印刷文字とは,かすれていたり汚れている文字のことである.
補完類似度を用いた文字認識方法を補完類似度法といい,これは文字を二値画像特徴として扱い,補完類似度を用いて,そのパターンとテンプレートとする文字のパターンとの類似度を計算し,文字を認識する方法である.
この手法は,汚れた文字においては人間による文字認識と同等の精度を持ち,かすれた文字においては人間による文字認識よりも高い精度を持つ[CITE].
この結果は,補完類似度が劣化印刷文字のパターンがテンプレート文字のパターンに包含される形にあるのであれば,文字であると認識できるように,高い類似度を保持する特徴を持つためである.
本論文で扱う出現パターンは頻度情報を考慮しない二値パターンであるため,仮にこれを文字のパターンと置き換えたとすれば,二つのラベルの出現パターンが異なる部分はかすれや汚れと解釈することができる.
以下に補完類似度の定義,性質をそれぞれ示す.
この節では,補完類似度(Complementary Similarity Measure)の定義を示す.
定義[REF_para]のパラメータを用いて, [MATH]の[MATH]に対する補完類似度を次のように定義する.
この定義は文献[CITE]に示されている定義である.
補完類似度
この定義式から,補完類似度はパラメータ[MATH]で表す出現情報をすべて考慮した類似尺度である.
文字認識に限らず,二つのパターンの類似度を求める場合,二つのパターンの一致している部分だけに注目した類似尺度が用いられることが多い.
これらの類似尺度は二つのパターンをを入れ換えても同じ値を持つ.
この性質を持つ類似尺度は対称性を持っているといわれる.
一方,補完類似度では分子にパラメータ[MATH]を用いて二つのパターンの相違を考慮した形の定義式となっている.
補完類似度の定義式([REF_csm])に含まれる項[MATH]は, [MATH]が[MATH]を完全に包含するなら[MATH]となるため, 0となり,また反対に, [MATH]が[MATH]を完全に包含するなら[MATH]となるため,この場合も0となる.
このような場合,補完類似度では定義式の分子が一致情報([MATH])と不一致情報([MATH])の差分をとる形であるため,包含関係を持つパターン対に対して高い類似度を保持する.
また,補完類似度は,二つのパターンを入れ替えると値が変わる.
このため,補完類似度は非対称性を持つ.
相互情報量(Mutual Information)は二つの確率変数の依存性を表す尺度として一般的に知られており,多くの処理に適用されている[CITE].
この節では,相互情報量の一般的な定義式を示し[CITE],その後,定義[REF_para]のパラメータを用いて定義式を表現し直す.
二つの確率変数[MATH]について平均相互情報量[MATH]の定義式を示す.
[MATH]は[MATH]をとり,[MATH]は[MATH]をとるとしたとき,平均相互情報量は次式で表される.
ただし, [MATH]は[MATH]が[MATH]を, [MATH]が[MATH]を同時にとる確率である.
次に,この定義式をパラメータを用いた表現に直すために,確率変数[MATH]はそれぞれラベル[MATH]を表すとする.
このとき,ラベルの出現パターンは二値パターンであるため,事象はデータにラベルが出現するか出現しないかのどちらかとなり,データ集合に対して,
[MATH]はデータにラベル[MATH]が出現する確率,
[MATH]はデータにラベル[MATH]が出現しない確率,
[MATH]はデータにラベル[MATH]が出現する確率,
[MATH]はデータにラベル[MATH]が出現しない確率
となる.
これらの確率を言い換えると,データ集合に対する各事象を出現するデータの割合である.
したがって,ラベル[MATH]に対するベクトルを[MATH],ラベル[MATH]に対するベクトルを[MATH]とし,定義[REF_para]のパラメータを用いると,式([REF_mi-gen])は次のように表現できる.
平均相互情報量
実験では,式([REF_mi])を用いて平均相互情報量を計算した.
この定義式から,平均相互情報量は出現情報をすべて考慮した類似尺度である.
また,平均相互情報量は対称性を持つ.
一方,平均相互情報量の第一項に基づく尺度が関連性の高い単語対を発見するために多く提案されている[CITE].
この尺度は,ある単語が現れることによる情報量が他の単語と共起することを知ることによって増加する情報量を測る尺度である.
これらの尺度における基本的な定義式を次に示す[CITE].
本論文では,この尺度を自己相互情報量と呼ぶことにする.
自己相互情報量
この定義式から,自己相互情報量は出現情報のうちどちらとも出現しないという情報を考慮せず,共起するという情報を中心とした類似尺度である.
また,この尺度は対称性を持つ尺度である.
本論文では,この自己相互情報量も比較対象として加えることにした.
上記の相互情報量は対称性を持つ尺度であるが,事象間の関係が一対多関係である場合,それらの事象が持つ出現パターン間の関係は包含関係にあるということが観察されるため,平均相互情報量の第一項と第三項に基づく非対称な尺度も考えられる.
第一項は共起出現することによって増加する情報量を表し,第三項はラベル[MATH]は出現しないとき,ラベル[MATH]が出現することを知ることによって増加する情報量である.
本論文では,この尺度を非対称平均相互情報量と呼ぶことにする.
非対称平均相互情報量
この定義式から,非対称平均相互情報量はパラメータ[MATH]が大きいと,類似度が低くなり,逆に[MATH]が小さいと,類似度が高くなるという性質を持つ.
つまり, [MATH]の場合,高い類似度を保持する.
本論文では,この非対称平均相互情報量も比較対象として加え,出現パターンの包含関係をとらえるために,非対称性は重要な性質であるかどうかを検討する.
統計処理に用いられる相関係数は,二値データのときに[MATH]相関係数(Phi Coefficient)となる[CITE].
この関数は事象の独立性を検定するために用いられる[MATH]統計量から計算される事象間の共起の強さを測る尺度である[CITE].
この節では, [MATH]相関係数の定義を示す.
二つの質量変数を[MATH]とし,データとして[MATH]が与えられたとする.
これらを定義[REF_para]のパラメータを用いて表現する.
ただし, [MATH]相関係数は二値データの場合用いられる相関係数であるので,データは[MATH]の四つである.
このとき, [MATH]と[MATH]の[MATH]相関係数は次のように与えられる.
[MATH]相関係数
この定義式から, [MATH]相関係数は出現情報をすべて考慮した類似尺度である.
この尺度は対称性を持つ尺度である.
ここで, [MATH]の列をベクトル[MATH], [MATH]の列をベクトル[MATH]と置き換えると,この定義式の分子は補完類似度の定義式([REF_csm])と同じである.
また,分母を比較すると,補完類似度は[MATH]相関係数の分母から[MATH]を取り除いたものであることがわかる.
本論文では,この違いが一対多関係の推定にどのように影響するのかを観察する.
単語間の関係または単語と文書間の関係を推定するために,ベクトル空間モデルを利用する場合がある.
これは,単語を多次元空間にベクトルで表現し,ベクトル間の類似度を測ることによって関係を推定する.
ベクトル空間モデルにおける類似尺度はこれまでに多く提案されている[CITE].
本論文では,代表的なコサイン関数(Cosine),ダイス相関係数(Dice Coefficient)を選び,一対多関係の推定において性能を比較した.
それぞれの尺度の定義式とその定義式をパラメータを用いて表現した式を次に示す.
ここで, [MATH]はそれぞれ[MATH]に対するベクトルとする.
コサイン関数
コサイン関数はベクトル空間における類似尺度のなかでもっとも知られている類似尺度である.
しかし,この尺度は二つのベクトルの大きさが非常に異なる場合でもある程度高い類似度を与えてしまう.
ダイス相関係数
ダイス相関係数はコサイン関数が持つ問題点を軽減するために,正規化を施した類似尺度である.
これらの定義式から,コサイン関数とダイス相関係数は出現情報のうちどちらとも出現しないという情報を考慮せず,共起するという情報を中心とした類似尺度である.
また,これらの尺度は対称性を持つ尺度である.
これまでに,データベースの中から連想規則を抽出する問題に関する研究が多くされている[CITE].
たとえば,連想規則を高速に発見する手法としてAprioriアルゴリズムが提案されている[CITE].
この手法には,データベースからの情報抽出において,重要な尺度とされている支持率(Support)と信頼度(Confidence)に基づく尺度が用いられている.
ここで,支持率はデータベースにおいて注目した事象を含むデータの割合であり,信頼度は前提を満たすデータの集合において帰結も含むデータの割合である.
言い換えると,信頼度は支持率によって表現できる条件付き確率である.
Aprioriでは,支持率を用いて信頼度を計算し,ユーザが指定した信頼度の下限値([MATH])よりもその信頼度が高い場合, ``面白い''連想規則としている.
次に定義式を示す.
[MATH]は[MATH](前提)と[MATH](帰結)のどちらともが現れるデータの支持率, [MATH]は[MATH](前提)が現れるデータの支持率である.
この式の左辺で求められる値が信頼度であり,これは前提[MATH]が現われるという条件のもとで帰結[MATH]が現われるという条件付き確率である.
本論文ではこれを単に信頼度と呼ぶこととする.
この左辺を定義[REF_para]のパラメータを用いて表現すると, [MATH]は[MATH], [MATH]は[MATH]と書くことができるので,信頼度は次のように表現することができる.
信頼度
この定義式から,信頼度は一方の出現情報だけを考慮するので,非対称性を持つ尺度である.
信頼度で使用されているパラメータは[MATH]であるが,これは出現頻度の小さいラベルを含むデータだけから計算でき,それ以外のデータに関する情報を利用しない類似尺度である.
本論文では,信頼度はデータベースにおける連想規則を得るための基本的な尺度とされているため,比較対象に加えた.
本論文では,注目するラベルとして日本の地名を選んで,実験を行った.
地名を選択した一つ目の理由は,地名間には実際に一対多関係が成り立つためである.
たとえば,県名と市名には地理的な包含関係があり,地名間の関係は一対多関係である.
また,二つ目の理由は,この関係は電話帳や地図,ポスタルガイドなどの既存データから抽出できるため,機械的に正解判定を行うことができることである.
これらの理由から,注目するラベルを日本の地名,その地名間において推定する一対多関係を地理的な包含関係とし,正解関係はポスタルガイドから抽出した.
正解とした地名の一対多関係は二つの地名について,一方の地名がもう一方の地名を地理的に包含する関係とした.
たとえば,大阪府は大阪市を地理的に包含するので,「大阪府,大阪市」は一対多関係があるとする.
このように,一方の地名が都道府県名,もう一方の地名がそれに続く市郡名である場合,それらの地名には一対多関係があるとし,この一対多関係を正解関係として一つの関係を抽出した.
以上のことより,本論文では,地名(都道府県市郡名)をラベル集合[MATH],抽出した1239個の一対多関係を正解集合[MATH]とした.
実験では,データ集合に現れる地名を組み合わせてできるすべての組について,出現パターンの類似度を測ることによって,その組が一対多関係であるかを推定する.
そして,組を類似度の降順にソートし,実験結果とする.
最後に,上位[MATH](任意の数)組を評価の対象となる組とし,その組について正解判定を行い,再現率で性能を評価する.
次に再現率の定義を示す.
また,データ集合が持つ関係の特性を見るため,多重度についても考察する.
この節では,モデルに従ったデータを用いて,八つの類似尺度の振る舞いを観察する.
ここで用いたモデルは,雑音のないデータモデルと,雑音のあるデータモデルである.
実験において,生成するデータ集合の大きさを無限に大きくすることはできない.
そこで,生成するデータ集合の大きさを1000個としたが,その数が全正解数1239よりも小さいため,全く使用されない正解もある.
したがって,どんな手法を用いても欠けている情報を復元することはできないので,再現率は[MATH]にならないことになる.
各地名の出現パターンは1000次元のベクトルで表され,各次元に対応するデータにある地名が出現するのであれば1,そうでなければ0が割り当てられたその地名についての二値ベクトルである.
この実験における評価方法は,評価の対象となる組を500組ずつ増やしたときの再現率をグラフにし,性能を評価する.
また,評価の対象となった組から,特徴的ないくつかの組を取り出し,それらの組に対して各尺度が与えた順位と類似度について考察する.
この節では,雑音のないデータ集合に対する類似尺度の振る舞いを観察する.
雑音のないデータ集合[MATH]は定義[REF_no-noise]に沿って,ラベル集合[MATH]と正解関係を要素とする関係集合[MATH]から作成した.
アルゴリズムを図[REF_algo:art_data]に示す.
このアルゴリズムに沿って作成したデータ集合の要素であるデータはたとえば, [MATH]というデータである.
これは,正解である関係集合[MATH]から[MATH]と[MATH]の二つを取り出し,その四つのラベルを要素として作成した集合である.
要素数を4とした理由は, 4未満であると問題が簡単すぎるので, 4が意味のある最低の数と考えたためである.
このように作成したデータ[MATH]を1000個持つデータ集合[MATH]を作成した.
このデータ集合は雑音のないデータ集合である.
これを用いて実験を行った.
実験結果を図[REF_graph:art_data]に示す.
この四つのグラフはそれぞれ同じ方法で作成した異なるデータ集合に用いて実験を行った結果である.
これらのグラフは,上位の組の数を横軸,そのときの再現率を縦軸とする.
また,このデータ集合における再現率は約[MATH]で収束する.
これは, [MATH]のなかに含まれていない正解があることを示している.
このグラフでは,上位に位置する組において,補完類似度の再現率の高さが目立ち,また補完類似度がもっとも早く収束している.
すべてのグラフにおいて,補完類似度に続き,信頼度,非対称平均相互情報量,平均相互情報量が高い性能を示している.
言い換えると,これらのグラフは雑音のないデータ集合を用いた実験において,補完類似度がもっとも一対多関係を推定する能力が高く,次に信頼度,非対称平均相互情報量,平均相互情報量の順に高いことを表している.
この結果はすべてのグラフにおいて同じ結果を得ている.
また,非対称平均相互情報量は平均相互情報量と比べ,一対多関係を推定する能力が高いことを表しているが,有意な差を見ることはできなかった.
しかし,このことから,非対称性は一対多関係を推定するために有効な性質の一つと考えられるが,補完類似度と非対称平均相互情報量の性能差を見ると,非対称性を持つだけでは高い性能を得られないことがわかる.
平均的な性能が高いだけでは,その性能が何によってもたらされたかがわからない.
そのため,次にそれぞれの類似尺度の振る舞いに特徴的な組を選び出し,定性的な分析を行う.
表[REF_without-comp]は定性的な分析として,図[REF_graph:art_data]の左上のグラフにおいて評価の対象に含まれた特徴的な6組を取り出し,それらの組に対してそれぞれの尺度で位置した順位とそのとき与えられた類似度を,パラメータ[MATH]とともに示す.
[MATH]は正解ではない組「四日市市,宇治市」である.
この組は一度だけ出現し,それが共起出現であった組([MATH])である.
この組は補完類似度では625位に位置し,その他の尺度ではより高い順位に位置する.
特に,自己相互情報量, [MATH]相関係数,コサイン関数,ダイス相関係数,信頼度では上位に位置する.
これらの尺度では各尺度における最大値がスコアとなっている.
自己相互情報量は定義式にある分母が[MATH]となるため,データ総数の対数[MATH]を与え,コサイン関数,ダイズ相関係数,信頼度は[MATH]を類似度として与えてしまう.
これは, [MATH]を考慮していないことが一つの要因といえる.
また, [MATH]相関係数は定義式の分母が平方根であり, [MATH]を分子に一つ分母に二つ持っている.
このため,分子と分母が同じになり, [MATH]を類似度として与えてしまう.
つまり, [MATH]相関係数は, [MATH]が[MATH]よりも非常に大きい場合,分子と分母がほぼ同じになり,正解ではない組にも[MATH]に近い値を与えてしまう性質を持つ.
このような組が500位までに多く存在する.
このため,上位500までを見たとき,自己相互情報量,コサイン関数,ダイス相関係数,信頼度の再現率が,補完類似度,平均相互情報量,非対称平均相互情報量に比べ低いことの原因である.
[MATH]は正解ではない組「川崎市,富士市」である.
この組は補完類似度,平均相互情報量,非対称平均相互情報量,信頼度では1000位近くまたはそれ以降の順位に位置するが,その他の尺度では300位前後に位置する.
これは[MATH]を考慮しないことと, [MATH]が[MATH]に比べ大きいことが原因と考えられる.
このような組が1000位までに多く存在する.
このため,上位1000までを見たとき,自己相互情報量,コサイン関数,ダイス相関係数の再現率が,補完類似度,平均相互情報量,非対称平均相互情報量,信頼度に比べ非常に低いことの原因である.
[MATH]は正解ではない組「海部郡,静岡市」である.
この組はダイス相関係数では1101位に位置し,その他の尺度ではより低い順位に位置する.
これはパラメータ[MATH]によって[MATH]を使用しなくても下位と判定されるが, [MATH]を使用しないのは問題であり, [MATH]を使用する尺度はより下位と判定する.
[MATH]は正解である組「東京都,多摩市」である.
これは出現パターンが完全な包含関係にある組([MATH])であり,一度だけ共起出現する組([MATH])である.
このような組が補完類似度では1000位から2000位の間に多く存在するが,平均相互情報量ではパラメータ[MATH]があるため,もっと低い順位に位置する.
このことが図[REF_graph:art_data]において補完類似度と平均相互情報量の上位1000から2000の間に見られる再現率の開きの原因である.
また,非対称平均相互情報量では,パラメータ[MATH]が[MATH]となるため,定義式の第一項の値が類似度となる.
しかし,パラメータ[MATH]が第一項に含まれているため,補完類似度に比べ,低い順位に位置し,平均相互情報量より少し高い順位に位置している.
このことが平均相互情報量と同様に,図[REF_graph:art_data]において補完類似度と非対称平均相互情報量の上位1000から2000の間に見られる再現率の開きの原因である.
また,この原因は,平均相互情報量に非対称性を持たせたことによる性能向上がわずかであったことの要因である.
[MATH]は正解である組「京都府,中郡」である.
これは出現パターンが完全な包含関係ではない組([MATH])である.
この組は補完類似度,平均相互情報量,非対称平均相互情報量では300位以内に位置するが,その他の尺度では1000位以降に位置する.
特に,自己相互情報量は2437位と他のものより非常に低い順位に位置する.
これもパラメータ[MATH]が大きいことが原因である.
[MATH]は正解である組「石川県,金沢市」である.
これは出現パターンが完全な包含関係にある組([MATH])であり, 6回共起出現する組([MATH])である.
この組は補完類似度,平均相互情報量,非対称平均相互情報量では3,2位に, [MATH]相関係数,コサイン関数,ダイス相関係数では500位以内に,自己相互情報量と信頼度でも1200位以内に位置し,どの尺度でも比較的高い順位に位置している.
これはこのデータ集合において大きいパラメータ[MATH]をこの組が持つためである.
表[REF_without-comp]における以上の考察からは,このデータ集合において,補完類似度,非対称平均相互情報量,平均相互情報量が一対多関係を推定する候補として残るが,図[REF_graph:art_data]のグラフに示されるように, 1000位以降では非対称平均相互情報量と平均相互情報量の性能よりも信頼度の性能が高かった.
また,実験のために生成した四つの雑音のあるデータ集合には平均すると, 46の都道府県名が出現し,多重度は19.0であった.
言い替えると,このデータ集合には46の都道府県名で平均すると,一つの都道府県名あたり19個程度の市郡名との関係が存在するということである.
このことから,実験結果を, 46ラベルに対して多重度19を持つデータ集合における一対多関係を推定する問題において,補間類似度はもっとも高い性能を得たと見ることができる.
この節では,雑音のあるデータ集合に対する類似尺度の振る舞いを観察する.
雑音のあるデータ集合[MATH]は定義[REF_with-noise]に沿って,ラベル集合[MATH]と正解関係を要素とする関係集合[MATH]から作成した.
具体的には, [REF_sec:without]節で生成した雑音のないデータ集合[MATH]の要素[MATH]にそれぞれ雑音を追加したデータ[MATH]を作り,そのデータを要素とするデータ集合を作成した.
アルゴリズムを図[REF_algo:noise_data]に示す.
作成されたデータはたとえば, [MATH]というデータである.
これは,雑音のないデータ[MATH]に雑音「京都府」を追加した集合である.
「京都府」は[MATH]のどの要素とも正解集合[MATH]に含まれる関係を持っていない.
本論文では,この性質を持つデータの要素を雑音と呼んでいる.
このように作成したデータ[MATH]を1000個持つデータ集合[MATH]を作成した.
このデータ集合は雑音のあるデータ集合である.
これを用いて実験を行った.
雑音を各データに一つずつ入れた理由は,定義[REF_with-noise]に示すように雑音の数は4より十分小さい数であり,かつ雑音が常にあるというデータ集合全体としてみると雑音が非常に多い状況を想定したためである.
実験結果を図[REF_graph:art_noise]に示す.
この四つのグラフはそれぞれ同じ方法で作成した異なるデータ集合に用いて実験を行った結果である.
これらのグラフは,上位の組の数を横軸,そのときの再現率を縦軸とする.
この実験では,雑音があることによって,雑音のないデータ集合と比べ不一致情報が多くなる.
このため,すべての類似尺度の性能は雑音のないデータ集合と比べ,全体的に低い.
不一致情報とは,データにラベルがどちらか一方しか現われないという情報であり,パラメータ[MATH]で表される出現情報である.
これらのグラフでは,上位に位置する組において,補完類似度の再現率の高さが目立つ.
すべてのグラフにおいて,補完類似度に続き,信頼度,非対称平均相互情報量,平均相互情報量が高い性能を示している.
言い換えると,これらのグラフは雑音のあるデータ集合を用いた実験において,上位の組の数が小さいとき,補完類似度がもっとも一対多関係を推定する能力が高く,次に信頼度,非対称平均相互情報量,平均相互情報量の順に高いことを表している.
この結果はすべてのグラフにおいて同じ結果を得ている.
また,非対称平均相互情報量は平均相互情報量と比べ,一対多関係を推定する能力が高いことを表しているが,有意な差を見ることはできなかった.
雑音のないデータ集合を用いた実験と同じく,このことから,非対称性は一対多関係を推定するために有効な性質の一つと考えられるが,補完類似度と非対称平均相互情報量の性能差を見ると,非対称性を持つだけでは高い性能を得られないことがわかる.
前節と同様に,性能差の原因を定性的に調べるため,類似尺度の振る舞いに特徴的な組を選び出した.
表[REF_with-comp]は定性的な分析として,図[REF_graph:art_noise]の左上のグラフにおいて評価の対象に含まれた特徴的な6組を取り出し,それらの組に対してそれぞれの尺度で位置した順位とそのとき与えられた類似度をパラメータ[MATH]とともに示す.
[MATH]は正解ではない組「埼玉県,岩手県」である.
この組は不一致情報を多く持つ組([MATH])である.
この組はどの尺度でも3600位以降の低い順位に位置している.
[MATH]は正解ではない組「徳島市,浜田市」である.
この組もどの尺度でも3000位以降の低い順位に位置している.
不一致情報が[MATH]よりも少ないので, [MATH]よりも高い順位に位置している.
[MATH]は正解ではない組「大分市,新城市」である.
この組は一度だけ出現し,それが共起出現であった組([MATH])である.
この組はどの尺度でも[MATH]に比べ非常に高い順位に位置する.
特に,自己相互情報量, [MATH]相関係数,コサイン関数,ダイス相関係数では上位に位置する.
これらの尺度では各尺度における最大値がスコアとなっているためである.
[MATH]は正解である組「大阪府,羽曳野市」である.
この組は出現パターンが完全な包含関係にある組([MATH])である.
この組は補完類似度と信頼度では,その他の尺度と比べ高い順位に位置している.
信頼度がこの組をもっとも高い順位に位置付けている.
これは,信頼度は完全な包含関係にある組に対して最大値を与えるためである.
このデータ集合においては,信頼度が最大値を与える組は2533組あったが,そのなかには正解も不正解もあり,完全な包含関係を優遇することは必ずしも有効ではないと観測される.
[MATH]は正解である組「北海道,登別市」である.
この組は出現パターンが完全な包含関係ではない組([MATH])である.
この組も補完類似度と信頼度では,その他の尺度と比べ高い順位に位置している.
[MATH]は正解である組「岐阜県,羽島市」である.
この組は補完類似度,平均相互情報量,非対称平均相互情報量では,その他の尺度と比べ高い順位に位置している.
この組における補完類似度と平均相互情報量の順位の差は,平均相互情報量がこの組よりも[MATH]のような組に高いスコアを与えるためである.
平均相互情報量では[MATH]のような組が[MATH]よりも上位に77個も位置する.
補完類似度と非対称平均相互情報量の順位の差も同じ原因によるものである.
このことが図[REF_graph:art_noise]に見られる補完類似度とそれぞれ平均相互情報量,非対称平均相互情報量の上位500組を対象とした場合の再現率における開きの原因である.
表[REF_with-comp]における以上の考察からは,このデータ集合において,補完類似度,非対称平均相互情報量,平均相互情報量が一対多関係を推定する候補として残るが,図[REF_graph:art_noise]のグラフに示されるように, 2000位以降では非対称平均相互情報量と平均相互情報量の性能よりも信頼度の性能が高かった.
また,雑音のないデータ集合と同じく,実験のために生成した四つの雑音のあるデータ集合には平均すると, 46の都道府県名が出現し,多重度は19.0である.
言い替えると,このデータ集合には46の都道府県名で平均すると,一つの都道府県名あたり19個程度の市郡名との関係が存在するということである.
このことから,実験結果を, 46ラベルに対して多重度19を持つデータ集合における一対多関係を推定する問題において,補間類似度はもっとも高い性能を得たと見ることができる.
この節では,補完類似度の性能が多重度にどう依存するのかを実験する.
具体的には,人工的に一対多関係の正解集合を作成し,その一対多の程度を変化させ,正解集合から生成したデータに対する類似尺度の振る舞いを観察する.
人工的なデータでは,正解集合から公平にサンプルされるので,正解集合の一対多の比率と多重度は一致する.
実験に用いる正解関係[MATH]を要素とする関係集合[MATH]とデータ集合[MATH]は図[REF_algo:randomnum-data]に示すアルゴリズムを用いて作成した.
アルゴリズムに現れる[MATH]はそれぞれ[MATH]において[MATH]であるラベルの数,一つの[MATH]と関係を持つ[MATH]の数である.
すなわち, [MATH]はデータ集合[MATH]が持つ多重度である.
たとえば, [MATH], [MATH]とした場合,作成される正解とする関係集合[MATH]は25種類の[MATH]を持ち,それぞれの[MATH]が5種類の関係,つまり[MATH]を5個持つような125対を要素とする集合である.
これは, [MATH]に[MATH]といった一つの[MATH]に対して五つの関係があることを意味する.
このような集合から作成されるデータ集合[MATH]の要素であるデータはたとえば, [MATH]というデータである.
これは, [MATH]から[MATH]と[MATH]の二つを取り出し,その二つの関係に含まれるラベルと関係を持たないラベル45を追加したデータである.
[REF_sec:without]節と[REF_sec:with]節の実験で用いたデータ集合は, [MATH], [MATH]であったので,その前後の値で実験を行う.
実験結果は, [MATH]を25としたとき[MATH]を1,2,5,10,20,50,100,200と変化させた場合と, [MATH]を50としたとき[MATH]を1,2,5,10,20,50,100,200と変化させた場合の推定能力である.
推定能力はR-精度によって,評価した.
実験結果を図[REF_graph:dup25], [REF_graph:dup50]に示す.
これらのグラフは,多重度を横軸,そのときのR-精度を縦軸とする.
図[REF_graph:dup25]は25ラベルに対して多重度を変化させた場合の精度変化を示し,図[REF_graph:dup50]は50ラベルに対して多重度を変化させた場合の精度変化を示す.
図[REF_graph:dup25]では,多重度2までは実験に使用した類似尺度の精度はすべて同じであるが,この時点で自己相互情報量は他の尺度より精度が低下し始める.
多重度10から次第に精度の差が現れ,この時点以降の多重度では補完類似度の精度がもっとも高い.
補完類似度に続き,信頼度,非対称平均相互情報量,平均相互情報量の順に高い精度を示している.
また,図[REF_graph:dup50]では,多重度5から精度の差が現れ,多重度100までは補完類似度の精度がもっとも高く,多重度200では補完類似度,信頼度,平均相互情報量,非対称平均相互情報量の精度は等しい.
図[REF_graph:dup50]においても図[REF_graph:dup25]と同様,補完類似度に続き,信頼度,非対称平均相互情報量の精度,平均相互情報量の順に高い精度を示している.
この二つのグラフから,多重度が1, 2程度であれば,実験に使用したどの類似尺度を用いても関係を推定する能力に差はないが,多重度が高い場合,補完類似度は他の類似尺度よりも一対多関係を推定する能力が高いことがわかる.
このことから,補完類似度は一対多関係を推定する類似尺度として有効であることが示唆される.
この節の実験では,現実の新聞記事から日本の地名を抽出し,データ集合を作成した.
実験は次の流れで行う.
まず,新聞記事の集合からラベル集合[MATH]に含まれる地名を一つでも持つ新聞記事をデータ[MATH]として抽出し,その新聞記事の集合を観察できるデータ集合[MATH]とする.
次に,地名毎に出現パターンに対応する二値ベクトルを作成し,ラベル間の出現パターンの類似度を測定する.
この測定値をもって,地名間にある一対多関係の推定とする.
データ集合の作成方法を説明する.
新聞記事の集合は毎日新聞一年分とし,七年分に対して年版毎にデータ集合を作成した[CITE].
まず,日本語形態素解析システム「茶筌」[CITE]に地名辞書を追加した後,新聞記事の形態素解析を行い,その結果から地名と,その地名を含む記事の識別番号を抽出した.
次に,記事の識別番号をデータの識別番号[MATH]として扱い,その記事に含まれる地名を要素とする集合を作り,その集合をデータ[MATH]とした.
このように作成した[MATH]を要素するデータ集合を観測できる集合[MATH]とした.
本論文では,この方法で年版毎に作成した集合に対して,一対多関係の推定を行った.
ここで,このコーパス中には単に「大阪」とだけ出現し,これが「大阪府」と「大阪市」のどちらを表すのかわからない地名が出現する.
この地名についてはどちらかに解釈し正解であれば正解とした.
「大阪府,大阪」の場合,「大阪」を「大阪市」と解釈し,また,「大阪,大阪市」の場合,これは「大阪」を「大阪府」と解釈し,正解とした.
実験の前に,新聞記事に一つの都道府県名に対して,平均的にいくつの市郡名との関係が実際に出現するかを調査した.
極端な場合,実質的に県庁所在地だけしか出現しないならば,コーパス上では多重度は1となってしまうこともありうるため,実際の地名データの多重度を調査しておく必要がある.
実データにおける多重度を計測した結果,表[REF_tab:dupchk]に示されるように,すべての年度において多重度は20前後であった.
このことから,本節の実験を,都道府県名50に対して多重度20を持つ実データからラベルの一対多関係を推定する問題と見ることができる.
評価においては,正解関係1239個を用いて正解判定を行った.
実験では,それぞれの類似尺度を用いて,各年版に対するデータ集合[MATH]に含まれるすべての地名の組合せについて類似度を計算する.
その組合せは非常に多く,すべてを評価対象とすることは現実的ではない.
そこで,上位1239個についての適合率をとり,性能を比較することにした.
この比率はR-精度と呼ばれ,情報検索などで用いられる性能尺度である.
次に適合率の定義を示す.
年版毎における各類似尺度のR-精度を表[REF_r_prec2]に示す.
表[REF_r_prec2]をグラフで表したものが図[REF_r_prec]である.
表[REF_r_prec2]とこのグラフは,すべての年版において補完類似度がもっとも高い性能を持つことを表している.
{
}
人工的に生成したデータでは,信頼度が非対称平均相互情報量と平均相互情報量よりも性能が高い場合があったが,実データでは,非対称平均相互情報量と平均相互情報量が信頼度よりも性能が高い.
言い換えると,実データを用いた実験において,補完類似度がもっとも一対多関係を推定する能力が高く,次に非対称平均相互情報量,平均相互情報量,信頼度の順に高いことを表している.
この結果はすべての年版において言えることであるため.
また,人工的に生成したデータと同様に,非対称平均相互情報量は平均相互情報量と比べ,一対多関係を推定する能力が高いことを表しているが,有意な差を見ることはできなかった.
しかし,このことから,非対称性は一対多関係を推定するために有効な性質の一つと考えられるが,補完類似度と非対称平均相互情報量の性能差を見ると,非対称性を持つだけでは高い性能を得られないことがわかる.
また,多重度に関して見ると,ラベル50に対して多重度20を持つ実データにおいて,前節に示した多重度に関する実験結果と同じく,補完類似度が有効である結果を得ている.
表[REF_real-comp]は定性的な分析として, 93年版において評価の対象に含まれた特徴的な6組を取り出し,それらの組に対してそれぞれの尺度で位置した順位とそのとき与えられた類似度をパラメータ[MATH]とともに示す.
ただし,表に現れる`*'はその尺度においてはその組が評価の対象外であったことを表す.
[MATH]は正解ではない組「湯沢市,中野市」である.
この組は一度だけ出現し,それが共起出現であった組([MATH])である.
この組は自己相互情報量, [MATH]相関係数,コサイン関数,ダイス相関係数では評価対象とした組内に含まれているが,補完類似度,平均相互情報量,非対称平均相互情報量,信頼度では含まれていない.
これは,自己相互情報量, [MATH]相関係数,コサイン関数,ダイス相関係数ではこの組に最大値をスコアとして与えるためである.
一方,信頼度ではこの組にスコアとして最大値が与えるが,この組は評価対象とした上位1239組内に含まれていない.
これは,このデータ集合には信頼度が最大値を与えてしまう組が多く存在することを表している.
[MATH]は正解ではない組「秋田,青森」である.
この組は自己相互情報量と信頼度では評価対象した組内に含まれてないが,その他の尺度では含まれている.
これは,正解である[MATH]に比べ,パラメータ[MATH]が非常に大きいことが原因である.
また,隣接する県であることも影響し,この組が抽出された可能性もある.
[MATH]は正解である組「岩手県,盛岡市」である.
この組は補完類似度,平均相互情報量,非対称平均相互情報量では評価対象とした組内に含まれているが,その他の尺度では含まれていない.
また,自己相互情報量と信頼度以外の尺度では正解ではない[MATH]よりも低い順位に位置している.
これは,正解ではない[MATH]に比べ,パラメータ[MATH]が小さいことが原因である.
[MATH]は正解である組「愛媛県,温泉郡」である.
この組は出現パターンが完全な包含関係にある組([MATH])である.
この組は補完類似度と信頼度では評価対象とした組内に含まれているが,その他の尺度では含まれていない.
信頼度がこの組をもっとも高い順位に位置付けている.
これは,信頼度は完全な包含関係にある組に対して最大値を与えるためである.
信頼度は[MATH]のようにパラメータ[MATH]が[MATH]の場合,最大値を与える.
93年版のデータ集合においては,信頼度が最大値を与える組は[MATH]を含め4793組あった.
このうち[MATH]のような組は788組あった.
[MATH]は正解である組「静岡,浜松」である.
この組は補完類似度,平均相互情報量,非対称平均相互情報量では評価対象とした組内に含まれているが,その他の尺度では含まれていない.
また,この組は補完類似度と信頼度以外の尺度では正解ではない[MATH]よりも低い順位に位置している.
これは[MATH]に比べ,パラメータ[MATH]が小さく, [MATH]が大きいことが原因である.
このことより,一対多関係を推定する問題における尺度は不一致情報を緩和することが必要であると考えられる.
[MATH]は正解である組「大阪,大阪市」である.
この組は実データにおいてパラメータ[MATH]がもっとも大きい組である.
この組は信頼度では評価対象とした組内に含まれていないが,その他の尺度では含まれている.
これは[MATH]のような[MATH]が[MATH]の組が多いことと,この組が大きい[MATH]を持つことが原因である.
表[REF_real-comp]における以上の考察から,実データにおいて,補完類似度が一対多関係を推定することにもっとも適していると見ることができる.
また,人工的に生成したデータ集合においては信頼度の性能が非対称平均相互情報量と平均相互情報量より高かったが,実データにおいては非対称平均相互情報量と平均自己相互情報量のほうが高い.
これは,実データが偶然共起出現し,完全な包含関係である組([MATH])を非常に多く抽出することが原因である.
93年版のデータ集合においては,このような組は4005組あった.
以上のことから,一対多関係を推定する問題において,補完類似度は有効であると考える.
