本手法では，日本語解析系Quick Japanese Parser（以下，ＱＪＰ）[CITE]をテキスト音声合成システムの構文解析に利用する．
先に述べたように，一般的な構文解析で，実用レベルの開発を難しくしている要因に，詳細かつ膨大な（場合によっては意味まで踏み込んだ）規則を要する，生成される候補が多い，計算量も多い，などの問題がある．
また，その解析精度も形態素解析技術に比べると処理が複雑であるため，なかなか実用レベルになりにくい．
しかし，ＱＪＰは，日本語解析を要する応用系システムへの組み込みが容易な言語処理ライブラリであり，効率的な処理が実現可能である．
ＱＪＰは字種の特徴を利用した小規模辞書ベースの形態素解析系と，形態素情報ベースの規則による構文解析系の２つの処理系で構成されている．
主に形態素情報による規則を用いて解析処理を行なうため，シソーラスや意味情報など，構築およびメインテナンスに労力を要する膨大な言語知識データは不要であることを大きな特徴としている．
構文解析系は，一文毎に単語列を文節にまとめる際，文節にはその構成単語の品詞情報を利用して文節属性が設定される．
その文節属性や品詞情報に基づき係り受け可能文節対を検出し，非交差規則，再近接文節選択をベースに，様々なヒューリスティックを用いた例外処理も用いて，尤もらしい係り受け文節対を確定する．
品詞情報とその組み合わせで構文解析処理を行なうため，解析規則等のデータ開発コストが抑えられ，軽量さ，高速さを実現できている．
また，長文に対しての頑健さも兼ね備えているため音声合成向けのテキスト解析に導入しやすい．
さらに，係り受け処理の単位が一文であり，文節数が限定されないため，対象となった文中の本来の文法的区切り位置を得ることが可能である．
構文解析処理を導入することで，利用可能なテキスト情報が大幅に増える．
これらの情報をどのように利用するかで様々な手法が考えられ得る．
まず，形態素解析結果から得られるポーズ挿入処理に有益なテキスト情報は，以下の通りである．
句読点位置情報
語彙レベルの定性的情報
感動詞，接続詞，提題の意味の「は」の直後にはポーズが入りやすい，などの品詞や語特有の性質
文節モーラ長
局所的な連続文節間の関係
隣接を含む局所的な連続した数文節間における係り受け関係の有無
さらに，ＱＪＰの構文解析系の解析結果から得られるポーズ挿入処理に有益なテキスト情報は以下の通りである．
文節の属性
係り受け文節対
係り受け文節間の距離
隣接文節間の係り受け距離を１としてカウントする（一文中の文節数＞距離＞０）
係り受けの関係
係り受け文節対の各属性に基づく
そこで，まず予備調査として，先行研究[CITE]で取り扱われている，係り受け文節間の距離を用いてポーズ挿入実験を行ない，その評価結果に基づいて実際のポーズ挿入処理アルゴリズムの設計を行なうことにした．
本手法の予備調査のために，係り受け文節間の距離のみを用いたポーズ挿入実験を行なった[CITE]．
以下，予備実験について述べる．
実験は下記の手順で行なった．
使用したサンプルテキストは日本電子工業振興協会の報告書[CITE]の付録の評価文の抜粋および小説[CITE]の抜粋を用いた．
また，比較対象は形態素解析と隣接間係り受け処理を用いたポーズ挿入処理を実装している既製のテキスト音声合成ソフトウェアパッケージの出力である．
サンプルテキストを比較対象のテキスト音声合成ソフトに入力し，ポーズ記号，アクセント句区切り記号を含む発音記号列を自動的に作成する
同ソフトにおいて同じサンプルテキストを発音記号列に自動的に変換した後，挿入されたポーズ記号，アクセント句区切り記号を取り除き，「読み」のみの記号列を作成する
ＱＪＰに同じサンプルテキストを入力し，形態素解析＆構文解析結果を得る
ＱＪＰの出力結果から係り受け文節を抽出し，係り文節から受け文節までの距離を表[REF_tab:ypau]の通り各ポーズレベルへ対応づける
予め作成しておいた(２)の読み記号列に(４)の結果を反映させ（対応ポーズレベルをポーズ記号に変換して手入力），文節間距離情報を反映した発音記号列を作成する
比較対象のテキスト音声合成ソフトが自動作成した(１)の発音記号列と，文節間距離情報を反映した(５)の発音記号列を比較・評価する
評価はポーズ挿入正解率，ポーズ挿入精度向上率，ポーズ挿入精度降下率という３つの観点で行なった．
ここで言うポーズ挿入正解率とは，期待ポーズ位置数に対して期待通りのポーズが挿入された割合，ポーズ挿入精度向上率とは，比較対象のテキスト音声合成ソフトで失敗した箇所が文節間距離情報を反映した方法で成功している割合，ポーズ挿入精度降下率とは，比較対象のテキスト音声合成ソフトで成功していた箇所が文節間距離情報を反映した方法で失敗した割合と定義している．
評価結果を表[REF_tab:yhyoka]に示す．
評価結果より，係り受け文節間の距離だけでも形態素解析と隣接間係り受け処理を用いたポーズ挿入処理を実装したシステムのポーズ挿入誤りを大幅にカバーできるということが明らかになった．
一方，ポーズ挿入精度降下の原因を調査すると，多くはＱＪＰの形態素解析誤りのため，構文解析処理に失敗し，正確な係り受け文節間の距離が得られなかったことに起因していた．
しかし，正確な係り受け文節間の距離が得られても，以下のような問題点が明らかになった．
●入力テキスト
「複雑な技術だけが生み出すことのできる種類の優美さだった．
」
●実験結果出力された発音記号列
フクザツナ/ギ’ジュツダケガ/ウミダ’ス/コト’ノ/デキ’ル/
シュ’ルイノ/ユービ’サダッタ．
上記例文では，各文節が直後に係る（距離＝１）係り受け関係が連続しており，各アクセント句境界に同じアクセント句区切りが挿入されてしまった．
このような場合，読み上げが単調になるため，聞き手側には構文的区切り位置がどこにあるのか分からないなど，不自然さが残る．
構文解析により構文的区切り位置の情報を得ることができても，実際には上記例文のように，距離＝１の係り受けが連続する場合が多い[CITE]ため，係り受け文節間の距離を単純にポーズ長へマッピングするだけでは，実装上まだ不足であり，ポーズ長の制御のための何らかのテキスト情報を取り入れる必要がある．
そこで，次に，文献[CITE]を受けて，テキスト情報として係り受け文節間の距離に加えて，係り受けの関係を利用することにした．
さらに，語句や呼気段落における定性的な規則も用いることにした．
本稿で提案するポーズ挿入手法では，基本的にテキスト中の各文節末には何らかの韻律句境界があると定義する．
そして，各韻律句境界にポーズ挿入規則に基づき，ポーズ挿入が生じ易いかどうかの指標をポーズ挿入尤度として設定する．
規則により全ての韻律句境界にポーズ挿入尤度が設定されたら，ポーズ挿入尤度の高い境界から順に，適当なレベルのポーズを挿入する．
ポーズ挿入規則は，文献[CITE]に基づき，係り受け文節間の距離に基づく規則と係り受けの関係に基づく規則と，語句や呼気段落における定性的な規則の３規則にまとめた．
係り受け文節間距離(d)に基づく規則
係り受け文節間距離(d)とは，着目している文節位置直後から，その係り先文節までに含まれる文節の数（係り先文節を含む）とする．
従って，隣接文節はd＝１となる．
dはそのままポーズ挿入尤度とする（表[REF_tab:pau1]）．
テキスト中にポーズを挿入する際は，尤度に対応したポーズ長レベルを予め設定しておく必要がある．
ポーズ長レベルはシステムの用途によって変更可能である．
係り受けの関係による規則
予備調査の結果，上記規則１だけでは，ポーズ長が一定で単調，構文のまとまりがわかりにくい読み上げとなる場合があることが明らかになった．
そこで，本手法では規則１でd＝１の場合に限り，更に係り受けの関係に基づくポーズ挿入尤度を設定することにした．
ＱＪＰ構文解析系の係り受けの関係はかなり多くのバリエーションがあるが，本手法ではこれらを文法に即して大まかに６種に大分類し，対応するポーズ挿入尤度を持たせた（表[REF_tab:pau2]）．
ポーズ挿入尤度の高低は隣接文節関係の知見より以下のように設定した．
D−T−H−Y−N−Q
尤度(低）　　[MATH]　　尤度(高）
規則２ではポーズ挿入尤度はアルファベット１文字のフラグで表記しており，規則１同様，テキスト中にポーズを挿入する際は，尤度に対応した基準のポーズ長レベルを予め設定しておく必要がある．
語句や呼気段落における定性的な規則
句点の位置には文末相当のポーズを挿入する，読点の位置にはそれ相応のポーズを挿入する，など従来研究の知見や形態情報から得られる定性的な規則も併用する．
これらは文献[CITE]で挙げられているテキスト情報「句読点」「文節位置」の他，文節を構成する単語の語彙情報も含んでいる．
また，テキスト中にポーズ挿入尤度の高い境界から順に，実際に適当なレベルのポーズを挿入した際，同レベルのポーズに挟まれた発話区分のモーラ数が呼気段落を考慮して予め任意に設定した一定のモーラ長を超過した場合は，その間にある各文節境界のポーズ挿入尤度を参照し，最もポーズ挿入尤度が高い境界位置のポーズ長レベルを格上げし，同レベルのポーズを挿入する．
[REF_kisokupose]節で述べたポーズ挿入規則に基づき，入力テキストに以下の手順でポーズ位置とポーズ長を設定する．
文節間距離の算出
係り受け成立が確定した文節間のdを算出する
dに対応するポーズ挿入尤度設定
規則１に基づき，各文節末（＝アクセント句末）へdに応じたポーズ挿入尤度を設定する
係り受けの関係によるポーズ挿入尤度設定
d＝１の係り受け文節間にのみ，規則２に基づき，係り受けの関係によるポーズ挿入尤度（基準値)を設定する
句読点位置へのポーズ挿入尤度設定
句点の位置に文末相当の尤度を，読点の位置に適当な尤度を挿入する
各境界へのポーズ長の設定
各文節末にポーズ挿入尤度が設定されたら，アクセント結合処理などを経て，ポーズ挿入尤度の高い境界から順に予め設定しておいた尤度に対応した適当なレベルの長さのポーズを挿入する
発話区分のモーラ長限界によるポーズ長レベルの格上げ
同レベルのポーズに挟まれた発話区分のモーラ長が呼気段落を考慮して予め任意に設定した一定のモーラ長を超過した場合は，その間にある各文節境界のポーズ挿入尤度を参照し，最もポーズ挿入尤度が高い境界位置のポーズ長レベルを格上げして，同レベルのポーズを挿入する
前節で述べたポーズ挿入処理を，実際にＰＣ上で実動するテキスト音声合成システムへ実装した．
ＱＪＰの形態素解析系では，単語辞書を利用せず，字種の特徴を利用して単語切りをしており，音声合成に必要な読み・アクセント情報を得る手段が無い．
また，漢字複合語列を各単語に分割しないため，後処理にアクセント結合処理が控えている音声合成の言語処理では問題になる．
そこで，本システムへの実装にあたり，形態素解析には読みやアクセント情報記載の単語辞書を利用する形態素解析モジュールを用い，その出力をＱＪＰの構文解析モジュールへ入力できるようなシステム構成を考えることにした．
形態素解析処理に用いる品詞の体系と構文解析処理に用いる品詞の体系が異なる場合，形態素解析処理の出力結果をそのまま構文解析処理の入力とできないことがしばしばある．
そのような場合には，間に品詞変換処理が必要となるが，本システムでも同様に，ＱＪＰ構文解析系を利用するために，品詞変換モジュールを併せて開発した[CITE]．
本システムでは構成上，品詞変換モジュールとＱＪＰ構文解析モジュールを合わせて，拡張ＱＪＰ構文解析系と呼ぶ．
また，後続処理である，アクセント結合モジュールとポーズ挿入モジュールを合わせてフレージング処理系と呼ぶ．
本システム構成を図[REF_fig:sys]に示す．
本手法では，日本語解析系Quick Japanese Parser（以下，ＱＪＰ）[CITE]をテキスト音声合成システムの構文解析に利用する．
先に述べたように，一般的な構文解析で，実用レベルの開発を難しくしている要因に，詳細かつ膨大な（場合によっては意味まで踏み込んだ）規則を要する，生成される候補が多い，計算量も多い，などの問題がある．
また，その解析精度も形態素解析技術に比べると処理が複雑であるため，なかなか実用レベルになりにくい．
しかし，ＱＪＰは，日本語解析を要する応用系システムへの組み込みが容易な言語処理ライブラリであり，効率的な処理が実現可能である．
ＱＪＰは字種の特徴を利用した小規模辞書ベースの形態素解析系と，形態素情報ベースの規則による構文解析系の２つの処理系で構成されている．
主に形態素情報による規則を用いて解析処理を行なうため，シソーラスや意味情報など，構築およびメインテナンスに労力を要する膨大な言語知識データは不要であることを大きな特徴としている．
構文解析系は，一文毎に単語列を文節にまとめる際，文節にはその構成単語の品詞情報を利用して文節属性が設定される．
その文節属性や品詞情報に基づき係り受け可能文節対を検出し，非交差規則，再近接文節選択をベースに，様々なヒューリスティックを用いた例外処理も用いて，尤もらしい係り受け文節対を確定する．
品詞情報とその組み合わせで構文解析処理を行なうため，解析規則等のデータ開発コストが抑えられ，軽量さ，高速さを実現できている．
また，長文に対しての頑健さも兼ね備えているため音声合成向けのテキスト解析に導入しやすい．
さらに，係り受け処理の単位が一文であり，文節数が限定されないため，対象となった文中の本来の文法的区切り位置を得ることが可能である．
構文解析処理を導入することで，利用可能なテキスト情報が大幅に増える．
これらの情報をどのように利用するかで様々な手法が考えられ得る．
まず，形態素解析結果から得られるポーズ挿入処理に有益なテキスト情報は，以下の通りである．
句読点位置情報
語彙レベルの定性的情報
感動詞，接続詞，提題の意味の「は」の直後にはポーズが入りやすい，などの品詞や語特有の性質
文節モーラ長
局所的な連続文節間の関係
隣接を含む局所的な連続した数文節間における係り受け関係の有無
さらに，ＱＪＰの構文解析系の解析結果から得られるポーズ挿入処理に有益なテキスト情報は以下の通りである．
文節の属性
係り受け文節対
係り受け文節間の距離
隣接文節間の係り受け距離を１としてカウントする（一文中の文節数＞距離＞０）
係り受けの関係
係り受け文節対の各属性に基づく
そこで，まず予備調査として，先行研究[CITE]で取り扱われている，係り受け文節間の距離を用いてポーズ挿入実験を行ない，その評価結果に基づいて実際のポーズ挿入処理アルゴリズムの設計を行なうことにした．
本手法の予備調査のために，係り受け文節間の距離のみを用いたポーズ挿入実験を行なった[CITE]．
以下，予備実験について述べる．
実験は下記の手順で行なった．
使用したサンプルテキストは日本電子工業振興協会の報告書[CITE]の付録の評価文の抜粋および小説[CITE]の抜粋を用いた．
また，比較対象は形態素解析と隣接間係り受け処理を用いたポーズ挿入処理を実装している既製のテキスト音声合成ソフトウェアパッケージの出力である．
サンプルテキストを比較対象のテキスト音声合成ソフトに入力し，ポーズ記号，アクセント句区切り記号を含む発音記号列を自動的に作成する
同ソフトにおいて同じサンプルテキストを発音記号列に自動的に変換した後，挿入されたポーズ記号，アクセント句区切り記号を取り除き，「読み」のみの記号列を作成する
ＱＪＰに同じサンプルテキストを入力し，形態素解析＆構文解析結果を得る
ＱＪＰの出力結果から係り受け文節を抽出し，係り文節から受け文節までの距離を表[REF_tab:ypau]の通り各ポーズレベルへ対応づける
予め作成しておいた(２)の読み記号列に(４)の結果を反映させ（対応ポーズレベルをポーズ記号に変換して手入力），文節間距離情報を反映した発音記号列を作成する
比較対象のテキスト音声合成ソフトが自動作成した(１)の発音記号列と，文節間距離情報を反映した(５)の発音記号列を比較・評価する
評価はポーズ挿入正解率，ポーズ挿入精度向上率，ポーズ挿入精度降下率という３つの観点で行なった．
ここで言うポーズ挿入正解率とは，期待ポーズ位置数に対して期待通りのポーズが挿入された割合，ポーズ挿入精度向上率とは，比較対象のテキスト音声合成ソフトで失敗した箇所が文節間距離情報を反映した方法で成功している割合，ポーズ挿入精度降下率とは，比較対象のテキスト音声合成ソフトで成功していた箇所が文節間距離情報を反映した方法で失敗した割合と定義している．
評価結果を表[REF_tab:yhyoka]に示す．
評価結果より，係り受け文節間の距離だけでも形態素解析と隣接間係り受け処理を用いたポーズ挿入処理を実装したシステムのポーズ挿入誤りを大幅にカバーできるということが明らかになった．
一方，ポーズ挿入精度降下の原因を調査すると，多くはＱＪＰの形態素解析誤りのため，構文解析処理に失敗し，正確な係り受け文節間の距離が得られなかったことに起因していた．
しかし，正確な係り受け文節間の距離が得られても，以下のような問題点が明らかになった．
●入力テキスト
「複雑な技術だけが生み出すことのできる種類の優美さだった．
」
●実験結果出力された発音記号列
フクザツナ/ギ’ジュツダケガ/ウミダ’ス/コト’ノ/デキ’ル/
シュ’ルイノ/ユービ’サダッタ．
上記例文では，各文節が直後に係る（距離＝１）係り受け関係が連続しており，各アクセント句境界に同じアクセント句区切りが挿入されてしまった．
このような場合，読み上げが単調になるため，聞き手側には構文的区切り位置がどこにあるのか分からないなど，不自然さが残る．
構文解析により構文的区切り位置の情報を得ることができても，実際には上記例文のように，距離＝１の係り受けが連続する場合が多い[CITE]ため，係り受け文節間の距離を単純にポーズ長へマッピングするだけでは，実装上まだ不足であり，ポーズ長の制御のための何らかのテキスト情報を取り入れる必要がある．
そこで，次に，文献[CITE]を受けて，テキスト情報として係り受け文節間の距離に加えて，係り受けの関係を利用することにした．
さらに，語句や呼気段落における定性的な規則も用いることにした．
本稿で提案するポーズ挿入手法では，基本的にテキスト中の各文節末には何らかの韻律句境界があると定義する．
そして，各韻律句境界にポーズ挿入規則に基づき，ポーズ挿入が生じ易いかどうかの指標をポーズ挿入尤度として設定する．
規則により全ての韻律句境界にポーズ挿入尤度が設定されたら，ポーズ挿入尤度の高い境界から順に，適当なレベルのポーズを挿入する．
ポーズ挿入規則は，文献[CITE]に基づき，係り受け文節間の距離に基づく規則と係り受けの関係に基づく規則と，語句や呼気段落における定性的な規則の３規則にまとめた．
係り受け文節間距離(d)に基づく規則
係り受け文節間距離(d)とは，着目している文節位置直後から，その係り先文節までに含まれる文節の数（係り先文節を含む）とする．
従って，隣接文節はd＝１となる．
dはそのままポーズ挿入尤度とする（表[REF_tab:pau1]）．
テキスト中にポーズを挿入する際は，尤度に対応したポーズ長レベルを予め設定しておく必要がある．
ポーズ長レベルはシステムの用途によって変更可能である．
係り受けの関係による規則
予備調査の結果，上記規則１だけでは，ポーズ長が一定で単調，構文のまとまりがわかりにくい読み上げとなる場合があることが明らかになった．
そこで，本手法では規則１でd＝１の場合に限り，更に係り受けの関係に基づくポーズ挿入尤度を設定することにした．
ＱＪＰ構文解析系の係り受けの関係はかなり多くのバリエーションがあるが，本手法ではこれらを文法に即して大まかに６種に大分類し，対応するポーズ挿入尤度を持たせた（表[REF_tab:pau2]）．
ポーズ挿入尤度の高低は隣接文節関係の知見より以下のように設定した．
D−T−H−Y−N−Q
尤度(低）　　[MATH]　　尤度(高）
規則２ではポーズ挿入尤度はアルファベット１文字のフラグで表記しており，規則１同様，テキスト中にポーズを挿入する際は，尤度に対応した基準のポーズ長レベルを予め設定しておく必要がある．
語句や呼気段落における定性的な規則
句点の位置には文末相当のポーズを挿入する，読点の位置にはそれ相応のポーズを挿入する，など従来研究の知見や形態情報から得られる定性的な規則も併用する．
これらは文献[CITE]で挙げられているテキスト情報「句読点」「文節位置」の他，文節を構成する単語の語彙情報も含んでいる．
また，テキスト中にポーズ挿入尤度の高い境界から順に，実際に適当なレベルのポーズを挿入した際，同レベルのポーズに挟まれた発話区分のモーラ数が呼気段落を考慮して予め任意に設定した一定のモーラ長を超過した場合は，その間にある各文節境界のポーズ挿入尤度を参照し，最もポーズ挿入尤度が高い境界位置のポーズ長レベルを格上げし，同レベルのポーズを挿入する．
[REF_kisokupose]節で述べたポーズ挿入規則に基づき，入力テキストに以下の手順でポーズ位置とポーズ長を設定する．
文節間距離の算出
係り受け成立が確定した文節間のdを算出する
dに対応するポーズ挿入尤度設定
規則１に基づき，各文節末（＝アクセント句末）へdに応じたポーズ挿入尤度を設定する
係り受けの関係によるポーズ挿入尤度設定
d＝１の係り受け文節間にのみ，規則２に基づき，係り受けの関係によるポーズ挿入尤度（基準値)を設定する
句読点位置へのポーズ挿入尤度設定
句点の位置に文末相当の尤度を，読点の位置に適当な尤度を挿入する
各境界へのポーズ長の設定
各文節末にポーズ挿入尤度が設定されたら，アクセント結合処理などを経て，ポーズ挿入尤度の高い境界から順に予め設定しておいた尤度に対応した適当なレベルの長さのポーズを挿入する
発話区分のモーラ長限界によるポーズ長レベルの格上げ
同レベルのポーズに挟まれた発話区分のモーラ長が呼気段落を考慮して予め任意に設定した一定のモーラ長を超過した場合は，その間にある各文節境界のポーズ挿入尤度を参照し，最もポーズ挿入尤度が高い境界位置のポーズ長レベルを格上げして，同レベルのポーズを挿入する
前節で述べたポーズ挿入処理を，実際にＰＣ上で実動するテキスト音声合成システムへ実装した．
ＱＪＰの形態素解析系では，単語辞書を利用せず，字種の特徴を利用して単語切りをしており，音声合成に必要な読み・アクセント情報を得る手段が無い．
また，漢字複合語列を各単語に分割しないため，後処理にアクセント結合処理が控えている音声合成の言語処理では問題になる．
そこで，本システムへの実装にあたり，形態素解析には読みやアクセント情報記載の単語辞書を利用する形態素解析モジュールを用い，その出力をＱＪＰの構文解析モジュールへ入力できるようなシステム構成を考えることにした．
形態素解析処理に用いる品詞の体系と構文解析処理に用いる品詞の体系が異なる場合，形態素解析処理の出力結果をそのまま構文解析処理の入力とできないことがしばしばある．
そのような場合には，間に品詞変換処理が必要となるが，本システムでも同様に，ＱＪＰ構文解析系を利用するために，品詞変換モジュールを併せて開発した[CITE]．
本システムでは構成上，品詞変換モジュールとＱＪＰ構文解析モジュールを合わせて，拡張ＱＪＰ構文解析系と呼ぶ．
また，後続処理である，アクセント結合モジュールとポーズ挿入モジュールを合わせてフレージング処理系と呼ぶ．
本システム構成を図[REF_fig:sys]に示す．
