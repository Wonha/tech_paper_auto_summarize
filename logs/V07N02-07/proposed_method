情報検索の方法

\subsection{問題設定}

本研究での情報検索の問題設定は，
日本で開催された情報検索コンテスト IREX\cite{irex1_Sekine_eng} の
ものと全く同じである．
本研究で検索の対象とするデータは，
IREX で用いられた
毎日新聞94年95年の二年分の新聞記事データである．
このデータに対して日本語文で記述された検索要求を
満足する文書を検索する．

日本語文で記述された検索要求の例を以下に示す(IREXの予備試験の課題より)．

\vspace{0.1cm}

\begin{quote}
\begin{verbatim}
<TOPIC>
<TOPIC-ID>1001</TOPIC-ID>
<DESCRIPTION>企業合併</DESCRIPTION>
<NARRATIVE>記事には企業合併成立の発表が述べられており、その合併に参加する企業の名前が認定できる事。また、合併企業の分野、目的など具体的内容のいずれかが認定できる事。企業合併は企業併合、企業統合、企業買収も含む。</NARRATIVE>
</TOPIC>
\end{verbatim}
\end{quote}

\vspace{0.1cm}

ここで TOPIC-ID で囲まれた数字は設問番号を意味し，
DESCRIPTION が検索課題を端的に示すフレーズ，
NARRATIVE が検索要求を厳密に規定する説明文となっている．
これをシステムがうけとり，例えば以下のような記事を
検索対象としてかえせばよい．

\vspace{0.1cm}

\begin{quote}
\begin{verbatim}
<DOCNO>950217091</DOCNO>
<SECTION>経済</SECTION>
<AE>無</AE>
<WORDS>288</WORDS>
<HEADLINE>キグナス石油精製を東燃が１００％子会社化</HEADLINE>
<TEXT>
　東燃は十六日、系列のキグナス石油精製（資本金十億円、本社・川崎市、森利英社長）を一〇〇％子会社化すると発表した。同社は東燃が七割、ニチモウが三割出資しており、東燃はニチモウが所有する全株式六十万株を百二十五億円で買収する。
　東燃は石油精製専業大手で、設備シェアは一九九三年度末で八％。キグナス石油精製を加えると九・四％にシェアがアップする。
　ニチモウは山口県の工場閉鎖などに伴う経費ねん出のため株式譲渡を決断した。
　石油業界は来年春の特定石油製品輸入暫定措置法（特石法）廃止をにらみ、コスト削減と効率化を進めており、グループ企業統合を含む再編の動きがいよいよ本格化してきた。
</TEXT>
</DOC>
\end{verbatim}
\end{quote}

\vspace{0.1cm}

この記事のように SECTION には経済面などの新聞の誌面情報が， HEADLINE には
記事のタイトルが，TEXT には記事の本文がある．
IREX では，各設問に対し300個の記事を順位つきで提出することになっており，
各設問おおよそ50個程度ある正解を上位にたくさん含むような結果を
提出すれば，よりよい精度が得られるようになっている．
情報検索の精度の評価には，TREC の trec\_eval というツール\cite{trec_eval}を利用し，
コンテストの評価では trec\_eval で得られる評価値のうち  
R-Precision という評価値(正解記事数分だけ検索した時に
正解の記事が含まれている割合)が用いられている．

\subsection{検索方法の概略}
\label{sec:robertson}

先に述べたとおり，われわれの情報検索の方法では基本的に，
確率型手法の一つの Robertson の2-ポアソンモデル\cite{2poisson}を用いる\footnote{IREX のコンテストでは上位三団体のシステムはすべて
Robertson らの方法に基づくものであったので，
この手法を検索の基本部分に使用することは
現状では最善と思われる．また，この手法の有効性について
文献\cite{irex1_IR}においてより詳しく論じている．}．
Robertson らの方法とは，各記事毎に以下の式で与えられる
Score を算出し，Score の上位のものを検索結果として出力する方法である．
(以下の Score(d) は記事dの Score．)


\vspace{-4mm}
\begin{eqnarray}
\footnotesize
  \label{eqn:robertson}
&  Score(d) = \displaystyle \sum_{\begin{minipage}[h]{2cm}
      \footnotesize 
      キーワードt\\[-0.1cm]
      で和をとる
    \end{minipage}} & \left( \displaystyle \frac{TF(d,t)}{\displaystyle \frac{length(d)}{Δ}+TF(d,t)} \ × \ log\frac{N}{DF(t)} \right)  
\end{eqnarray}
\vspace{-4mm}

ただし，ここでのキーワードとは検索要求に出現していたキーワードである．
$TF(d,t)$ はキーワード t の記事 d での出現回数である．$DF(t)$ は 
全データベースでのキーワード t が出現している記事の数である．
$N$ は全データベースに存在する記事の数．$length(d)$ は記事 d の長さ(文字列単位)である．
$Δ$ は全データベースでの記事の長さの平均である．
また，この式の{\small $\frac{TF(d,t)}{\displaystyle \frac{length(d)}{Δ}+TF(d,t)}$}を
TFに関する項としてTF項，$log\frac{N}{DF(t)}$ をIDF(DFの逆数)に関する
項としてIDF項と呼ぶことにする．
この式の TF の項が一般のベクトル空間法で重みの一部として用いられる TF と異なり，
$\frac{TF}{\frac{length}{Δ}+TF}$ のようになっている．
Score をキーワードによる加点として扱うとき，
TF の影響が大きい場合だと一つでもTFの値が大きいキーワードがあれば，
他のキーワードがほとんど存在していないという関連性が低いときでも
十分大きな得点を取ってしまう．
この式はこのことを防ぐのに役に立っている．
この式では TF が無限になってもたかだか 1 の値を持つにすぎない．
このため全キーワードがまんべんなく評価されることになる．
さらに，$\frac{length}{Δ}$ という複雑な部分があるが，
これは長い記事ほど TF の値が大きくなるのでそれを補正するための項である．

われわれの方法は，この式(\ref{eqn:robertson})に
いくつかの補強項をつけたものであり，以下の式で表現される．

\begin{eqnarray}
\footnotesize
&  Score(d) = \displaystyle K_{\rm 分野}(d) & \hspace{-0.3cm} \left\{ \displaystyle \sum_{\begin{minipage}[h]{2cm}
        \footnotesize
      キーワードt
    \end{minipage}} \hspace{-0.3cm} ( TF項(d,t) \ × \ IDF項(t) \ × \ K_{\rm 詳細}(d,t)  \right. \nonumber \\[0.2cm]
&& \left. \ × \ K_{\rm 位置}(d,t) ) + \displaystyle \frac{length(d)}{length(d) + Δ} \right\}
  \label{eqn:score}
\end{eqnarray}

この式の TF項 IDF項 は，式(\ref{eqn:robertson})と同じである．
この式の $\frac{length(d)}{length(d) + Δ}$
$(=K_{\rm 記事長}(t))$ は
記事長が長いほど値が大きくなる項で，他の情報がまったく同じならば
記事長が長ければ長いほど検索要求を含みやすいと考えて作ったものである．
$K_{\rm 分野}$，$K_{\rm 詳細}$，$K_{\rm 位置}$ は
精度向上のために追加した補強項である．
$K_{\rm 分野}$は新聞の紙面情報(分野情報)を利用する項で，
$K_{\rm 位置}$は記事中でのキーワードの位置で重みを変更するものである．
タイトルにあれば大きい値とし，記事中での位置が最初のものを加点し，
後ろのものを減点するということをしている．
$K_{\rm 詳細}$は，さらに詳細な項でキーワードが固有名詞ならば加点したり，
キーワードが「事」「認定」「記事」「言及」などの不要な単語の場合減点したりする
項である．
次節ではこれらの補強項の詳細な説明を行なう．

\subsection{補強項の説明}

式(\ref{eqn:score})のようにわれわれは補強項として
$K_{\rm 位置}$，$K_{\rm 分野}$，$K_{\rm 詳細}$の三つを用いている．
ここではこれらを詳細に説明する．

\begin{enumerate}
\item 
\underline{位置情報の利用 ($K_{\rm 位置}$)} 

特に新聞記事でいわれることだが，
タイトルや記事の最初の文はその記事のおおまかな内容を示すことが多い．
このため，そのような位置に現れるキーワードを重視することで
情報検索の精度を向上させることができる\cite{araya}．
この$K_{\rm 位置}$はそのためのもので，
記事中でそのキーワードが初めて出現している位置で重みを変更するものである．
タイトルにあれば大きい値とし，記事中での位置も最初のものを加点し，
後ろのものを減点するということをする．
この項は以下の式で表される．

\begin{eqnarray}
\footnotesize
\label{eqn:ichi}
&K_{\rm 位置}(d,t) = \left\{ 
  \begin{array}[h]{l}
k_{\rm 位置,1}  \, (キーワード t が記事 d でタイトルに出現)\\
1 + k_{\rm 位置,2} \displaystyle \frac{(length(d) - 2*P(d,t))}{length(d)} \, \, (それ以外)
  \end{array}
\right.&
\end{eqnarray}

この式で length(d) は記事 d の長さで P(d,t) はキーワード t の記事 d での位置を
意味する．
$k_{\rm 位置,1}$，
$k_{\rm 位置,2}$は実験で定める定数である．
一記事中に同じキーワードが複数出現する場合は
最も初めに出現したもののみを用いる．

\item 
\underline{分野情報(紙面情報)の利用 ($K_{\rm 分野}$)} 

$K_{\rm 分野}$は新聞の紙面情報(分野情報)を利用する項である．
これは，関連性フィードバッ\break
ク\cite{r-feedback}のようなことをするもので，
一度この項を1として検索を行ない，その検索結果における
上位100個において紙面情報の統計をとり，
その統計結果に基づき
上位に出現しやすい面を特定し，
それと同じ面に書いてある記事の得点を増加させることで
 Score を再計算するものである．
例えば，一回目の検索で上位100個には経済面が集中していたとすると，
経済面の記事には加点し，そうでない記事は減点するといったことを
行なう．
この項($K_{\rm 分野}$)は以下の式で表される．


\vspace{-4mm}
\begin{eqnarray}
\footnotesize
  \label{eqn:men}
&K_{\rm 分野}(d) = 1 + k_{\rm 分野} (割合A(d) - 割合B(d)) / (割合A(d) + 割合B(d))& 
\end{eqnarray}
\vspace{-4mm}

だだし，$割合A(d)$は一回目の検索結果の
上位100個における記事 d が該当する面の割合\footnote{
このときの割合の算出は，上位のものに重みを傾斜的に付加している．
順位 $x$ の記事に対して
$(150 - x + 0.5)/100$ の重みを頻度にかけてから割合の算出を行なっている．}で，
$割合B(d)$は全記事での記事 d が該当する面の割合を意味する．
この式の値は，
$割合A$が大きく(該当記事の面が一回目の検索結果でよく出現していて)，
$割合B$が小さい(該当記事の面が全記事ではそれほど出現していない)場合に
大きくなるようになっている．
$k_{\rm 分野}$ は実験で定める値である．

\item 
\underline{その他の情報の利用 ($K_{\rm 詳細}$)} 

$K_{\rm 詳細}$は，さらに詳細な項でキーワードが固有名詞ならば加点したり，
キーワードが「事」「認定」「記事」「言及」などの不要な単語の場合減点したりする
もので，以下の式によって表される．
(本節では表記の簡単化のため，記事，キーワード用の変数 d,t を省略して
記述している．)

\begin{eqnarray}
\footnotesize
  \label{eqn:detail}
{\sl K}_{\rm 詳細} & = & K_{\rm タイトル} × K_{\rm 固有} × K_{\rm など} × K_{\rm 数字}  \nonumber\\
& & × K_{\rm ひらがな} × K_{\rm neg} × K_{\rm 不要語}
\end{eqnarray}

この式の各項の説明を以下に記述する．


\begin{itemize}
\item 
  $K_{\rm タイトル}$

  該当するキーワードが検索要求のタイトル DESCRIPTION から
  得られたものの場合は $k_{\rm タイトル}$ の値とし，
  そうでない場合 1 とする．
  この項は
  検索要求のタイトル DESCRIPTION から得られたキーワードを
  重要と考えて加点するためのものである．

\item 
  $K_{\rm 固有}$

  該当するキーワードが固有名詞の場合，
  $k_{\rm 固有}$ の値とし，そうでない場合 1 とする．
  検索要求から得られたキーワードが固有名詞ならば，
  そのキーワードを重要と考えて加点する．

\item 
  $K_{\rm など}$

  該当するキーワードが検索要求において「など」の直前にあった場合，
  $k_{\rm など}$ の値とし，そうでない場合 1 とする．
  検索要求から得られたキーワードが
  検索要求において「など」の直前にあった場合，
  特殊化されたキーワードであると考えて
  固有名詞と同様に加点する．

\item 
  $K_{\rm 数字}$

  該当するキーワードが数字だけで構成されている場合，
  $k_{\rm 数字}$ の値とし，そうでない場合 1 とする．
  検索要求から得られたキーワードが数字だけで構成されている場合は
  情報量が少なくあてにならないキーワードであると考えて減点する．

\item 
  $K_{\rm ひらがな}$

  該当するキーワードがひらがなだけで構成されている場合，
  $k_{\rm ひらがな}$ の値とし，そうでない場合 1 とする．
  検索要求から得られたキーワードがひらがなだけで構成されている場合は
  情報量が少なくあてにならないキーワードであると考えて
  減点する．

\item 
  $K_{\rm neg}$

  該当するキーワードが NEG のタグで囲まれた部分からのみ抽出されている場合，
  $k_{\rm neg}$ の値とし，そうでない場合 1 とする．
  検索要求の中には下記のように「〜は除く」という表現には
  NEG のタグがふられている．

\vspace{0.1cm}

  \begin{quote}
\begin{verbatim}
<TOPIC>
<TOPIC-ID>1003</TOPIC-ID>
<DESCRIPTION>国連軍の派遣</DESCRIPTION>
<NARRATIVE>平和維持活動など国連の活動における国連軍の派遣について述べられている記事。派遣の目的または対象地域が記事から明示的に分る事。<NEG>日本の自衛隊を国連に派遣するかどうかという問題のみに関する記事は除く。</NEG></NARRATIVE>
</TOPIC>
\end{verbatim}
  \end{quote}

\vspace{0.1cm}

  $K_{\rm neg}$ は，
  NEG のタグで囲われている部分のみから抽出されたキーワードは
  逆に不要な記事を取ってくる可能性が高いと考えて
  減点する．
  本論文での実験では $k_{\rm neg}$ の値として 0 を用いている．
  これは，NEG のタグで囲われた部分のキーワードの得点は加算も
  減点もしないという，その部分の情報は全く利用しないという状態を意味する\footnote{$k_{\rm neg} = -1$ つまり，
    NEG のタグで囲われた部分のキーワードがあると Score をその分下げるという条件や，
    $k_{\rm neg} = 0.5$ つまり，NEG のタグで囲われた部分のキーワードは重みを半分にするというものでも，
    予備試験，本試験のデータで実験を行なったが，R-Precision の精度は微妙に下がった(0.01未満)．}．  
  
\item 
  $K_{\rm 不要語}$
  
  該当するキーワードが検索要求において
  「事,認定,記事,言及,対象,場合,具体的内容」の場合を
  $k_{\rm 不要語,1}$とし，
  そうでなく「分野,目的,具体的,具体,的,内容,いずれ,結果,問題,場合,影響,可能性,可能,性,指摘,対策」の場合を
  $k_{\rm 不要語,2}$とし，
  それらでない場合 1 とする．
  「事,認定,記事,言及」といった今回の検索要求固有の表現で
  検索内容に関わらない表現は不要なキーワードとし，
  減点するためのものである．
  この不要語のリストは IREX の予備試験のときに作成した．

\end{itemize}

ここで，$k_{\rm タイトル}$ などの各定数は，
実験で定めるものとする．

\end{enumerate}

\subsection{キーワードの抽出方法}
\label{sec:extract_keyword}
本節では検索要求文からのキーワードの抽出方法について述べる．

キーワードの抽出方法については，
いくつかの異なる方法を考えている．
これらについて以下で説明する．

\begin{enumerate}
\item 
\underline{最も短いキーワードのみを利用する方法}

これは最も単純な方法である．
検索要求文を単語列に分割し，その単語列のそれぞれの単語をキーワードとする方法である．
われわれのシステムでは JUMAN\cite{JUMAN3.6} でまず形態素列に分割し，
さらに得られた形態素を辞書を用いて細分割するということを行なっている．
これは，JUMAN では形態素解析の精度向上のために，
複合語のような長い形態素が登録されており
それが単一の形態素として出力されるためである．
例えば，「国連軍」という語を JUMAN に入力しても
「国連軍 (名詞)」と出力されるだけで細分割を行なわない．
これでは「国連」や「軍」がキーワードとならず
情報検索では検索洩れの大きな原因となる．
そこでわれわれのシステムでは JUMAN の結果をさらに辞書を参照して
細分割するようにしている．
いまのところ，簡単のため，二分割を繰り返すアルゴリズムを利用しており，
「国連軍」だと「国連」「軍」が辞書にあれば分割するということを
行なっている．辞書としては EDR の単語辞書\cite{edr}を利用している．

例として以下の検索要求からキーワードを取り出すこととする．

\vspace{0.1cm}

\begin{quote}
\begin{verbatim}
<TOPIC>
<TOPIC-ID>1001</TOPIC-ID>
<DESCRIPTION>企業合併</DESCRIPTION>
<NARRATIVE>記事には企業合併成立の発表が述べられており、その合併に参加する企業の名前が認定できる事。また、合併企業の分野、目的など具体的内容のいずれかが認定できる事。企業合併は企業併合、企業統合、企業買収も含む。</NARRATIVE>
</TOPIC>
\end{verbatim}
\end{quote}

\vspace{0.1cm}

まず，DESCRIPTION から「企業」「合併」というキーワードが得られる．
また，NARRATIVE からは
「記事,企業,合併,成立,発表,合併,参加,企業,名前,認定,事,合併,企業,分野,目的,具体的,内容,いずれ,認定,事,企業,合併,企業,併合,企業,統合,企業,買収」というキーワードが得られる．
このとき，助詞の「に」「は」など名詞・未定義語以外の単語はキーワードとしては不適切としてすべて省き，
接尾辞の形態素は直前の形態素に接合させるなどの処理をしている\footnote{
この他に「文献,研究,論文,提案,処理,こと,とき,もの,の」などの不要語を省いている．
これは NTCIR のコンテスト\cite{nacsis1}の予備試験のデータにおいてシステムを構築する際に不要と思われた単語である．
$K_{\rm 不要語}$ と混同しないようにしてほしい．$K_{\rm 不要語}$ とはまったく別処理である．}．
「最も短いキーワードのみを利用する方法」とは
以上の単語をキーワードとして利用するものである．

\item 
\underline{あらゆるパターンのキーワードを利用する方法}

「最も短いキーワードのみを利用する方法」では，
細分割されすぎていて例えば，
「企業合併」というキーワードは用いず，
「企業」「合併」と分離したキーワードしか用いないようになっている．
それよりは，「企業合併」というものもキーワードとして用いた方がよいと考え，
短いものも長いものもすべてキーワードとすることを考える．
これを「あらゆるパターンのキーワードを利用する方法」と呼ぶことにする．
例えば，「企業合併成立」が入力されると，
「企業」「合併」「成立」という短いものから
「企業合併」「合併成立」という中くらいのものと
「企業合併成立」という一番長いものまですべてキーワードとして扱う方法である．
この方法ならば，あらゆる長さのキーワードを利用しておりよいのではないかと考えた．
しかし，
「企業の合併が成立」からは「企業」「合併」「成立」の三つしか
得られないのに対し，
「企業合併成立」という表現からは
六つのキーワードが得られ，若干不公平ではないかと考えた．
これを正規化するために種々の方法を考えたが，
予備試験でのデータでの実験では $\sqrt{\frac{n(n+1)}{2}}$ で
各キーワードの重みを割ると精度が良かったのでそのように正規化することにした．
ただし，n は連続している単語の数を示す．
例えば「企業合併成立」の例だと n=3 となる．

\item 
\underline{ラティスを利用する方法}

「あらゆるパターンのキーワードを利用する方法」は，
あらゆるパターンのキーワードを利用するという発想はよいが 
理由をつけづらい $\sqrt{\frac{n(n+1)}{2}}$ という
アドホックな式で正規化する必要がある．
そこで，なるべくあらゆるパターンのキーワードを利用しつつ
なおかつ整合性が保てるように，
キーワードへの分割の曖昧性をラティス構造に保存し，
先に示した検索で用いる式(\ref{eqn:score})の Score の
値が最も大きくなるようなパスでキーワードを分割して
キーワードを抽出する方法を考えた．
(この方法は，小澤らの論文\cite{ozawa_nlp99}の
3.1 節の「類似度を最大とする単語分割」と
ほぼ同じ考え方である．
違いは検索方法の基本式が異なることや，
分割に形態素解析システムを用いていないことで，
評価関数の値が最も大きくなるように分割するという意味では
全く同じである．)

\begin{figure}[t]
  \begin{center}
  \begin{minipage}{7cm}
      \begin{center}
        \epsfile{file=kigyo.eps,height=4cm,width=6.3cm} 
      \end{center}
    \caption{ラティス構造の例}
    \label{fig:lattice}
    \end{minipage}
  \end{center}
\end{figure}

例えば，
「企業合併成立」の場合だと図\ref{fig:lattice}の
ラティス構造を得る．図のように
4種類の経路があるので
分割の曖昧性として4種類ある．
この4種類の分割を行ない
それぞれ式(\ref{eqn:score})の Score を求め，
最も値の大きい経路に分割する．
ある記事では
「企業」「合併」「成立」と分割されたものしかなく，
分割して計算した方が Score が大きかったり，
またある記事では
「企業合併」というものが出現しており TF項 × IDF項 の値が
「企業合併」の方が極端に大きく
「企業合併」「成立」と分割した方が Scoreが大きくなり
そのように分割するといったことになる．
また，「企業合併」というものが出現していても 
「企業合併」の TF項 × IDF項 の値がそれほど大きくなく
「企業」と「合併」の TF項 × IDF項 の和の方が大きい場合は，
「企業」と「合併」と分割したものを
キーワードとするといったことにもなり，
そのときそのときの状況に応じたキーワード分割が可能となる．
この方法ならば，
「あらゆるパターンのキーワードを利用する方法」のような
アドホックな正規化を行なう必要がない．

\item 
\underline{down-weighting\cite{Fujita99_IREX_jap} を利用する方法}

この方法は IREX のコンテストで他のチームが提案していた方法で，
コンテストの終了後，利用を検討したものである．
この方法は，「あらゆるパターンのキーワードを利用する方法」に
おいて，最も短いキーワードはそのままの重みで用い，
それよりも長いキーワードは重みが小さくなるように重みづけして
用いる方法である．
本研究では，あるキーワードが短いキーワード x 個から構成されるとき，
そのキーワードに $k_{down}$$^{x-1}$ の重みをかけることにした．
ただし，$k_{down}$ は実験で定める定数である．
この方法は基本的には最も短いキーワードを用いるが，
それよりも長いキーワードについての影響も
少々考慮するといったものとなっている．

\end{enumerate}

キーワードの抽出方法として以上の四つを示したが，
さらにこれらを式(\ref{eqn:score})で使う際に
いくつかの選択肢が残されている．

例えば，先ほどの「企業合併」の例の
NARRATIVE からは
「記事,企業,合併,成立,発表,合併,参加,企業,名前,認定,事,合併,企業,分野,目的,具体的,内容,いずれ,認定,事,企業,合併,企業,併合,企業,統合,企業,買収」というキーワードが得られるが，
ここでは「企業」という表現が数多く出現する．
式(\ref{eqn:robertson})の説明で TF の影響が強い場合の弊害を説明したが，
この場合検索要求文側での TF の影響が強いという弊害が出る恐れがある．
このために，このキーワード列をそれぞれ同じ種類のものはまとめ，
それぞれの種類ごとに一回ずつしか出現していなかったというようにすることも可能である．
Robertson らはこの場合のことも考え，以下のような評価式も
利用している．
(ここでは検索要求文 q における Score(d) を Score(d,q) と
表記している．)
\begin{eqnarray}
\footnotesize
  \label{eqn:robertson2}
&  Score(d,q) = \displaystyle \sum_{\begin{minipage}[h]{2cm}
      \footnotesize
      キーワードt\\[-0.1cm]
      で和をとる
    \end{minipage}} & \left(  \displaystyle \frac{TF(d,t)}{\displaystyle \frac{length(d)}{Δ}+TF(d,t)} \ × \ log\frac{N}{DF(t)} \right. \nonumber \\
& &  \left. × \displaystyle \frac{TFq(q,t)}{TFq(q,t) + kq} \right)
\end{eqnarray}
ただし，TFq(q,t) は検索要求文 q でのキーワード t の出現頻度である．
kq は実験で定める定数である．
kq が 0 のとき，キーワードをすべて
それぞれの種類ごとに一回ずつしか出現していないかのように
扱うことと等価で，
kq が ∞ のとき，キーワードをそのまま出現した個数で
扱うことと等価となる\footnote{
  kqを∞にする際，
  kq は定数のため式(\ref{eqn:robertson2})に掛けても Score の順序関係は変わらないので，
  式(\ref{eqn:robertson2})に kq をかけてからkqを∞にする．
  そうすると，式(\ref{eqn:robertson2})の最終項は以下のように計算される．
  
\begin{eqnarray}
\footnotesize
 & & \displaystyle \lim_{kq \rightarrow ∞} \frac{TFq(q,t) × kq}{TFq(q,t) + kq}\\
 & = & \displaystyle \lim_{kq \rightarrow ∞} \frac{TFq(q,t)}{TFq(q,t)/kq + 1}\\
 & = & \displaystyle TFq(q,t)
\end{eqnarray}
つまり，TFq(q,t) となり，
キーワードをそのまま出現した個数で扱うことと等価となる．}．

さらに，検索要求文においても IDF項を考慮することが可能で，
以下のような式も考えられる．
\begin{eqnarray}
\footnotesize
  \label{eqn:idfq}
&  Score(d,q) = \displaystyle \sum_{\begin{minipage}[h]{2cm}
      \footnotesize
      キーワードt\\[-0.1cm]
      で和をとる
    \end{minipage}} & \left( \displaystyle \frac{TF(d,t)}{\displaystyle \frac{length(d)}{Δ}+TF(d,t)} \ × \ log\frac{N}{DF(t)} \right. \nonumber \\
& & \left.  × \ \displaystyle \frac{TFq(q,t)}{TFq(q,t) + kq} \ × \ \displaystyle log\frac{Nq}{DFq(t)}\right)
\end{eqnarray}
ただし，Nq は検索要求の個数で DFq(t) はキーワード t が
いくつの検索要求に出現しているかの個数を意味する．
多くの検索要求に出現するキーワードほど，
「記事」「認識」などの不要語である可能性があり，
この項を利用することによりこれらの
不要語を減点する効果がある．

