見出し語の追加と学習用コーパスの作成

\subsection{現代語用のUniDicに対する見出し語の追加}

古文用の形態素解析を行うために，現代語用の辞書に見出し語の追加を行った．UniDicでは見出し語を語彙素・語形・書字形・発音形の4段階で階層的に管理しているため，近代語解析に必要な語を各階層に整理して追加することができる．現代語としては使われなくなっている語は「語彙素」のレベルで，文語活用型の語は「語形」のレベルで，異体字や旧字形など表記の違いは「書字形」のレベルで追加することになる（図 1）．これにより，現代語のための見出し語と統一的に管理することができ，文語形と口語形，新字形と旧字形がそれぞれ関係を持つものであることを示すことができる．

\begin{figure}[t]
\begin{center}
\includegraphics{20-5ia5f1.eps}
\end{center}
\caption{UniDicの階層（語彙素・語形・書字形）と文語形・旧字形}
\label{fig1}
\vspace{-1\Cvs}
\end{figure}

これまでに近代文語文のために追加した語彙は，語彙素レベルで10,814語，語形レベルで12,417語，書字形レベルで25,224語であった．また，中古和文のために追加した語彙は，語彙素レベルで5,939語，語形レベルで7,351語，書字形レベルで13,763語であった．両者には共通の語彙も多いが近代文語文の語彙追加を先に行ったため，中古和文のための追加数が少なくなっている．もともとあった現代語の見出し語とあわせ，全体の見出し語数は，語彙素225,588語，語形253,061語，書字形413,897語となっている．

追加した見出し語は，現代語形から派生させた文語形や旧字形を追加するところからはじめ，既存の古語辞典やデータ集の見出し語からも追加を行った．しかし，形態素解析辞書の見出し語としては，UniDic体系に基づく詳細な品詞を付与し，実際に出現する表記形を入力する必要があるため，単なる辞典の見出し語リストは多くの場合，登録用のソースとして不十分である．そのため，大部分の語彙は，後述する学習用コーパスを整備する過程で不足するものを追加する形で行った．

見出し語の単位認定については，通時的な比較ができるようにするため，可能な限り現代語と共通の枠組みで処理を行った．しかし，語の歴史的変化や古文における使用実態を踏まえ，時代別に異なった扱いをしている語も少なくない．たとえば，指示詞について，現代語のUniDicでは「この」「その」などは 1 語の連体詞として扱っているが，「こ」「そ」が単独で指示代名詞として使われる中古語では，これらは代名詞＋格助詞として扱った方が適切である．このように，歴史的資料向けの辞書見出しの追加は単純な作業ではなく，通時的な共通性に配慮しつつ，各時代の言語の実態を反映させるかたちで見出し語を認定するという高度な判断にもとづくものである．その積み重ねによって作られた見出し語リストは，日本語の通時的な処理を行う上で基礎となる重要なデータであると言える．

また，中古和文UniDicの見出し語認定基準は規程集としてまとめ公開している\cite{小椋2012}\footnote{http://www2.ninjal.ac.jp/lrc/index.php?UniDic} が，これは通時的な比較を考慮した歴史的資料の処理にとって利用価値が高い資料である．中古和文用の規定はそのまま他の時代の資料に適用できるわけではないが，日本語の古典文法は中古和文を基準として作られたものであるため，この規定を中核として追加・修正を行うことで各時代向けの辞書を作成していくことが可能である．

語彙の追加と平行して活用表の整備も行った．UniDicはもともと文語の活用表を一部備えていたが，これを整備して網羅的なものとするとともに，通時コーパス構築に必要な活用形の追加を行った． 

UniDicは現代語用に整備されてきたため，古文では用いられない語彙を多く含んでいる．しかし，基礎語彙の多くは中古和文でも共通であり，どの語が不要であるかを事前に判断することは必ずしも容易ではない．また，古文の形態素解析辞書にとって見出し語の肥大化は大きな問題ではないうえ，不要語があることによる解析精度への悪影響は認められなかったため，現代語用の見出しも原則としてそのままとした．同様の理由から，近代文語UniDicと中古和文UniDicの間でも同一の語彙表を用いている．

\begin{table}[b]
\caption{古文用の見出し語を追加した現代語用UniDicによる解析精度}
\label{tab3}
\input{05table03.txt}
\end{table}

以上のような見出し語の追加だけであれば，学習用コーパスの作成に比べて低コストで行うことができる．そこで，見出し語の追加だけで十分な精度向上が見られるのかどうか確認するため，古文用の見出し語を追加した現代語用のUniDicを作成し，2.4節の表 2と同様に解析精度を調査した．その結果を表 3に示す．見出し語の追加によって，近代文語では，語彙素認定のF値で約0.06ポイント向上し0.7363，補正後の数字で0.797となっている．また，精度の低かった中古和文では，語彙素認定のF値で約0.07ポイント向上し0.6190，補正後の数字で0.664となっている．しかし，やはりこの精度は不十分であり，見出し語の追加だけでは通時コーパスの構築にとって十分なだけの精度は得られなかった．


\subsection{学習用コーパスの準備}

前節で確認したように，古文の形態素解析のためには，見出し語の追加だけでなく学習用コーパスの整備が必要となる．

近代文語では，主たる解析対象の明治期の文語論説文を中心に，表4の約64万語の人手修正済みのコーパスを作成した．
近代詩・小説・法令・論説文の大部分は「青空文庫」\unskip\footnote{http://www.aozora.gr.jp/} 所収のテキストを利用し，論説文としては他に上田修一氏作成の「文明論之概略」テキストデータ\footnote{http://web.keio.jp/\~uedas/bunmei.html} を利用した．
また，雑誌の本文は国立国語研究所の「太陽コーパス」「近代女性雑誌コーパス」\unskip\footnote{http://www.ninjal.ac.jp/corpus\_center/cmj/ なお，「太陽コーパス」「近代女性雑誌コーパス」は文書構造等がタグ付けされたコーパスで形態論情報は付与されていない．} の一部のテキストを利用した．
以上のテキストに対して独自にUniDicベースの形態論情報をタグ付けしたデータに加え，国立国語研究所で公開された形態論情報付き「明六雑誌コーパス」\unskip\footnote{http://www.ninjal.ac.jp/corpus\_center/cmj/meiroku/} を学習用のデータとして利用した．

\begin{table}[b]
\begin{minipage}[t]{0.5\textwidth}
\caption{近代文語のコーパス}
\label{tab4}
\input{05table04.txt}
\end{minipage}
\begin{minipage}[t]{0.5\textwidth}
\caption{中古和文のコーパス}
\label{tab5}
\input{05table05.txt}
\end{minipage}
\end{table}

中古和文では，2012年に国立国語研究所によって公開された「日本語歴史コーパス 平安時代編 先行公開版」\unskip\footnote{http://www.ninjal.ac.jp/corpus\_center/chj/}
のデータを学習に利用した．このコーパスは，表 5に示す平安時代の仮名文学作品を中心とした約82万語の人手修正済みの形態論情報を含んでいる．

学習用のコーパスは段落や改行，振り仮名などがタグ付けされたテキストに形態論情報を付与したもので，これを関係データベース上で辞書データと紐付けて管理している．近代語コーパスでは，さらに濁点が付されていない部分に濁点を付与するなど表記上の問題に対処するためのタグ付けを行い，また文末を認定してセンテンスタグを付与している．日本語の歴史的資料のコーパスを形態素解析辞書の機械学習に利用可能な形で整備したのはこれが初めての試みである．

近代文語文と中古和文は，同じ古文と言っても大きく性質の異なる文体である．近代文語文では低頻度語が多く，上記のコーパス中，書字形（基本形）で集計した場合，頻度1の語が18,120語，頻度2の語が5,943語含まれていた．一方，中古和文では，頻度1の語が6,198語，頻度2の語が2,134語にすぎない．近代文語文は，明治維新後に西洋の新たな文物を吸収していく時代において，新しい書き言葉を確立していく過程にあった文体であるため，新たに作られながらも定着しなかった語などの低頻度語が目立つ．また，書かれる内容が多様で文体差が大きい．一方，中古和文は，古代の宮廷における限られたコミュニティの中で当時の話し言葉に基づいて書かれた文章であり，内容的な幅も狭いため，語彙の広がりが小さい．こうした違いは，形態素解析の精度にも影響を及ぼしてくると考えられる．


\subsection{MeCabを用いたコーパスからのパラメータ学習}

MeCabでコーパスからのパラメータを学習する場合，設定ファイルrewrite.defとfeature.defによって，学習に用いる内部素性のマッピングと，内部素性からCRF素性を抽出するためのテンプレートを書き換えることができる．近代文語UniDicと中古和文UniDicの学習にあたっては，CRF素性を抽出するテンプレート (feature.def) は，どちらの辞書でも現代語用のものをそのまま用いている．利用している素性は，語彙素・語彙素読み・語種・品詞（大分類・中分類・小分類）・活用型・活用形・書字形（基本形と出現形）とその組み合わせである．UniDicでは語種を学習素性として利用しているのが特徴となっており\cite{Den2008}，この素性は古文の解析にも大きく寄与している．

一方，内部素性のマッピング (rewrite.def) は，現代語用UniDicのものを修正して，語彙化する見出し語を文語の助動詞・接辞に置き換えた．たとえば，次の助動詞については品詞ではなく，語彙のレベルで連接コストを計算している．

\begin{quote}
き，けむ，けらし，けり，こす，ごとし，ざます，ざんす，じ，ず，たり，つ，なり，ぬ，べし，べらなり，まし，まじ，む，むず，めり，らし，らむ，り，んす，んなり，んめり，非ず
\end{quote}

助詞・助動詞などの語彙化すべき見出し語については近代文語文と中古和文とで共通する部分が多いため，rewrite.defは近代文語UniDicと中古和文UniDicとで共通のものを利用した．


エラー分析

\subsection{高頻度の解析エラー}

\begin{table}[b]
\caption{高頻度の解析エラー}
\label{tab10}
\input{05table10.txt}
\end{table}

4.1節（表 6）の精度調査におけるエラーから，近代文語UniDic，中古和文UniDicのエラーの傾向を分析する．表 10に，境界認定・品詞認定・語彙素認定の各レベルにおいて特に高頻度のエラーをまとめた．表中括弧内の数字はエラー数である．以下，これらのエラーについてレベル別に確認する．


\subsection{境界認定レベルのエラー}

境界認定のレベルでは，近代文語UniDicは結果として過分割となっているものが272例，同数となるもの74例，過結合となるものが258例であった．中古和文UniDicは過分割となっているものが189例，同数となるものが25例，過結合となるものが176例であった．

中古和文・近代文語でともにエラーが多い「にて」「とも」は，語源にさかのぼると「に／て」「と／も」であり，複合してできた語を語源的に見て2語と扱うか，新たにできた1語として扱うかという認定基準の立て方の問題と関わる．歴史的な言語変化によって一語化が進展していくわけだが，もともと連続して出てきやすい語の連続であり，また全ての「に／て」「と／も」連続が一語化するわけではないため判別が難しい． 

近代文語の「然れども」は，現在の規程では，「しかれども」と読む場合には「然り」と「ども」に分割し，「されども」と読む場合には 1 語の接続詞として扱っている．したがって問題は「然れ」を「され」と読むか「しかれ」と読むかという点にあり，実質上は語彙素認定のエラーであるとも言える．「彼の」も同様で，「かれ（の）」と読めば2語になり，「か（の）」と読めば連体詞として 1 語と見なされる．このように近代語では漢字表記語が多く読みに曖昧さがあり，そこに語の歴史的変化による一語化が進展していることが複合して問題となっている．

一方，近代文語の「論派」は，「○○論派」とある場合に，UniDicの短単位規定で「（（○○）論）派」という語構成を考えて「-論」「-派」がいずれも接尾辞となって切り出されるのに対し，「論派」という 1 語の名詞も存在するためにこちらが優先されることによっている．漢語の多い近代語で目立っているが，これは現代語でも同種の現象が起きる問題であり，漢語の単位認定について，形態素解析では扱いきれない語構成の問題が短単位認定基準に取り込まれていることが要因であるといえる．


\subsection{品詞認定レベルのエラー}

品詞認定のレベルでは，品詞そのものの認定エラーと，活用形の認定のエラーが区別される． 

品詞そのものの認定で中古和文・近代文語ともに最多のものは「に」の認定が助動詞・格助詞・接続助詞の間で揺れるものである．「に」の判別は現代語においても助動詞「だ」連用形と格助詞「に」の間などで問題になるが，古文では接続助詞の「に」が高い頻度で用いられるためより曖昧性が高い．接続助詞「に」は連体形接続であるため，接続の上でも他と区別が付かない．このほか，中古和文では「を」の判別エラーが多い．現代語では格助詞以外の用法を持たないが，中古語では接続助詞・終助詞があるためエラーにつながっている．また，近代文語では「も」「で」の判別エラーが目立つが，いずれも同形の接続助詞があることで現代語よりも曖昧性が増している．さらに「で」は近代においては口語的な助動詞「だ」の連用形としての「で」が用いられることがあるため，現代語で発生する助動詞「だ」連用形と格助詞「で」の判別と同じ問題が生じている．

このように品詞の認定では，コピュラ助動詞（「なり」「だ」）の連用形と格助詞との判別という現代語でも見られるエラーがあることに加えて，古文では同形の接続助詞が存在するためにより曖昧性が高くエラーにつながっている．

活用形の認定では，高頻度の助動詞や動詞の終止形・連体形の判別と，助動詞「ず」・動詞「有り」の終止形と連用形の判別でエラーが多く発生している．

終止形・連体形の判別エラーは，係り結びに起因する古文特有のものである．古文では，文中に「ぞ」「か」「や」の係助詞や疑問詞（不定語）が存在する場合，係り結びの法則によって文末が終止形ではなく連体形になるという現象がある．ところが，四段活用では終止形と連体形が同形であるため，文末に位置する場合には文中に上述の要素（係り）が存在するかどうかによって同形の動詞を判別しなければならず，この困難がエラーにつながっている．係り結びは中古和文で特に多いため終止形・連体形の判別エラーも中古和文に多く，活用形間の誤り全体363例のうち214例がこのエラーである． 

助動詞「ず」・動詞「有り」の終止形と連用形の判別は，文末の認定に関わるものである．助動詞「ず」やラ行変格活用の語では終止形と連用形が同形であるが，終止形と連用形の違いは多くの場合，文が中止しているのかそこで終わっているのかの違いに相当する．ところが，近代文語文では，文末が句点として必ずしも明示されない\footnote{このため，近代語のコーパスでは人手によって文境界をタグ付けしている．古文の解析にとって文末の自動認定は残された重要な課題の一つである．}．句点と読点が区別されず，ともに「、」で表されている文が多く，こうした場合には中止か終止かの区別が極めて難しい．このことが終止形・連用形の選択エラーにつながっている．これも古文のテキスト特有のエラーである．


\subsection{語彙素認定のエラー}

語彙素認定では，中古和文における接頭辞「御」が「ミ」「オオン」の間で揺れる例が極めて多かった．これを含め中古和文における高頻度の語彙素認定エラーは，品詞が一致する上に語種までが同じ例である．近代文語で最多の「人」が「ジン」「ニン」で揺れる例も語種が同じものである．UniDicの見出し語中には，同一の漢字表記語が音読する漢語と訓読する和語に区別される例が多いが，学習素性に語種を利用していることもあり，語種をまたいだ誤りは比較的少なかった．語彙素認定のエラーは現代語でも生じうるタイプの誤りである．ただし，現代語では接頭辞「御」は漢語「ゴ」と和語「オ」でほぼ区別が付くが，中古和文では和語に複数の読みがあるため語種では判別ができないといった違いがある． 


\subsection{エラーのまとめ}

以上のエラーのうち古文特有といえる問題は，(1) 係り結びに起因する文末活用語の終止形・連体形の判別，(2) 文末表示の曖昧さに起因する文末活用語の終止形・連用形の判別 である．特に係り結びの問題に対処するには文中の離れた要素を考慮する必要があるが，提案手法では局所的な形態論情報だけを素性として利用しているため対応できていない．しかし，これらのエラーは比較的簡単なルールによって自動修正できるため，形態素解析後の後処理で対応することが可能である． 

その他のエラーは同種の問題が現代語でも発生しうるものである．しかし，「に／て」「と／も」，「に」「も」「を」などの助詞に関する判別は，古文の方が同音異義となる語彙が多いため曖昧性が増していた（「を」は現代語では曖昧性がない）．また，特に近代文語では漢字表記語の割合が大きく，その読みの曖昧性がエラーにつながる例が現代語よりも多い．中古和文の接頭辞「御」も同様で和語に絞っても多様な読みがあるため判別が困難である．

以上のように，エラーの原因には文法現象から語彙，表記法の違いまで，古文特有の現象が関わっているものが見られた．



