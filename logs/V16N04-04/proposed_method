システム構成\label{sec:system_structure}

本システムの構成を図\ref{fig:system}に示す．本システムは，Webサーバ上の
Wikiとして動作し，教師が作文課題用のサイトを構築する．学習者は，Webブラウ
ザを介して作文するとともに，互いの作文を添削する．システムは，教師の設定
した「作文規則」に基づいて，学習者の作文をチェックする．作文，および，添
削結果は，WikiコンテンツとしてWebサーバ上に格納されていく．システムは，教
師に対して，作文を分析する手段を提供する．


\begin{figure}[b]
 \begin{center}
  \includegraphics{16-5ia5f1.eps}
  \caption{システム構成}
  \label{fig:system}
 \end{center}   
\end{figure}

本システムの機能は，Wikiのプラグインとして実現される\footnote{Pukiwiki
(http://pukiwiki.sourceforge.jp/)を利用している．}．プラグインは，次の4
種類に大別される．


\paragraph{編集関連プラグイン：}WYSIWYGエディタとして機能する\footnote{
	TinyMCE (http://tinymce.moxiecode.com/)を拡張している．}．
エディタとしての基本的な機能の他，学習者による作文へのマークアップ，Webサーバへ
の作文の保存（排他処理を含む）ができる．作文結果は，XHTMLとしてWikiコンテ
ンツの中に埋め込まれる．図\ref{fig:edit}に編集プラグインの実行例を示す．

\paragraph{エラー検出プラグイン：}「作文規則」に基づき，作文をチェックす
る．チェックは，作文を保存する際に行われ，結果はWikiページに保存される．
作文規則は，\ref{ssec:model_student_sys}節，\ref{sec:composition_rule}節
で詳しく説明する．



\paragraph{添削関連プラグイン：} 学習者同士の添削を支援する．添削時には，
まず，作文の該当箇所にハイパーリンクを作成する．添削の内容は，リンク先の
Wiki のページに記入する．図\ref{fig:edit}中の「冗」「口」\footnote{それぞ
れ「冗長表現」「口語表現」を指摘する添削である．}などのアイコンは，ハイパー
リンクの例である．

\paragraph{作文分析支援プラグイン：} 作文中の文字数，文数，段落数，添削
数などの統計や作文の検索など，主として教師が学習者の作文を分析するための
役割を果たす．


\begin{figure}[t]
 \begin{center}
  \includegraphics{16-5ia5f2.eps}
  \caption{編集プラグインの実行例}
  \label{fig:edit}
 \end{center}   
\end{figure}


Wikiを利用している理由の一つは，Webコンテンツを作成するのが容易なことであ
る．Wikiは，HTMLのタグではなく，Wikiの簡易的なタグでWebページを作成できる．
作文教育の担当教師は，必ずしも Webシステムの利用やWebコンテンツの作成に精
通しているとは限らない．しかし，もし，作文支援システムを含めたWebコンテン
ツを容易に作成できれば，授業の資料を含めた形の作文用のWebサイトを構築す
るという形で，作文支援システムを授業の中に導入しやすくするなると考えられ
る．

Wikiを利用した，もう一つの理由は，プラグインとして実装することにより，機
能の拡張やその利用が容易になるためである．作文課題のテーマや授業での利用
方法は多様であり，システムの拡張性やその利用の容易性は重要である．Wikiの
プラグインとして実装すれば，必要に応じて，機能を拡張することが可能である
と同時に，拡張したプラグインを通常のプラグインと同様にWikiコンテンツに埋
め込むことができる．
} 



相互教授モデル\label{sec:model}

\subsection{概要}\label{ssec:model_abst}

本節では，本システムの特徴である「相互教授モデル」について述べる．

このモデルは，学習者，教師，システムが互いの作文に関する「知識」を教授し
あうことにより，学習者の作文を支援する．概要を図\ref{fig:interaction}に
示す．この図のとおり，このモデルには，教師$\Leftrightarrow$システム，学
習者$\Leftrightarrow$システム，学習者$\Leftrightarrow$学習者，という三つ
のタイプのインタラクションがある．

\begin{figure}[b]
 \begin{center}
  \includegraphics{16-5ia5f3.eps}
  \caption{相互教授モデルにおけるインタラクション}
  \label{fig:interaction}
 \end{center}   
\end{figure}

このモデルの中で，学習者は二人以上を想定する．通常は，10名以上の学習者を
想定し，特定の学習者間だけでなく，複数の学習者間でインタラクションが行わ
れるようにする．これは，後述するように，学習者間のインタラクションにおい
て，誤った作文知識が教授されるのを防ぐためである．

教師は作文規則をシステムに「教授」し，システムがその作文規則に基づいて，
個別の学習者とインタラクションしつつ，作文をチェックする．

実際の授業で利用する場合は，次の手順で示すように，作文課題に関連する授業
と本モデルとを組み合わせて運用することを想定している．

\begin{description}
 \item[手順1] 教師が，学習者に対して作文を書く前の事前授業を行う．
 \item[手順2] 教師がシステムに対して「作文規則」
	    （\ref{sec:composition_rule}節を参照のこと）を設定する（教師
	    $\Rightarrow$システム）．
 \item[手順3] 学習者がそれぞれ作文する．この際，自分の作文に対して，各種
	    のマークアップを行う（学習者$\Rightarrow$システム）．また，作
	    文の過程で，システムが学習者の作文をチェックし，チェック結果
	    に基づいて，学習者が自分の作文を修正する（システム
	    $\Rightarrow$学習者）．
 \item[手順4] 他の学習者の添削を行う（学習者$\Leftrightarrow$学習者）．
 \item[手順5] 学習者が添削結果に基づき，自分の作文の修正を行う（学習者
	    $\Leftrightarrow$学習者）．
 \item[手順6] システムが教師に対して，作文の分析支援を行う（システム
	    $\Rightarrow$教師）
 \item[手順7] 分析結果に基づき，授業で教師が学習者を指導する．
\end{description}

この後の節では，それぞれのインタラクションでどのような作文知識が教授され，
どのように学習者の知識獲得につながるのか，ということを説明する．


\subsection{教師 $\Leftrightarrow$ システム}

まず，教師からシステムへは，教師自身が設定する「作文規則」が教授される
（手順2）．作文規則は，作文の表記，文法，文体，文章構造などの言語的な規則
に加えて，作文の形式や内容を規定する規則である．一般的には，作文課題ごと
に学習者に教授したい事柄（以後，「指導項目」）が存在するので，その指導項目
に基づいて，作文規則が決定される．なお，指導項目は，教師が手順1で授業す
る内容と基本的に対応する．

例えば，本論文の\ref{sec:experiment}節で実施した実験では，「章立て」の習
得を目的として，「旅行計画」をテーマとする作文課題を出している．教師は，
この目的とテーマを満たす作文が書かれるように，作文規則を設定する．この実
験の場合，1文の長さ，文体（です・ます調で書く）といった一般的な作文上の規
則に加えて，「章立て」に関する作文規則を設定した．さらに，作文のテーマに
則して，必ず記述しなければならない項目（以後，「必須記述項目」）を設けて，
作文規則とした．具体的には，「旅行計画」というテーマから，「旅行目的」
「スケジュール」などを必須記述項目としている．

一方，システムから教師へは，学習者が作成した作文を分析するための機能が提
供される（手順6）．具体的には，(1)作文規則の作文への適用結果の集計，(2)作
文中の文字，文，段落数などの集計，(3)全作文に対する横断的な全文検索，(4) 
学習者同士の添削結果の集計などである．教師は，これらの機能を使って，全学
習者の作文を分析（例えば，誤りの傾向分析）をした上で，授業で学習者を指導す
る（手順7）．



\subsection{学習者 $\Leftrightarrow$ システム}
\label{ssec:model_student_sys} 

学習者とシステムとの間のインタラクションは，学習者が作文する過程で行われ
る（手順3）．学習者は，自分の作文に対して，マークアップを加える．それに対
して，システムは，作文に対する自動的なマークアップと，学習者のマークアッ
プ結果を利用しつつ，作文規則を作文に適用する．そして，図\ref{fig:check}の
ように，作文規則に適合しない部分を学習者に指摘する．


\begin{figure}[b]
\input{05fig04.txt}
\caption{システムによるチェック例}\label{fig:check}
\end{figure}


学習者が実際にどのようなマークアップを行うかは，教師の指導項目や自動的な
マークアップの精度などに応じて決定する．例えば，\ref{sec:experiment} 節の
実験では，章節タイトル，引用部分などの言語的な要素の他に，「旅行目的」
「スケジュール」といった必須記述項目の記述範囲に対するマークアップを行っ
ている．{\modl これは，この実験の教育目的が「章立て」の習得であり，作文テーマが
「旅行計画」だからである．このように教育目的上，重要な部分については，自
動的なマークアップの精度にかかわらず，学習者によるマークアップを行う．}


学習者のマークアップが，学習者の作文技術習得に与える効果は，二つある．一
つは，学習者自身が自分の作文に対してマークアップすることによって，教師が
学習者に対して習得してほしいと考えている事柄を学習者が自覚的に確認しつつ，
作文を行うことができることである．また，マークアップを行うことは，他者で
あるシステムに対して作文知識を「教える」ことになる．したがって，CAI 関連
研究において，\cite{kotani1989}や\cite{大林史明:20001215}が主張しているよ
うに，学習者の自発的な学習を促し，学習者自身の作文知識が整理・詳細化され
ることが期待される．

学習者がマークアップすることの，もう一つの効果は，現在の自然言語処理技術
では十分な精度で解析することが困難な対象に対しても，マークアップが可能に
なることである．現在のシステムでは実現困難なマークアップ処理を学習者が行
えば，作文規則にそのマークアップ結果を取り込んで，学習者の作文を検査する
ことが可能になる．

例えば，上記でマークアップの例として挙げた「旅行目的」を自動的に検出す
るには，表層的な解析のみならず，意味的な解析が必要になると思われる．しか
し，学習者がマークアップを行えば，「旅行目的」が記述されているか否かを
機械的に判断し，記述されていない場合は，学習者にその誤りを指摘できる．



\subsection{学習者 $\Leftrightarrow$ 学習者}
学習者間のインタラクションは，互いに作文に対して，コメントしたり，質問し
あうことである．コメントや質問の内容についての制限はないが，(a)誤字・脱
字の指摘， (b)語の用法や文法の誤りの指摘，(c) 内容に対する質問，(d) 文章
構成などの改善案などを，教師が学習者に事前に推奨しておくものとする．学習
者が行ったコメント，質問などは，システムが管理し，学習者同士が掲示版シス
テムを用いて対話できるようにする．図\ref{fig:correction}に添削例を示す．

学習者間のインタラクションが学習者の作文技術習得に与える効果は，学習者と
システム間のインタラクションと同様，学習者が他人に教授することによる効果
と，広範な支援内容を実現できる点にある．ただし，その効果の内容は異なる．

\begin{figure}[b]
 \begin{center}
  \includegraphics{16-5ia5f5.eps}
  \caption{添削例}
  \label{fig:correction}
 \end{center}   
\end{figure}

まず，他人に教授することの効果について{\moda 説明する．}学習者が他の学習
者の作文に対してコメントや質問をすることは，コメントするだけの知識を自ら
持たなければならず，学習者自身の知識が整理・詳細化されると考えられる．ま
た，他人の作文を読むということは自分の作文作成の参考にもなる．自分の作文
に対してマークアップする場合と異なるのは，添削した相手や他の学習者から添
削自体に対する反応があることである．そのため，学習者（添削者，被添削者）
の作文知識が矯正・強化される可能性がある．{\modl 具体的には，(a)誤った知識に基づ
いて他人の作文を添削した場合でも，学習者同士の対話の過程で誤った知識が矯
正されうること，(b)複数の添削者が同じ内容の添削を行えば，その添削内容の信
頼性が被添削者や他の添削者にも伝わること\footnote{図\ref{fig:correction}
は，(b)の例である．}，などが挙げられる．}

次に，広範な支援内容を実現できるという点について説明する．学習者とシステ
ム間でのインタラクションでも同様の効果が得られるが，学習者間のインタラク
ションはそれを補完する役割を果たす．つまり，学習者・システム間のインタラ
クションでは，作文規則に記述できる範囲でしか支援しかすることができない．
それに対して，学習者間のインタラクションでは，添削する側の学習者の作文知
識の範囲での支援が可能である．

以上のような学習効果がある一方，添削するのが学習者であり，専門家でないこ
とから，添削内容に誤りが含まれる可能性を考慮しなければならない．そこで，
本モデルでは，二つの対策を考えている．一つは，一人の学習者の作文に対して，
複数の学習者が添削し，添削内容について議論できるようにすることである．も
う一つは，添削用の掲示板システム上に，教師が部分的に介入することにより，
添削者・被添削者が互いに解決できないような場合に対処することである．


{\mod
\subsection{他の教授モデルとの比較}

本節では，ユーザ（学習者）による知識の教授という面から，相互教授モデルと
既存の教授モデルとを比較する．

まず，学習者同士の教授という面から見てみると，作文教育では従来から学習者
同士の添削を導入している．例えば，国語教育では，学習者同士が作文を交換し
あって読みあわせる「相互推敲」と呼ばれる手法が用いられている
\cite{tazika2006}．また，第2言語学習者に対する作文教育でも，学習者同士で
推敲しあう，ピア・レスポンスと呼ばれる手法が導入され，成果を挙げている
\cite{harada2006}．

これらの教授モデルと相互教授モデルとの違いは，本教授モデルでは，教師の指
導項目が習得されているかをチェックする手段が，第三者であるシステムに作文
規則として取り込まれている点である．教師の指導意図が学習者に伝わっている
かを確認する場合，従来のモデルでは，各学習者の作文を個別に確認しなければ
ならないが，本教授モデルでは，作文規則を用いて教師の指導意図を徹底させつ
つ，学習者同士の知識教授を実現することができる．このことは，学習者の習得
結果を確認しづらい，多人数を対象とした授業において，特に有効である．


次に，工学的な見地，つまり，ユーザ・システム間の知識教授という側面から本
モデルと既存手法とを比較する．従来から，自然言語処理システムでは，全自動
で十分な精度の解が得られない場合，ユーザとのインタラクションが用いられて
きた．最も一般的に利用されているのは，仮名漢字変換システムである．
\ref{ssec:problems}節の問題点2で取り上げた意味処理に関しても，GDA \cite{橋
田浩一:19980701}を用いて，ユーザが意味的情報をアノテーションする手法が提
案されている（例えば，\cite{綾2005}による要約生成）．

本モデルが既存手法と異なる点は，(1)アノテーションが学習者にとって手間にな
るのではなく，作文技術を習得する助けになる（\ref{ssec:model_student_sys}
参照）という，積極的な意味を持つこと，(2)複数の学習者が存在するため，アノ
テーションの誤りを修正できる可能性があることである．二つ目の特徴は，誤っ
たアノテーションを行う可能性がある学習者をユーザとする作文支援システムに
とっては，アノテーション結果を有効利用する上で重要である．} 



作文規則\label{sec:composition_rule}

\subsection{定義}

作文規則は，学習者の作文が教師の指導項目に適合しているか検査するための規
則である．本システム上で作成される作文は，XML を用いて，内部的に構造化さ
れており，作文規則はその構造に対して適用される．作文規則の例を表
\ref{tbl:example_composition_rule}に示す．なお，これらの規則は，
\ref{sec:experiment}節の実験で，実際に使用した作文規則の一部\footnote{表
\ref{tbl:example_composition_rule}には，「章」の規則しか記載していないが，
実際には，「節」「小節」「小々節」に関する規則がある．「章」と類似する規
則となるので，省略した．}
である．

作文規則は，次の4種類のテンプレートを論理的に結合することにより構成する．
テンプレート中の作文要素 $e_i, e_j$ は，作文自体，文，段落，文字など，作
文を構成する言語的な要素である．なお，作文要素には，学習者がマークアップ
する言語要素も含まれる．


\begin{quote}
\begin{description}
 \item[テンプレート1：] $include(e_i, e_j, N)$
 \item[テンプレート2：] $child(e_i, e_j, N)$
 \item[テンプレート3：] $locate(e_i, e_j, P)$
 \item[テンプレート4：] $correspond(e_i, e_j, R)$
\end{description}
\end{quote}

テンプレート1と2は，作文要素の包含関係を規定する．作文要素 $e_i$ が 
$e_j$ を $N$ だけ含む場合，作文とテンプレートが一致したことになる．$N$ 
は，$e_j$の個数を表し，定数，もしくは，数値範囲で指定する．テンプレート1
と2との違いは，テンプレート1では$e_i$ が $e_j$を単に包含していればよいのに
対して，テンプレート2では，$e_j$ が $e_i$ の子要素となっていなければいけ
ないところである．

この二つのテンプレートの使用例として，表
\ref{tbl:example_composition_rule}の作文規則1, 17を挙げる．作文規則1は，
「作文には，一つの作文タイトルが存在する」ことを規定するもので，作文要素
「作文」の中に，子要素として作文要素「作文タイトル」が一つ含まれることを
意味する．作文を XML で記述した例を図\ref{fig:structured_data}に示す．

一方，作文規則17は，必須記述項目の「旅行の目的」が作文中に書かれているか
を検査するための規則である．したがって，作文規則1とは異なり，作文の子要素
ではなく，作文に単に包含されていればよい．図\ref{fig:structured_data}では，
2 章の章タイトルに「目的」タグとして付与されており，「作文」要素に包含さ
れた構造になっている．

\begin{table}[t]
 \begin{center}
  \caption{作文規則の例（一部）}
  \label{tbl:example_composition_rule}
\input{05table01.txt}
\end{table}

テンプレート3は，作文要素間の位置関係を規定する．作文要素 $e_i$ と $e_j$ 
が位置関係 $P$ のときにテンプレートと一致したことになる．$P$ の値は，
「直前」「直後」「前」「後」「先頭」「末尾」のいずれかを取る．このテンプ
レートの使用例としては，表\ref{tbl:example_composition_rule}の規則3を挙
げる．この規則では，図\ref{fig:structured_data}のように，「作文タイトル」
要素が「作文」要素の先頭にあることを規定する．

\begin{figure}[t]
\input{05fig06.txt}
\vspace{-1\baselineskip}
 \caption{構造化された作文の例}\label{fig:structured_data}
\end{figure}

テンプレート4は，作文要素間の対応関係を規定し，作文要素 $e_i$ と $e_j$ が
対応関係 $C$ であることを示す．対応関係には，「引用・出典」「図表参照」が
ある．このテンプレートの例としては，表\ref{tbl:example_composition_rule}
の作文規則16を示す．この規則は，引用を行った場合，必ず出典を示すことを指
導するためのものである．

以上の四つのテンプレートに対して，論理演算子($and, or, not$)を適用する
ことにより，複数のテンプレートを論理的に結合させることができる．また，演
算子 $desirable$を適用することにより，必須的な作文規則なのか，任意的な作
文規則なのか（従ったほうが好ましい規則なのか）を表現することができる．

作文規則$R$の形式は，次のBNFで規定される．
\begin{align*}
 R  ::= & R' \mid desirable(R') \\
 R' ::= & (R' and R') \mid (R' or R') \mid not(R') \mid \\
    & include(e_i, e_j, N) \mid locate(e_i, e_j, P) \mid
    correspond(e_i, e_j, C)
\end{align*}


\subsection{作文規則に基づく誤り検出}
作文規則に基づく誤り検出は，次の手順で行う．

\begin{enumerate}
 \item 作文要素の付与
 \item 規則の適用
 \item エラーの生成
\end{enumerate}

\subsubsection{作文要素の付与}

作文要素の付与方法には，(a)生テキストに自動付与，(b)学習者が
付与，(c) (b)で付与された情報を利用して自動付与，の3通りがある．どのよう
な作文要素を付与するかは，作文規則（つまり，教師の指導項目）に依存するが，
ここでは，表\ref{tbl:example_composition_rule}に示した作文規則中の作文要
素と関係づけつつ，三つのタイプの作文要素の付与方法を説明する．


まず，(a)の方法で付与される作文要素は，自動的な認定の精度が高いものが対象
となる．認定の精度が低い場合や，精度が高くても，必須記述項目に関連した作
文要素のように教育上の重要性が高い部分については，(b)(c)の付与方法を取る
ことになる．

表\ref{tbl:example_composition_rule}中の作文要素のうち，(a)の方法で付与さ
れた作文要素は，「作文」「段落」「文」「文字」「章番号」「話し言葉形態素」
「だ・である形態素」である．これらは，表層的なパターンマッチングや形態素
解析結果を利用して付与されている．例えば，「文」は，改行情報や句点（。）
などの表層的な情報に基づいて認定している．また，「話し言葉形態素」は，作
文全体を形態素解析し，主として，話し言葉でよく用いられる文末の助詞，助動
詞を「話し言葉形態素」として認定している\footnote{今回は，形態素解析シス
テム MeCab (http://mecab.sourceforge.net/)，辞書として Jumandic を使用し，
「か」以外の終助詞，接続助詞「けど」，助動詞「んだ」，動詞語尾「ちゃ」
「りゃ」（例：食べ\underline{りゃ}いい）などを「話し言葉形態素」として検
出した．認定方法は，\cite{juman_manual}を参考にした．}．


次に，(b)のタイプの作文要素は，学習者が作文作成時にマークアップする．表
\ref{tbl:example_composition_rule}中の作文要素のうち，このタイプの作文要
素としては，章節タイトル（「章タイトル」「節タイトル」など），「引用」「出典」
「作文タイトル」「著者」に加えて，必須記述項目に関連する作文要素「目的」
「日程」「予算」「イベント」「導入部」「まとめ」がある．

(c)のタイプの作文要素の例としては，作文要素「章」（図
\ref{fig:structured_data}参照）がある．「章」要素の範囲を自動認定する際に
は，学習者がマークアップした「章タイトル」の付与結果を利用する
\footnote{{\modl 次の章タイトル，もしくは，文章末までを章の範囲として自動認定す
る．}}．また，必須記述項目の「導入部」についても，第1章の「章」要素を「序
章」として認定するのに利用されている（図\ref{fig:structured_data}では，
「章」要素のtype属性値として記述されている）．


\subsubsection{作文規則の適用とエラーの生成}

作文規則の適用は，学習者が作文を保存するタイミングで実行され
る．作文が保存されると，まず，（前節で説明した）付与方法(a)(c)の順序で作
文要素を付与する．その後，すべての作文規則を順次，作文に対して，適用する．

もし，作文規則に合致しない場合は，エラーとして学習者に伝達する．エラーメッ
セージは，個々の作文規則ごとに対応づけられているものとする．実際の実行結
果については，\ref{ssec:model_student_sys}節の図\ref{fig:check}を参照され
たい．


