================================================================
[section type  : abstract]
[section title : abstract]
================================================================
[i:0, score:351] 『現代日本語書き言葉均衡コーパス』は1億語を超える大規模なコーパスであり，17万ファイル以上のXML文書に短単位・長単位の形態論情報アノテーションが施されている．
[i:2, score:218] このシステムは，辞書見出しデータベースと，タグ付けされたコーパスとを関連付けて，整合性を保ちつつ多くの作業者が編集していくことを可能にするものである．
[i:3, score:420] このシステムは，関係データベースで構築されたサーバ「形態論情報データベース」と，辞書を参照しながらコーパスの修正作業を可能にするコーパス修正用のクライアントツール「大納言」，形態素解析辞書UniDicの見出し語の管理ツール「UniDic Explorer」から成る．

================================================================
[section type  : intro]
[section title : はじめに]
================================================================
[i:5, score:441] 国立国語研究所を中心に開発された『現代日本語書き言葉均衡コーパス（BCCWJ）』[CITE]は17万ファイル以上のXML文書に短単位・長単位の二つのレベルの形態論情報アノテーションを施した，1億語を超える大規模なコーパスである．
[i:7, score:354] BCCWJの形態論情報付与には，新たに開発された電子化辞書UniDicが用いられたが，UniDicの見出し語はBCCWJ構築と並行して整備されたため，コーパスの形態論情報の修正とUniDicの見出し語登録は整合性を保ちつつ同時並行で進める必要があった．
[i:12, score:385] このような大規模なコーパスへのアノテーションを支えるため，筆者らは，形態論情報がタグ付けされた大規模なコーパスと辞書の見出し語のデータベースとを関連付け，整合性を保ちつつ，国語研究所の内部だけでなく，研究所外部からも多くの作業者が同時に編集していくことを可能にするシステムを新たに開発した．

================================================================
[section type  : proposed_method]
[section title : 前提となる知識]
================================================================
[i:22, score:0] 
-----------------------------------------------------
  [subsection title : 短単位と長単位]
-----------------------------------------------------
  [i:lead, 192] BCCWJでは，短単位と長単位の二つの言語単位によるアノテーションが施された．
.....
  [i:29, score:287] 個々の短単位には，語彙素・語形・品詞・活用型・活用形といった形態論情報が付与される．
  [i:35, score:223] 長単位は，コーパス中で出現した短単位を必要に応じて結合させる形で構成され，個々の長単位にはそれを構成する短単位が持つ形態論情報をもとにして長単位としての形態論情報が付与される．
  [i:39, score:280] 長単位と短単位はBCCWJの最も基本的なアノテーションの一つであり，公式のコーパス検索ツール「中納言」-0.5zw等で利用され，多くのユーザーによって活用されている．
-----------------------------------------------------
  [subsection title : 形態論情報の精度と修正作業]
-----------------------------------------------------
  [i:lead, 180] BCCWJの形態論情報は，コアデータとして選定された約100万語は99%以上の精度を，それ以外の非コアデータは98%以上の精度を確保することとされた．
.....
  [i:40, score:180] BCCWJの形態論情報は，コアデータとして選定された約100万語は99%以上の精度を，それ以外の非コアデータは98%以上の精度を確保することとされた．
  [i:43, score:245] また，非コアデータからUniDic未登録語が採集され，それに伴う修正をコーパス全体に対して行う必要があったほか，短単位規程の見直しによってコーパス全体に対して特定の語の人手修正の処理を施す必要があった．
  [i:44, score:130] したがってコーパスの修正作業はコアデータに対して頻繁に行われるだけでなく，1億語以上のコーパス全体を対象に行う必要があった．
-----------------------------------------------------
  [subsection title : C-XMLとM-XML]
-----------------------------------------------------
  [i:lead, 141] BCCWJでは，C-XMLとM-XMLの二つの形式のXML文書が作成された[CITE]．
.....
  [i:46, score:325] C-XMLは，BCCWJのサンプルとして取得されたテキストに文書構造をXMLでアノテーションしたもので，形態論情報データベースにとっては入力となるデータの形式である．
  [i:47, score:233] このXML形式のデータをインポートし，形態論情報をアノテーションした上で，表形式やXML形式で出力することがこのシステム全体の処理の流れになる．
  [i:50, score:258] なお，誤字修正などがシステム上で行われるため，M-XMLだけでなく，形態論情報を含まないC-XMLも最終版は形態論情報データベースから出力される必要がある．
-----------------------------------------------------
  [subsection title : 数字の前処理]
-----------------------------------------------------
  [i:lead, 205] BCCWJの形態論情報付与では，UniDicを用いた形態素解析に先立って，数字について次のような変換処理がなされた．
.....
  [i:51, score:205] BCCWJの形態論情報付与では，UniDicを用いた形態素解析に先立って，数字について次のような変換処理がなされた．
  [i:57, score:123] 上述のC-XMLはこの変換前のテキストであるのに対し，M-XMLは変換後のテキストに基づいており，これに変換処理の内容（原文文字列と変換タイプ）をXMLでタグ付けして保持している．
  [i:58, score:102] このため，BCCWJを構築するためのシステムは，この変換処理前後の二つの状態のテキストを適切に保持管理する必要がある．

================================================================
[section type  : proposed_method]
[section title : 関連する先行事例との比較]
================================================================
[i:59, score:0] 
-----------------------------------------------------
  [subsection title : BCCWJの形態論情報アノテーションのための要件]
-----------------------------------------------------
  [i:lead, 220] [REF_sec:introduction]章・[REF_sec:knowledge]章で確認したことを踏まえるとBCCWJに形態論情報のアノテーション施すためには，少なくとも次の要件を満たすシステムが必要とされる．
.....
  [i:60, score:220] [REF_sec:introduction]章・[REF_sec:knowledge]章で確認したことを踏まえるとBCCWJに形態論情報のアノテーション施すためには，少なくとも次の要件を満たすシステムが必要とされる．
  [i:65, score:194] BCCWJの修正作業では[REF_sec:knowledge_accuracy]節で見たとおり，1億語規模のコーパスを対象に，同様の誤りを一括して修正する必要がある．
  [i:67, score:298] さらに，BCCWJの構築では，階層構造を持つ新しい電子化辞書UniDicのために専用の辞書データベースを用意し，その見出し語を用いてコーパスを修正する必要があった．
-----------------------------------------------------
  [subsection title : 既存のアノテーションツールとの比較]
-----------------------------------------------------
  [i:lead, 119] 人手による修正を加えた日本語コーパスで，1億語を超える規模のものはこれまでに構築されてこなかったこともあり，管見に入る限り，前節の要件を完全に満たす先行事例は存在しない．
.....
  [i:87, score:180] 表[REF_tab1]のうち，BCCWJの構築にとって最も重要なのは，前節で確認したとおり，大規模データへの対応，単語境界修正，辞書連携の機能である．
  [i:89, score:214] これらWeb上の汎用ツールは，導入の敷居が低く作業者も容易に利用が可能だが，比較的少数の文書ファイルに対してアノテーションを施すことを前提としており，BCCWJ構築のように，大量の文書を一度に修正するような作業には向いていない．
  [i:94, score:240] ChaKiは，日本語コーパス管理に関係データベースを用いる[CITE]の設計にもとづき，前節で見たような日本語の形態論情報アノテーションの特徴を踏まえたコーパス管理システムとなっている．
-----------------------------------------------------
  [subsection title : 本システムの優位性と問題点]
-----------------------------------------------------
  [i:lead, 110] 前節で確認したとおり，最も重要となる大規模データへの対応，単語境界修正，辞書連携の3つを満たすシステムは，本システムしか存在しない．
.....
  [i:98, score:265] 日本語の形態論情報アノテーションに適した機能を持ち，１億語を超える規模のコーパスを一度に取り扱うことを可能にしたこと，そして辞書データベースとの完全な連携が本システムの特長である．
  [i:100, score:157] また，階層構造をもつUniDicの辞書データベースを包含しており，アノテーションツールに留まらない言語資源管理のシステムとなっている．
  [i:102, score:114] BCCWJに特化した設計となっているため汎用性に乏しいこと，Webベースのシステムではないためクライアントソフトウェアの配布が必要であり導入の敷居が高いこと，フリーウェアではなくプロプライエタリなソフトウェアを用いて構築されているため配布が難しいこと，などは他のシステムと比較して劣る点である．

================================================================
[section type  : proposed_method]
[section title : 形態論情報データベースシステムの概要]
================================================================
[i:103, score:0] 
-----------------------------------------------------
  [subsection title : 形態論情報データベースの構成]
-----------------------------------------------------
  [i:lead, 271] 形態論情報データベースは，UniDicの見出し語を格納する「辞書データベース」と，コーパスを格納する「コーパスデータベース」から構成される．
.....
  [i:106, score:312] 形態論情報データベースは，UniDicの見出し語を管理する部分と，コーパスを格納して修正を行う部分に分かれる．
  [i:108, score:298] そのうえで，コーパスの形態論情報と辞書の情報を同一に保つために，見出し語表・活用表・変化表などから生成される「語彙表」を挟んで二つのデータベースを連係させた．
  [i:109, score:278] 辞書データベースには，短単位の見出し語表と，これを出現形まで展開するための活用表・変化表が含まれる．
-----------------------------------------------------
  [subsection title : 語彙表展開とコーパスとの同期処理]
-----------------------------------------------------
  [i:lead, 188] コーパスデータベースと辞書データベースを連携するための仕組みとして語彙表展開と同期処理が重要であるが，この処理は本システムの中でも最もコストのかかる処理のひとつである．
.....
  [i:121, score:252] 仮に語彙表展開とコーパスとの同期を全てリアルタイム処理で行うとすると，こうした見出し語を変更した場合のコーパスとの同期処理には大きな負荷がかかり，レコードロックなどが頻発し作業上深刻な問題となる可能性がある．
  [i:124, score:279] 一方，活用表や変化表の変更によって生じる語彙表展開と同期処理では，影響を受ける見出し語が多数にのぼり，関連付けられたコーパスの更新箇所も膨大となる可能性があるため，リアルタイム処理ではなく日次処理により行っている．
  [i:126, score:243] 辞書データベースとコーパスデータベースとの関連付けには，語彙表テーブルが保持する語彙表IDを用いるが，語彙表テーブルはコーパスの各語が持つ属性値も保持している．
-----------------------------------------------------
  [subsection title : 利用したシステム]
-----------------------------------------------------
  [i:lead, 145] 形態論情報データベースで使用した主な機器・ソフトウェアは以下のとおりである．
.....
  [i:132, score:145] 形態論情報データベースで使用した主な機器・ソフトウェアは以下のとおりである．
  [i:151, score:159] 形態論情報データベースは1台のデータベースサーバに複数の端末からアクセスするクライアント・サーバ型のシステムとして構築されている．
  [i:152, score:202] プロジェクト開始までの開発期間が限られていたこと，運用中も頻繁な仕様変更が想定されたことなどから，機能追加・変更が容易に行えるAccessでクライアントツールを開発し，DBMSにはAccessとの親和性が高く，データベース管理，分析，チューニング等のツールが充実しているSQL Serverを採用した．

================================================================
[section type  : proposed_method]
[section title : 辞書データベースの設計と実装]
================================================================
[i:155, score:0] 
-----------------------------------------------------
  [subsection title : 見出し語表の設計と実装]
-----------------------------------------------------
  [i:lead, 121] 辞書データベースは，形態素解析辞書UniDicの元となるデータベースである．
.....
  [i:161, score:494] 辞書データベースの基本となる見出し語表を構成するのは「短単位語彙素」「短単位語形」「短単位書字形」「短単位発音形」の4つの見出し語のテーブルである．
  [i:164, score:285] IDで関連付けられたテーブル間では，レコードの生成や削除に関連するデータベース制約を設定し，不正な見出し語のエントリを防いでいる．
  [i:166, score:368] UniDicでは，語彙素・語彙素読み・語彙素細分類・品詞・語形・活用型・書字形・発音形（表[REF_tab2]の列名に◎を付した）の組み合わせによって，見出し語が一意に区別される．
-----------------------------------------------------
  [subsection title : 語彙表展開の設計と実装]
-----------------------------------------------------
  [i:lead, 379] 辞書データベースには，見出し語のテーブルのほかに，活用語を展開するための「活用表」テーブル，語頭・語末変化形を展開するための「語頭変化」「語末変化」テーブルを置き，見出し語をコーパス上に出現する形にまで展開させる．
.....
  [i:171, score:379] 辞書データベースには，見出し語のテーブルのほかに，活用語を展開するための「活用表」テーブル，語頭・語末変化形を展開するための「語頭変化」「語末変化」テーブルを置き，見出し語をコーパス上に出現する形にまで展開させる．
  [i:174, score:441] 語頭・語末変化テーブルは，語形が持つ語頭・語末変化型に応じた語頭・語末文字の変化パターンを記した表であり，語形・書字形の見出し語の語頭・語末変化形を語彙表に展開する処理で使用される．
  [i:201, score:444] 辞書データベースでは，語彙素テーブルの主要項目のほか，語彙素・語形・書字形・発音形テーブルを結合した主要項目，語彙表テーブルにも一意制約が設定されているため，語彙素・語形・書字形・発音形が登録できてもその後語彙表展開したものが重複した場合には，語彙表展開がロールバックされ登録自体も無効となる．
-----------------------------------------------------
  [subsection title : 辞書データベースの運用]
-----------------------------------------------------
  [i:lead, 74] 一般的にクライアント・サーバ型のシステムでは複数の作業者が同時にデータを変更した場合に，処理が混在しデータに矛盾が生じる可能性がある．
.....
  [i:210, score:481] 辞書データベースにおいては，見出し語を変更すると見出し語の各テーブルに設定したトリガにより語彙表展開までが一連の処理として行われるが，語彙表展開の処理は内部に「非語頭語末変化パターンの展開」「語頭語末変化パターンの展開」「特殊活用形の展開」など複数の処理のステップがあり，なおかつ処理中は見出し語表，活用表など複数のテーブルのデータを参照する必要があることから，見出し語の変更から語彙表展開までは形態論情報データベースのなかでもコストがかかる処理となっている．
  [i:219, score:320] 見出し語の語彙素・語形・書字形・発音形の変更では必ずリアルタイム処理による語彙表展開処理が行われるようにした．
  [i:223, score:268] トランザクション処理中に他の作業者によりデータ変更が行われてしまう反復不能読取りについては，語彙表展開なしに見出し語を変更できないようにし（b.），さらに先行の処理が完全に終了されるまで後続の処理をロック待ちにすることで（a.とc.），複数の作業者が同一箇所について同時にデータ変更が行えないようにすることで回避した．
-----------------------------------------------------
  [subsection title : 辞書データのエクスポート]
-----------------------------------------------------
  [i:lead, 191] 辞書データベースは，コーパスデータベースの修正に用いられるだけでなく，形態素解析用の辞書（見出し語リスト）を出力する役割も担っている．
.....
  [i:228, score:347] UniDic 1.x系列の形態素解析辞書の作成に当たっては，辞書データベースの見出し語表・活用表・語頭語末変化表を組み合わせて展開した語彙表を表形式テキストとして出力し，これをMeCab用の辞書のソースデータとして提供した．
  [i:229, score:299] さらに，見出し語のテーブルを結合・再構成してUniDicの階層構造を再現したXML形式で出力し，UniDic 2.x系列の辞書データとして提供した．
  [i:230, score:230] 同時に活用表や語形変化表もXML形式で出力し，辞書データベースの大部分をXML形式で外部に提供することを可能にした．

================================================================
[section type  : proposed_method]
[section title : コーパスデータベースの設計・実装・運用]
================================================================
[i:231, score:0] 
-----------------------------------------------------
  [subsection title : コーパスデータベースの設計と実装]
-----------------------------------------------------
  [i:lead, 175] [REF_sec:knowledge]章で確認したとおり，BCCWJのテキストはXML文書の形で提供される．
.....
  [i:240, score:523] コーパスデータベース中のテーブルは，XML文書起源のものとして「文字」テーブル，「タグ」テーブル，「ルビ」テーブル，「文字修正」テーブルがあり，これに後述する数字処理による「数字」テーブル，形態論情報アノテーションとしての「短単位」テーブルと「長単位」テーブルが加わる．
  [i:243, score:382] このうち，コーパスデータベースにとって必須のデータは文字テーブルと短単位テーブルであり，XML文書の復元や長単位アノテーションを必要としない場合にはこれ以外のテーブルは不要となる．
  [i:245, score:959] [title=リスト1短単位と長単位のアノテーション例（X-XML）] <mergedSample sampleID="OW6X_00028" type="BCCWJ-MorphXML" version="1.0"> <article articleID="OW6X_00028_V001" isWholeArticle="false"> <titleBlock> <title> <sentence type="quasi"> <LUW B="S" SL="v" l_lemma="第一章" l_lForm="ダイイッショウ" l_wType="漢" l_pos="名詞-普通名詞-一般" l_formBase="ダイイッショウ"> <SUW orderID="10" lemmaID="22937" lemma="第" lForm="ダイ" wType="漢" pos="接頭辞" formBase="ダイ" pron="ダイ" start="10" end="20">第</SUW> <SUW orderID="20" lemmaID="2050" lemma="一" lForm="イチ" wType="漢" pos="名詞-数詞" formBase="イチ" kana="イッ" pron="イッ" start="20" end="30">１</SUW> <SUW orderID="30" lemmaID="16559" lemma="章" lForm="ショウ" wType="漢" pos="名詞-普通名詞-一般" formBase="ショウ" pron="ショー" start="30" end="40">章</SUW> </LUW> <LUW SL="v" l_lemma=" " l_lForm="" l_wType="記号" l_pos="空白"> <SUW orderID="40" lemmaID="23" lemma=" " lForm="" wType="記号" pos="空白" formBase="" pron="" start="40" end="50"> </SUW> </LUW> <LUW B="B" SL="v" l_lemma="障害者施策" l_lForm="ショウガイシャシサク" l_wType="漢" l_pos="名詞-普通名詞-一般" l_formBase="ショウガイシャシサク"> <SUW orderID="50" lemmaID="16607" lemma="障害" lForm="ショウガイ" wType="漢" pos="名詞-普通名詞-サ変可能" formBase="ショウガイ" pron="ショーガイ" start="50" end="70">障害</SUW> <SUW orderID="60" lemmaID="15852" lemma="者" lForm="シャ" wType="漢" pos="接尾辞-名詞的-一般" formBase="シャ" pron="シャ" start="70" end="80">者</SUW> <SUW orderID="70" lemmaID="15256" lemma="施策" lForm="シサク" wType="漢" pos="名詞-普通名詞-一般" formBase="シサク" pron="シサク" start="80" end="100">施策</SUW> </LUW> <LUW SL="v" l_lemma="の" l_lForm="ノ" l_wType="和" l_pos="助詞-格助詞" l_formBase="ノ"> <SUW orderID="80" lemmaID="28989" lemma="の" lForm="ノ" wType="和" pos="助詞-格助詞" formBase="ノ" pron="ノ" start="100" end="110">の</SUW> </LUW> <LUW B="B" SL="v" l_lemma="総合的取り組み" l_lForm="ソウゴウテキトリクミ" l_wType="混" l_pos="名詞-普通名詞-一般" l_formBase="ソウゴウテキトリクミ"> <SUW orderID="90" lemmaID="21023" lemma="総合" lForm="ソウゴウ" wType="漢" pos="名詞-普通名詞-サ変可能" formBase="ソウゴウ" pron="ソーゴー" start="110" end="130">総合</SUW> <SUW orderID="100" lemmaID="25076" lemma="的" lForm="テキ" wType="漢" pos="接尾辞-形状詞的" formBase="テキ" pron="テキ" start="130" end="140">的</SUW> <SUW orderID="110" lemmaID="26779" lemma="取り組み" lForm="トリクミ" wType="和" pos="名詞-普通名詞-一般" formBase="トリクミ" pron="トリクミ" start="140" end="160">取組</SUW> </LUW> </sentence> <br type="automatic_original"/> </title> </titleBlock>
-----------------------------------------------------
  [subsection title : コーパスデータベースの運用]
-----------------------------------------------------
  [i:lead, 225] コーパスデータベースの運用実績は，履歴をもとに集計すると，BCCWJ全体の更新件数が約302万件（約1,000日間），1日あたりの平均更新件数が約2,800件，1日あたりの最大更新件数が約25,000件，最大接続ユーザー数が22名であった（更新件数は一部推計によるものを含む）．
.....
  [i:261, score:347] BCCWJでの作業では，短単位テーブルに約1億2千万件のレコードが存在し，そのうち人手によるデータ更新が302万箇所（推計値）で行われた．
  [i:297, score:261] このことにより，コーパス名による検索を短単位テーブルの主キーであるサンプルIDによる検索に変換することができ，検索対象の絞込が高速化された．
  [i:302, score:301] (b)トランザクション分離レベルの設定短単位テーブルの修正は，そのほとんどが単位境界の切り直しを伴いレコード数が変化することになる．
-----------------------------------------------------
  [subsection title : コーパスのエクスポート]
-----------------------------------------------------
  [i:lead, 217] 人手で修正を行った形態論情報は，元のXML文書にタグとして埋め込んだXML形式でエクスポートすることができる．
.....
  [i:322, score:307] 当然ながら，表形式の形態論情報を出力することも可能であり，BCCWJを構成する表形式の形態論情報データ（短単位・長単位TSV）はこのデータベースから出力された．
  [i:324, score:310] さらに，形態素解析辞書UniDicの機械学習に用いるコーパスも，コーパスデータベースの短単位テーブルの一部を出力したものである．
  [i:325, score:395] なお，データベースに格納されている形態論情報は，インポート前の数字処理を経たテキストを元にしておりBCCWJのM-XMLおよび表形式の形態論情報データではこれを出力しているが，データベース上では原文に相当するC-XMLを元にして管理されているため，数字処理を行わない形でXML文書を取り出すことも可能な設計になっている．

================================================================
[section type  : proposed_method]
[section title : クライアントツールの開発]
================================================================
[i:326, score:0] 
-----------------------------------------------------
  [subsection title : 辞書データベース用ツール「UniDic Explorer」]
-----------------------------------------------------
  [i:lead, 259] 辞書管理ツール「UniDic Explorer」は辞書データベースへの見出し語の追加・修正をするために開発したクライアントツールである．
.....
  [i:327, score:259] 辞書管理ツール「UniDic Explorer」は辞書データベースへの見出し語の追加・修正をするために開発したクライアントツールである．
  [i:328, score:163] ツール上にUniDicの見出し語の階層構造をそのまま可視化しており，階層構造を意識した辞書管理を可能にしている（図[REF_fig9]）．
  [i:329, score:334] 上段左の検索用コントロールで，各階層の見出し語の情報（語彙素・語彙素読み・語形・書字形・その他）を対象に見出し語表を検索すると，左ペインにマッチした語がUniDicの階層構造を反映したツリー形式で表示される．
-----------------------------------------------------
  [subsection title : コーパスデータベース用ツール「大納言」]
-----------------------------------------------------
  [i:lead, 91] 短単位の自動解析精度はおおむね98%程度であった．
.....
  [i:343, score:309] 多くの修正作業は，形態論情報を使った検索の結果に対して行うことになるが，その検索条件の指定では，「語彙素」「書字形」などの単純な形態論情報の検索だけでなく，形態論情報を前後5グラム分まで自由に組み合わせた高度な検索が可能である．
  [i:348, score:234] この際，該当する短単位がなければ，UniDic Explorerで新規の見出し語を追加した後，新たに語彙表に追加された出現形を使用する．
  [i:354, score:265] 6章で示したとおり，コーパスデータベースは文字ベースの開始終了IDで全体が関連付けられているが，「大納言」を通してこれらの修正を行うことで，作業者が意識することなく全体の関連付けの整合性を保つことができる．

================================================================
[section type  : conclusion]
[section title : おわりに]
================================================================
[i:359, score:242] 以上に述べた「形態論情報データベース」を開発することで，形態素解析された1億語規模のコーパスを格納し，その全体に対して形態論情報の修正処理を行うことを可能にした．
[i:361, score:243] このシステムがBCCWJの形態論情報アノテーションを支え，BCCWJを構成する全てのデータはこのデータベースから出力された．
[i:363, score:213] このデータベースシステムは，現在「日本語歴史コーパス」の構築に利用されているほか，BCCWJのタグ修正や新形式のデータ出力などメンテナンス作業の基盤としても活用されている．

