
電子化本文の作成は研究の効率化をはかることが目的であるが，新しい研究テーマへの展開やデータベースとしての発見的利用も期待されている．
例えば，大量の資料，情報を扱った考察が可能になり，自説の組立や確認の度合いが飛躍的に高まる．
単語や語形の検索はもとより，単語が現れる環境の調査が可能になる．
組版などの印刷物では表せないことが可能になる．
さらに，作品に記載されていないことの発見的検索が可能になる[CITE]．
国文学の研究対象は，上代の神話から現代の作品まで全ての時代に渡り，地域的にも歴史上のわが国全土を網羅する．
また，古典文学は千数百年に渡る歴史を持ち，ジャンルも多様である．
表１に，散文，韻文，戯曲のカテゴリに大別し，その代表的ジャンルの例を示す．
しかし，絵詞\yougoのようにこの分類に馴染まないものも多い．
このような様々な作品を統一的に電子化することは不可能である．
そこで，次のような段階を経ながら，電子化の経験を積むこととした．
時代，ジャンルを網羅するような基準本文を作る．
個別のジャンルまたは作品の深化を行う．
これは，まず国文学作品の全般的な様相を知り，次いで個別の作品の伝本の全ての本文校訂に進むことを可能とするプロセスを考えるためである．
したがって，第１段階での網羅性は文学作品の本文の全体的な様相を把握し，その上で電子化の方策を考えることが可能な程度の作品の種類と量を必要とする．
また，これには実際にデータを作成し，その過程から知識を得て行くことが不可欠である．
また，写本や刊本\yougoから直接電子化本文を作ることはかなり難しい．
規範的な標本があれば，あるいは典拠と言って良いが，作業効率は格段に高まる．
研究者が最も望むものは，第２段階の専門領域の電子化本文である．
基準本文は第２段階の電子化本文作成にとって，重要な要件と考えられる．
何を基準とするかの問題がある．
国文学や歴史学では古記録，古文書，古典籍などの研究対象資料（文献資料と言う）を翻刻する場合に，校訂作業が不可欠である．
作品の多くの伝本\yougoを比較参照し，書写文字などによる本文の意味や用法を考察し，作品の本文を定める（定本と言う）．
すなわち，校訂本が作られる．
このことから，基準本文には定本としての校訂本を基礎とすべきである．
現在までに研究対象とした作品の一覧を，表２に示す．
これらは二十一代集を除き，校訂本からのデータ作成である．
第１段階として，時代及びジャンルを網羅した規範的な校訂本のデータベースを準備することを目標にして，選定している．
電子化本文を作成するに当たって，まず取り扱う情報の種類と性質を整理する必要がある．
本文は校訂本から選んだ．
このとき，この本文は校訂という枠組の中で成立する．
すなわち，電子化本文は純粋な本文データの他に，校訂に関する情報を持つ必要がある．
本文データが単独で利用されることはない．
本文とその本に関する情報は不可分である．
図１に，このような情報を階層的に構造化して示す．
これは本と作品，本文の情報構造を明確化し，その上で本の論理構造を定義するものである．
国文学におけるこのような整理はなく，図１はやゝ常識的ではあるが，現在有用であるとされている．
ここで，本と作品の物理構造を考えておく．
本は作品を記載する．
この関係は通常は１対１であるが，古典籍では多対１あるいは逆に１対多も多い．
多対１は作品が分冊される形態であり，１対多は複数の作品がまとめられる場合である．
これは伝本の形態によって異なる．
このような情報構造は図１によって記述できる．
さらに，よく和歌集などに見られる合綴本などの構造記述も可能である．
なお，本文が文献資料から直接選ばれる場合も，実質的に翻刻，校訂作業を経るから，図１の情報構造が適応できる．
図１(a)は，本の構造を示す．
本の構造は本の物理的なモノとしての種類と形態を表す．
本は伝来されたものである．
これを本の系譜構造として把握する．
また，本の情報とは本に関わる情報，言わば属性情報であり，階層化して定義する．
本の情報構造は３レベルの階層で定義する．
図において，本の情報は文献資料情報と校訂本情報とから成る．
文献資料情報は底本\yougo ,諸本（または異本\yougoとも言う），それらの系譜に関わる情報から成る．
また，底本情報は書誌，所蔵，及び成立に関する情報から成り，諸本情報も同様である．
書誌，所蔵に関わる情報は図書館などで一般に用いられている情報に加え，古典籍特有の情報項目を持つ．
成立情報は底本及び諸本の本文の成立に関わる情報である．
通常，校訂は底本を基軸とし他の伝本を参照しながら行われる．
すなわち，底本は諸本の中で位置付けられる．
位置付けに関わる情報は本の成立に関わる構造の把握と考えられる．
一方，校訂本情報は本としての構造を持ち，書誌情報などによって同定される．
校訂本には成立に関する情報は無いと考えられるが，ここでは一般化して考える．
同一の作品には複数の校訂本があるが，校訂本としての性格から独立して扱うことは可能である．
ただし，文献資料情報と同様に諸校訂本との関連を参照する必要がある場合には，諸校訂本情報として記述する．
図１(b)は，本文に関する情報の構造である．
本文情報は元・本文情報，原・本文情報，及び校訂情報から成る．
本文情報はその出典により，２種類に大別される．
両者は全く異なるものである．
元・本文情報とは底本に記載されている本文と，それへの種々の書き込みなどの情報である．
書肆的な情報なども含む．
校訂により，元・本文情報は校訂本文である原・本文情報に変換される．
原・本文情報は本文と傍記の形式で表記される．
ここで，本文とは主たるテキストを指す．
傍記は本文を構成する文，語，字などへ直接付加されたテキストである．
例えば，校異\yougo ,振り仮名や振り漢字などがある．
また，校訂本には作品の本文の他に校訂に関わる様々な情報を伴う．
例えば，解題\yougo ,解説，頭註\yougoまたは脚註，凡例などである．
これらを校訂情報と呼ぶが，単なる註ではなく校訂本のテキストの形態の１つである．
ところで，校訂情報は狭義の校訂情報と校註情報と呼ぶ２つの情報から成る．
狭義の校訂情報は解題などのように作品全体に関わる情報であり，テキスト形態の１つである．
校註情報は頭註など本文の語彙などに関わる情報である．
上述の傍記とは異なるものである．
さらに，校註情報は校訂註と解説註に分けて考える．
校訂註は本文の異同に関する校訂者の見解や従来の考え方などの参照である．
校異に関する註記であるので，校訂上とくに重要な情報と考えられる．
解説註は主に本文中の様々な事項に関する解説である．
例えば，人物，儀式，官位，あるいはテキストの解釈などである．
いずれもテキスト形態の１つと考えられる．
図１(c)に示すように，論理的な原本の構造を定義する．
電子化の直接的な対象は原本すなわち校訂本である．
原本はその版面情報を保存することを原則とする．
理由は電子化本文の根拠を原本において，データの信頼度を保証する必要があるためである．
すなわち，原本通りのデータがデータベースに写像されていなければならない．
そこで，原本を論理化して考える．
論理原本は論理ファイルから成る．
すなわち，原本の各ページを論理ファイルとして定義する．
論理ファイルは原本のそのページに限定された原文の集まりである．
通常，ページや原行の始端または終端では文の中断が起こり得る．
これを認識したり，また意味のある文の単位を確定したりすることは結構難しい．
文の単位を形式的に定義する．
原文は形式的に原行の集合から構成されるから，論理ファイルは原行から構成するものとする．
すなわち，文を行によって形式的に定義する．
これを論理レコードと呼ぶ．
論理レコードはまた原語及び原字から構成される．
論理ファイル中の論理レコードは順序性を保存し，かつ論理ファイル自体も順序性を持つ．
以上のことから，電子化本文のデータ記述においては，本の構造，作品の構造，本への作品の位置付けなどを考慮しなければならないことが分かった．
また，本文を構成する文，語，字などの要素に対応する傍記と呼ぶテキスト形態の１つを，本文記述としてルール化しなければならない．
文学研究には本文とそれに関わる諸情報が，同時に参照，処理できなければならない．
これは，全文をコンピュータに単に蓄積しただけでは進められない．
本文情報のデータベース化を指向する必要がある．
全文と様々な属性情報から成る総合的なデータベースを，校訂本文データベースと呼ぶ．
電子化本文は本文と傍記から成るが，これは並列的なテキストである．
また，校訂情報や校註情報などが加わり，マルチテキストである．
とくに，本文は諸本の系譜の中で位置づけられ，諸本の本文比較などが可能でなければならない．
本文の氏素性の関連と同定に関する多種多様な情報を組織化し，活用しなければならない．
すなわち，このような多重構造を持ったデータの世界は，データベースとして構築することが適当と考えられる．
さらに，研究者の研究目的，方法，対象によって自由な活用ができることが不可欠である．
例えば，ハイパーテキストなどのユーザインタフェースにより，柔軟かつ高次の活用に応える必要がある．
このことから，まず大型コンピュータのデータベース機能を活用し，本文データベース化の基本的開発研究を行うこととした．
この成果に基づき，次いでパーソナルデータベース化を進める．
パーソナルデータベースではデータの流通を考慮して，例えばCD-ROMなどのパッケージ型の自立型テキストを考慮する．
なお，データ記述のルールにはデータベース化を指向した機能を考慮する必要がある．

文学作品の構造を定義しなければならない．
通常，SGMLでは文書型定義（DTD:Document Type Definition）と呼ばれるもので，ここではこれを作品型定義（TTD:Text-data Type Definition）と呼ぶ．
一般に，TTDは全てに共通するような標準型が定義できるわけではない．
韻文，散文，戯曲の文体毎に，さらに細かいジャンル対応にTTDを定義する必要がある．
すなわち，作品毎にTTDを置く．
なお，現在一般に定まった本文DTDまたはTTDは無い．
本文研究では，作品の掲載されている原本の体裁などの情報が必要とされる．
例えば，原本の何ページの何行目の文という同定が必要である．
これは，諸本の本文の様々な差異の対比において必要とされる．
通常，SGMLでは文書の構造を論理的なものとして本の体裁，すなわちフォーマットを分離して考える．
しかし，古典テキストの研究では，本の物理的な構造と論理的な構造を一体化した考え方をとることが要求される．
すなわち，本文の位置情報が必要である．
ある本におけるその文の現れる位置の同定である．
原本に記載されている底本の位置情報も不可欠な情報である．
例えば，表２の噺本大系では原・本文中に「（十五ウ）」などと表記されているが，これは「この位置までが底本の15枚目の裏であること」を意味する．
ところで，底本の文，語，字などと校訂本の文，語，字などとの対応は，研究上不可欠な情報として同定されなければならない．
換言すれば，写本のテキストと活字本のテキストの文の対応，同定である．
しかしながら，このデータ作成は専門家によるかなり高度な作業を必要とする．
しかも，作業の負荷がたいへんに重い．
そのため，この課題は将来課題とせざるを得ない．
以下の考察のために，図２に，表２の東京堂出版「噺本大系」の第五巻「軽口大わらひ」の版面コピーを示す．
また，図３に噺本大系の作品構造を５レベルの階層構造で定義する例を示す．
なお，記号などは後述する．
次に，本文の構造を把握しなければならない．
いわゆる文体である．
当然，本文の構造はジャンルにより異なり，同じジャンルでも時代や本の体裁により異なる．
原・本文は多くの文から構成されている．
文には多くの種類がある．
データ記述に当たって，文を１つの単位とすることが望まれるが，意味のある文の確定は困難である．
そこで，前述のようにデータ記述の基本的単位を論理レコードとした．
論理レコードの識別のための記述子をタグと呼ぶ．
論理レコードは原本上の位置を保存し，かつ種別についてタグによりマークアップされる．
タグには原本の構造を定義するタグと，原・本文の構造を定義するタグがある．
論理レコードの順序性はタグにより保持する．
意味のある論理レコードの集まりを定義する．
論理レコード集と呼ぶ．
例えば，和歌集の中の１つの歌の範囲を決める論理レコードの集まり，すなわち作者，題，詞書き，歌などのまとまりである．
あるいは，図３に示すような小噺の１つの単位などである．
論理ファイルは形式的な論理レコードの集まりとして取り扱う．
一方，論理レコード集は上例のように意味のある構造を抽出する場合に用いる．
現代文，古文を問わず日本語には欧米文と異った特有の表現がある．
文は分かち書きの無い文であり，とくに古文では句読点も無い．
文は縦書きであり，割書\yougo ,虫喰い\yougo ,囲み\yougoがあり，読み，振り，訓点\yougo ,ヲコト点\yougo ,各種註記などの多様な傍記を持っている．
さらに，任意の位置に参照や書込みがあり，挿し絵，解題，頭註または脚註があり，系図があり，「何々を見よ」などの引用や遷移もある．
すなわち，作品は本文と各種情報が混在したハイパーテキスト的である（図２の版面参照）．
原・本文は本文と傍記によって表現される．
本文の記述には文字セットを除き特段のルールは必要ではない．
傍記の記述にはルールが必要である．
一般に，傍記はその文の要素への指示として表される．
文の要素を本文素と呼ぶ．
本文素とは意味のある語や字を単位とする概念ではなく，傍記の対象となる語や字などの論理的な単位である．
傍記は必ずしも意味のある語に指示されるわけではなく，例えばその語にとって意味的に不可分の下位構成語や字に指示されることも多い．
傍記の表記は本文素に対する並列的なまた補足的な文や記号から成る．
これを傍記素と呼ぶ．
したがって，本文素に対する傍記の位置付けが決まればその記述が可能である．
この位置付けの記述子はフラグと呼ばれる．
フラグは本文素並びに本文素の間に対する傍記の位置を示すために使用する．
本文素の間とは字間や語間などであり，傍記はこれらの間にも指示される．
これにより，傍記を論理レコード中に埋め込み記述することができる．
一方，特殊な構造を持つ文の表記形式については，フラグを構造的に定義する制御記号を定め，その変換規則を定める．
これらには虫喰いとその各種変形，図式的なテキスト表現（系図など），割書，２重傍記，版本における書誌的事項などが定義されている．
文字種が多い．
本文は書写による時代による複雑な変遷，伝搬過程がある．
電子化本文の文字セットを閉じることは不可能である．
文字セットには梵字\yougoなどの各国語文字，踊り字\yougo ,謡印\yougo ,音曲記号，注記記号などの他，絵文字に代表されるような特殊な文字や記号もある．
原文に使われている文字セットは原則として保存する．
ただし，踊り字，謡印などのような特殊な文字や記号は，適切な文字や記号に置換する．
例として，日本古典文学大系を見てみる．
これは旧漢字，旧仮名使いで表記されている．
現在のJISコ−ド表（JIS 78を用いている）では漢字字体についての規則性はなく，旧字体と新字体が混在している．
そのため，JISコ−ド表に定義している旧漢字はそのまま使う．
JIS外の旧漢字でその新字体がJIS内にある場合はこの新字体を用いる．
その新字体がJIS外であればその文字を作成する．
JIS外字の内，新字体を持たない旧字体の漢字は作成する．
国文学研究資料館が定義するJIS外字（約2600字）は基本文字として使う．
このような簡単な規則を定めて電子化した場合に，日本古典文学大系には約３千種のJIS外字がある．
この内の約600種は作成すべき文字と認識されている．
ただし，データ流通を考える場合にはあまりJIS外字を増やすべきではない．
なお，噺本大系はJIS内字に拠っているので，JIS外字はないが，この場合には絵文字などの特殊文字が多い．
使用する文字セットはその型をTTDの先頭で定義する．
国文学の電子化本文に要求される機能に，まず語彙索引の作成がある．
日本語による文は語単位の分かち書きの無い文からなる．
そこで，日本語の全文データベースを作成する場合は，その文を分かち書きしなければならない．
さらに，その単位毎に表記，読み，品詞などの属性情報を付加する必要がある．
しかし，分かち書きを行うことは一般に容易ではない．
次のような問題がある．
作品は時代，ジャンルの範囲が広範である．
また，作品は個々に文体が異なるために，語彙索引の作成，管理，利用の取扱いが異なる．
最も重要な点は，研究者によって語単位の確定やその属性に対する認識が異なることである．
したがって，第１段階では分かち書きをしたデータ作成は行わない．
利用する研究者が行うものとする．
そのための分かち書きと属性付加に関するルールのみを定める．

上記の問題を全て解決できているわけではない．
電子化本文の対象は前述の校訂本，版本であるから，符号化の規則はこの範囲を原則としている．
KOKINルールと呼ぶデータ記述文法を定め，データ作成に当った．
これは自立型のデータファイルとして流通できること，並びに本文データベースに登録できることを条件にしている．
KOKINルールは３種の規則から成る．
なお，この規則は研究者が日常的に使用できることを前提に作られており，単純ではあるが機能は充足していなければならない．
以下に，ルールの基本構造をまとめる．
文献[CITE]による噺本大系を具体例に用いる．
KOKINルール＃１は作品のTTDを定義する．
TTDは論理ファイルの順序並びである．
論理ファイルは論理レコードの順序並びである．
論理レコードはその型と性質がタグにより定義される．
したがって，TTDの定義はタグリストで表すことができる．
なお，タグを持たない論理レコードはない．
図４に，論理レコードの基本形を多少説明を省くがBNFで定義したものを示す．
論理レコードの基本形はタグと情報部から構成される．
情報部は原文の本文データの本体部分であり，算用数字または日本語文字列で表現される．
表３に，タグの種類と定義の抜粋例を示す．
また，表４にタグの書式と文法の定義例を示す．
タグは英字により定義し，属性は算用数字（いずれも全角文字），または日本語文字列による．
原則として，論理レコードは開始記号“¥”で始まり，タグを定義し，必要な情報部による本文データが続き，終結記号“★”で終了する．
自明の開始記号は省略可とする．
これらの記号に特段の意味はなく，利用者の見た目の分かり易さを重視した．
なお，作品毎に独自に定義するタグがある．
これをローカルルールと呼ぶ．
噺本大系に関する作品構造（TTD）の定義例を，付録[REF_sec:furoku2]に示す．
また，そのデータ記述例（初期データ入力例）を，噺本大系第五巻「軽口大わらひ」について，付録[REF_sec:furoku3]に示す．
KOKINルール＃２は，日本語の特有な表記のためのデータ記述のルールである．
主として傍記記述の文法である．
傍記はテキストであるが，本文に対する付随的な情報と考え，意味を考えない．
例えば，読み，振り漢字，校異註，参照などの区別をしない．
すなわち，本文に対する傍記の位置付けである論理関係を定義する．
この記述子がフラグである．
図５に，BNFによりフラグ文法を定義した抜粋例を示す．
また，下記で用いる例を図中にまとめる．
フラグは，本文素への傍記の位置の開始及び終結を指示しなければならない．
これらを開始フラグ及び終結フラグと呼ぶ．
終結フラグに続いて開始フラグが現れる場合は，終結フラグを省略することができる（フラグの縮約と言う）．
とくに，字間，語間などの間の位置を示すフラグは開始と終結を同時に兼ねる．
これを間フラグと呼ぶ．
なお，間フラグに続いて開始フラグが現れる場合（傍記が独立している）は，フラグの省略は無い．
特殊な傍記などの記述のための制御記述子を定義する．
以下に代表例（記述例は図５）を示す．
縦書である本文素の左右の傍記を左右傍記と呼ぶ．
左右傍記制御記述子“｜”により，右傍記と左傍記を識別する．
記述順序は右傍記優先である．
２重傍記は２重傍記制御記述子“＃”により識別する．
記述順序は右側傍記優先である．
文の特殊な表記の記述規則も定める．
例えば，虫喰いは様々な表記形式がある．
個別の虫喰いは原則として文字“□”に置き換える．
四角で囲った虫喰い文字列は，推量された文字列を補ったものである．
虫喰い領域記述子“◇”により記述する．
同様に，領域を指定する記述子はそれぞれの性質毎に定める．
例えば，割書は領域記述子“＠”により識別する．
傍記データの記述規則を定める．
傍記データは原文のままとする．
傍記には，元来底本に表記されている振り仮名や漢字などがあり，また原本の校異などに関する種々の校訂註がある．
データ記述においては傍記の種類の区別はしない．
すなわち，傍記の属性情報は定義しない．
特殊文字の置換規則を定める．
例えば，古文でよく使われる２字以上の踊り字“\odorizi”は，清音，半濁音，濁音別に定める繰返し記号により置換する．
例えば，ｎ字の清音の踊り字はｎを繰返し音字数とし，“＋ｎ”と記述する．
分かち書きを行い，品詞情報や各種属性情報を付加するための規則である．
付加価値付けと呼んでいる．
ルール化の基礎を語彙索引の作成に置く．
すなわち，文を語あるいは接辞などの造語成分に区切り（語単位），これに対する読みを付して，読みによる５０音順に配列する．
同一語を一ヶ所に集めるために，活用語は終止形を基本とする読みを与える．
さらに，同音異義語を区別するため漢字を与える．
掛詞\yougoなどの両用語の掲出を考慮する．
品詞情報を付加する．
とくに，名詞では人物名，官職と人物の同定，地名の同定を考慮する．
一方では，原文の誤字，脱字などや特殊語彙の注記の表現なども必要である．
図６に，ルールの典型例を示す．
KOKINルール＃２と同様の書式であるが，フラグ記号に空白を用いて語単位（または形態，形態素など）を確定し，（）内に属性情報を付す．
属性情報は語単位に対して，種別を［］などで括り与える．
属性情報の記述は傍記と同じ形式である．
語単位の確定や属性情報の種類と目的などは，研究者の研究目的によって異なるから，これら全てについて前もって定義することはできない．
このような背景から，ルール＃３は現在未完成である．
また，先に述べたように，第１段階では分かち書きは行わない．
