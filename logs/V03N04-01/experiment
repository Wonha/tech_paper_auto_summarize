評価
\label{sec:5shou}

KOKIN ルールに基づいて，表２に示す作品のデータ記述を行い，データ作成を行
った．これらのデータ構文の正当性の検証は，専用のパーサシステムを作り確認
した．詳細は割愛するが，KOKIN ルール自体に特段の問題はない．このシステム
はむしろデータ作成上のエラーチェックに有効であった．また，ルール化された
データから元のデータを再現する検証を行い，確認した．これは印刷組版までの
再現ではなく，原本の形式上の再現として行った．

次に，KOKIN ルールで作成したデータは，研究者が研究現場で実際に使えるかと
いうことの評価が必要である．すなわち，ルール化されたデータの有用性，有効
性の検証である．そこで，次のような課題について実証実験を行った．


\subsection{校訂本文データベース}
\label{sec:5.1setu}

KOKIN ルールで記述したデータは，校訂本文データベースとして定義可能でかつ
実装できなければならない．とくに，作品の本文をどのようにデータベースに定
義するかの問題がある．本文の連続性を保存し，文体の構造を規定し，文や語や
字の検索，研究を可能としなければならない．

校訂本文データベースは本文，書誌，注釈，ユーティリティという４つの実体と
それらの関連により，概念モデルが定義されている\cite{yasunaga:94}．
すなわち，図１に示した電子化本文の情報構造を定義するモデルとして
実現されている．

本文実体は，本文情報すなわち本文と傍記のデータベースである．作品単位でそ
の本文情報を蓄積するが，KOKIN ルール＃１で規定した論理レコードを定義域と
する．KOKIN ルール＃２は論理レコードを構成するデータとして取り扱う．書誌
実体は本の構造を含む本情報である．校訂本情報と文献資料情報のデータベース
である．また，TTD のデータベースでもあり，校訂本の目次構成や文書構造及び
文体などの属性情報を持つ．注釈実体は校註情報の内，解説註のデータベースで
ある．ユーティリティ実体は校註情報の内，校訂註を蓄積し，また校訂本作成時
の凡例に関する情報やシステム及び作品の利用案内情報を持つ．

実現の詳細は割愛するが，フルテキストを定義するデータモデルはないので，関
係モデルをベースに開発した．実装は HITAC M860/60上に，DBMSに関係モデルで
ある XDM（日立製作所製）を用いた．本文の入れ子または階層構造や連続性は全
て正規形に変換している．したがって，各関係表は多くのポインタ属性を持たざ
るを得ない．また，標準の SQLでは構造を持つ文書に対して，例えば繰返し，入
れ子などに関しての検索機能が不足である．そのため，文書の論理構造を定義す
る DQL:Document Query Language\cite{hara:94} を考慮している．

まず，案内的なディレクトリサービスを考えている．機能的にはダウンロードを
可能とし，文字列に基づくKWIC索引作成などを行う．現在，国文学研究資料館に
おいて表２のデータベースの試行運用が行われている．



\subsection{CD-ROMの作成}
\label{sec:5.2setu}

データ流通を一歩進めるものとして，KOKIN ルール記述のデータのCD-ROM化，並
びに検索サーバとしてCD-ROM上の必要な文字列を検索する機能システムについて
検討した．

CD-ROM検索サーバはソニー株式会社との共同研究により，同社のCD-ROMハンドラ
であるMedia Finderをベースとした検索サーバと，その利用システムを開発し
た．検索サーバにワークステーション（NEWS）を用いて，CSS として実装してい
る．一方，MS-WINDOWSの下でのパソコン版システムとして，サーバとユーザ機能
を一体化したMedia Finder（同一名称である）を開発している．

CD-ROMの作成ではMedia Finderのデータ構造に，KOKIN ルールによる噺本大系の
本文データを変換する必要がある．データ構造は単純化し，２階層とした．１枚
のCD-ROMには複数のMedia Finder型データベースが定義できる．また，データベ
ースは項目と呼ぶ単位に分類する．一般に，データベース中の項目数の制限はな
いが，多い場合は当然検索性能に関わる．Media Finderの設計思想は，項目単位
で情報を高速に検索することに置かれている．

Media Finderはハイパーリンクに基づいた検索システムを持っており，噺本大系
では２種類の結合を生成している．１つは本文データの構造を定義するタグを指
標として，ハイパーリンクを構成したものである．これにより，本文の構成要素
（全文，噺，注釈など）を単位とした文字列検索が可能となる．他の１つは，論
理ファイル単位（タグＰによる領域）を検索対象とするものである．これによ
り，校訂本の本文の表記を忠実に再現する．ただし，本文表記の再現であり，ペ
ージ像は再現しない．

検索機能としては，次の機能を実装している．
\smallskip
\begin{description}
\item[\MARU{1}] 目次検索: 関連する文章を辿りながら，ブラウジングする機能
\item[\MARU{2}] 文字または単語検索: 必要な語彙単位から情報を探す機能
\item[\MARU{3}] 項目検索: 項目名から必要な情報を検索する機能
\item[\MARU{4}] しおり: 参照した項目に印を付け，後からそれを呼び出す機能
\end{description}
\smallskip
その他にも，印刷や自前のファイルに取り込むこと，関連する語彙から探すこ
と，絵や表を取り扱うことも可能としている．

このようなシステムを実装し，実験環境に供している．概して評判がよい．


\subsection{SGML化}
\label{sec:5.3setu}

KOKIN ルールは研究者が憶えやすく，使い易い規則として開発されているが，
SGMLと互換性を持っている．SGMLによる古典本文や目録の構造記述はデータの標
準化を一層推進する．

噺本大系，正保版本歌集二十一代集などのデータ記述をSGMLで行った．噺本大系
はKOKIN ルールで記述した本文データから，SGMLへの変換を行った．正保版本歌
集は独自仕様で記述された本文データから，SGML変換を行った．いずれも，SGML
仕様に基づいた DTDを定義し，Mark-it （Sema Software Technology社製）と言
うSGMLパーサにかけ，自動変換した．

DTDを如何にうまく定義するかがポイントである．KOKIN ルール＃１の変換は比
較的簡単である．KOKIN ルール＃２の変換は日本語の表記構造の認識にあるた
め，困難な場合が多い．例えば，傍記の泣き別れである（図５参照）．また，論
理レコードの順序性の保持は，SGMLでの記述は難しい．現在，技術検討を行って
いる．なお，SGML化の詳細は別途報告の予定である（例えば，\cite{hara:95}）．

変換されたSGMLデータは，例えば Mark-itでTex 形式のデータに変換し，印刷版
面に近い版下出力などが可能である．SGMLからTex への自動変換も行った．ま
た，Open-Text（Open-Text社製）と言うフルテキストデータベース検索システム
を用いれば，DTD で定義された要素を指定する語彙検索が可能である．これら
は，現在試行実験を行っている．



