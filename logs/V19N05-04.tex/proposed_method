インフルエンザ・コーパス

実際に発言者がインフルエンザにかかっている当事者かどうかを
分類するためには，コーパスが必要となる．本節ではこのコーパスの構築方法
とその統計について述べる．

まず，材料として，2008 年11月から2010年7月にかけてTwitter APIを用い
て30億発言を収集した．次に，そこから「インフルエンザ」という語を含む発言を抽出し
た．この結果40万発言が得られ，データを次の2つの領域に分割した．
\begin{enumerate}
\item {\bf トレーニング・データ}：2008年11月から無作為に5,000発言．
それぞれの発言について人手で，発言者が実際にインフルエンザにかかっているかどうか（当事者かどうか）を判定した．
判定の結果，発言者が実際にインフルエンザにかかっている場合を
ポジティブな発言とみなし（本稿では{\bf 陽性発言}と呼ぶ），逆にインフルエンザに
かかっていない場合をネガティブな発言（{\bf 陰性発言}）とみなす．

\item {\bf テスト・データ}：残りのデータ．後述する実験に用いる．
\end{enumerate}


陽性発言と陰性発言の区別は，以下の除外基準に照らし1つでも該当するものがあれば
陰性発言とみなした．
\begin{enumerate}
\item {\bf 非当事者}：
発言者（または，発言者と同一都道府県近郊の人間）のインフルエンザについてのみ扱い，それ以外の発言は除外する（陰性発言とみなす）．
居住地が正確に分からない場合は陰性発言とみなす． 

例えば，「インフルエンザが実家で流行っている」では，「実家」の所在が不正確であるので，陰性発言とみなす．
\item {\bf 不適切な時制}：
現在または近い過去のインフルエンザのみ扱い，それ以外の発言は除外する．
ここでいう「近い過去」とは24時間以内とする．

例えば，「{\bf 昨年}はひどいインフルエンザで参加できなかった」は，陰性発言とみなす．

\item {\bf 否定／不適切なモダリティ}：
「インフルエンザでなかった」等の否定の表現（ネゲーション）は除外する．
  また，疑問文や「かもしれない」と不確定な発言は基準を満たさないものとする．
  ここでいうモダリティとは狭義のモデリティの他に法（仮定法），表現類型（疑問文，
  命令文），価値判断（必要，許可）をも含む．

例えば，「インフルにでもかかってしまえ」（命令文）や，「インフルエンザだとしても，熱がないのが不思議 」（仮定法）は陰性発言とみなす．
\item {\bf 比喩的表現}：
  実際の疾患としての「インフルエンザ」を指さない表現は除外する．

  例えば，「インフルエンザ的な感染力じゃないですか！ RT @■■■：朝から PC の調子が悪く困っています」におけるインフルエンザは，コンピューターウィルスをインフルエンザと比喩しており陰性発言とみなす．
\end{enumerate}

詳細な基準についてはアノテーション・ガイドラインを公開し，実際の用例とともに参照できるようにしている\footnote{http://www.mednlp.jp/resources/}．また，構築したコーパスについても同サイトにて配布している．なお，陽性発言／陰性発言のアノテーター間（3人）の平均一致率は84\%であった．

トレーニング・データについてアノテートした結果，およそ半数の発言が陰性発言となった．すなわち，発言分類を行わない場合，半分近い発言はノイズとなっていることになる．ここで，陰性発言の一部（546発言）について，原因の割合を調査した（表\ref{t_内訳}）．陰性発言となる主要な要因は広告であることが分かる．

\begin{table}[t]
\caption{コーパスの分類結果}
\label{t_内訳}
\input{04table02.txt}
\end{table}


提案手法

提案手法は，陽性発言と陰性発言を分類する手法（4.1節）と，集計の時間的なずれを補正する手法（4.2節）の2つからなる．

\subsection{文章分類器を用いた発言の分類}

前節にて述べたように，Twitterの発言の約半数は陰性発言となってしまう．
そこで，前章にて述べたコーパスを用いて，発言を分類することでこれを解決する．
このタスクは，スパムメール・フィルタリングや評価表現分析といった文の分
類タスクと類似しており，本研究では，これらの研究で一般的な手法である機
械学習による手法を用いる．

\begin{description}
\item {\bf 【学習アルゴリズム】} 
学習アルゴリズムは先行研究 (Aramaki et al. 2011) で使われていた SVM を用いた．
先行研究では，モダリティごとにアノーテションを行い，これを複数のSVMを用いて学習する手法が提案されていたが，陰性発言を区別せず，単一のSVMで学習した場合と比べ，必ずしも精度を向上させず，また，コーパス作成が高コストになった．
したがって，本研究では，陰性発言の種類を区別せず，一様に扱った．
なお，SVMのカーネルは2次の多項カーネルとした．他のパラメータは用いたパッケージのデフォルト値\footnote{http://chasen.org/~taku/software/TinySVM/}を用いた．
\item {\bf 【素性の種類】}
素性は注目している単語「インフルエンザ」または「インフル」とその周辺の形態素とした．この際，
形態素解析器\footnote{http://nlp.ist.i.kyoto-u.ac.jp/index.php?JUMAN}を用い，原形，読み，品詞を用いた（表\ref{t_素性}）．
\item {\bf 【素性の範囲】} 周辺文脈の範囲（ウィンドウ・サイズ）は予備実
  験によって調査した．予備実験は前節のトレーニング・データを10分割交差
  検定することによって行った．パフォーマンスはウィンドウ・サイズに依存
  する．表\ref{f_win_size.eps}にウィンドウ・サイズと精度（F値）の関係を
  示す．最もよいパフォーマンスは左右両方のコンテキストを6形態素までみる
  設定（表中の $\text{BOTH}=6$）で得られたため，以降の実験ではこの値を用いた．
\end{description}

\begin{table}[t]
\caption{素性}
\label{t_素性}
\input{04table03.txt}
\end{table}
\begin{table}[t]
\caption{ウィンドウ・サイズと精度（F値）}
\label{f_win_size.eps}
\input{04table04.txt}
\end{table}

素性の範囲を決める予備実験が示すように約74\%程度の精度で陰性発言を分類で
きる．この精度が，実際のインフルエンザ推定にとって有用かどうか
は5節の実験にて検証する．



\subsection{感染症モデルを用いた補正}

前節では発言から陰性発言を取り除く手法について述べた．しかし，たとえ全
てのノイズが取り除かれても，個々の発言が必ずしも正確にインフルエンザを
報告しているわけではない．例えば，インフルエンザにかかってしまっても，あま
りに症状がひどいとTwitterを使って発言している余裕がないことも考えられる．
このような過誤が起こっているのならば，正しく発言を収集したとしても，実
際の流行と集計結果との間にずれが生じてしまう．そこで，本研究では，この
時間のずれを吸収するために，感染症の流行モデルである{\bf SIRモデ
  ル} \cite{Kermack1927}をソーシャルメディア用に修正したモデルを用い
る．


SIRモデル\cite{Kermack1927}は，感染症流行の古典的な計算モデルである．こ
のモデルでは人間は下記の3つの状態のうちのいずれかをとっていると仮定し，
各状態間の遷移確率を定義することで感染シミュレーションを行う．

\begin{enumerate}
\item {\bf 状態S} (Susceptible): 感染症に対して免疫を持たない者，
\item {\bf 状態I} (Infectious): 発症者，
\item {\bf 状態R} (Recovered): 感染症から回復し免疫を獲得した者．
\end{enumerate}

状態Sから状態Iの遷移は，健康な人に感染者が接触し感染が拡大する過程，状態Iから状態Rは感染者が回復する過程とみなせる．なお，感染症から回復して状態Rにいたった者は免疫を獲得したものとし再び感染しないものとする．また，各状態の総和，$\mathrm{S}(t)+\mathrm{I}(t)+\mathrm{R}(t)$, は人口全体であり定数とみなす．

ここで，異なる状態にある個人同士の接触には，S-I, S-R, I-Rの3通りが
あるが，感染が広がるのは，発症者と免疫を持たない者の接触であるS-Iだけで
ある．すなわち，SとIが多いと感染は速く広がることになり，逆に少ないと感
染は遅くなる．これを考慮して，状態Sと状態Iの量に比例した割合でSが感染するとみなす．
\begin{equation}
\frac{d\mathrm{S}}{dt}=- \beta \mathrm{IS} 
\end{equation}

また，状態Iの者は単位時間あたり一定確率で回復し，状態Rに遷移すると考え
る．
\begin{gather}
\frac{d\mathrm{I}}{dt}= \beta \mathrm{IS} - \gamma \mathrm{I}\\
\frac{d\mathrm{R}}{dt}= \gamma \mathrm{I}
\end{gather}

ここで $\beta$ は，状態Sから状態Iへの遷移確率であり，感染率とみなせる．同様
に，$\gamma$ は状態Iから状態Rへの遷移確率であり，回復率とみなせる．それぞれの遷
移確率は1日ごとの確率とする．つまり，感染者が100人いる状態で $\gamma$ が0.1とす
ると翌日には，10人が回復し，90人が依然としてインフルエンザ状態のままで
あることを意味する．

以上3つの式を用いることで，感染者が増えてからピークを迎えやがて収束する
インフルエンザの流行がシミュレーション可能となる．
前述のオリジナルのSIRモデルをソーシャルメディアに適応させるため，本研究
では次の3点の修正を行った．

\begin{enumerate}
\item インフルエンザに感染した患者（状態S--状態Iへの遷移）がウェブを通じ
  て観測されるものとする．したがって，式(1)と式(2)で用いられる$\Delta$S (=$\beta$IS)が
  実数として，直接集計されるものとする．
\item 状態I--状態R間の遷移確率（変数 $\gamma$）はインフルエンザの先行研究\cite{Anderson1979}において報告されていた値 $(\gamma=0.38)$ を用いる．
\item 各シーズンの開始時は，感染症はまったく流行していないものと仮定する $(\mathrm{I}(0)=0)$．
\end{enumerate}



