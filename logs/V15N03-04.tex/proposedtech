    \documentclass[japanese]{jnlp_1.4}
\usepackage{jnlpbbl_1.1}
\usepackage[dvips]{graphicx}
\usepackage{amsmath}
\usepackage{hangcaption_jnlp}
\usepackage{udline}
\setulminsep{1.2ex}{0.2ex}
\let\underline

\usepackage{lingexample}
\usepackage{tree-dvips}
\usepackage{fancybox}

\Volume{15}
\Number{3}
\Month{July}
\Year{2008}

\received{2007}{11}{15}
\revised{2008}{2}{20}
\accepted{2008}{3}{19}

\setcounter{page}{77}

\jtitle{HTML文書集合からの評価文の自動収集}
\jauthor{鍜治　伸裕\affiref{iis} \and 喜連川　優\affiref{iis}}
\jabstract{
 本論文では大規模なHTML文書集合から評価文を自動収集する手法を提案する．
 基本的なアイデアは「定型文」「箇条書き」「表」といった記述形式を利用す
 るというものである．本手法に必要なのは少数の規則だけであるため，人手を
 ほとんどかけずに評価文を収集することが可能である．また，任意のHTML文書
 に適用できる手法であるため，様々なドメインの評価文を収集できることが期
 待される．実験では，提案手法を約10億件のHTML文書に適用したところ，約65
 万の評価文を獲得することができた．
}
\jkeywords{評価情報分析，評価極性}

\etitle{Acquiring Polar Sentences from HTML Documents}
\eauthor{Nobuhiro Kaji\affiref{iis} \and Masaru Kitsuregawa\affiref{iis}} 
\eabstract{
 This paper represents a method of acquiring polar sentences from HTML
 documents. The basic idea is to exploit three lexico-syntactic patterns
 and two layout structures of HTML documents. The method requires only a
 small amount of hand-crafted rules and can be implemented in low
 cost. In our experiment, the method was applied to one billion
 documents and 650 thouthands polar sentences were aquired.
}
\ekeywords{Sentiment Analysis, Polarity, Semantic Orientation}

\headauthor{鍜治，喜連川}
\headtitle{HTML文書集合からの評価文の自動収集}

\affilabel{iis}{東京大学生産技術研究所}{Institute of Industrial Science, University of Tokyo}



\begin{document}
\maketitle


\section{アイデア} \label{sec:idea}

提案手法は「定型文」「箇条書き」「表」という3つの記述形式を利用して評価
文を自動抽出する．本節では，これら3つの形式で記述された評価文の例を概観
して，基本的な考え方を説明する．手法の詳細は次節で述べる．

\subsection{定型文}

まず我々が着目したのは定型的な評価文である．

\begin{lingexample}
 \head{これの\underline{良いところは} \fbox{計算が速い} \underline{ことです}．}
 \sent{\underline{悪い点は}，\fbox{慣れるまで時間がかかる} \underline{こと}．}
\end{lingexample}

\noindent
いずれの評価文も「良いところ／悪い点は〜なこと」という定型的な表現を使っ
て記述されている．そのため，下線部にマッチするような語彙統語パターンを用
意すれば，四角で囲まれたテキストを評価文として抽出することができる
\footnote{四角で囲まれたテキストは正確には文ではなく句と呼ぶべきであるが，
箇条書きと表から抽出される評価文との整合性を考えて，ここでは文と呼ぶこと
にする．}．

以下では「良いところ」「悪い点」のように，評価文の存在を示唆する表現のこ
とを手がかり句と呼ぶ．特に好評文の存在を示す手がかり句を「好評手がかり句」
と呼ぶ．例えば「良いところ」は好評手がかり句である．同様に，不評文の存在
を示す手がかり句を「不評手がかり句」と呼ぶ．


\subsection{箇条書き}

次に着目したのは，図\ref{fig:itemize}のように箇条書き形式で列挙された評
価文である．この箇条書きは手がかり句（良い点，悪い点）を見出しに持つため，
各項目に評価文が含まれていることが分かる．

\begin{figure}[b]
\input{04fig2.txt}
  \caption{箇条書き形式で記述された評価文}
  \label{fig:itemize}
\end{figure}



\subsection{表}

箇条書きと同様に，図\ref{fig:table}のような表形式からも評価文を自動収集
することができる．この表は左側の列が見出しの働きをしているが，ここにも手
がかり句（気に入った点，イヤな点）が使われているので，表中に評価文が記述さ
れていることが分かる．


\begin{figure}[b]
\input{04fig3.txt}
   \caption{表形式で記述された評価文}
   \label{fig:table}
\end{figure}




\section{評価文の自動収集}

HTML文書から評価文を収集する手続きは次のようになる．

\begin{enumerate}
 \item 手がかり句のリストを作成する．
 \item HTML文書をタグとテキストに分割する．一部の箇条書きと見出しはHTML
       タグを使わないで記述されているので，ルールでタグを補完する．
 \item 手がかり句のリストを利用して「定型文」「箇条書き」「表」から評価
       文を抽出する．
\end{enumerate}

\noindent
以下では，まず実験で用いた手がかり句について説明する．そして「定型文」
「箇条書き」「表」から評価文を抽出する方法を順に説明する．


\subsection{手がかり句}

実験で用いた手がかり句の一覧を表\ref{tab:cue}に示す．これらは予備実験を
通して人手で選定した．表中の動詞，形容詞，形容動詞（「良い」など）は「所」
「点」「面」という3つの名詞と組み合わせて使う．例えば「良い」は「良い所」
「良い点」「良い面」の3つを手がかり句として使うことを意味する．「長所」
や「メリット」のような名詞は，単語そのものを手がかり句として使う．なお，
詳細は省略しているが「駄目な所」と「ダメな所」または「良い所」と「良いと
ころ」のような表記揺れも網羅的に人手で記述している．

\begin{table}[b]
  \caption{実験で使用した手がかり句}
  \label{tab:cue}
\input{04table2.txt}
\end{table}


\subsection{定型文からの抽出}

定型文から評価文を抽出するために，3種類の語彙統語パターンを人手で作成し
た．各パターンとそれにマッチする定型文の具体例を表\ref{tab:pattern}に示
す．

\begin{table}[b]
  \caption{語彙統語パターンと評価文抽出の例}
  \label{tab:pattern}
\input{04table3.txt}
\end{table}

最初のパターン（表\ref{tab:pattern}上）は，主部が手がかり句（良いところ）で
述部が評価文であるような定型文にマッチする．パターン中の矢印は文節間の依
存関係，\fbox{手がかり句}\ は手がかり句をそれぞれ表している．また\ \ovalbox
{評価文}\ は，この部分にマッチしたテキストが評価文として抽出されることを意
味する．表の右側に評価文が抽出される様子を示す．

残り2つのパターンも同様である．それぞれ，主部が評価文で述部が手がかり句
である定型文にマッチするパターン（表\ref{tab:pattern}中）と，評価文と手が
かり句が同格になっている定型文にマッチするパターン（表\ref{tab:pattern}下）
である．


\subsection{箇条書きからの抽出}

箇条書きからの評価文抽出は，手がかり句リストとHTMLタグを利用すれば容易に
実現できる．すなわち，手がかり句が見出しになっている箇条書きを見つけて，
その箇条書きの項目を順に取り出していけばよい．例えば，前節の図
\ref{fig:itemize}からは「変に加工しない素直な音を出す」「曲の検索が簡単
にでる」が好評文として，「リモコンに液晶表示がない」「ボディに傷や指紋が
つきやすい」が不評文として取り出される．

ここで問題となるのは，1つの項目に複数文が記述されている場合の処理である
（図\ref{fig:itemize2}の3番目の項目）．このような場合は1項目に好評文と不評
文が混在している可能性がある．各文の評価極性を自動判定することは難しいの
で，1つの項目に複数文が存在した場合，その項目は抽出に使わないことにした．
例えば図\ref{fig:itemize2}からは「発色がものすごくよい．」と「撮っていく
うちに楽しくなる．」「カメラ背面の液晶画面が大きく，見やすい．」が好評文
として抽出される．

\begin{figure}[b]
\begin{minipage}[b]{200pt}
\input{04fig4.txt}
  \caption{1項目に複数文が記述されている箇条書き}
  \label{fig:itemize2}
\end{minipage}
\hfill
\begin{minipage}[b]{200pt}
\input{04fig5.txt}
   \caption{評価文を抽出するときに考慮する表タイプ}
  \label{fig:table_pattern}
\end{minipage}
\end{figure}


\subsection{表からの抽出}

最後に，表から評価文を抽出する方法を述べる．基本的には手がかり表現と
$<$table$>$タグを利用すればよいのだが，HTML文書には多種多様な表が出現す
るので，あらゆる表に対応した抽出規則を作成することは難しい．そこで2種類
の表だけを考えることにした（図\ref{fig:table_pattern}）．図中の$C_{+}$と
$C_{-}$は好評手がかり句と不評手がかり句を表し，＋と−は好評文と不評文を
表す．タイプAは，1列目に手がかり句があって，その横に評価文があるタイプで
ある．前節で紹介した図\ref{fig:table}はこのタイプに相当する．タイプBは，
1行目に手がかり句があって，その下に評価文があるタイプである．



与えられた表のタイプは，1列目（1行目）を調べて，好評手がかり句と不評手が
かり句の両方が出現していればタイプA（タイプB）であると判定する．表のタイプ
が決まれば，あとは図の＋と−に対応するマスから評価文を抽出すればよい．た
だし，1つのマスに複数文が記述されている場合は抽出対象としない．これは箇
条書きの1項目に複数文が記述されている場合と同様の理由からである．


\section{議論}

実験の結果から，提案手法は80\%から90\%という精度で評価文を獲得できること
が分かった．また，収集した評価文が分類タスクに対して有効であることも確認
することができた．今後の課題としては，定型文から収集された評価文が多かっ
たことから，新しい語彙統語パターンを利用して収集量をさらに拡大させること
を検討している．また，収集した評価文からの評価表現辞書の構築にも取り組ん
でいる．

評価者が「曖昧」と分類した評価文を分析したところ，評価極性を決定するため
に十分な文脈情報が与えられていない場合が大半であることが分かった．それ以
外のものとしては，文分割と構文解析の誤りに起因するものが3例だけ見つかっ
た．3例とも定型文から抽出されていた．文脈情報が欠落している例として「何
しろ情報量が多い」という文が好評文として獲得されていた．この文の評価極性
は文脈に依存するため，この文単独で評価極性を決定することは困難である．し
たがって，この評価文を人手で評価した場合には「曖昧」に分類される可能性が
高い．しかし，実際にこの文が抽出された元テキストを調べてみると，次のよう
なものであった．

\begin{lingexample}
 \single{このガイドブックのいいところは\underline{何しろ情報量が多い}ところです．}
\end{lingexample}

\noindent
これを見ると「何しろ情報量が多い」という文は，少なくとも原文では好評文と
して使われていたことが分かる．このことから，表\ref{tab:acc1}で不正解に数
えられている評価文の中には，完全な間違いとは言いきれないものが含まれてい
ると考えている．

利用した記述形式によって，収集される好評文と不評文の割合に大きな差が見ら
れた．特に定型文2の内訳を見ると，不評文の数が圧倒的に多いことが分かる（表
\ref{tab:result}の定型文2）．この理由を調べたところ「〜なのが難点」という
言い回しが頻出していることが原因であった．このような好不評の偏りは，例え
ば本コーパスを評価文分類器のトレーニングデータとして使うときには考慮して
おく必要があると考えられる．

本実験ではHTML文書から評価文の収集を行ったが，提案手法自体はHTML文書に特
化したものではないと考えている．たしかに，箇条書きと表形式を利用した抽出
処理は，HTML文書の特性を利用している．しかし，表\ref{tab:result}から分か
るように，抽出された評価文のうち80\%以上が定型文から抽出されている．この
ことから，提案手法はHTML文書以外のコーパスに対しても有効に働くと考えられ
る．


\end{document}
