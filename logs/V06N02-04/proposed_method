テキスト音声合成の一般的な流れを図[REF_fig:system]の左側に示す．
漢字かな交じりの日本語テキストを入力し，テキスト解析部において，言語的な解析を行い，その情報を利用して読み韻律情報を生成する．
そして音声合成部では，読み韻律情報を用いてピッチや時間長データを設定して音声波形を生成し，合成音声を出力する．
次にAUDIOTEXにおける読み韻律情報，テキスト解析部，音声合成部の概略を述べる．
AUDIOTEXでは，読み韻律情報として，アクセント句単位に読み，アクセント型，音調結合型を指定するアクセント付カナ文を用いる．
このアクセント付カナ文は，ピッチパタンを話調成分の上にアクセント成分が重畳したものとして表し，アクセント句の間（アクセント句境界）に音調結合という概念を導入して，アクセント句成分の相対的な大きさやポーズ挿入の現象を統一的にモデル化する韻律制御モデル[CITE]に基づいている．
ここで音調結合型は，話調成分，アクセント成分，ポーズの関係により分けられ，本論文では，表[REF_tab:oncyo]に示す6種類を用いる．
また，読み上げ速度としては，通常，ニュースなどが読み上げられる速度を想定しており，この速度を基準として読み韻律情報を設定する．
テキスト解析部は図[REF_fig:system]の右側に示す5部により構成される．
文を単語に分割し，品詞や読み等の単語情報を付与する．
この単語情報は，読み韻律情報を設定するために必要な多くの情報を備えている．
この形態素解析で利用する単語辞書には約37万語が登録されている．
詳しくは，[REF_sec:morph]節，[REF_sec:dic]節で述べる．
入力テキストが，そのまま音声化するのに不適当な表現や形式である場合，それを音声化に適した表現に書き換える．
書き換え内容は入力テキストの形式やドメインに依存する．
例えば，新聞記事では漢語表現や文末表現の書き換え（例：``今秋''→``今年の秋''，``〜の予定。
''→``〜の予定です。
''）が必要であり，また，電子メールでは，読み上げ対象とならない引用記号やsignatureの削除などが必要である．
現在，新聞記事用[CITE]，電子メール用の2種類のテキスト書き換えを備えているが，本論文ではこの詳細については省略する．
数量表現の読み付与，連濁化を規則により行う．
その他の読みは，形態素解析で得られる各単語の読みを用いる．
複合語意味的係り受け情報等を用いて，韻律上の基本単位であるアクセント句を設定する．
また，単語固有のアクセント型，単語のアクセント的性質を用いたアクセント結合規則により，アクセント句のアクセント型を付与する．
詳しくは，[REF_subs:accent]節で述べる．
時間表現，数量表現や同格表現（例えば役職名＋人名）など，独立に扱うことができ，その構造が複合語内意味的係り受け情報より得られる局所構造内のアクセント句境界，および，句読点の直後など品詞情報から容易に意味的，構文的な切れ目であることを推定できるアクセント句境界を対象として，その局所構造に基づき音調結合型を設定した後，残りのアクセント句境界に対して，アクセント句結合力を用いて音調結合型を設定する，段階的な音調結合型設定法（多段階設定法）に基づき，音調結合型を付与する．
詳しくは，[REF_subs:pause]節で述べる．
音声合成部は，波形編集方式の音声合成ソフトウェアFLUET [CITE]の音声合成部を利用しており，アクセント付カナ文を音素記号列に変換する韻律パラメータ生成部，音素片ファイルから隣接する音素環境が一致する音素片データを選択する音素片選択部，選択した音素片データを結合し，規則で設定されたピッチ，時間長データに基づいて波形データを加工する音素片接続部からなる．
また，AUDIOTEXはCでコーディングされており（音声合成部はC++ライブラリ），UNIXおよびWindows上で動作する．
形態素解析は，[CITE]の多段解析法による形態素解析を，より高精度な読み韻律情報設定を行うために拡張して利用している．
多段解析法は，文字種の違いに着目して仮に設定した範囲内（仮文節）であらゆる単語の組合わせを検定する局所総当たり法をベースとし，構文や意味の情報が有効となる複合語解析や同型語判別などには，部分的に深く解析する．
辞書としては，各単語の情報を記述した単語辞書と，文法的接続情報を記述した接続辞書を用いる．
以下，読み韻律情報設定のための形態素解析という観点から，その特徴を詳しく説明する．
ここで，連語の認定と用言語幹語尾の一語化は，[CITE]より新たに拡張した項目であり，共に長単位認定を行うための手法である．
複合語を構成する単語間の意味的結合関係を係り受けによって解析する[CITE]．
係り受け解析では，数詞，固有名詞，接辞，用言性名詞，非用言性名詞など14種の係り受け規則を用いる．
例として``前平成株式会社社長山田太郎氏51才''に対する複合語内意味的係り受けを図[REF_fig:kakari]に示す．
この意味的係り受け情報は，アクセント句境界，音調結合型の設定に利用する．
単語の認定精度の向上は，読み韻律情報の精度向上に直結する．
そこで，認定精度が比較的低かった，補助用言（例：``話している''の``いる''）や格助詞相当語（例：``彼について''の``について''）の認定精度を向上させるために，「助詞＋補助用言」（例：``て＋いる''）や格助詞相当語（例：``に＋つい＋て''）を連語として登録し，認定することとした．
しかし，これらの連語内でアクセント句が分割される場合等があるため（例：彼に/ついて），アクセント，音調結合型設定時に，連語すべてを1単語として扱うのは問題がある．
そこで，形態素解析では，連語として1語で認定する単語を，連語を構成する各構成単語に分解できる機能を設けた．
詳しくは，[REF_sec:dic]節で述べる．
規則的な活用を行う用言は，単語辞書では，不変化部分（例：似）と変化部分（例：る，れ，ろ）に分離し，それぞれを1単語として登録している．
また，サ変名詞（運動）が，サ変動詞（運動する）の一部を構成する場合があるが，単語辞書上は，サ変動詞型名詞（運動）とサ変動詞活用形（する）のみを登録し，語幹語尾をまとめた単語（運動する）としては登録していない．
アクセント句結合力に基づく音調結合型の設定においては，アクセント句境界前後の単語の品詞情報が重要となる．
しかし，辞書の登録単位である短単位での単語認定では，例えば``グランドで/運動する''のアクセント句境界の直後単語をサ変名詞（運動）として扱い，その結果，音調結合型の設定を誤るという問題があった．
そこで，単語認定後，「用言不変化部分＋変化部分」，「用言性名詞＋活用語尾」を一語に統合することにした．
これにより，例えば``運動する''を1語のサ変動詞として扱うことになる．
一般に単語辞書は，形態素解析において単語を認定するための情報をもつが，AUDIOTEXの単語辞書では，読み韻律情報を設定するための様々な情報も保持している．
本節では，読み韻律情報の設定に関連がある単語辞書情報について述べる．
単語辞書に登録する単語の単位は，原則的には語基や接辞などの短単位語であり，複合語などの長単位語は，短単位語の組み合わせとみなす．
ただし，次に示す語は，以下の理由により例外的に長単位で登録している．
連語：補助用言や格助詞相当語の認定精度の向上のため．
（例）について，ていまし
短単位語から長単位語の意味や読みなどを合成できない，または合成するのが難しい一部の慣用表現，熟語，複合語，並列語：短単位語の組み合わせでは，正しく認定できないため．
（例）十六夜（イザヨイ），一期一会（イチゴイチエ），日仏英（ニチフツエイ）
有名な人名・地名等や一般語で構成される作品名・商品名等の一部の固有名詞：
固有名詞の読みはバリエーションが多く，このうち有名な人名・地名等は長単位で登録することにより，その読み精度を向上できるため．
（例）羽生善治（ハブヨシハル），清水寺（キヨミズデラ）
また，一般語のみで構成される固有名詞は短単位語の組み合わせでは固有名詞として認定できないため．
（例）週間住宅情報
国語辞典に子見出し語や派生語などとして収録されている一般用語：出現頻度が高く一般性が高いと考えられるため．
（ただし，これらの単語すべてが認定精度向上に役立つとは限らない．
）（例）為替相場，人工呼吸，身分証明書
このように，長単位で登録することにより，一般に形態素解析の精度は向上する．
しかし，アクセント，音調結合型の設定においては，長単位語を短単位語と同様に一語として取り扱うことは，以下のような問題を生じる．
長単位語の内部に設定すべきアクセント句境界に対応できない．
並列語：``日仏英''→日/仏/英，連語：``について''→彼に/ついて
長単位語内部にアクセント句境界を設定する必要はないが，複合語を構成する単語数によりアクセント句境界を設定する場合に，複合語を構成する単語数が正しく得られず設定を誤る．
（例）``為替相場''が1語（長単位登録）の場合
形態素解析結果：``為替相場+速報+サービス''（3単語扱い，実際は4単語)
アクセント句：×``為替相場速報サービス''と設定．
（○：``為替相場/速報サービス''）
cf. ``為替＋速報＋サービス''（3単語）→○``為替速報サービス''
これらの長単位語に対して適切に読み韻律情報を設定するために，次の3つの単語辞書情報をもつ．
アクセント句情報は，最大3アクセント句分のモーラ数，読み長（読みの表記上の長さ），アクセント型を保持する．
最大3アクセント句分の情報をもつのは，固有名詞など，1語で登録されている複合語内部の特定の位置にアクセント句境界が必ず存在する場合に対応するためである．
例えば，短単位語の``日本''のアクセント句情報は，
第1アクセント句：モーラ数=3，読み長=3，アクセント型=2
第2,3アクセント句：なし
となり，長単位語の``日仏英''（3アクセント句）は，
第1アクセント句：モーラ数=2，読み長=2，アクセント型=1（日）
第2アクセント句：モーラ数=2，読み長=2，アクセント型=1（仏）
第3アクセント句：モーラ数=2，読み長=2，アクセント型=1（英）
となる．
この情報により，``日/仏/英''と正しくアクセント句境界が設定できる．
登録単語の内部ではアクセント句境界を生じないが，長単位で登録されていることを表すための情報であり，登録単語を構成する単語数を表す．
例えば，``為替相場（2）+速報（1）+サービス（1）''（かっこ内の数字が語数を表す）では，形態素解析の認定単語数は3語であるが，語数により4語からなる複合語であることがわかり，``為替相場/速報サービス''と正しくアクセント句境界が設定できる．
長単位で登録された単語を短単位の構成単語に展開するために，各構成単語（最大10語）の見出し長，品詞，読み長をもつ．
これは，長単位語の内部に設定すべきアクセント句境界があり，構成単語に付属語を含む場合，つまり，主に連語に対応するためである．
これらの長単位語は，アクセント付与を行う前に構成単語情報を元に辞書検索を行い，短単位に展開しておく．
上記のアクセント情報で対応する単語と異なり，辞書検索を行って短単位に展開するのは，付属語のアクセント結合のための情報（表[REF_tab:dic]の付属語アクセント属性，副次アクセントフラグ）を長単位語内で保持するのは煩雑なためである．
（例）連語``ていまし（て+い+まし）''
て：見出し長=1,品詞=接続助詞，読み長=1
い：見出し長=1,品詞=一段動詞語幹，読み長=1
まし：見出し長=2,品詞=助動詞連用形（断定），読み長=2
表[REF_tab:dic]に，読み韻律情報を設定する際に利用する単語辞書情報を，全処理で利用する共通情報と，特定の処理のみで利用する，読み付与用情報，アクセント句境界設定用情報，アクセント型設定用情報，音調結合型設定用情報の5種類に分けて示す．
読み付与用には，数量表現の読みの補正，連濁化のための情報をもつ．
アクセント句境界設定用には，複合語の内部構造を表すための各種フラグ，および，韻律的な特徴を表すフラグ，アクセント型設定用にはアクセント的特徴を示す各種フラグ，音調結合型設定用には，助詞を構文的に分類した助詞ポーズ属性をもつ．
本節では，読み韻律情報の設定方法について説明する．
特に，新たに多段階設定法を導入した音調結合型の設定について詳細に述べる．
読み付与については，[CITE]の手法（数量表現読み付与，連濁化）をそのまま利用するため省略する．
複合語内意味的係り受け情報および表[REF_tab:dic]に示した単語辞書情報を用いて，アクセント句境界およびアクセント型の設定を行う．
数詞については[CITE]，複合語については[CITE]を基本としてアクセント句境界を設定し，[CITE]に基づきアクセント句のアクセント型を設定する．
ここで[CITE]では，文節間のアクセント結合を行っていない（文節境界をすべてアクセント句境界としている）．
これは，文節間のアクセント結合を行わなくても，音調結合型を強結合とすることにより実用上十分と判断しているからである．
しかし，次に示す，結び付きの強い文節間においては，強結合としても不自然に感じるという実験結果が得られたため，アクセント結合を行うこととした．
指示副詞＋用言
そう（指示副詞）＋思う（動詞）→そう思う
連体詞＋名詞（[MATH]複合語）
この（連体詞）＋会議（名詞）→この会議
cf.この（連体詞）＋国際（名詞）＋会議（名詞）→この/国際会議
また，複合語内のアクセント句境界設定において，独立性の高い時詞等は常に独立のアクセント句とされていたが，複合語内意味的係り受け情報，直後単語の品詞情報（一般名詞，サ変名詞，転生名詞，その他）により，他の単語と結合するか判断することにした．
（例）
正月（時詞）＋番組（一般名詞）＋で（格助詞）→正月番組で
今日（時詞）＋番組（一般名詞）＋で（格助詞）→今日/番組でさらに，自立語アクセント結合において，付属語アクセント結合における副次アクセントと同様の現象が存在する．
例えば，神奈川等：カナ'ガワ/ト'ー，大阪等：オーサカト'ー
のうち，先行語（``神奈川''）がアクセントをもつ``神奈川等''は副次アクセントをもつ．
そこで，自立語でも，付属語と同様に副次アクセントに対応することにした．
音調結合型の設定は，複合語内等から段階的に音調結合型を設定していく多段階設定法を新たに導入した．
多段階設定法では，はじめに，時間表現，数量表現や同格表現（例：「役職名＋人名」では役職名と人名は同格とみなせる）など，独立に扱うことができ，その構造が複合語内意味的係り受け情報より得られる局所構造内のアクセント句境界，および，句読点の直後など品詞情報から容易に意味的，構文的な切れ目であることを推定できるアクセント句境界を対象として，意味的，構文的に大きな切れ目となるアクセント句境界にポーズを，つながりが強いアクセント句境界にポーズなしを設定する．
次に，上記において音調結合型が設定されなかったアクセント句境界に対し，前後の単語の品詞情報等より得られるアクセント句結合力（以降では結合力と表記）を用いて音調結合型を設定する．
ここで，すべてのアクセント句境界に音調結合型が設定されるが，あるモーラ長以上連続してポーズが設定されていない連続アクセント句列（ポーズ未設定区間）に対しては，結合力を用いてポーズ付与のための補正を行う．
結合力の値は1〜10の10段階（値が大きいほど結合力が強い）であり，アクセント句境界の前後アクセント句の係り受けがありえない場合（例：用言連用形＜アクセント句境界＞名詞）では極端に値を小さく，逆に係り受けが生じる可能性が高い場合（例：用言連体形＜アクセント句境界＞名詞）では大きく設定している．
この多段階設定法を導入することにより，従来手法では精度が低かった複数アクセント句からなる複合語内の設定においても，その内部構造を反映した適切な音調結合型の設定が可能となり，また，文節間の係り受け解析を用いなくても，結合力により近似的に係り受け構造を推定し，結合力の強さとポーズ未設定区間のモーラ数に応じて段階的にポーズを付与していくので，実用上十分な精度で音調結合型を設定できる．
以下，多段階設定法の各ステップについて説明する．
ポーズ付与の補正以外では，すでに音調結合型が設定されているアクセント句境界は対象とせず，未設定のアクセント句境界のみを対象とする．
アクセント句末尾が句読点等の記号の場合，その直後アクセント句境界に対して，音調結合型を設定する．
句点，感嘆符の場合は大ポーズ（700msec），疑問符には，疑問調（末尾ピッチが上がる＋700msecポーズ），読点，開きかっこには中ポーズ（500msec），その他の中点以外の記号には小ポーズ（300msec）を付与する．
日時表現，数量表現は，その局所構造に基づき音調結合型を決定する．
日時表現は，その表現を年要素，月要素，日要素に分類し，この出現パターンにより，音調結合型を設定する．
（例）
{小ポーズ}年要素{小ポーズ}月要素{強結合}日要素：
会議は{小ポーズ}平成10年{小ポーズ}6月{強結合}1日から
{小ポーズ}月要素{強結合}日要素：会議は{小ポーズ}6月{強結合}1日から数量表現は，[CITE]で，
（前置助数詞）＋（符号）＋数詞＋（助数詞）＋（接辞）
と定義された表現である．
この数量表現のパターンやその前後アクセント句の品詞に応じて，数量表現内および，その前後の音調結合型を設定する．
（例）
{小ポーズ}前置助数詞{小ポーズ}2つ以上の数詞（＋助数詞）アクセント句：
{小ポーズ}第{小ポーズ}百/二十/三回
{小ポーズ}前置助数詞{強結合}1つの数詞（＋助数詞）アクセント句：
{小ポーズ}第{強結合}三回連続する2または3アクセント句の品詞等の単語情報を参照して得られる局所構造により，意味的，構文的な切れ目となり，常にポーズを付与すべきアクセント句境界に小ポーズを，また，つながりが非常に強く，常にポーズなしとすべき境界に強結合または弱結合を設定する．
（例）
役職{小ポーズ}人名［同格表現］：社長{小ポーズ}山田太郎氏
``など''（副助詞）{小ポーズ}用言以外の単語［例示表現］：
証人喚問など{小ポーズ}事実審理が/始まります。
記号に基づく音調結合型設定〜特定単語の組み合わせによる音調結合型設定で音調結合型が設定されなかったアクセント句境界に対し，アクセント句境界前後の単語の品詞等により得られる結合力を用いて音調結合型を設定する．
結合力を設定するために，品詞により，アクセント句境界の直前単語を表[REF_tab:prev]に示すP1〜P11の11種類，直後単語を表[REF_tab:next]に示すN1〜N7の7種類に分類した．
これらは，品詞の構文的性質（例：P3=連体修飾をする用言），および，独立性という2つの観点により分類を行ったものである．
このため，直前単語の分類においては，助詞を単語辞書情報の助詞ポーズ属性（構文的性質と独立性により助詞を分類）により5種類に細分類した．
表[REF_tab:prev]のP7〜P11には各ポーズ属性毎にその属性をもつ助詞（抜粋）をあわせて示している．
結合力は，Pi×Nj（i=1〜11, j=1〜7）の組み合わせマトリックスにより決定する．
この組み合わせマトリックスの各値は，PiとNjの構文的な性質（係り受けがありえる，ありえない），および，それぞれの独立性，さらに，係り受けがありえる組み合わせにおいては，その韻律的特徴を考慮して経験的に設定している．
ここでは，Pi×N7の組み合わせマトリックスのみを表[REF_tab:ketsugo]に示して具体的に説明する．
直前単語がP2, P3, P11の場合は，このアクセント句境界の直前文節が直後文節に係る連体修飾関係となる可能性が高いため，表[REF_tab:ketsugo2]に示すように，直後アクセント句等の条件に応じて結合力を変える．
表[REF_tab:ketsugo2]の項番1は，直後が複数アクセント句からなる複合語である場合を表しており，この場合は，連体修飾関係が成立していても，アクセント句単位の構造としては，右枝分かれ構造となる場合がほとんどであるため，結合力を最小とする．
この結合力はポーズ付与の補正でも利用するため，記号に基づく音調結合型設定〜特定単語の組み合わせによる音調結合型設定ですでに強結合または弱結合を設定しているアクセント句境界に対しても求めておく（ただし音調結合型の設定は行わない）．
ただし，これらのアクセント句境界に対しては，得られた結合力に10を加算する．
これは，記号に基づく音調結合型設定〜特定単語の組み合わせによる音調結合型設定で設定される音調結合型を結合力に基づく音調結合型設定で設定される音調結合型より信頼性が高いと考えるためである．
音調結合型未設定のアクセント句境界に対しては，結合力=1となるアクセント句境界に小ポーズ，それ以外のアクセント句境界には，文節境界となるアクセント句境界に弱結合，それ以外に強結合を付与する．
あるモーラ長以上ポーズが設定されていない場合（このポーズが設定されていない区間をポーズ未設定区間とよぶ）に，結合力を用いてポーズを設定する．
ここでは，ポーズ未設定区間の長さと結合力に基づく音調結合型設定で設定した結合力の強さにより，段階的にポーズを付与する．
ポーズ未設定区間先頭から5モーラ目〜末尾から5モーラ目までに結合力3以下のアクセント句境界が存在する場合にのみ，その中で最小の結合力をもつアクセント句境界に小ポーズを付与する．
それ以外の場合はポーズを付与しない．
ポーズ未設定区間先頭から5モーラ目〜末尾から5モーラ目までに結合力が6以下のアクセント句境界が存在する場合にその中で最小の結合力をもつアクセント句境界に小ポーズを設定する．
条件を満たすアクセント句境界が存在しない場合には，ポーズ未設定区間先頭から2モーラ目〜末尾から2モーラ目までのアクセント句境界において，最小の結合力をもつアクセント句境界に小ポーズを付与する．
ここで，ポーズ付与の補正を行った後のポーズ未設定区間が上記条件を満たす場合には，再帰的にポーズ付与の補正を行う．
これは，ポーズ未設定区間長が20モーラ以上30モーラ未満と，ポーズが挿入されなくてもあまり不自然でない長さの場合には，結合力が弱い（3以下）アクセント句境界が存在した場合にのみポーズを付与し，ポーズ未設定区間長が30モーラ以上と，ポーズがなければ不自然となる長さを越えた場合には，必ずポーズを設定するという2段階のポーズ付与の補正を行うものである．
図[REF_fig:pause]に多段階設定法によるポーズ付与例を示す．
まず，[A]，[B]，[C]に順にポーズが設定された後，結合力が求められ，結合力=1である[D]に小ポーズが付与される．
そして，ポーズ未設定区間``実態調査を共同で行うことで合意しました。
''（27モーラ）において最小結合力2（[MATH]3）をもつ[E]に小ポーズが付与される．
ポーズ未設定区間``放射性廃棄物の海洋投棄に''（23モーラ）は，ポーズ未設定区間長が20モーラ以上30モーラ未満であり，最小結合力が5（[MATH]3）であるため，ポーズは付与されない．
