日本語固有表現抽出
\label{sec:JNE}

固有表現抽出は，情報検索・抽出，機械翻訳，自然言語理解など
自然言語処理の応用的局面における基礎技術として重要な技術の一つである．
英語においては，特に米国において，
MUC(Message Understanding Conference，例えば，MUC-7~\cite{MUC98aNLP})
コンテストにおける課題の一つとして固有表現抽出がとりあげられ，
集中的に研究が行なわれてきた．
また，最近では，日本語においても，
MET (Multilingual Entity Task, 例えば，MET-1~\cite{Maiorano96a}，
MET-2~\cite{MUC98aNLP})や
IREXワークショップ~\cite{IREX99aj}などのコンテストにおいて，
固有表現抽出が課題の一つに取り上げられている．

\subsection{IREXワークショップの固有表現抽出タスク}

\begin{table}
\begin{center}
\caption{日本語固有表現の種類およびその頻度}
\label{tab:irex_tag}
\begin{tabular}{|c||c|c|} \hline
        & \multicolumn{2}{|c|}{頻度 (\%)} \\ \cline{2-3}
種類 & 訓練データ & 評価データ \\ \hline
ORGANIZATION & 3676 (19.7) & 361 (23.9) \\
PERSON & 3840 (20.6) & 338 (22.4) \\
LOCATION & 5463 (29.2) & 413 (27.4) \\
ARTIFACT & 747 (4.0) & 48 (3.2) \\
DATE & 3567 (19.1) & 260 (17.2) \\
TIME & 502 (2.7) & 54 (3.5) \\
MONEY & 390 (2.1) & 15 (1.0) \\
PERCENT & 492 (2.6) & 21 (1.4) \\ \hline
合計 & 18677 & 1510 \\ \hline
\end{tabular}
\end{center}
\end{table}

IREXワークショップの固有表現抽出タスクでは，
表~\ref{tab:irex_tag}に示す八種類の固有表現の抽出が課題とされた\\
\cite{IREX99aj}．
表~\ref{tab:irex_tag}には，主催者側から提供された訓練データの主要部分を占める
CRL(郵政省 通信総合研究所 --- 現，独立行政法人 通信総合研究所)
固有表現データ(毎日新聞1,174記事の固有表現をタグ付け)，
および本試験データのうちの一般ドメインのもの(毎日新聞71記事の固有表現をタグ付け)
について，八種類の固有表現数を調査した結果を示す．

\subsection{形態素と固有表現の対応パターン}


次に，上記のIREXワークショップの固有表現抽出タスクの訓練データを
形態素解析システム{\sc breakfast}\cite{Sassano97aj}
\footnote{
  {\sc breakfast}の品詞タグの種類数は約300であり，
  新聞記事に対しては99.6\%の品詞正解率である．
}
で形態素解析し，その結果の形態素と固有表現の対応パターンを調査した結果を
表~\ref{tab:MnNE}に示す．
これからわかるように，半分近くの固有表現については，形態素と固有表現が一対一に
対応しないことがわかる．
また，そのうち，
	一つの固有表現が複数の形態素から構成されている場合は
	90\%近く(7175/ (7175+1022) = 87.5\%)を占めており，
	これらの固有表現については，
	各固有表現の区切り位置はいずれかの形態素の区切り位置と一致している，
	すなわち，固有表現の開始位置は，先頭の構成要素となる形態素の開始位置と，
	また，固有表現の終了位置は，末尾の構成要素となる形態素の終了位置と，
	それぞれ一致する．
図~\ref{fig:egMtoNE}にこのような場合の例を示す．
また，表~\ref{tab:MnNE}の「その他」の場合の多くは，
一つ以上の固有表現が一つの形態素の一部となる場合である．
例えば，「訪米」という形態素に対して，その一部である「米」のみが
LOCATION(地名)であるという例がこれに相当する．
この「その他」の場合の固有表現については，その割合が少なく，
また，先行研究\cite{Uchimoto00aj}において，ある程度の割合で抽出できる
ことがわかっているので，本論文における考慮の対象には含めない．


\begin{table}
\begin{center}
\caption{形態素と固有表現の対応パターン}
\label{tab:MnNE}
\begin{tabular}{|c|c||c|c|} \hline
\multicolumn{2}{|c||}{対応パターン} 
        & \multicolumn{2}{|c|}{固有表現タグ頻度(\%)} \\ \hline\hline
\multicolumn{2}{|c||}{1対1} 
        & \multicolumn{2}{|c|}{10480 (56.1)} \\ \hline
         & $n=2$ & 4557 (24.4) & \\ \cline{2-3}
$n (\geq 2)$ 形態素 対 1 固有表現   &   $n=3$ & 1658 (8.9) 
                                      & 7175  (38.4) \\ \cline{2-3}
          & $n\geq 4$ & 960 (5.1) & \\ \hline
\multicolumn{2}{|c||}{その他} &   
                \multicolumn{2}{|c|}{1022 (5.5)} \\ \hline\hline
\multicolumn{2}{|c||}{合計} &   \multicolumn{2}{|c|}{18677} \\ \hline
\end{tabular}
\end{center}
\end{table}

\begin{figure}
\begin{center}
{\flushleft
\hspace*{2cm}{\bf \framebox{2 形態素 対 1 固有表現}}\\
}

\begin{tabular}{c|cc|c}
\multicolumn{1}{c}{} & \multicolumn{2}{c}{\tt <ORGANIZATION>} & \\ \cline{2-3}
$\cdots$ & ロシア & 軍 & $\cdots$ \\ \cline{2-3}
\multicolumn{3}{c}{}
\end{tabular}
\begin{tabular}{c|cc|c}
\multicolumn{1}{c}{} & \multicolumn{2}{c}{\tt <PERSON>} & \\ \cline{2-3}
$\cdots$ & 村山 & 富市 & 首相\ \ $\cdots$ \\ \cline{2-3}
\multicolumn{4}{c}{}
\end{tabular}

\vspace*{.3cm}

{\flushleft
\hspace*{2cm}{\bf \framebox{3 形態素 対 1 固有表現}}\\
}

\mbox{\begin{tabular}{c|ccc|c}
\multicolumn{1}{c}{} & \multicolumn{3}{c}{\tt <TIME>} & \\ \cline{2-4}
$\cdots$ & 午前 & 九 & 時 &  $\cdots$ \\ \cline{2-4}
\multicolumn{5}{c}{}
\end{tabular}
\begin{tabular}{c|ccc|c}
\multicolumn{1}{c}{} & \multicolumn{3}{c}{\tt <ARTIFACT>} & \\ \cline{2-4}
$\cdots$ & 北米 & 自由貿易 & 協定 &  $\cdots$ \\  \cline{2-4}
\multicolumn{5}{c}{}
\end{tabular}
}
\end{center}
\caption{複数形態素が一つの固有表現に対応する例}
\label{fig:egMtoNE}
\end{figure}


最大エントロピー法を用いた固有表現抽出
\label{sec:NEchunk}

本節では，まず，ベースモデルとなる，
最大エントロピー法を用いた日本語固有表現抽出の手法~\cite{Borthwick99aj,Uchimoto00aj}を
定式化する．
 
\subsection{問題設定}
\label{subsec:setting}

ここでの固有表現抽出の問題は，
固有表現まとめ上げおよび固有表現タイプ分類の問題ととらえることができる．
いま，以下に示すような形態素列が与えられているとする．
\[
\begin{array}{c}
\mbox{(左側文脈)}\ \ \ \ \ \ \ \  \ \ \ \ \ \mbox{(右側文脈)} \\
\cdots M_{-k}^L\cdots M_{-1}^L  \ \ 
	M_{0}\ \ 
         M_{1}^R\cdots M_{l}^R\cdots  \\
         \uparrow  \\
         \mbox{(現在位置)}  
\end{array}
\]
ここで，現在の位置が形態素$M_{0}$のところであるとすると，
日本語固有表現まとめ上げおよび固有表現タイプ分類の問題とは，
この現在位置の形態素$M_{0}$に，
まとめ上げ状態および固有表現タイプ(詳細は\ref{subsec:tagck}~節で述べる)を
付与することである．

本論文の統計的固有表現抽出においては，訓練データからの教師あり学習により
固有表現抽出モデルを学習する．その際には，
各固有表現がどの形態素から構成されているかという情報が利用可能で，
そのような情報を用いて固有表現抽出モデルを学習する．
例えば，以下の例では，現在の位置に相当する形態素$M_{i}^{NE}$が
$m$個の形態素からなる固有表現の一部であるという情報が利用可能である．
\newpage
{
\begin{eqnarray}
(左側文脈) & \mbox{(固有表現)} & (右側文脈) \nonumber\\
\cdots M_{-k}^L\cdots M_{-1}^L & 
        M_{1}^{NE}\cdots M_{i}^{NE}\cdots M_{m}^{NE}
        & M_{1}^R\cdots M_{l}^R\cdots  \nonumber \\
        & \uparrow\ \ \ & \label{eqn:NE-len} \\
        & \mbox{(現在位置)}\ \ \  & \nonumber
\end{eqnarray}
}

また，次節で述べる最大エントロピー法を用いて固有表現抽出モデルを学習する際には，
現在位置および周囲の形態素の素性(\ref{subsec:ftr}~節)を条件として，
現在位置の形態素に固有表現まとめ上げ状態およびタイプ(\ref{subsec:tagck}~節)
をクラスとして付与するための条件付確率モデルを最大エントロピー法により学習する．

なお，通常，学習された確率モデルを適用して，
形態素に固有表現まとめ上げ状態および固有表現タイプを付与することにより，
固有表現の抽出を行なう場合は，一文全体で，固有表現まとめ上げ状態および固有表現タイプの
確率を最大とする固有表現の組合わせを求める必要がある．
本論文では，この最適解探索の方法としては，\cite{Uchimoto00aj}のものをそのまま用いている．

\subsection{最大エントロピー法}
\label{subsec:ME}

最大エントロピー法は，文脈を規定する制約を素性として与え，
与えられた素性のもとでエントロピーを最大化するという条件によって求められる
確率モデルである．確率モデルの学習においてエントロピーを最大化することにより，
与えられた制約を満たす最も一様なモデルが学習されるため，
データの過疎性に強いという特徴を持つ．

ここでは，与えられた訓練集合から，
文脈$x(\in {\cal X})$においてクラス$y(\in {\cal Y})$を出力するプロセスの
確率的振舞い，すなわち条件付確率分布$p(y\mid x)$を
最大エントロピー法に基づいて推定する方法の概略を説明する．

まず，訓練集合中の事象$(x,y)$の観測値を大量に集め，
$freq(x,y)$を事象$(x,y)$の訓練集合中での生起頻度として，
訓練集合中の経験的確率分布$\tilde{p}(x,y)$を以下のように推定する．
\begin{eqnarray*}
  \tilde{p}(x,y) & \equiv & \frac{freq(x,y)}{\displaystyle \sum_{x,y}freq(x,y)}
\end{eqnarray*}

次に，訓練集合中のどのような現象に注目して確率分布を推定するのかを表す二値の関数
$f(x,y)$を導入し，これを素性関数と呼ぶ．
具体的には，各素性関数$f_i$について，この関数が真となる事象$x$および$y$の集合$V_{xi}$および$V_{yi}$が
規定されていると考え，この集合にしたがって素性関数$f_i$が以下のように定義される．
\begin{eqnarray*}
  f_i(x,y) & = & 
	\left\{ \begin{array}[c]{ll}
	1 & \mbox{($x\in V_{xi}$かつ$y\in V_{yi}$の場合)} \\
	0 & \mbox{(それ以外の場合)}	   
	 \end{array}\right.
\end{eqnarray*}
また，一般に確率モデル学習の際には，大量の素性からなる素性の候補集合${\cal F}$から，
活性化された素性の部分集合${\cal S}(\subseteq {\cal F})$が選択され，
これらによって事象$(x,y)$および確率分布$p(y\mid x)$が記述される．

次に，実際に確率モデル学習を行う際には，活性化された素性集合${\cal S}$中の各素性$f_i$について，
学習すべき確率分布$p(y\mid x)$による素性$f_i$の期待値(左辺)と
経験的確率分布$\tilde{p}(x,y)$による素性$f_i$の期待値(右辺)が等しいとする以下の制約等式を課す．
\begin{eqnarray*}
  \sum_{x,y}\tilde{p}(x)p(y\mid x)f_i(x,y)
& = & \sum_{x,y}\tilde{p}(x,y)f_i(x,y) \mbox{\ \ \ for\ }\forall f_i\in {\cal S}
\end{eqnarray*}
そして，これらの制約等式を満たす確率分布$p(y\mid x)$のうちで，以下の条件付エントロピー$H(p)$
を最大にする最も「一様な」モデルが，求めるべきモデル$p_{\ast}$であるとする．
\begin{eqnarray}
  H(p) & \equiv & -\sum_{x,y}\tilde{p}(x)p(y\mid x)\log p(y\mid x) \nonumber \\
  p_{\ast} & = & \argmax_{p\in {\cal C(S)}}H(p) \label{eqn:me}
\end{eqnarray}

(\ref{eqn:me})式を満たす確率分布は必ず存在し，
それは以下の確率分布$p_{\lambda}(y\mid x)$ で記述される．
\begin{eqnarray*}\label{eqn:plambda}
  p_{\lambda}(y\mid x) & = & 
	\frac{\displaystyle \exp\Bigl(\sum_{i}\lambda_{i}f_i(x,y)\Bigr)}
		{\displaystyle \sum_y\exp\Bigl(\sum_{i}\lambda_{i}f_i(x,y)\Bigr)}
\end{eqnarray*}
ただし，$\lambda_i$は各素性$f_i$のパラメータである．
また，実際にエントロピーを最大にする最適なパラメータ${\lambda^{\ast}}_{i}$を推定するには，
Improved Iterative Scaling(IIS)アルゴリズム\cite{Pietra97a,Berger96a}と呼ばれる
アルゴリズムが用いられる．

\begin{table*}
\begin{center}
\caption{固有表現まとめ上げ状態の表現法}
\label{tab:NEcode}
        \begin{tabular}{|c|cc|c|c|ccc|c|c|cc|} \hline
        固有表現タグ & & \multicolumn{1}{c}{} & \multicolumn{1}{c}{\tt <ORG>} 
                & \multicolumn{1}{c}{} & \multicolumn{3}{c}{\tt <LOC>} 
                & \multicolumn{1}{c}{} & \multicolumn{1}{c}{\tt <LOC>}  & & 
                \\ \cline{4-4}\cline{6-8}\cline{10-10}
        形態素列 & $\cdots$ & $M$ & $M$ & $M$ 
                & $M$ & $M$ & $M$ & & $M$ & $M$ & $\cdots$ 
                \\ \cline{4-4}\cline{6-8}\cline{10-10}
                & \multicolumn{11}{c|}{} \\ \hline 
固有表現 & 
                & \multicolumn{1}{c}{\tt O} & \multicolumn{1}{c}{\tt ORG\_U} 
                & \multicolumn{1}{c}{\tt O}  
                & \multicolumn{1}{c}{\tt LOC\_S} & \multicolumn{1}{c}{\tt LOC\_C} 
                & \multicolumn{1}{c}{\tt LOC\_E} & \multicolumn{1}{c}{}
                & \multicolumn{1}{c}{\tt LOC\_U} 
                & \multicolumn{1}{c}{\tt O} &   \\
まとめ上げ状態 &  \multicolumn{11}{|c|}{} \\ \hline
        \end{tabular}
\end{center}
\end{table*}

\subsection{固有表現まとめ上げ状態の表現法}
\label{subsec:tagck}

本論文では，固有表現まとめ上げの際のまとめ上げ状態の表現法として，
日本語固有表現抽出の既存の手法\cite{Sekine98a,Borthwick99aj,Uchimoto00aj}に
おいて用いられた\sekine_encoding法を採用する
\footnote{
  この他に，まとめ上げ問題でよく用いられるInside/Outside法が知られているが，
  最大エントロピー法との組合わせで日本語固有表現抽出を行なう場合は
  \sekine_encoding法よりも性能が劣る~\cite{Sassano00bjx}．
}．
この方法では，各固有表現タイプについて，以下の四種類のまとめ上げ状態を
設定する．



\begin{description} 
\item[{\tt S}] -- 現在位置の形態素は，二つ以上の形態素から構成される固有表現の
		先頭の形態素である．
\item[{\tt C}] -- 現在位置の形態素は，三つ以上の形態素から構成される固有表現の
		先頭・末尾以外の中間の形態素である．
\item[{\tt E}] -- 現在位置の形態素は，二つ以上の形態素から構成される固有表現の
		末尾の形態素である．
\item[{\tt U}] -- 現在位置の形態素は単独で一つの固有表現を構成する．
\end{description}
また，固有表現を構成しない形態素のための状態として以下の状態を設定する．
\begin{description} 
\item[{\tt O}] -- 現在位置の形態素はどの固有表現にも含まれない．
\end{description}
結果として，この表現法では，固有表現まとめ上げ状態として，
$4\times 8+1=33$の状態を設定する．
この方法により日本語固有表現のまとめ上げを行なう様子を
表~\ref{tab:NEcode}に示す．

\subsection{各形態素の素性}
\label{subsec:ftr}

各形態素の素性としては，以下の三種類のものを用いる
\footnote{
   これらの素性のうち，語彙素性を抽出する条件は\cite{Uchimoto00aj}に従っている．
   また，品詞素性については，\cite{Uchimoto00aj}とは，
   利用している形態素解析システムの品詞体系が異なっているため，異なった素性になっている．
   さらに，\cite{Uchimoto00aj}では，素性として文字種は用いていないが，
   文字種を用いた方が高い性能が得られることが分かっている~\cite{Sassano00bjx}．
}．
\begin{enumerate}
\item 語彙 --- 訓練コーパス中で，固有表現の位置および周囲二形態素以内に5回以上出現した
	2,052語彙
	\footnote{
	例えば，頻度上位10位以内のものは，
	助詞6種類，括弧等の記号3種類，読点，
	11$\sim$20位は，助詞3種類，助動詞1種類，句点，
	助数詞(``年''，``日'')，接尾辞(``さん'')，地名(``日本'')，時相名詞(``昨年'')，
	21$\sim$30位は，助詞3種類，助動詞2種類，
	助数詞(``％''，``円'')，接尾辞(``氏'')，地名(``ロシア''，``米国'')であった．
	}
	．
\item 品詞 --- 形態素解析システム{\sc breakfast}の約300種類の品詞．
\item 文字種 --- 平仮名・片仮名・漢字・数字・英語アルファベット・記号，およびそれらの組合わせ．
\end{enumerate}


\subsection{周囲の形態素のモデル化}
\label{subsec:context}

次に，本論文では，現在位置の形態素に対して固有表現のまとめ上げ状態を
付与する際に，周囲のどれだけの形態素を考慮するか，つまり周囲の形態素をどのように
モデル化するかについて，以下の二種類のモデルを用いる．

\subsubsection{固定(文脈)長モデル}
\label{subsubsec:3gram}

一つ目のモデルは，現在位置の形態素がどれだけの長さの固有表現を
構成するのかを全く考慮せずに，固有表現まとめ上げ状態を付与するモデルである．
これは，学習時においても，現在の形態素が，いくつの形態素からなる固有表現
の一部であるか(\ref{subsec:setting}~節，式(\ref{eqn:NE-len})参照)といった情報を全く考慮せず学習を行なうモデル
である．このモデルにおいては，以下に示すように，現在位置の形態素$M_0$の左側および右側の
文脈中の形態素については，学習時においても適用時においても，
常に固定された数の形態素だけを考慮する．
\[
\begin{array}{c}
\ \ \ \mbox{(左側文脈)}\ \ \ \ \  \ \ \ \ \ \mbox{(右側文脈)} \\
\cdots M_{-k}\cdots M_{-1}  \ \ 
	M_{0}\ \ 
         M_{1}\cdots M_{l}\cdots  \\
         \ \ \ \ \uparrow  \\
         \ \ \ \ \mbox{(現在位置)}  
\end{array}
\]
本論文ではこのモデルのことを，{\bf 固定長モデル}と呼ぶ．
本論文では特に，現在位置の形態素$M_0$の左側および右側の文脈中の形態素をいくつ考慮するかに応じて，
左右二形態素ずつを考慮する5グラムモデル
\begin{eqnarray*}
(左側文脈) & (現在位置)  & (右側文脈)  \nonumber \\
\cdots\ \ M_{-2} M_{-1} & 
        M_{0}
        & M_{1} M_2 \ \ \cdots  
\end{eqnarray*}
左右三形態素ずつを考慮する7グラムモデル
\begin{eqnarray*}
(左側文脈) & (現在位置)  & (右側文脈)  \nonumber \\
\cdots\ \ M_{-3} M_{-2} M_{-1} & 
        M_{0}
        & M_{1} M_2 M_3 \ \ \cdots  
\end{eqnarray*}
左右四形態素ずつを考慮する9グラムモデル
\begin{eqnarray*}
(左側文脈) & (現在位置)  & (右側文脈)  \nonumber \\
\cdots\ \ M_{-4} M_{-3} M_{-2} M_{-1} & 
        M_{0}
        & M_{1} M_{2} M_{3} M_4 \ \ \cdots  
\end{eqnarray*}
を用いる．

\subsubsection{可変(文脈)長モデル}
\label{subsubsec:vgram}

一方，もう一つのモデルは，
学習時において，現在位置の形態素が，いくつの形態素から構成される固有表現
の一部であるか(式(\ref{eqn:NE-len})参照)を考慮して学習を行なうモデルで，
これを{\bf 可変長モデル}と呼ぶことにする~\cite{Sassano00bjx,Sassano00a}．

\subsubsection*{モデルの学習}

学習時には，現在位置の形態素が固有表現を構成しない場合には，
5グラムモデルと同じく，現在位置およびその左右の二個ずつの形態素を考慮して
学習を行なう．
一方，現在位置の形態素$M_{i}^{NE}$が
$m(ただし本論文では3以下)$個の形態素からなる固有表現の一部であるときには，
固有表現を構成する形態素およびその左右の二個ずつの形態素を考慮して学習を行なう．
つまり，現在注目している固有表現の長さ$m$に応じて，考慮する周囲の形態素の
総数が可変となる．
\begin{eqnarray*}
(左側文脈) & (固有表現)  & (右側文脈)  \nonumber \\
\cdots\ \  M_{-2}^L M_{-1}^L & 
        M_{1}^{NE}\cdots M_{i}^{NE}\cdots M_{m(\leq 3)}^{NE}
        & M_{1}^R M_{2}^R\ \ \cdots  \nonumber \\ 
        & \uparrow\ \ \ \ \ \ \ & 
				\\ 
        & \mbox{(現在位置)}\ \ \ \ \ \  & \nonumber
\end{eqnarray*}

また，現在位置の形態素$M_{i}^{NE}$が
4個以上の形態素から構成される固有表現の一部であるときには，
本論文では，以下の手順で，
固有表現を構成するとみなす形態素数を3に限定するという近似を行なう．
\begin{enumerate}
\item 現在位置の形態素が固有表現の先頭である場合は，
	先頭から三形態素のみが固有表現を構成するとみなし，
	四番目以降の形態素については右側文脈であるとみなす．
\begin{eqnarray*}
(左側文脈) & (固有表現)  & (右側文脈)  \nonumber \\
\cdots\ \  M_{-2}^L M_{-1}^L & 
        M_{1}^{NE}M_{2}^{NE}M_{3}^{NE}
        & M_{4}^{NE}M_{?}^?\ \ \cdots  \nonumber \\ 
        & \uparrow\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \  & 
				\\
        & \mbox{(現在位置)} \hspace*{2cm} & \nonumber 
\end{eqnarray*}


\item 現在位置の形態素が固有表現の末尾である場合は，
	末尾の三形態素のみが固有表現を構成するとみなし，
	末尾の三形態素以外については左側文脈であるとみなす．
\begin{eqnarray*}
(左側文脈) & (固有表現)  & (右側文脈)  \nonumber \\
\cdots\ \  M_{?}^? M_{m-3}^{NE} & 
        M_{m-2}^{NE}M_{m-1}^{NE}M_{m}^{NE}
        & M_{1}^{R}M_{2}^R\ \ \cdots  \nonumber \\ 
        & \ \ \ \ \ \ \ \ \ \ \ \ \ \uparrow  & 
				\\
        & \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{(現在位置)} & \nonumber 
\end{eqnarray*}

\item その他の場合は，現在位置の形態素およびその前後一形態素ずつのみが
	固有表現を構成するとみなし，
	それ以外の形態素については左側もしくは右側文脈であるとみなす．
\begin{eqnarray*}
(左側文脈) & (固有表現)  & (右側文脈)  \nonumber \\
\cdots\ \  M_{?}^? M_{?}^{?} & 
        M_{i-1}^{NE}M_{i}^{NE}M_{i+1}^{NE}
        & M_{?}^{?}M_{?}^?\ \ \cdots  \nonumber \\ 
        & \uparrow\ \ \   & 	
				\\
        & \mbox{(現在位置)} \ \ \ & \nonumber 
\end{eqnarray*}

\end{enumerate}
\clearpage
例えば，以下のように，現在位置の形態素$M_{i}^{NE}$が
4個の形態素から構成される固有表現の一部である場合を考える．
\begin{eqnarray*}
(左側文脈) & (固有表現)  & (右側文脈)  \\
\cdots\ \  M_{-2}^L M_{-1}^L & 
        M_{1}^{NE}M_{2}^{NE}M_{3}^{NE}M_{4}^{NE}
        & M_{1}^R M_{2}^R\ \ \cdots  \\ 
        & \uparrow\ \ \ \ \ \ \ \ \ \  & \\
        & \mbox{(現在位置)}\ \ \ \ \ \ \ \ \   & 
\end{eqnarray*}
この場合，固有表現を構成する末尾の形態素$M_{4}^{NE}$が，
あたかも固有表現の直後の右側文脈に存在する形態素であるかのように
みなされ，以下のように近似されてモデル化される．
\begin{eqnarray*}
(左側文脈) & (固有表現)  & (右側文脈)  \nonumber \\
\cdots\ \  M_{-2}^L M_{-1}^L & 
        M_{1}^{NE}M_{2}^{NE}M_{3}^{NE}
        & M_{4}^{NE}M_{1}^R \ \ \cdots  \\
        & \uparrow\ \ \  & \\
        & \mbox{(現在位置)}\ \ \ & \nonumber
\end{eqnarray*}

\subsubsection*{モデルの適用}

モデルの適用時には，現在位置の形態素がどのような固有表現を構成するかという情報が
利用できないので，固定長の9グラムモデルの場合と同様に，
現在位置の形態素，および，左右四形態素ずつの素性を考慮してモデルの適用を行なう
\footnote{
  可変長モデルでは，モデルの学習時と適用時で考慮する素性の集合が異なっているので，
  単独での性能は高くないが，抽出される固有表現の分布が固定長モデルとは異なっている
  (\ref{subsec:indiv}~節参照)．
}．

\subsubsection{周囲の形態素の素性}
\label{subsubsec:ftr34}

前節までで述べた固定長モデルおよび可変長モデルにおいて，
特に現在位置の周囲の形態素の素性について，\ref{subsec:ftr}~節で述べた素性のうちの
全部または一部のみを用いるモデルとして，以下の三種類のモデルを設定し，
これらについて実験的評価を行なう
\footnote{
  実際に，実験で用いた訓練コーパスから学習したモデルのうち，
  全素性を用いた5グラムモデルの素性数は13,200，素性関数の数は31,344(頻度3以上)，
  全素性を用いた9グラムモデルの素性数は15,071，素性関数の数は35,311(頻度3以上)であった．
}．
\begin{itemize}
\item 全素性を用いるモデル．
\item 周囲の形態素$M_{l(\leq -3)}$および$M_{r(\geq 3)}$については，
	語彙素性および品詞素性のみを考慮するモデル．
\item 周囲の形態素$M_{l(\leq -3)}$および$M_{r(\geq 3)}$については，
	語彙素性のみを考慮するモデル．
\end{itemize}
なお，\cite{Uchimoto00aj}と同様に，
周囲の複数の形態素の素性を結合した結合素性は用いていない．

正誤判別規則学習を用いた複数システム出力の混合
\label{sec:combi}

\subsection{訓練・評価データセット}
\label{subsec:trts}

本論文の複数システム出力の混合法では，以下の三種類の訓練・評価データセットを用いる．
\begin{enumerate}
\item $TrI$: 個々の固有表現抽出モデルを学習するための訓練データセット．
\item $TrC$: 複数システムの出力の正誤判別規則を学習するための訓練データセット．
\item $Ts$: 複数システムの出力の正誤判別規則を評価するための評価データセット．
\end{enumerate}

\subsection{訓練および評価手続きの概要}
\label{subsec:proc}

まず，以下に，訓練データセット$TrI$および$TrC$を用いて，
複数システムの出力の正誤判別規則を学習するため手続きの概要を示す．
\begin{enumerate}
\item 訓練データセット$TrI$を用いて，
	個々の固有表現抽出モデル$NEext_i$ $(i=1,\ldots,n)$を学習する．
\item 個々の固有表現抽出モデル$NEext_i$ $(i=1,\ldots,n)$を，
	それぞれ，訓練データセット$TrC$に適用し，
	各固有表現抽出モデル$NEext_i$につき，
	抽出結果の固有表現リスト$NEList_i(TrC)$を
	それぞれ一つずつ得る．
\item 訓練データセット(テキスト)$TrC$中での各固有表現の出現位置の情報を用いて，
	抽出結果の固有表現リスト$NEList_i(TrC)$ $(i\!=\!1,\ldots,n)$を，
	複数システム間$(i\!=\!1,\ldots,n)$で整列し，
	訓練データセット$TrC$の事象表現$TrCev$を作成する．
\item 訓練データセット$TrC$の事象表現$TrCev$を教師あり訓練データとして，
	複数システムの出力の正誤判別規則$NEext_{cmb}$を学習する．
\end{enumerate}

次に，評価データセット$Ts$に，学習された正誤判別規則$NEext_{cmb}$を適用する手順の概要を示す．
\begin{enumerate}
\item\label{enum:evproc1}
	個々の固有表現抽出モデル$NEext_i$ $(i=1,\ldots,n)$を，
	それぞれ，評価データセット$Ts$に適用し，
	各固有表現抽出モデル$NEext_i$につき，
	抽出結果の固有表現リスト$NEList_i(Ts)$を
	それぞれ一つずつ得る．
\item 評価データセット(テキスト)$Ts$中での各固有表現の出現位置の情報を用いて，
	抽出結果の固有表現リスト$NEList_i(Ts)$ $(i\!=\!1,\ldots,n)$を，
	複数システム間$(i\!=\!1,\ldots,n)$で整列し，
	評価データセット$Ts$の事象表現$Tsev$を作成する．
\item 複数システムの出力の正誤判別規則$NEext_{cmb}$を
	評価データセット$Ts$の事象表現$Tsev$に適用し，性能を測定する．
\end{enumerate}

\subsection{データ構造}
\label{subsec:expr}

本節では，訓練データセット$TrC$の事象表現$TrCev$，あるいは，
評価データセット$Ts$の事象表現$Tsev$のデータ構造を説明し，
複数システムの出力の正誤判別規則を学習する際の素性・クラスについて述べる．
以下では，訓練データセット$TrC$の事象表現$TrCev$を例にして説明する．

\subsubsection{事象}
\label{subsubsec:event}

訓練データセット$TrC$の事象表現$TrCev$は，
訓練データセット(テキスト)$TrC$中での各固有表現の出現位置の情報を用いて，
抽出結果の固有表現リスト$NEList_i(TrC)$ $(i\!=\!1,\ldots,n)$を
複数システム間$(i\!=\!1,\ldots,n)$で整列することにより作成される．
ここで，整列結果の事象表現$TrCev$は，セグメントの列$Seg_1,\ldots,Seg_N$で表現され，
各セグメント$Seg_j$は，整列された固有表現の集合$\{ NE_1,\ldots,NE_{m_j} \}$に
よって表現される． 
\begin{eqnarray*}
 TrCev & = & Seg_1,\ldots,Seg_N \\
 Seg_j & = & \{ NE_1,\ldots,NE_{m_j} \} 
\end{eqnarray*}
ただし，この整列の際には，少なくとも一つの形態素を共有する複数の固有表現は，
同じセグメントに含まれなければならない，という制約が課せられる．

次に，各セグメント$Seg_j$中の固有表現の集合$\{ NE_1,\ldots,NE_{m_j} \}$は，
固有表現の事象表現の集合$\{ NEev_1,\ldots,NEev_{l_j} \}$に変換され，
これにより，各セグメント$Seg_j$は事象表現$SegEv_j$に変換される．
\begin{eqnarray}
 SegEv_j & = & \{ NEev_1,\ldots,NEev_{l_j} \}  \label{eqn:segev}
\end{eqnarray}
ここで，各事象表現$NEev_{k_j}$は，以下の二種類のうちのどちらかに対応し，
それぞれ異なったデータ構造を持つ．
\begin{enumerate}
\item[i)] そのセグメント中で少なくとも一つのシステムにより出力された固有表現の事象表現．
\item[ii)] そのセグメント中で一つも固有表現を出力しなかった一つのシステムに関する情報を
	表す事象表現．
\end{enumerate}
i)のタイプの事象表現$NEev_{k_j}$は以下のようなデータ構造を持つ．
\begin{eqnarray}
NEev_{k_j} & = &	\Bigl\{
	 systems =
	 \langle p,\ldots,q\rangle,\nonumber  
\ mlength = x\mbox{ morphemes},\nonumber \\
& &	 \ \  NEtag = \cdots,\ 
  		 POS = \cdots,\nonumber 
\ class_{NE} = +/-
	 \Bigr\} \label{eqn:NEnon-emp}
\end{eqnarray}
ここで，``$systems$''はこの固有表現を出力したシステムの指標のリストを，
``$mlength$''はこの固有表現を構成する形態素の数を，
``$NEtag$''はこの固有表現のタイプを，
``$POS$''はこの固有表現を構成する形態素の数の品詞のリストを，
それぞれ表す．
また，``$class_{NE}$''は，正解データと比較して，この固有表現が正解であるか(``$+$'')，
それとも，システムによる誤出力であるか(``$-$'')を示す．

一方，ii)のタイプの事象表現$NEev_{k_j}$は，
このセグメント中で，指標$r$を持つシステムが固有表現を出力しなかったことを示す，
以下のようなデータ構造を持つ．
\begin{eqnarray}
NEev_{k_j} & = &   	
       \Bigl\{
	 systems =
	 \langle r\rangle,  
\  class_{sys} =
	 \mbox{``no output''}
	 \Bigr\} \label{eqn:NEemp}
\end{eqnarray}

\subsubsection{クラス}
\label{subsubsec:class}

複数システムの出力の正誤判別を行なう規則は，
式(\ref{eqn:segev})で定義されるセグメントの事象表現$SegEv_j$を一つの事象単位として，
学習および適用が行なわれる．
ここで，正誤判別規則の学習および適用の際には，
セグメント$SegEv_j$中の固有表現を各システムごとにまとめて，
システム単位で正誤のクラスを参照する．
そこで，式(\ref{eqn:segev})で定義される一つのセグメントの事象表現$SegEv_j$に対して，
各システム$i$ごとにまとめた以下のクラス表現を設定し，
正誤判別規則の学習および適用を行なう．
\begin{eqnarray}
class_{sys}^1  & = & 
	\left\{\begin{array}{l}
	  +/-,\ \ldots,\ +/- \\
	 \mbox{``no output''} 
	\end{array}\right. \nonumber \\
         & \cdots & \label{eqn:segcl} \\
class_{sys}^n  & = & 
	\left\{\begin{array}{l}
	  +/-,\ \ldots,\ +/- \\
	 \mbox{``no output''} 
	\end{array}\right. \nonumber 
\end{eqnarray}
ここで，一般に，一つのセグメント中で，各システムは一つも固有表現を出力しない場合もあれば，
複数の固有表現を出力する場合もありえるので，
各システム$i$のクラス$class_{sys}^i$は上記のような表現になる
\footnote{
  実際に，実験で用いた訓練コーパスから学習した正誤判別規則において，
  クラスの種類が最も多かったのは，システム数$n\!=\!2$の場合で，
  ``$+$''，``$++$''，``$+++$''，``$++++$''，``$++-$''，``$+-$''，
  ``$+--$''，``$+---$''，``$-$''，``$--$''，``$---$''，
  ``no output''，の12通りであった．
}．

\subsubsection{複数システムの出力の正誤判別規則}

次に，前節の事象のデータ構造を用いて，複数システムの出力の正誤判別を行なう規則について説明する．
複数システムの出力の正誤判別を行なう規則は，
式(\ref{eqn:segev})で定義されるセグメントの事象表現$SegEv_j$を一つの事象単位として，
各システム$i$ごとに，式(\ref{eqn:segcl})で示すクラス$class_{sys}^i$を判別するという形式をとる．
この正誤判別規則の学習の際には，
式(\ref{eqn:segev})で定義されるセグメントの事象表現$SegEv_j$から，次節で説明する素性を抽出し，
この素性を用いて各システム$i$ごとのクラス$class_{sys}^i$を判別する規則を学習する
(\ref{subsec:DL}~節)．
この正誤判別規則の適用の際にも，事象表現$SegEv_j$から抽出される素性を用いて
各システム$i$ごとにクラス$class_{sys}^i$を判別する(\ref{subsec:apl}~節)．

\subsubsection{素性}
\label{subsubsec:ftr}

式(\ref{eqn:segev})で定義されるセグメントの事象表現$SegEv_j$から抽出される一つの素性$f$は，
システムの指標のリスト$\langle p,\ldots,q\rangle$，および，固有表現の素性表現$F$の組
$\langle systems\!=\! \langle p,\ldots,q\rangle,\ F \rangle$の集合によって表現される． 
\begin{eqnarray}
f & = &	\Bigl\{\
	 \langle 
	 systems\!=\!
	 \langle p,\ldots,q\rangle,\ F \rangle, 
\ \cdots, 
\  
	 \langle 
	 systems\!=\!
	 \langle p',\ldots,q'\rangle,\ F' \rangle 
	 \ \Bigr\} \label{eqn:ftr} 
\end{eqnarray}
このうち，一つの組$\langle systems\!=\! \langle p,\ldots,q\rangle,\ F \rangle$は，
指標$p,\ldots,q$に相当する(複数の)システムによって出力された一つの固有表現が，
素性表現$F$を持つことを表している．
固有表現の素性表現$F$は，集合
$\{mlength\!=\!\cdots, NEtag\!=\!\cdots, POS\!=\!\cdots\}$の
巾集合の任意の要素，
あるいは，そのセグメント中で指標$p,\ldots,q$に相当する(複数の)システムが固有表現を
出力しなかったことを表す集合の形式，のいずれかで表現される．
\begin{eqnarray}
F  & = & 
 \left\{\begin{array}{l}
      \Bigl\{
       mlength\!=\!\cdots,\  NEtag\!=\!\cdots,\
  		 POS\!=\!\cdots\Bigr\} \nonumber \\
       \Bigl\{
       mlength\!=\!\cdots,\  NEtag\!=\!\cdots\Bigr\} \nonumber \\
       \Bigl\{
       mlength\!=\!\cdots,\ POS\!=\!\cdots\Bigr\} \nonumber \\
     \Bigl\{
       NEtag\!=\!\cdots,\
  		 POS\!=\!\cdots\Bigr\} \nonumber \\
 
       \Bigl\{
     mlength\!=\!\cdots \Bigr\} \nonumber \\
       \Bigl\{
      NEtag\!=\!\cdots \Bigr\} \nonumber \\
       \Bigl\{
       POS\!=\!\cdots \Bigr\} \nonumber \\
       \emptyset \nonumber \\
       \Bigl\{
          class_{sys}\!=\! \mbox{``no outputs''} \Bigr\} \nonumber
	\end{array}\right.
\end{eqnarray}
正誤判別規則の学習時には，
式(\ref{eqn:segev})で定義されるセグメントの事象表現$SegEv_j$から，
式(\ref{eqn:ftr})の形式のあらゆる可能な素性$f$のうち，
以下の制約を含むいくつかの制約を満たすものだけが抽出される
\footnote{
  実際に，実験で用いた訓練コーパスから学習した正誤判別規則においては，
  固有表現を構成する形態素数``$mlength$''の値は18通り，
  固有表現のタイプ``$NEtag$''の値は8通り，
  固有表現を構成する形態素の品詞のリスト``$POS$''の値は4926通りであった．
  また，システム数$n\!=\!2$の場合で，可能な素性$f$の数の最大数は，
  112,114であった．
}． 
詳細については，
次節の例を参照．
\begin{enumerate}
\item[i)]	
  システムの指標のリスト$\langle p,\ldots,q\rangle$については，
  その固有表現を出力した全てのシステムの指標を記すこととし，
  部分リストの形式は許さない．
\item[ii)]
  一つのシステムが，一つのセグメント中で複数個の固有表現を出力した場合は，
  一つの素性$f$中で，それらの複数の固有表現のうちの一部のものだけの情報を
  記述することは許さない．
  それらの全ての固有表現について何らかの情報を記述するか，
  どの固有表現についての情報も記述しないかのどちらかである．
\end{enumerate}


\subsubsection{例}
\label{subsubsec:comb-eg}

\ref{subsubsec:event}~節の手続きにしたがって，
二つのシステムの固有表現抽出結果を整列し，
その整列結果を事象表現に変換する例を表~\ref{tab:ev-eg}に示す．
また，\ref{subsubsec:class}~節および\ref{subsubsec:ftr}~節の
手続きにしたがって，それらの事象表現からクラスおよび素性を抽出する
例を表~\ref{tab:ftr-eg}に示す．

表~\ref{tab:ev-eg}では，形態素解析の結果の形態素列に対して，
システム0およびシステム1の二つのシステムがそれぞれ単独で出力した
固有表現を，「単独システムの固有表現出力」の欄に示す．
それらの単独システムの固有表現出力を整列した結果は，
$SegEv_i\sim SegEv_{i+3}$の四つのセグメントに分割されており，
これらのセグメントを事象表現に変換した結果が
「事象表現」の欄に示されている．
各セグメントの特徴を簡単にまとめると以下のようになる．
\begin{itemize}
\item $SegEv_i$	:
	システム0が連続する二つの固有表現を出力したのに対して，
	システム1はそれらをまとめて一つの固有表現として出力している．
	正解データとの比較では，システム1の出力結果の方が正解である．
	このセグメントの事象表現は，いずれかの単独システムから出力された
	三つの固有表現の事象表現から構成されている．
\item $SegEv_{i+1}$ :
	システム1のみが固有表現を出力したが，この固有表現は誤出力である．
	このセグメントの事象表現は，システム0からの出力がなかったことを
	表す事象表現と，
	システム1が出力した一つの固有表現の事象表現から構成されている．
\item $SegEv_{i+2}$ :
	システム0が一形態素から構成される一つの固有表現を出力したのに対して，
	システム1はその形態素を含む三形態素から構成される一つの固有表現を出力した．
	正解データとの比較では，システム1の出力結果の方が正解である．
	このセグメントの事象表現は，各々の単独システムから出力された
	二つの固有表現の事象表現から構成されている．
\item $SegEv_{i+3}$ :
	システム0，システム1ともに二形態素から構成される同一の固有表現を出力した．
	正解データとの比較では，この固有表現は正解である．
	このセグメントの事象表現は，この一つ固有表現の事象表現から構成されている．
\end{itemize}

次に，表~\ref{tab:ftr-eg}においては，まずクラスについては，
これらの各セグメントの事象表現において，
各システムが出力した固有表現のクラス(もしくは出力がなかったことを表す事象表現のクラス)を
システムごとにまとめたものになっている．
一方，素性の方は，各セグメントについて，
以下の制約を満たす可能な素性の一覧を表現したものになっている．
\begin{itemize}
\item $SegEv_i$	:
	システム0は，このセグメント中で二つの固有表現を出力しているが，
	この二つの固有表現のうちの一つだけの情報を記述した素性は許容しない．
\item $SegEv_{i+1}$ :
	ある単独システムからの出力がなかったことだけを記述した素性は許容しない．
	例えば，	
	$\Bigl\{\
	 \langle 
	 systems\!=\!
	 \langle 0\rangle,
	class_{sys}\!=\!
	\mbox{``no outputs''}\rangle\ \Bigr\}$
	という素性は許容しない．
\item $SegEv_{i+3}$ :
	システムの指標のリストにおいては，
	このセグメントの固有表現を出力した二つのシステムの指標0および1の両方を
	必ず記述する．
\end{itemize}


\begin{table}
\begin{scriptsize}
\begin{center}
\caption{複数システムの出力の混合のための事象表現の例}
\label{tab:ev-eg}
\begin{tabular}{|c||c||c|c||c|} \hline
セグ & 形態素列(品詞) & \multicolumn{2}{|c||}{単独システムの固有表現出力} & 事象表現 \\ \cline{3-4}
メント	  & 	& 
システム0 & 
システム1 & \\ \hline\hline
	&  $\vdots$ & 	&   &    \\ \hline
 $SegEv_i$
        & 
	\begin{tabular}{c}
	来年(時相名詞) \\ 
	10月(時相名詞)
	\end{tabular}
	& 
	\begin{tabular}{c}
	来年 \\ (DATE)\\
        10月\\ (DATE)
	\end{tabular}
	&  
	\begin{tabular}{c}
	来年10月  \\
	(DATE) 
	\end{tabular}
 	& 
	\begin{tabular}{l}
	$\Bigl\{
		systems\!=\!\langle 0\rangle,
		mlength\!=\!1,$ \\
	\ \ 	$NEtag\!=\!{\rm DATE},$\\
	\ \ $POS\!=\!時相名詞,
		class_{NE}\!=\!-
		\Bigr\}$\\
	$\Bigl\{
		systems\!=\!\langle 0\rangle,
		mlength\!=\!1,$ \\
	\ \ 	$NEtag\!=\!{\rm DATE},$\\
	\ \ $POS\!=\!時相名詞,
		class_{NE}\!=\!-
		\Bigr\}$ \\
	$\Bigl\{
		systems\!=\!\langle 1\rangle,
		mlength\!=\!2,$ \\
	\ \ $NEtag\!=\!{\rm DATE},$\\
	\ \ $POS\!=\!時相名詞$-$時相名詞,$\\
	\ \ $class_{NE}\!=\!+
		\Bigr\}$
	\end{tabular}
	  \\ \hline
	& $\vdots$ & 	&   &    \\ 
	\hline
 $SegEv_{i+1}$
	& 
	\begin{tabular}{c}
	生殖(名詞)\\
	医療(名詞)\\
	技術(名詞)
	\end{tabular}
	 & 	&
	\begin{tabular}{c}
	 生殖医療技術 \\
	(ARTIFACT)
	\end{tabular}
	 &   	
	\begin{tabular}{l}
	$\Bigl\{
	systems\!=\!\langle 0\rangle,$  \\
	\ \ $class_{sys}\!=\!
	\mbox{``no outputs''} \Bigr\}$\\
	$\Bigl\{
	systems\!=\!\langle 1\rangle,  
	mlength\!=\!3,$ \\
	\ \ $NEtag\!=\!{\rm ARTIFACT},$ \\
	\ \ $POS\!=\!名詞$-$名詞$-$名詞,$\\
	\ \ $class_{NE}\!=\!-
		\Bigr\}$
	\end{tabular}
	\\ \hline
	& について(助詞相当)& 	   &   & \\
	& $\vdots$ & 	&   &    \\ 
	& 調査(サ変名詞) & 	&   &    \\ 
	& は(提題助詞) & 	   &   & \\ \hline
$SegEv_{i+2}$
	& 
	\begin{tabular}{c}
	厚生省(固有名詞)\\
	研究(サ変名詞) \\
	班(名詞)
	\end{tabular}
	 & 
	\begin{tabular}{c}
	厚生省 \\
	(ORGANI- \\
	ZATION)
	\end{tabular}
	&
	\begin{tabular}{c}
	厚生省研究班 \\
	(ORGANI-\\
	ZATION) 
	\end{tabular}
	  & 
	\begin{tabular}{l}
	$\Bigl\{
		systems\!=\!\langle 0\rangle,
		mlength\!=\!1,$ \\
	\ \ $NEtag\!=\!{\rm ORGANIZATION},$\\
	\ \ 	$POS\!=\!固有名詞,
		class_{NE}\!=\!-
		\Bigr\}$\\
	$\Bigl\{
	systems\!=\!\langle 1\rangle,
		mlength\!=\!3,$ \\
	\ \ $NEtag\!=\!{\rm ORGANIZATION},$\\
	\ \ $POS\!=\!固有名詞$-$サ変名詞$-$名詞,$\\
	\ \ $class_{NE}\!=\!+
		\Bigr\}$
	\end{tabular}
	\\ \hline
	& （(記号) & 	   &   & \\
	& 主任(人称名詞) & 	   &   & \\
	& 研究者(人称名詞) & 	   &   & \\
	& 、(読点) & 	   &   & \\ \hline
$SegEv_{i+3}$
	& 
	\begin{tabular}{c}
	山田(人名)\\
	太郎(人名)
	\end{tabular}
	 & 
	\begin{tabular}{c}
	 山田太郎  \\
	(PERSON)
	\end{tabular}
	 & 
	\begin{tabular}{c}
	 山田太郎  \\
	(PERSON)
	\end{tabular}
	 & 
	\begin{tabular}{l}
	$\Bigl\{
		systems\!=\!\langle 0,1\rangle,
		mlength\!=\!2,$ \\
	\ \ $NEtag\!=\!{\rm PERSON},$\\
	\ \ $POS\!=\!人名$-$人名,
		class_{NE}\!=\!+ \Bigr\}$
	\end{tabular}
	\\ \hline
	& $\vdots$ & 	&   &    \\ \hline
\end{tabular}
\end{center}
\end{scriptsize}
\end{table}



\begin{table}
\begin{scriptsize}
\begin{center}
\caption{表~\ref{tab:ev-eg}の事象表現の例から抽出される素性およびクラス}
\label{tab:ftr-eg}
\begin{tabular}{|c||c|c|} \hline
事象表現 & 素性 & クラス \\ \hline\hline
	\begin{tabular}{l}
	$\Bigl\{
		systems\!=\!\langle 0\rangle,
		mlength\!=\!1,$ \\
	\ \ 	$NEtag\!=\!{\rm DATE},$\\
	\ \ $POS\!=\!時相名詞,
		class_{NE}\!=\!-
		\Bigr\}$\\
	$\Bigl\{
		systems\!=\!\langle 0\rangle,
		mlength\!=\!1,$ \\
	\ \ 	$NEtag\!=\!{\rm DATE},$\\
	\ \ $POS\!=\!時相名詞,
		class_{NE}\!=\!-
		\Bigr\}$ \\
	$\Bigl\{
		systems\!=\!\langle 1\rangle,
		mlength\!=\!2,$ \\
	\ \ $NEtag\!=\!{\rm DATE},$\\
	\ \ $POS\!=\!時相名詞$-$時相名詞,$\\
	\ \ $class_{NE}\!=\!+
		\Bigr\}$
	\end{tabular}
	&
	\begin{tabular}{c}
	$\Bigl\{\
	 \langle 
	 systems\!=\!
	 \langle 0\rangle,\ F\rangle,
	\langle 
	 systems\!=\!
	 \langle 0\rangle,\ F'\rangle,$\\
	$ \langle systems\!=\!
	 \langle 1\rangle,\ F''\rangle\ \Bigr\}$
	\ \ \ \ または
	\\
	$\Bigl\{\
	 \langle 
	 systems\!=\!
	 \langle 0\rangle,\ F\rangle,
	\langle 
	 systems\!=\!
	 \langle 0\rangle,\ F'\rangle\ \Bigr\}$\\
	または\ \ \ \ 
	$\Bigl\{\
	 \langle 
	 systems\!=\!
	 \langle 1\rangle,\ F''\rangle\ \Bigr\}$\\
	ただし\\
	$F,F'は\ \  \Bigl\{
		mlength\!=\!1,
	NEtag\!=\!{\rm DATE},$\\
	$ POS\!=\!時相名詞
		\Bigr\}$\\
	の巾集合の任意の要素\\
	$F''は\ \  \Bigl\{
		mlength\!=\!2,
		NEtag\!=\!{\rm DATE},$\\
	\hspace*{0.7cm}$POS\!=\!時相名詞$-$時相名詞
		\Bigr\}$\\
	の巾集合の任意の要素
	\end{tabular} 
	& 
	\begin{tabular}{c}
	$class_{sys}^0\!=\!--$ \\
	$class_{sys}^1\!=\!+$ 
	\end{tabular} 
	  \\ \hline
	\begin{tabular}{l}
	$\Bigl\{
	systems\!=\!\langle 0\rangle,$  \\
	\ \ $class_{sys}\!=\!
	\mbox{``no outputs''} \Bigr\}$\\
	$\Bigl\{
	systems\!=\!\langle 1\rangle,  
	mlength\!=\!3,$ \\
	\ \ $NEtag\!=\!{\rm ARTIFACT},$ \\
	\ \ $POS\!=\!名詞$-$名詞$-$名詞,$\\
	\ \ $class_{NE}\!=\!-
		\Bigr\}$
	\end{tabular}
	&
	\begin{tabular}{c}
	$\Bigl\{\
	 \langle 
	 systems\!=\!
	 \langle 0\rangle,
	class_{sys}\!=\!
	\mbox{``no outputs''}\rangle,$\\
	$ \langle 
	 systems\!=\!
	 \langle 1\rangle,\ F\rangle\ \Bigr\}$\\
	または\ \ \ \ 
	$\Bigl\{\
	 \langle 
	 systems\!=\!
	 \langle 1\rangle,\ F\rangle\ \Bigr\}$\\
	ただし\\
	$Fは\ \  \Bigl\{
		mlength\!=\!3,
	NEtag\!=\!{\rm ARTIFACT},$\\
	$ 	POS\!=\!名詞$-$名詞$-$名詞
		\Bigr\}$\\
	の巾集合の任意の要素
	\end{tabular} 
	& 
	\begin{tabular}{c}
	$class_{sys}^0\!=\!$ \\
	``no outputs'' \\
	$class_{sys}^1\!=\!-$ 
	\end{tabular} 
	\\ \hline
	\begin{tabular}{l}
	$\Bigl\{
		systems\!=\!\langle 0\rangle,
		mlength\!=\!1,$ \\
	\ \ $NEtag\!=\!{\rm ORGANIZATION},$\\
	\ \ 	$POS\!=\!固有名詞,
		class_{NE}\!=\!-
		\Bigr\}$\\
	$\Bigl\{
	systems\!=\!\langle 1\rangle,
		mlength\!=\!3,$ \\
	\ \ $NEtag\!=\!{\rm ORGANIZATION},$\\
	\ \ $POS\!=\!固有名詞$-$サ変名詞$-$名詞,$\\
	\ \ $class_{NE}\!=\!+
		\Bigr\}$
	\end{tabular}
	&
	\begin{tabular}{c}
	$\Bigl\{\
	 \langle 
	 systems\!=\!
	 \langle 0\rangle,\ F\rangle,
	 \langle 
	 systems\!=\!
	 \langle 1\rangle,\ F'\rangle\ \Bigr\}$\\
	または\ \ 
	$\Bigl\{\
	 \langle 
	 systems\!=\!
	 \langle 0\rangle,\ F\rangle\ \Bigr\}$\\
	または\ \ 
	$\Bigl\{\
	 \langle 
	 systems\!=\!
	 \langle 1\rangle,\ F'\rangle\ \Bigr\}$\\
	ただし\\
	$Fは\ \  \Bigl\{
		mlength\!=\!1,$\hspace*{3.2cm}\\
	\hspace*{0.5cm} $NEtag\!=\!{\rm ORGANIZATION},$\\
	\hspace*{2.2cm} $ 	
	POS\!=\!固有名詞
		\Bigr\}$\\
	の巾集合の任意の要素\\
	$F'は\ \  \Bigl\{
		mlength\!=\!3,\hspace*{3.2cm}$\\
	\hspace*{0.7cm} $ NEtag\!=\!{\rm ORGANIZATION},$\\
	\hspace*{1.2cm} $ 	
	POS\!=\!固有名詞$-$サ変名詞$-$名詞
		\Bigr\}$\\
	の巾集合の任意の要素
	\end{tabular} 
	& 
	\begin{tabular}{c}
	$class_{sys}^0\!=\!-$ \\
	$class_{sys}^1\!=\!+$ 
	\end{tabular} 
	\\ \hline
	\begin{tabular}{l}
	$\Bigl\{
		systems\!=\!\langle 0,1\rangle,
		mlength\!=\!2,$ \\
	\ \ $NEtag\!=\!{\rm PERSON},$\\
	\ \ $POS\!=\!人名$-$人名,
		class_{NE}\!=\!+ \Bigr\}$
	\end{tabular}
	&
	\begin{tabular}{c}
	$\Bigl\{\
	 \langle 
	 systems\!=\!
	 \langle 0,1\rangle,\ F\rangle\ \Bigr\}$\\
	ただし\\
	$Fは\ \  \Bigl\{
		mlength\!=\!2,
	NEtag\!=\!{\rm PERSON},$\\
	$POS\!=\!人名$-$人名
		\Bigr\}$\\
	の巾集合の任意の要素
	\end{tabular} 
	& 
	\begin{tabular}{c}
	$class_{sys}^0\!=\!+$ \\
	$class_{sys}^1\!=\!+$ 
	\end{tabular} 
	\\ \hline
\end{tabular}
\end{center}
\end{scriptsize}
\end{table}




\subsection{学習アルゴリズム}
\label{subsec:DL}

教師あり学習法としては，決定リスト学習を用いる
\footnote{
  \ref{subsec:comb-ME}~節では，
  最大エントロピー法を用いて正誤判別規則学習を行なった結果との比較を行なっている．
  本論文では，実装が容易，学習が高速で，かつ，一定の性能を達成できるという理由で決定リスト学習を
  適用したが，より高性能な他の様々な教師あり学習法を適用することも十分可能である．
}．
決定リスト\cite{Rivest87a,Yarowsky94a}は，
ある素性のもとでクラスを決定するという規則を優先度の高い順にリスト形式で
並べたもので，適用時には優先度の高い規則から順に適用を試みていく．
本論文では，各規則の優先度として，素性$f$の条件のもとでの，システム$i$のクラス$class_{sys}^i$の
条件付確率$P(class_{sys}^i\!=\!c_i\mid f)$を用い，この条件付確率順に決定リストを構成する．
ただし，決定リストを構成する際には，
素性$f$の条件のもとでの，システム$i$のクラス$class_{sys}^i$の頻度$freq(f,class_{sys}^i)$に
下限$L_f$を設け，
\begin{eqnarray}\label{eqn:lbdF}
 freq(f,class_{sys}^i) & \geq & L_f
\end{eqnarray}
の条件を満たす規則だけを用いて決定リストを構築する．
頻度の下限$L_f$は，各規則の条件付確率$P(class_{sys}^i\!=\!c_i\mid f)$を推定する際に
使用したデータセット以外のデータセットに対して，
正誤判別規則の性能を最大にする値を用いる．

\subsection{正誤判別規則の適用による複数システム出力の混合}
\label{subsec:apl}

学習された正誤判別規則を適用することにより複数システムの出力の混合を行なう場合は，
式(\ref{eqn:segev})と同じ形式のセグメントの事象表現
\begin{eqnarray*}
 SegEv_j & = & \{ NEev_1,\ldots,NEev_{l_j} \} 
\end{eqnarray*}
に対して，決定リストの形式の正誤判別規則が参照され，
素性$f$の条件のもとでの，システム$i$のクラス$class_{sys}^i$の
条件付確率$P(class_{sys}^i\!=\!c_i\mid f)$の推定値を得る．
そして，
\begin{enumerate}
\item 複数のシステムによって出力された単一の固有表現は，同一の正誤クラス
      を持つ．
\item 少なくとも一つの形態素を共有する複数の固有表現が，
      正のクラス(``$+$'')を持ってはならない．
\end{enumerate}
という二つの制約のもとで，全システムについての
条件付確率$P(class_{sys}^i\!=\!c_i\mid f)$の積を最大化するクラス割当ての組合わせが
求められ，これが，セグメント中で各システム$i$
 $(i=1,\ldots,n)$が出力した
固有表現への正誤クラスの判別結果$\hat{class_{sys}^1},\ldots,\hat{class_{sys}^n}$となる
\footnote{
  システム$i$について，決定リスト中に照合する判別規則が存在しない場合には，
  そのシステムが出力した固有表現を誤出力(``$-$'')とみなしている．
}．
\begin{eqnarray*}
\hat{class_{sys}^1},\ldots,\hat{class_{sys}^n} & = &
	\argmax_{c_i, f_i} \prod_{i=1}^{n} P(class_{sys}^i\!=\!c_i\mid f_i)
\end{eqnarray*}




