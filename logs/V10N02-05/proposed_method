Lexical Functional Grammar
LFGは自然言語文の解析を行うための文法理論であり，\cite{B1978}に
よってその概念が提唱された後，\cite{KandB1982}によって現在の形
の定式化が完成した．LFG に基づく解析では，解析結果として
c(onstituent)-structureとf(unctional)- structure と呼ばれる2種の構造を出
力する．c-structureは自然言語文の構造を，文の形態素を上位のフレーズへと
纏め上げることによって木構造として表現するものである．一方，f-structure
は，文法機能の概念に基づき，文の格構造，時制，様相，
話法等の意味情報を属性-属性値のマトリックス構造で表現するものである．

LFG理論では，SUBJ(ect)やOBJ(ect)等の文法機能をいかなる言語の解析において
も有効であると考え，第一義の未定義要素としての地位を与えている
\cite{S1985}．すなわち，見かけの表現は全く異なっていたとしても，文法機能
の概念はあらゆる言語において共通に存在するという立場をとる．この立場は，
Arc Pair Grammar \cite{JandP1980}やRelational Grammar
\cite{PandP1983}，Construction Grammar \cite{Kay1998}と共通する
ものである．言語が異なれば同じ意味内容を表現する文であってもその句構造す
なわちc-structureは大きく異なる一方で，文法機能に基づく構造である
f-structureの違いは多くの場合極めて小さいことが知られている
\cite{B1999a,D2001}．言語解析システムの出力結果が言語を問わず
一定であればあるほど，多言語を対象とする言語処理システムの構築に要するコ
ストは低減すると考えられる．このような工学的観点からみると，f-structure
の言語普遍性は，f-structureを中間言語とする機械翻訳システム\cite{F1999}
はもとより，質問応答，自然言語によるマンマシンインタフェース，文書集合の
内容一貫性保持\cite{E2002}等の自然言語処理アプリケーションを言語の壁を
越えて実装す
る上で重要な特徴であるといえる．1章で述べた通り，本稿で述べる日本語LFG文
法では，このf-structureが持つ言語普遍性の特徴を損なわないことを記述方針
の一つとしている．

これまでも，LFGやHead-driven Phrase Structure Grammar (HPSG)
\cite{PandS1987,PandS1994}等の単一化文法に基づいた日本語の解析に関
する研究は数多く行われている．しかし，比較的最近まで，f-structureのよう
な素性構造の単一化は大きな計算量を要する作業であるため，大規模な文法を用
いた解析の実行は困難であるとの認識があった\cite{hashida1997}．さらに，単
一化文法の枠組みにおいて，日本語の文法事項を網羅的に含み高いカバー率を実
現する文法規則を記述することは容易ではないと指摘されている
\cite{torisawa1999}．しかしながら，前者の解析効率の問題に関しては，
\cite{MandK1993}，\cite{NLE2000}等で提案されてい
る解析アルゴリズムの進展によって一定の解決策が得られつつある．また，この
前者の問題の解決は，後者の問題とも大きく関係している．単一化に基づく解析
を実行するシステムは制約充足問題を解決するシステムである．制約数すなわち
文法規則の数が多くなるにしたがって計算量の爆発が生じる．前者の問題が解決
されていないこれまでの状況においては，システムの制約上，大規模な文法を記
述し試すことが困難であったため，高い解析カバー率を持つ文法の構築に焦点を
当てた研究には至らなかった．

前者の問題が解決される過程にあり，大規模文法の記述に挑戦できる状態になっ
てきたのが現在の状況であるといえる．例えば，\cite{mitsuishi1998}では，意
味表現出力を伴わないものの極めて高い解析カバー率を持つ日本語HPSGシステム
の報告がなされている．一方，
\cite{otani2000} では，カバー率の問題は残るものの日本語文法の知見に立脚
した精緻な解析を行うJapanese Phrase Structure Grammar (JPSG)システムの構
成手法が提案されている．


Parallel Grammar Project
我々は，Parallel Grammar (ParGram)と呼ばれるプロジェクト活動
\cite{B1999b,B2002}の中で日本語
LFG文法の記述を行っている．ParGramは，LFGを共通の理論基盤として英語，ド
イツ語，フランス語，ノルウェー語，ウルドゥー語，デンマーク語そして日本語
の各言語を解析するシステムの実現を目標としている．
ParGramでは，半年に一度全言語の文法記述担当者が集まってミーティング
(ParGram Meeting)を開催し，複数言語間でf-structureの整合性を可能な限り高
める，あるいは，矛盾を回避する機会を継続して持つことにしている．すなわち，
f-structureの構成から属性・属性値の用法やネーミングコンベンションに至る
までの詳細を議論し，ParGramの標準仕様を決定する作業を行っている．

日本語LFG文法における，肯定文，否定文，疑問文，受動文，並置表現等の基本
的な構文に対して出力されるf-structureは，このParGram標準仕様
\cite{B1999a}に準じている．ただし，この標準仕様は，f-structureの基本的な
構成，属性・属性値については全言語でほぼ合意がなされているが，詳細な文法
事項に関しては現在も継続的に議論を続けている．

例えば，属性のネーミングレベルの仕様に関しては，当初全言語で性別を示す属
性として使用していた「GEND」を，英語と日本語のLFG文法では「GEND-SEM」と
し，「GEND」と区別するよう変更を行った．英語と日本語の文法では代名詞に対
して「GEND」属性を与えていたが，これはドイツ語，フランス語，ノルウェー語，
ウルドゥー語の一般名詞が持つ性別の概念とは本質的に異なるためである．

\begin{quote}
\begin{itemize}
\item[(1-a)] ジョンは本をそのテーブルに置いた。
\item[(1-b)] John put a book on the table.
\end{itemize}
\end{quote}

\begin{figure}[htbp]
\center 
\epsfxsize=90.59mm
\epsfbox{fig/fig2-1jp.eps}
\caption{文(1-a)に対応するf-structure}
\label{fig2-1jp}
\end{figure}

\begin{figure}[htbp]
\center
\epsfxsize=89.32mm
\epsfbox{fig/fig2-1eng.eps}
\caption{文(1-b)に対応するf-structure}
\label{fig2-1eng}
\end{figure}

\begin{figure}[htbp]
\center
\epsfxsize=115.35mm
\epsfbox{fig/fig2-2jp.eps}
\caption{文(1-a)に対応するc-structure}
\label{fig2-2jp}
\end{figure}

\begin{figure}[htbp]
\center
\epsfxsize=53.97mm
\epsfbox{fig/fig2-2eng.eps}
\caption{文(1-b)に対応するc-structure}
\label{fig2-2eng}
\end{figure}

図\ref{fig2-1jp}に，文（1-a）に対して日本語LFGシステムが出力する
f-structure を示す\footnote{図中の数字は各(部分)f-structureに対して割り
振られた識別子であり，数値自体に意味はない．}．SUBJ およびOBJのPRED(icate) 
に自立語(「ジョン」「本」)が挿入されているのに対して，OBL(ique)のPREDに
は格助詞(「ニ」)が挿入されている．これは，英語等のParGramが対象とする欧
米言語において，SUBJおよびOBJに対応する自立語が前置詞を必要としないのに
対して，OBLやADJUNCTは前置詞を伴うことに由来する．日本語内での整合性だけ
を考えれば，SUBJやOBJのPREDも格助詞とする，あるいは，OBLやADJUNCTのPRED 
も自立語とする，という文法を記述することが可能である．しかしParGramにお
いて他言語との整合性（比較のしやすさ）を重視するという立場から，図
\ref{fig2-1jp}に示したf-structureを出力する方針で文法記述を行った．図
\ref{fig2-1eng}は，ParGramの英語LFG文法を用いて文(1-a)に対応する英語文
（1-b）を解析した結果得られるf-structureである．基本的に図\ref{fig2-1jp} 
と等しい構造を持っていることが分かる．
なおc-structureに関しては，ノード(grammatical category)名に対する緩やかな
ネーミングコンベンションの取り決めはあるものの，どのような構造を定めるか
は各言語の担当者に任されている．図\ref{fig2-2jp}，図\ref{fig2-2eng}は，文
(1-a)(1-b)を解析した結果得られるc-structureである．両者の構造は全く異なっ
ていることが分かる．

システム構成
ParGramでは共通のプラットフォームとしてXerox Linguistic Environment
(XLE) と呼ばれるLFGの処理系を使用している．XLEはLFG理論の仕様をほぼ完全
に実装したparserであると同時に，LFGの文法記述を行う際のデバック環境であ
り，かつ，f-structureから自然言語文を生成するgeneratorでもある
\cite{KandW2000}．

XLEが持つ最も重要な特徴はその解析速度である．LFGでは，c-structureを構成
するための句構造規則(文脈自由文法規則)と，f-structureを構成するために句
構造規則(の右辺の各構成素)に付与する機能的注釈(functional annotation;
functional schemata) を同時に記述する．XLEは，句構造規則に基づく解析処理
を実行した後に，処理が必要な機能的注釈を動的に決定する．すなわち，計算量
の大きい機能的注釈の処理を選択的に行うことによって解析速度の向上を実現し
ている\cite{MandK1993}．また，解析結果の排他性・独立性を考慮した単一化手
法\cite{MandK1991}も高い解析効率に寄与している．XLEを採用するこ
とによって，大規模なLFG文法に基づく解析を実時間で行うことが可能となった．

図5は，日本語LFGシステムの構成図である．まず日本語入力文が形態素解析シ
ステムに渡され，得られた形態素解析結果から入力文語彙規則を生成する．形態
素解析システムには茶筌\cite{chasen}を使用している．語彙規則生成部は，
約40種の語彙規則テンプレートを持ち，適切なテンプレートを選択して必要項目
を埋めることによって，各形態素の語彙規則を動的に生成する．テンプレートの
選択は，各形態素の品詞および前後の形態素の品詞を基に，予め作成したルール
によって行う．また，形態素解析処理によって得られた形態素列はXLEへの入力
となる．活用語については，終止形をXLEへの入力とし，活用形は「M\_\_」(命
令形)，「K\_\_」(仮定形)，「Y\_\_」(連用形)等の特別な文字列を形態素相当
としてXLEへ渡す．なお，連用形を示す文字列は必要に応じてXLEへ渡すことにし
た．後続する語が自立語ならば，その活用形が句複合を行う結合子など何らかの
統語的役割を果たしていると判断し，その目印として文字列を挿入する．一方，
後続する語が助動詞などの付属語ならば挿入を行わないことによって，文法規則
を簡略化する．

\begin{figure}[htbp]
\center
\epsfxsize=99.48mm
\epsfbox{fig/fig2-3.eps}
\caption{日本語LFGシステムの構成図}
\label{keiyoushi3_1b}
\end{figure}


XLEによる入力形態素列の解析には，上記の入力文語彙規則に加えて，予め用意
した基本語彙規則，動詞語彙規則，形容詞語彙規則，形容動詞語彙規則，および，
文法規則を使用する．動詞語彙規則，形容詞語彙規則，形容動詞語彙規則は，
IPAL辞書\cite{IPALa,IPALb}の結合価情報をベースに拡張を行い，LFGの
規則として必要な記述を追加したものである．現在のところ，動詞語彙規則は
2,366の異なり語彙に対して10,387の語彙規則(41,115の機能的注釈)を含んでい
る．形容詞語彙規則および形容動詞語彙規則は，それぞれ302および67の異なり
語彙に対して810，137の語彙規則(1,891，306の機能的注釈) を含んでいる．基
本語彙規則は，助詞，助動詞，代名詞，接続詞等の基本語彙に加え，接続助詞的
な働きをする「間」「時」といった名詞等，統語上重要と考えられる語の語彙規
則を独自に記述したものである．現状では，407の異なり語彙に対して954の語彙
規則(1,233の機能的注釈)を含んでいる．文法規則のサイズは，積和標準形に変
換した場合の項の総計が2,353であり，1,223 の機能的注釈を含む．文法規則の
詳細は次章で説明する．

なお，語彙規則の中で，入力文語彙規則の優先順位は他の語彙規則よりも低く設
定してある．つまり，入力文語彙規則は，同じ語彙に対する規則が既に存在してい
る場合上書きされることになる．これは，助詞，助動詞などの重要な統語的役割
を担う語に関しては，形態素解析結果から動的に生成されるデフォールトの規則
よりも精緻な記述が必要となるからである．同時に，形態素解析の品詞付け誤り
を吸収するための措置でもある．例えば，格助詞の「デ」と助動詞「ダ」の連用
形「デ」の違いを形態素解析レベルの処理で正確に判別することは困難である．
そこで，基本語彙規則中の「デ」に対して，格助詞としての振舞いを記述する規
則と，「ダ」の連用形としての振舞いを記述する規則の両者を含めておく．形態
素解析処理によって付与された品詞の如何にかかわらず，語彙規則としては双方
の可能性を残して解析を進める．最終的には，その中から文法規則に従う解析結
果のみが残ることになる．


日本語LFG文法記述
\subsection{基本的な文法規則}
日本語の典型的な特徴として，語順の制約が緩い点(free word order)，主語や
目的語といった文の必須構成要素の抜け落ち(ゼロ代名詞)が頻出する点，およ
び，複合述部(complex predicate)が多用される点を挙げることができる
\footnote{もちろん，これらの特徴は日本語のみに見られるものではない．
ParGramプロジェクトが対象とする言語の中ではウルドゥー語がこれら３つの
特徴を併せ持つ言語の例である．}．本節では，これら日本語の基本的な性質に
対応するために我々が記述したLFG文法規則について述べる．
\begin{quote}
\begin{itemize}
\item[(2-a)] 私が太郎にその本を借りました。
\item[(2-b)] その本を太郎に私が借りました。
\item[(3)] 東京から太郎が大阪へ行った。
\item[(4)] 右へその角を次の交差点で曲がって下さい。
\end{itemize}
\end{quote}

日本語がfree word orderの特徴を持つことは明らかである．ただし，
文(2-a)と文(2-b) を比較すると(2-a)がより自然な文であると感じる．すなわち，
基本的には各文に最適な語順が存在すると考えられる\cite{shibatani1978}．
文(3)および(4)は語順の点で不自然な文であり，最適順序性を
考慮してこれらの文を解析対象外とする方針を採ることは可能である．
例えば，\cite{otani2000}では語順を強く意識した文法記述を行っている．
しかし，文(2-a)と文(2-b)が表現する意味内容に違いがないことから，我々の
日本語LFG文法では上記の最適順序性を考慮せず，どちらの文に対しても図
\ref{fig4-1}に示すf-structureを出力するよう文法記述を行った．これは
1章で述べた高いカバー率を達成する上でも重要な記述方針である．
実際には，文(3)や(4)のように語順が不自然な文が現れることは珍しく
ない．したがって、高い解析カバー率を得るために，最適順序性に依存すること
のない，以下のような文法規則を日本語LFG文法の基本規則とした．


\begin{table}[htbp]
\begin{center}
\begin{tabular}{llcc}
\vspace{-1mm}
S \quad& $\longrightarrow$\qquad\qquad \hspace{-9mm} & PP* & \hspace*{-4.5mm} V\\
\vspace{-1mm}
&&($\uparrow$ GF) = $\downarrow$ & \hspace*{-4.5mm} $\uparrow$ = $\downarrow$\\
\vspace{-7mm}
\end{tabular}
\end{center}
\end{table}
\begin{quote}
S: 文， PP: 後置詞句，V: 述語，GF: 文法機能
\end{quote}
\vspace{3mm}

\begin{figure}[htbp]
\center
\epsfxsize=110.7mm
\epsfbox{fig/fig4-1.eps}
\caption{文(2-a)(2-b)に対応するf-structure}
\label{fig4-1}
\end{figure}

句構造規則が「文Sは任意個の後置詞句PPとそれに後続す
る述語Vから構成される」ことを定義し，機能的注釈によって「Vが文全体のPRED
を担い，PPがそれに下位範疇化される文法機能を担う」ことが定義されている．
なお，以下本稿の文法規則の説明で用いる記号(grammatical category名)は，実
際に使用している文法・語彙規則中の記号とは必ずしも一致していない．

また，係助詞や副助詞によって格助詞が省略されている場合，文法的に可能性の
ある解析結果を全て出力するという方針で文法記述を行った．
\begin{quote}
\begin{itemize}
\item[(5)] 花子はその本も読んだ。
\end{itemize}
\end{quote}
\begin{quote}
\begin{itemize}
\item[(6-a)]その本がシェークスピアを誉めていました。
\item[(6-b)]シェークスピアがその本を誉めていました。
\item[(6-c)]シェークスピアはこの本も誉めていました。
\end{itemize}
\end{quote}
したがって文(5)に対しては，「花子」がSUBJで「本」がOBJの解析結果と，その
逆の解析結果の両者を出力する．解析結果を一つに絞り込む機能は重要であり，
これを行うために意味素性および選択制限の概念を文法・語彙規則に取り入れる
余地はある．しかし，直前の文が(6-a)の場合と(6-b) の場合でSUBJとOBJが逆に
なる文(6-c)の例から分かるように，文単位の解析では本質的に曖昧性を解消で
きない場合もある．したがって，現在のところ文法的に誤りのない解析結果は全
て出力し，曖昧性の解消は文脈解析等の別処理に委ねるという立場をとっている．
もちろんこれは，格助詞・係助詞に関わるいかなる曖昧性の解消も行わないとい
うことを意味するものではない．
\begin{quote}
\begin{itemize}
\item[(7-a)]太郎が読んだ本
\item[(7-b)]太郎の読んだ本
\item[(7-c)]太郎が本を読んだ。
\item[(7-d)]太郎は読んだ本を捨てた。
\item[(7-e)]太郎の本を読んだ。
\end{itemize}
\end{quote}
例えば，(7-a)の名詞句と(7-c)の文は共に文法に則った表現であり「読む」の
SUBJは「太郎」である．しかし，(7-d)の文では「太郎」は「捨てる」に係る．
同様に，(7-b)の名詞句と(7-c)の文は共に文法に則った表現であるが，(7-e) の
文において「太郎」をSUBJと解釈することはできない．前者は，(I)「関係節内
において係助詞「ハ」による主題化は起こらない」\footnote{ここでは対比の
「ハ」についての議論は省略する．}，後者は，(II) 「関係節内においてのみ格助
詞「ノ」による主格表示が可能である」という文法規則に一般化できる．我々は，
(7-d)および(7-e)の解析結果に曖昧性が生じない(「太郎」が「読む」のSUBJと
なる解析結果を生成しない) よう，(I)(II)を実現する文法記述を行った．
（ (7-e)に対しては，「読む」のSUBJはnull であり「太郎」は「本」の連体修
飾成分となる解析結果が得られる．）(I)(II)を表現するためのLFG文法規則を
以下に示す．
\vspace{3mm}

\begin{table}[htbp]
\begin{center}
\begin{tabular}{llccc}
Srel  \quad& $\longrightarrow$\qquad & \qquad \{ PPsubj $|$
 PPsubj-no \}\qquad & PP* & V\\
&&($\uparrow$SUBJ)=$\downarrow$& $\uparrow$GF = $\downarrow$ & \hspace{-4.5mm}
 $\uparrow$ = $\downarrow$ \\
&&($\downarrow$TOPICALIZATION-FORM)$\neq$ 'は'&&\\
\end{tabular}
\end{center}
\begin{quote}
Srel: 関係節，PPsubj-no: 「ノ」を伴い主格となり得る後置詞句\\
PPsubj: 主格となり得る後置詞句(PPsubj-noを含まない)\\
TOPICALIZATION-FORM: 主題化を行う係助詞の表層形
\end{quote}
\end{table}
\vspace{3mm}
文の必須構成要素が抜け落ち可能であるというゼロ代名詞の問題に関しては，
述語(語彙規則)の結合価情報を利用する．
結合価に対応する要素が文中に存在しない場合，省略があると判定する．ただし，
このように結合価を埋める要素(下位範疇化すべき要素)がない場合，LFG理論の
Completenessの条件を満たすことができず，したがってf-structureを構成する
ことができない．そこで，省略された要素のPREDに代名詞を示す'pro'を代入し
PRON-TYPE の属性にnullを挿入することによって省略を表現し，f-structureを
構成する．以上のことを実現する語彙規則を，「読む」を例として以下に示す．

\vspace{4mm}
{\small
\begin{quote}
読む \quad V \quad (↑PRED)= '読む＜(↑SUBJ)(↑OBJ)'＞
\begin{quote}
\vspace{0.4mm}
\qquad @(PD SUBJ)

\vspace{0.5mm}
\qquad @(PD OBJ)
\end{quote}
\vspace{0.4mm}
PD(GF) = @(DEFAULT (↑GF PRED) 'pro' (↑GF PRON-TYPE) null)

\vspace{0.5mm}
DEFAULT(ATTRIBUTE1 VALUE1 ATTRIBUTE2 VALUE2) = 
\begin{quote}
\vspace{0.4mm}
\qquad ATTRIBUTE1 = VALUE1

\vspace{0.5mm}
\qquad ATTRIBUTE2 = VALUE2

\vspace{0.5mm}
\qquad ProDrop: OT
\end{quote}
\end{quote}
}

「PD」および「DEFAULT」はマクロ定義であり，「＠」はマクロの呼び出しを表
す．語彙規則に「@ (PD SUBJ)」を付加することにより，SUBJのPREDに'pro'が，
SUBJのPRON-TYPE にはnullが代入される．「DEFAULT」マクロ中の「ProDrop: OT」
は，「ProDrop」という名前のOTマークの定義である．OTマークは規則に対して
優先順位を付与する働きを持つ．詳細は5.3.1項で説明する．ProDropには低い優
先順位を設定し，それによって，「読む」が下位範疇化すべき要素がない時に限
り「@ (PD SUBJ)」および「@ (PD OBJ)」が機能する．一般に，OTマークを利用
することによって，解析結果の曖昧性を言語学的な根拠のもとに減少させること
が可能となる\cite{B2001}．この記述手法の導入によって，省略要素を適切に同
定することが可能となり，欧米言語では問題になることの少ない必須構成要素の
抜け落ち問題を解決することができた．主語や目的語の省略は日本語では極めて
頻繁に起こるため，この語彙規則記述は，解析カバー率向上にとって重要な役割
を果たすものであるといえる．

日本語のcomplex predicateの取り扱いについても様々な方針が考えられるが，我々
は，複数のPREDを立てる解析，すなわち，f-structureの入れ子構造によって
complex predicateを表現する解析(multi-clausalな解析)を行わない．複数の
predicate-argument 構造の存在が同時に認められる場合(5.2.1項)を除き，
mono-clausalな解析を行う．時制，様相等の情報はf-structure中のPRED以外の
属性で表現する．
\begin{quote}
\begin{itemize}
\item[(8)]太郎はその本を買いたくなかっただろう。
\end{itemize}
\end{quote}
例として，文(8)のc-structureとf-structureを図\ref{fig4-2c}，図
\ref{fig4-2f}に示す．日本語のcomplex predicateの構成は極めて多様であり，
口語的・非文法的な文も含めて構成規則を網羅的に記述することは事実上困難で
ある．したがって，高い解析カバー率を実現するために，complex predicateに
対応する規則はこのような緩やかなものとする方針を採っている．
\begin{figure}[htbp]
\center
\epsfxsize=74.90mm
\epsfbox{fig/fig4-2c.eps}
\caption{文(8)に対応するc-structure}
\label{fig4-2c}
\end{figure}
\begin{figure}[htbp]
\center 
\epsfxsize=121.9mm
\epsfbox{fig/fig4-2f.eps}
\caption{文(8)に対応するf-structure}
\label{fig4-2f}
\end{figure}
\subsection{特徴的な文法規則}
本節では，日本語LFG文法で記述されている文法規則の中から1章で述べた高い
解析カバー率および他言語との整合性の実現に関わるものを
取り上げ，その記述方針を説明する．

\subsubsection{受動文・使役文の取り扱い}
前節では，複合述部の取り扱い方針としてmono-clausalな解析を採用すると述べ
た．しかし，複数のpredicate-argument構造を持つと認められる間接受動文(い
わゆる「迷惑の受身」) \cite{masuoka1997}と使役文については，
bi-clausalな解析結果を出力するよう文法記述を行った\footnote{日本語のLFG 
文法において，いかなる言語現象にbi-clausalな解析を適用すべきかについては
現在も継続して議論が続けられ，決着がついていない．例えば使役文では
\cite{matsumoto1996}と\cite{Yokota2001}とで異なる見解が述べられている．}．
\begin{quote}
\begin{itemize}
\item[(9)] 私は雨に降られた。
\end{itemize}
\end{quote}
文(9) は間接受動文の例である．文(9)には，「「私」が「れる」」に加え，
「「雨」が「降る」」という2つのpredicate-argument構造が含まれている．こ
れを示すため，bi-clausalな解析を行う文法記述を行った．文(9)のf-structure
を図\ref{fig4-3}に示す．
\begin{figure}[htb]
\center
\epsfxsize=122.1mm
\epsfbox{fig/fig4-3.eps}
\caption{文(9)に対応するf-structure}
\label{fig4-3}
\end{figure}
\begin{quote}
\begin{itemize}
\item[(10-a)]花子は太郎に次郎を殴らせた。
\item[(10-b)]Mary let John hit Bob. 
\end{itemize}
\end{quote}
文(10-a)は使役文の例である．文(10-a)には，「「花子」が「太郎」に「せる」」と，
「「太郎」が「次郎」を「殴る」」という2つのpredicate-argument構造が認め
られるため，同様にbi-clausal な解析を行っている．文(10-a)のf-structureを図
\ref{fig4-4} に示す．使役の助動詞「セ」「セル」に準ずるものとして，「頂
く」「貰う」等の補助動詞も同様に取り扱っている．この記述方針は他言語の
f-structureとの整合性を図る目的に従うものでもある．文(10-a)に対応する英語文
(10-b)のf-structureを図\ref{fig4-x}に示す．基本的に図\ref{fig4-4}と等しい
構造であることが分かる．
\begin{figure}[htbp]
\center
\epsfxsize=86.36mm
\epsfbox{fig/fig4-4.eps}
\caption{文(10-a)に対応するf-structure}
\label{fig4-4}
\end{figure}
\begin{figure}[htbp]
\center
\epsfxsize=95.03mm
\epsfbox{fig/fig4-x.eps}
\caption{文(10-b)に対応するf-structure}
\label{fig4-x}
\end{figure}
\subsubsection{副助詞の取り扱い}
副助詞は文脈情報を担うものであるため，意味
情報を扱う解析において極めて重要な形態素であるといえる．さらに日本語文に
頻繁に出現するため，副助詞を取り扱う文法規則は高いカバー率を実現する上で
も重要なものである．
しかしながら，これまでの実システムにおいて副助詞の振る舞いを十分に考慮
した文法記述がなされてきたとは言い難い．

水谷文法\cite{daitai}では，副助詞を体副形成子として規定する．これは，副
助詞が，副詞化可能な体言を形成する働きを持つことを意味する．
\begin{quote}
\begin{itemize}
\item[(11-a)]太郎が来るまでが問題だ。
\item[(11-b)]太郎が来るまで辛抱しよう。
\end{itemize}
\end{quote}
\begin{quote}
\begin{itemize}
\item[(12)]次郎にさえ分からなかった。
\end{itemize}
\end{quote}
例えば文(11-a)(11-b)のように「太郎が来る」が副助詞「まで」を伴うと，名詞的
あるいは副詞的働きを持つようになる．本システムでは，このような副助詞の性質
を表現する文法の記述を行っている．ただし，文(12)のように副助詞(「さえ」)
が格助詞に後続する場合は，\cite{daitai}に倣い格表示の一部とみなして体副
形成子とは異なる扱いをする．図\ref{fig4-5a}，図\ref{fig4-5b}に文
(11-a)(11-b)のf-structureを示す．なお，図\ref{fig4-5b}中の
「$\varepsilon_5$」は5.2.3項で述べる助詞の無形表示を示す記号である．

\begin{figure}[htbp]
\center
\epsfxsize=113.9mm
\epsfbox{fig/fig4-5a.eps}
\caption{文(11-a)に対応するf-structure}
\label{fig4-5a}
\end{figure}
\begin{figure}[htbp]
\center
\epsfxsize=114.1mm
\epsfbox{fig/fig4-5b.eps}
\caption{文(11-b)に対応するf-structure}
\label{fig4-5b}
\end{figure}

\subsubsection{助詞・助動詞の無形表示の取り扱い}
\begin{quote}
\begin{itemize}
\item[(13-a)] その女性は子供を優しく育てた。
\item[(13-b)] その女性は子供をパイロットに育てた。
\item[(13-c)] その女性は子供をはじめて育てた。
\item[(13-d)] *その女性は子供を優しくに育てた。
\item[(14-a)] The woman raised a child to a kind person.  
\item[(14-b)] The woman raised a child kindly.  
\end{itemize}
\end{quote}
\cite{daitai}は，形容詞の連用修飾に曖昧性があることを指摘している．例え
ば文(13-a) は2つの解釈が可能である．1つは「子供が優しくなるように育てる」
という意味であり，これは「優しい」が「育てる」という動詞の帰結状態を示し
ている．もう1つは「子供の育て方が優しい」という意味であり，「優しい」は
「育てる」の情況を示している．(13-b)との比較から分かるように，(13-a)にお
いて帰結状態を示す「優しい」は格助詞「ニ」を伴う後置詞句相当の働きを担っ
ている．しかし，(13-d)が非文であることから分かるように，単なる格助詞「ニ」
の省略とはみなせない．\cite{daitai} はこのような無形表示に対して零記号
\footnote{零記号の概念は時枝文法\cite{tokieda}で詞と辞による入れ子構造を
構築するための道具立てとして提案され，その後，\cite{daitai}によって細分
化がなされた．}を導入することによって整合性の高い国文法体系を構築してい
る．\cite{daitai}では帰結状態を表す零記号を「$\varepsilon_4$」と定義する．
我々もこれに倣い，以下の文法規則によって，帰結状態を示す無形表示を
「$\varepsilon_4$」で表現した\cite{ohkuma}．

\begin{table}[htbp]
\begin{center}
\begin{tabular}{llccc}
\vspace{-1mm}
PPobl\quad & $\longrightarrow$ \qquad &  A \qquad & \qquad Y\_\_ & e\\
\vspace{-1mm}
&&($\uparrow$OBJ)=$\downarrow$&& $\uparrow$ = $\downarrow$ \\
&&&&($\uparrow$PRED)='$\varepsilon_4$＜($\uparrow$OBJ)＞'\\
\end{tabular}
\end{center}
\vspace{2mm}
\begin{quote}
PPobl: 斜格となり得る後置詞句，A: 形容詞， Y\_\_: 連用形を示す記号，e: 空記号
\end{quote}
\end{table}

\vspace{6mm}
一方，情況を表す「優しい」は情況語(副詞)と定義し，f-structure中では
ADJUNCT として表現する．文(13-a)の帰結状態の解釈に対応するf-structureを
図\ref{fig4-7a}に，情況の解釈に対応するf-structureを図\ref{fig4-7b}に示す．
また，(13-b)(13-c)に対応するf-structureを図\ref{fig4-8a}，図
\ref{fig4-8b}に示す．図\ref{fig4-7a}と図\ref{fig4-8a}，図\ref{fig4-7b}と
図\ref{fig4-8b}がそれぞれ同等の構造を持っていることが分かる．この記述方針も
5.2.1項同様，他言語のf-structureとの整合性を図る目的に従うものである．
文(13-a)の2つの解釈に対応する英語文(14-a)(14-b)のf-structureを図\ref{kind_person}
および図\ref{kindly}に示す．基本的にそれぞれ図\ref{fig4-7a}および図\ref{fig4-7b}
と等しい構造であることが分かる．

\begin{figure}[htbp]
\vspace{-3mm}
\center
\epsfxsize=72mm
\epsfbox{fig/fig4-7a.eps}
\caption{文(13-a)の帰結の解釈に対応するf-structure}
\label{fig4-7a}

\center
\epsfxsize=72mm
\epsfbox{fig/fig4-7b.eps}
\caption{文(13-a)の情況の解釈に対応するf-structure}
\label{fig4-7b}

\center
\epsfxsize=72mm
\epsfbox{fig/fig4-8b.eps}
\caption{文(13-b)に対応するf-structure}
\label{fig4-8a}
\end{figure}

\begin{figure}[htbp]
\center
\epsfxsize=75mm
\epsfbox{fig/fig4-8a.eps}
\caption{文(13-c)に対応するf-structure}
\label{fig4-8b}

\center
\epsfxsize=120mm
\epsfbox{fig/kind_person.eps}
\caption{文(14-a)に対応するf-structure}
\label{kind_person}

\center
\epsfxsize=75mm
\epsfbox{fig/kindly.eps}
\caption{文(14-b)に対応するf-structure}
\label{kindly}
\end{figure}

その他，名詞(サ変動詞語幹を除く)で終わる文(新聞見出し等)に対応するため，
名詞句に後続する助動詞(「ダ」「デス」等)の省略を零記号「$\varepsilon_1$」
で表現している．また，埋め込み句が連用修飾を行う際の助詞の省略を
「$\varepsilon_5$」で表現している．
\vspace{3mm}

以上本節では，言語現象の具体例を通して日本語LFG文法の特徴を示した．表
\ref{table1}に，これまでに実装した文法規則の主なものを示す．ただし，\cite{B1999a}
に記述されている基本的な文法事項に対する文法規則および本稿で説明済
みの文法規則は省略した．
\begin{table}[htpb]
\caption{LFG文法規則として実装済みの主要な文法規則}
\begin{tabular}{ll}
\hline
\scriptsize
「スル」を伴わないサ変動詞語幹への各構造付与規則&
\scriptsize
接尾辞による名詞のサ変動詞語幹化を行う規則\\
\scriptsize
「テアル文」の格構造(「本が置いてある。」)に対応する規則&
\scriptsize
可能動詞の格構造(「本が読める。」等)に対応する規則\\
\scriptsize
格支配を受けない挿入句に対応する規則&
\scriptsize
関係節となり得ない節の判定規則\\
\scriptsize
関係節の係り先となり得ない名詞の語彙規則&
\scriptsize
助数詞の取り扱い規則\\
\scriptsize
フィラー、口語的助詞の取り扱い規則&
\scriptsize
補文をとるが主語をとらない格構造付与規則\\
\scriptsize
接続助詞による句並置の取り扱い規則&
\scriptsize
接続助詞「も」「やら」等による名詞句並置規則\\
\scriptsize
形容詞・形容動詞の名詞化・副詞化規則&
\scriptsize
数量詞および時間表現の副詞化規則\\
\scriptsize
接尾辞を伴う疑問詞の副詞化規則&
\scriptsize
補助動詞・補助形容詞の取り扱い規則\\
\scriptsize
待遇表現(「話をされた」「お書きになった」等)の取り扱い&
\vspace{-2mm}
\scriptsize
副詞相当の接続詞(「ただし」「だが」等)に対応する語彙規則\\
\scriptsize
規則&\\
\scriptsize
省略を伴う連体語並置(「彼との距離」等) の取り扱い規則&
\scriptsize
助動詞「そうだ」の伝聞と推量の判定規則\\
\scriptsize
固有名詞(地名、人名、組織名)属性付与規則&
\scriptsize
括弧(「、（、『 等)を用いた強調/同格表現規則\\
\scriptsize
関係節、埋め込み節内の格表示の判定規則&
\scriptsize 句複合中の係助詞による格表示判定規則\\
\scriptsize 禁止表現(「してはいけない」「してはならない」等)の取り&
\scriptsize「は」を伴うことが可能な副詞(「結局」「つまり」等)に対応\\
\scriptsize 扱い規則& 
\scriptsize する語彙規則\\
\scriptsize 関係節を伴う疑問文の取り扱い規則&\\
\hline
\end{tabular}
\vspace{2mm}
\label{table1}
\end{table}
\normalsize



\subsection{例外的な文法に基づく文・非文法的文への対応}
高い解析カバー率を達成するためには，例外的な表現を含む文や非文法的な文を
解析できなければならない．LFGに基づく解析によってf-structureを得るために
は，入力文の構文に対応する句構造規則および機能的注釈が全て宣言的に記述さ
れている必要がある．しかしながら，例外的な事項を網羅的に記述すると，正し
い解析結果と同時に不適切な解析結果も多数出力されてしまい，精度を下げるこ
とになる．さらに，前節までに述べたような文法記述をどれほど精緻化したとし
ても，必ず解析不能な文が残るという問題もある．本節では，これらの問題を回
避しシステムの頑健性を高めるための手法として，OTマークと部分解析について
述べる．

\subsubsection{OTマークの利用}
日本語LFG文法では，各機能的注釈に対して，Optimality Theory \cite{B2001}
に基づいたマーク(OTマーク)を付与している．OTマークには予め優先順位を設定
しておく．優先順位の高いOTマークが付与された機能的注釈に基づいて得られた
f-structureを優先的に最終結果に残す．すなわち，各OTマークが固有のコスト
を持ち，文全体のコストが最小となる解析結果を優先する．5.1節で述べたよう
にOTマークを付与する本来の目的は言語学的な根拠に基づいて解析結果の曖昧性
を減少させることである．我々もこの目的のためにOTマークを使用し，解析結果
数の爆発を防いでいる．しかし，我々の文法では，それと同時に，例外的な文法
事項を見通しよく記述するためにもOTマークを利用している．

現在約40種類のOTマークをLevel 1 - 4の4つのグループに分けて使用している．
Level 1に属するOTマークが最も優先順位が高く，Level 4のOTマークが最も低い．
もちろん，解析結果の曖昧性解消の目的で，同じグループに属するOTマークの間
にも細かな優先順位の違いを設定している．なお，OTマークが明示的に付与され
ていない機能的注釈には，Level 1に属するOTマークが付与されているとみなし
て処理を進める．まずLevel 1のグループに属するOTマークを持つ機能的注釈の
みを用いて解析を行う．f-structureが得られれば解析を終了する．得られなけ
れば，Level 1に加えてLevel 2に属するOTマークを持つ機能的注釈も用いて再度
解析を行う．これを繰り返し，解析結果が得られるまで，優先順位の低いグルー
プに属するOTマークを持つ機能的注釈を順に加えて解析を行う．

我々は，文法・語彙規則が例外的なものであるほど，低い優先順位のグループの
OTマークを付与している．これによって，例外的な文法・語彙規則が通常の解析
結果に悪影響を与えないようにすることができる．
\begin{quote}
\begin{itemize}
\item[(15-a)] *私は歩くが好きです。
\item[(15-b)] 私は歩くのが好きです。
\item[(15-c)] 負けるが勝ちだ。
\end{itemize}
\end{quote}
例えば，文(15-a)(15-b)から分かるように通常格助詞が動詞の終止形に直接後続
することはない．しかし，文(15-c)のような特に慣用的な表現においては非文法
的な表現とは言えない．我々は，動詞の終止形の直後に格助詞が後続することを
許す文法規則(機能的注釈)に対してLevel 4のOTマークを付与している．

2章で述べた通り，LFGに基づく文法・語彙規則は制約の集合である．文法記述が
大規模になるにつれ，規則が解析結果にいかに影響するかを網羅的に把握するこ
とが困難になり，予期せぬ副作用が生じてしまう可能性が高くなる
\cite{gunji2000}．本項で述べたOTマークを利用した多段階の解析手法は，この
ような文法記述の本質的な困難さを低減し，副作用の影響を受けずに例外的な文
法・語彙規則を付加していく上で有効である．

\vspace{-2mm}
\subsubsection{部分解析機能の導入}
前項で述べた手法の狙いは，例外的な文法規則を見通しよく記述することであっ
た．しかし，実際の文，特に口語表現のバリエーションは極めて多彩であり，文
法記述を続けることのみによって十分なカバー率を得ることは困難である．
\begin{quote}
\begin{itemize}
\item[(16)] 近頃の若いものはだらしがないってさ。
\end{itemize}
\end{quote}
例えば，文(16)のように，接続助詞「テ」の直後に終助詞「サ」が後続する文は
自然な文ではあるが，現状のところ文法規則の中で対応する記述は行えていない．

このような問題を解決するために，部分解析を実施する文法記述を行った．すなわち，
前項までに述べた解析を全て実施してもなお解析結果が得られない場合のために，
正規の文法表現とは異なる別の規則体系を用意し，部分的な解析結果のリストを
得る．部分解析用の文法規則の例を以下に示す．ただし，OTマークとして定義さ
れた「OTmark1」「OTmark2」「OTmark3」はこの順に優先順位が高いものとする．

\begin{table}[htbp]
\quad FRAGMENTS \qquad $\longrightarrow$ 
\begin{center}
\begin{tabular}{cccccccc}
$\{$&S&$|$&Srel&$|$&PP&$|$&NP\\
&\footnotesize{($\uparrow$FIRST)=$\downarrow$} && \footnotesize{($\uparrow$FIRST)=$\downarrow$} && \footnotesize{($\uparrow$FIRST)=$\downarrow$} && \footnotesize{($\uparrow$FIRST)=$\downarrow$}\\
\vspace{2mm}
&\footnotesize{OTmark1: OT}&&\footnotesize{OTmark1: OT} && \footnotesize{OTmark2: OT} && \footnotesize{OTmark2: OT}  \\
$|$&V&$|$&P&$\}$&(FRAGMENTS)&&\\
& \footnotesize{($\uparrow$FIRST)=$\downarrow$} && \footnotesize{($\uparrow$FIRST)=$\downarrow$} && \footnotesize{($\uparrow$REST)=$\downarrow$}&&\\
&\footnotesize{OTmark3: OT} && \footnotesize{OTmark3: OT}&&&&\\
\end{tabular}
\end{center}
\begin{quote}
FRAGMENTS: 任意の部分構造\\
FIRST: 部分リスト構造のデータ部，REST: 部分リスト構造のポインタ部
\end{quote}
\end{table}

\vspace{6mm}
この規則によって，文S，関係節Srel，後置詞句PP，名詞句NP，述部V，助詞Pの
いずれかの構造が認められればそれが「FRAGMENTS」となり，c-structureには
FRAFMENTSのリスト構造が生成される．ただし，OT マークの付与によって，Sや
Srelの構造が認められれば，他の構造に優先してFRAGMENTSとなる．同様に
f-structureとして，「FIRST」「REST」から成る部分解析結果のリスト構造が得
られることになる．

\begin{figure}[htb]
\center
\epsfxsize=89.11mm
\epsfbox{fig/fig4-9.eps}
\caption{文(15)に対応するc-structure}
\label{fig4-9}
\end{figure}

上記規則に基づいて得られた，文(16)の部分解析結果(c-structure)を図
\ref{fig4-9}に示す．文末の「さ」の部分がFRAGMENTSとして切り離されてはいる
ものの，「さ」の直前の部分までは完全な解析結果が得られている．日本語では，
非文法的・口語的な表現は述部，したがって文末(埋め込み文末)に見られる場合
が多く，文の大部分は正常に解析できる傾向にある．すなわち，部分解析結果で
あっても，前項までに述べた正規の文法記述によって得られる解析結果とほぼ同
等の解析結果(f-structure)を得ることができる場合が多い．


今後の課題
本稿で述べた日本語LFG文法は完成したものではなく，文法記述のさらな
る精緻化が最も重要な課題である．5.3.1項で述べたOTマークのグループ化の手法
を利用することにより，未対応の言語現象や，口語的・非文法的言語現象であっ
ても頻出するものについては規則化を進めていく．これによって，カバー率を高
めると共にカバー率全体に対する部分解析結果の占める割合を減じ，解析精度を
さらに向上させることが可能であると期待できる． 

5.1節および前章で述べた通り，本稿で説明した日本語LFG文法は，文単位で文法
的に正しいと認められる解析結果を全て出力する方針で記述している．もちろん，
文法的に正しい解析結果と認められないf-structureに関しては，それらを減じ
るよう文法の精緻化と適切なOTマークの設定を継続的に行っている．これにより，
表3で示した解析結果数にまでは曖昧性を抑えることが可能となっている．しか
しながら，日本語LFG解析システムをアプリケーションに適用することを考えた
場合，後工程として，曖昧性を完全に解消するためのシステムが必須である．統
計的手法によって生成された格フレーム辞書\cite{kawahara2002}を利用する等の
方法で曖昧性解消を実現することが今後の課題である．

3章および5章で述べた多言語間でf-structureの整合性を高める活動を継続すること
によって，等しいアーキテクチャで複数の言語を扱うことが可能な言語処理
アプリケーションの構築が可能になると期待できる．しかしながら，異なる言語
のf-structureの整合性の度合いを定量的に測定するための方法論は，これまでの
ところ提案されていない．このような評価手法の確立は今後の課題である．

