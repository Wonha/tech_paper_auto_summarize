動詞の省略現象の分類
\label{sec:bunrui}

\begin{figure}[t]
  \vspace{-2.5mm}
  \begin{center}
\fbox{
    \begin{minipage}{13.5cm}
      \begin{center}
      \epsfile{file=murata.eps,height=3.5cm,width=13.5cm} 
      \end{center}
    \caption{文末に動詞が欠けている文の分類}
    \label{fig:shouryaku_bunrui}
    \end{minipage}
}
  \end{center}
  \vspace{-2.5mm}
\end{figure}

本研究は，動詞の省略現象として文末の省略現象についてのみ
対象とする．
文の内部で省略されることもあるが，
それらは統語的な問題として処理されるであろうとし，
本研究の対象外とした．

本研究では，処理の観点から
文末において動詞が欠けている文の分類を行なった．
その分類を図\ref{fig:shouryaku_bunrui}に示す．
これは，まず，補完する動詞がある位置から分類し，
最後に省略現象の意味から分類したものである．
倒置は省略ではないが，
文末において動詞が欠けているという意味から
本稿の対象内としている．

この分類はまだまだ修正する必要があり
不完全なものであるが，
処理の観点から文末の動詞の省略現象を
把握する場合には役に立つものであると考えている．

以降の節では文末の省略現象のそれぞれの分類ごとに，
その現象の特徴とおおよその解析方法を述べる．

\subsection{テキスト内から補完される省略現象}

\subsection*{倒置文}

倒置文は多くの場合，
終止形などの普通に文末となりうる表現が文の途中にあり，
この部分を中心にして文が倒置されている．
例えば，以下の文では
「誰ですか」が普通に文末となりうる表現であり，
この部分を中心にして文が倒置されている．
\begin{equation}
  \begin{minipage}[h]{7cm}
「誰ですか、来たのは」
\end{minipage}
\end{equation}

このため，倒置文の解析は，
終止形などの普通に文末となりうる表現が
読点を伴って文の途中にある場合，
その部分で倒置された倒置文と判断する
ということで行なう\footnote{
倒置文の解析は，
本来は文献\cite{touchi}にあるように構文解析が成功するか否か
などの情報を用いて行なうべきである．
しかし，本研究で利用した構文解析システムはかかり受けの構造を出力する
ものであり，
本研究の実験で用いるデータは構文情報を修正したものであり
倒置文であってもかかり受けの構造で表現されており，
構文解析が成功するか否かの情報を利用することができない．
このため，本研究では表層の言語表現を用いて解析した．
}．
例えば，上の例文では
「誰ですか」が普通に文末となりうる表現であり，
その部分で倒置された倒置文であると判断される．

\subsection*{疑問応答}

疑問--応答という文の対において
疑問と応答で同一の動詞を使用する際，
応答側の文の動詞が省略される場合がある．
例えば，以下の例文では
「これを」の動詞が省略されているが，
その省略部分に入る動詞は疑問側の「壊した」である．
\begin{equation}
  \begin{minipage}[h]{7cm}
「何を壊したの」「これを」
\end{minipage}
\end{equation}

このため，この種の文の解析は，
疑問--応答を形成しているかどうかを
「何」などの表現によって検出し，
疑問--応答であることがわかれば，
疑問側の文の動詞を補完するということを行なう．

\subsection*{理由・逆接・仮定}

文末に動詞が欠けている文の中には，
文末が接続助詞で終っており，
前文と理由・逆接・仮定という意味関係で，
ある種，文をまたがった倒置となっているものがある
\footnote{接続助詞で終っている文がすべて
この分類となるわけではない．
前文に対して倒置になっておらず，
テキストにない動詞を補う必要があるものもある．
これらは，
\ref{sec:other_ellipsis}節の「その他(常識による補完)」
で扱われることになる．}．
例えば，以下の文の場合，
「電気をつけたから」の部分が前文の「明るいね」の部分
の理由になっており，
文をいれかえて解釈すると意味の通った文となる．
\begin{equation}
  \begin{minipage}[h]{7cm}
「明るいね。電気をつけたから」
\end{minipage}
\end{equation}

このような場合の解析は，
基本的には
文末が接続助詞で終了している場合は
前文と意味関係にあると判定し，
前文と文の順序を入れかえて解釈する．
しかし，
逆接の場合は単に以下のように以降の発話に余韻を持たせるために
用いるだけで前文に対して逆接の関係にならない場合もある．
\begin{equation}
  \begin{minipage}[h]{7cm}
「お聞きしていいのかわかりませんが」
\end{minipage}
\end{equation}
そこで，
逆接の接続詞の場合は前文と関係を持ちやすい
「のに」の場合は前文と関係があるとし，
それ以外の接続助詞の場合は
以降の発話に対して余韻を持たせていると判定する．

\subsection*{補足}

前文の補足としての役割をする文で，
動詞の省略が行なわれることがある．
例えば，以下の例文は，ものをなくしたけれども，鍵をなくしたということを
補足的に述べている．
\begin{equation}
  \begin{minipage}[h]{7cm}
「物をなくした。鍵を」
\end{minipage}
\end{equation}

この種の解析には単語の意味を利用する方法として以下の二種類の方法を考えた．
一つは，
省略された文と前文とで
同じ格要素に来る単語の意味が近ければ，
それらは対応関係にあって
動詞の省略された部分には，前文の動詞が補完されるというものである．
この場合，「物」と「鍵」は同じ具体物という意味で
意味的に近いので対応関係にあると認定され，
「鍵を」に対して補完する動詞は「なくした」となる．

もう一つは以下のように前文の動詞の対応する格要素の部分が
ゼロ代名詞化した場合のための方法である．
\begin{equation}
  \begin{minipage}[h]{7cm}
「なくした。鍵を」
\end{minipage}
\end{equation}
この例の場合は，動詞「なくす」の格フレームを用い，
格フレームのヲ格の要素になりやすい単語
\footnote{
IPALの格フレーム辞書\cite{ipal}には
それぞれの格要素にどういう単語が
入りうるかの情報が記載されている．
本研究ではこれを利用する．}
と「鍵」を比較し，意味的に近ければ
「鍵を」が「なくした．」のヲ格の要素にくると判定し，
「鍵を」に補う動詞は「なくした．」となる．

また，表層表現を用いる規則があり，
反復を示す助詞「も」などの手がかり語が
存在する場合は前の文の補足と判定する．

前文の補足関係となる動詞の省略現象は
以上の他にも多数あり，
本研究での解析方法では
手がかりがなければ前文の文末の動詞を補うということを行なっている．

\subsection{テキスト外から補完される省略現象}

\subsection*{疑問文}

疑問文では提題助詞「は」で終了して動詞を省略する場合がある．
例えば，以下の例は
相手の名前を聞いているときの発話である．
\begin{equation}
  \begin{minipage}[h]{7cm}
「名前は」
\end{minipage}
\end{equation}

このように``名詞＋「は」''の形になっている場合は
疑問になっていることが多い．
そこで，本研究では
``名詞＋「は」''の形で終っている場合は，
疑問と判定した
\footnote{
本研究は省略された動詞の補完なので，
「何といいますか」といった表現を補いたいところだが，
これらは疑問の内容によって変化するので，
生成の問題であると判断し，
本稿では扱っていない．}．

\subsection*{ダの省略}

文が名詞で終了している場合，
判定詞「だ」の省略が行なわれていることがある．
\begin{equation}
  \begin{minipage}[h]{7cm}
「わたしは学生」
\end{minipage}
\end{equation}
この例は「わたしは学生です」という文で
判定詞「だ」または「です」の省略を行なったものである．

この種の解析は
文が名詞で終了しているか否かを調べたり，
主語が存在しているなどの文構造を利用したりして
行なえばよい．

\subsection*{スルの省略}

文末がサ変名詞である場合，
「する」「します」が省略されていることがある．
\begin{equation}
  \begin{minipage}[h]{7cm}
「コーヒーをお願い」
\end{minipage}
\end{equation}
これの例は「コーヒーをお願いします」という文で
「します」を省略したものである．

この解析は，
文末がサ変動詞「する」が接続可能なサ変名詞であるかどうかや
サ変名詞に対して連体修飾語が存在していないかどうかを
調べることによって行なう．

\subsection*{その他(常識による補完)}
\label{sec:other_ellipsis}

前の三つの「疑問文」「ダの省略」「スルの省略」の他に
テキスト外補完の場合の省略例として以下のものがある．
\begin{equation}
  \begin{minipage}[h]{7cm}
「じつは、ちょっとお願いが……」
\end{minipage}
\end{equation}
この種の省略現象は
補うものがテキスト内に無いうえ，
補完される言語表現が多岐にわたっており，
解析が難しい現象である．

本研究ではこの問題の解決するために
大規模なコーパス(解析をしていないもの)を利用して
補完内容を推定する．
上の例文を人間が読むと
省略された動詞が「あります」であることが自然とわかる．
これは，頭の中に
「じつは、ちょっとお願いがあります」
という文が経験的知識となって存在しているからである．
これと同じようなことをコーパスを用いて行なうとすると，
「じつは、ちょっとお願いが」とできるだけ
意味的に近い表現をコーパス中から抽出し，抽出した文の
「じつは、ちょっとお願いが」の次の部分が
おおよそ省略部分の内容であることが予想され，
それを補完するということを行なえばよいことがわかる．
本研究では，以上の方法で解析する．
ただし，意味的に近い表現を抽出するところは，
現在の自然言語技術では困難なので，
文末の文字列を最長に含む文を抽出するということで近似している．




照応処理システム

\subsection{システムの枠組}
\label{wakugumi}

本研究では，
動詞の省略現象の解析を行なう際，
名詞，指示詞，代名詞，ゼロ代名詞などによる
照応の解析も同時に行なう．
まず，解析する文章を構文解析・格解析する\cite{csan2_ieice}．
その結果に対して文章の初めから動詞の省略の補完を行なう．
省略の補完は，省略の補完の手がかりとなる複数の情報をそれぞれ規則にし，
これらの規則を用いて解の候補に得点を与えて，
合計点が最も高い解の候補を
システムの解とすることによって実現する．
この合計点を利用する方式は，以下の原理に基づいている．
照応解析のように複雑な問題では，複数の情報が絡み合っており
複数の情報を総合的に判断することにより解析を行なう必要がある．
この複数の情報を総合的に判断するということを
各規則の得点の和という形で実現し，
合計点の最も高い候補をシステムの解としている．
規則に応じて候補に得点を足していく操作は，
その候補が解であるという確信度が高まっていくことに対応している．
また，得点によりどの規則を優先すべきかを
指定することができるようになっている
\footnote{
指示詞の指示先などの推定の場合
文章中での物理的距離，意味的制約における意味の近さなど
数値化せずには扱いにくいものが多数存在していたが，
本研究の動詞の省略では
数値化の必要性がある規則があまり存在せず
規則の間の関係もそれほど複雑でないので，
得点を使わずに単純な if-then ルールによる方式でも十分であったが，
われわれは照応処理の統合を考えておりわれわれの他の照応処理の研究
\cite{murata_noun_nlp}\cite{murata_deno_nlp}\cite{murata_indian_nlp}
と同様な方式で解析を行ないたかったため，
合計点を利用する方式を採用した．}．

\begin{figure}[t]
  \leavevmode
  \begin{center}
\fbox{
    \begin{minipage}[c]{6cm}
      \hspace*{0.7cm}条件部 $\Rightarrow$ \{提案 提案 ..\}\\[-0.1cm]
      \hspace*{0.7cm}提案 := ( 解の候補 \, 得点 )

    \caption{規則の表現}
    \label{fig:kouho_rekkyo}
    \end{minipage}
}
  \end{center}
\end{figure}

規則は，図\ref{fig:kouho_rekkyo}の構造をしている．
図中の「条件部」には文章中のあらゆる語や
その分類語彙表\cite{bgh}の分類番号や
IPALの格フレーム\cite{ipal}の情報や
構文解析・格解析の結果の情報などを条件として書くことができる．
「解の候補」には
補完対象の動詞の位置や
補完したい動詞などを書くことができる．
「得点」は解としての適切さの度合を表している．

\subsection{動詞の省略現象の解析}
\label{sec:0verb_rule}

動詞の省略の補完のために規則を22個作成したが，
これらすべてを表\ref{tab:doushi_shouryaku_bunrui}に示す．
これらの規則は
文献\cite{kouryakubun}\cite{jutsugo_takahashi}を参考にしたり
\ref{sec:jikken}節で述べる学習サンプルを見たりして人手で作成した．
各規則で与える得点は，
規則の優劣を考慮して人手で定めたり，
学習サンプルで実験的に人手で定めたりした．

\begin{table}[t]
  \footnotesize
  \caption{動詞の補完のための規則}
    \label{tab:doushi_shouryaku_bunrui}
  \begin{center}
\begin{tabular}[c]{|@{ }r@{ }|p{4cm}|p{3cm}|@{ }p{0.6cm}@{ }|p{3.9cm}|}\hline
  順序  & 条件部 & 解の候補 & 得点  & 例文\\\hline
\multicolumn{5}{|c|}{動詞の省略はないと判定する場合の規則}\\\hline
  1 &
  文末が動詞の終止形，過去形，推量形，意志形，命令形
  の基本形などで終了している場合か，
  終助詞で終了している場合 &
  動詞の省略はない &
  30 & 
  その湖は、北の国にあった。\\
  2&
  人名，もしくは，人を意味する単語で終了している場合 &
  よびかけであり，動詞の省略はないと解釈する &
  30 &
  「はい、先生」\\
  3&
  文末が基本連用形，もしくは，「て」で終る連用形であり，
  引用文内の場合&
  命令文と解釈し，動詞の省略はないと解釈する&
  30&
  「さあ、目をつぶって」\\
  4&
  文末が「が」などの逆接の接続助詞である場合&
  動詞の補完の必要のない
  逆接と解釈する&
  $5$&
  「お聞きしていいのかわかりませんが」
  \\\hline
\multicolumn{5}{|c|}{倒置の場合の規則}\\\hline
5&
  同一文に
  用言の基本形などの文末になりうる表現が読点を伴って存在する場合&
  その部分で倒置された倒置文と解釈する&
  $10$&
  「それで見つかったのか、約束の相手は」\\\hline
\multicolumn{5}{|c|}{質問--応答の場合の規則}\\\hline
6&
「どうぞ」「はい」などの応答を示す表現が文内にあって
  前文の文末に疑問を示す「か」などがある場合&
  疑問文の文末の動詞&
  $5$&
  「近よって観察してもいいでしょうか」
  「どうぞ、ご自由に……」
  \\
  7&
  前方3文以内に「だれ」「何」などの疑問詞がある場合&
  疑問詞がかかる動詞&
  $5$&
  「だれを殺したんだ」
  「サルです。
  わたしの飼っていたサルを(殺したのです)」と、男が答えた。\\\hline
\multicolumn{5}{|c|}{理由・逆接・仮定の場合の規則}\\\hline
  8&
  原因を意味する助詞「ので」「から」などが文末についている場合 &
  現在の文を前文の理由を示す文であると
  解釈する．&
  5 &
  「穴を埋めていただくのはありがたいが、その土地をあげるわけにはいかない。
  そこに、社を建てなくてはならないんだから」\\\hline
  9&
  文末が「のに」などの逆接の接続助詞で
  ある場合&
  現在の文に対して
  前文が逆接の関係でつながっていると解釈する&
  $5$&
  「これが悪魔とはねえ。
  もう少し堂々としたものかと思っていたのに」
  \\
  10&
  文末が動詞の条件形か仮定を表わす助詞である場合&
  現在の文を前文の仮定を示す文であると
  解釈する．&
  $5$&
  「それなら、いいじゃないか。
  なにも、交番にまで来て大さわぎしなくても」\\\hline
\multicolumn{5}{|c|}{補足の場合の規則}\\\hline
  11&
  文末が連用形であり，
  引用文内でない場合 &
  前文の補足の文と解釈し，前文の文末の動詞を補完する&
  5&
  召使は部屋に入り、えさを取りかえた。 
  主人がよく与えていたシュークリームも加えて。\\
  12&
  文末に格助詞のついた名詞$A$があり，前文に同じ格助詞のついた名詞$B$があり，
  名詞$A$と名詞$B$の意味的な類似度が$s$である場合&
  名詞$B$がかかる動詞  &
  $s*20$ $-2$&
  いまでは、すべての悪がなくなっている。
  強盗だとか詐欺だとか、あらゆる犯罪が(なくなっている)。
  \\\hline
\end{tabular}
\end{center}
\end{table}

\clearpage

\begin{table}[t]
  \footnotesize
    \addtocounter{table}{-1}
  \caption{動詞の補完のための規則(つづき)}
  \begin{center}
\begin{tabular}[c]{|@{ }r@{ }|p{4cm}|p{3cm}|@{ }p{0.6cm}@{ }|p{3.9cm}|}\hline
  順序  & 条件部 & 解の候補 & 得点  & 例文\\\hline
\multicolumn{5}{|c|}{補足の場合の規則}\\\hline
  13&
  文末に格助詞のついた名詞$A$があり，
  前文に同じ格の省略された格要素$B$があり，
  その格要素に入りやすいと格フレーム
  に記述してある名詞と名詞$A$との意味的な類似度が$s$である場合&
  格要素$B$を持つ動詞 &
  $s*20$ $-2$&
  私は同僚に(\underline{　　}を)指さしてみせた。
  バラをからませた垣根のなかの、大きなニレの樹の下にある古風なつくりの住宅を。
  \\
  14&
  文末が名詞接続助詞「も」であるか，
  「もっとも」などの繰り返しを想起しやすい副詞が文中に存在する場合&
  同一発話者の前文の繰り返しと解釈し，同一発話者の前文の文末の動詞を補完する&
  $5$&
  「大人って悪いことばかりしているんだよ。
  よくわかんないけれど、ワイロなんてことも……」\\
  15&
  前文が疑問文の場合&
  前文の文末の動詞&
  $1$&
  \\
  16&
  いつでも適用される規則(他の規則が適用されない場合の
  デフォルト規則)&
  前文&
  $0$&\\\hline
\multicolumn{5}{|c|}{疑問文の場合の規則}\\\hline
  17&
  文末が助詞「は」がつく名詞である場合&
  疑問文と解釈する&
  $3$&
  「名前は」\\\hline
\multicolumn{5}{|c|}{ダの省略の場合の規則}\\\hline
  18&
  文末が名詞，もしくは，名詞接続助詞「ばかり」「だけ」などであり，
  文中に主語に相当する名詞接続助詞「は」「も」「が」がつく名詞がある場合&
  判定詞「です」の省略と解釈し，「です」を補完する&
  $2$&
  「これはわたしの、ちょっとしたかんちがい」\\
  19&
  文末が時間を意味する名詞の場合&
  判定詞「のことです」の省略と解釈し，「のことです」を補完する&
  $5$&
  そして、その次の夏。\\
  20&
  文末が名詞，もしくは，名詞接続助詞「ばかり」「だけ」などである場合&
  判定詞「です」の省略と解釈し，「です」を補完する&
  $1$&
  攻撃の命令を待つばかり。
 \\\hline
\multicolumn{5}{|c|}{スルの省略の場合の規則}\\\hline
  21&
  文末が連体修飾語を持たない
  サ変名詞か動詞の連用形が名詞化したものである場合&
  「します」の省略と解釈し，「します」を補完する &
  $2$&
  それを神さまあつかい。\\\hline
\multicolumn{5}{|c|}{常識から補完する場合の規則}\\\hline
  22&
  文末の部分文字列を最長に含む文をコーパス
  から取り出せる場合．
  その取り出した文において
  文字列一致した部分の後方に来る表現のうち
  最も多く出現したものの頻度が
  二番目のものよりも際だって大きい場合
  (二番目に多く出現したものの頻度の二倍以上の場合)は，
  9点を与え，そうでない場合は1点を与える．
  &
  取り出した文において
  文字列一致した部分の後方に来る表現のうち
  最も多く出現したもの
  (頻度最大のものが複数個ある場合は
  最初に取り出されたもの)
  &
  1 or 9&
  「そううまくいくとは(思えない)」
  \\\hline
\end{tabular}
\end{center}
\end{table}

\clearpage

また，名詞・代名詞の照応解析も同時に解析するが，
このための規則については
文献\cite{murata_noun_nlp}\cite{murata_deno_nlp}\cite{murata_indian_nlp}
を参照のこと．

表\ref{tab:doushi_shouryaku_bunrui}中の規則において，
人を意味する単語の判定は，
意味素性辞書\cite{imiso-in-BGH}
において意味素性HUMが付与されている単語を，
それとすることで行なった．
また，  時間を意味する名詞の把握は，
意味素性辞書でTIMが付与されているか，
形態素解析結果として時相名詞と解析されているものを，
それとすることで行なった．

規則1は特別な規則で，
この規則が適用された時は
他の規則は適用されないようになっている．

規則12,13の$s$は，
EDR概念辞書における名詞$A$と名詞$B$の類似度により与えられる．
この類似度は，
EDR概念辞書のトップノードと名詞$A$のノードの間の枝の数を$na$，
トップノードと名詞$B$の間の枝の数を$nb$，
名詞$A$，名詞$B$からのトップノードへのパスで初めてパスが一致するノードを
C とし，
ノード$C$とトップノードの間の枝の数を$nc$とすると，
($nc$ + $nc$)/($na$ + $nb$)で与えられる．
この式は，
$na$, $nb$ に対して $nc$ の値の大きさの割合をとったものである．
$na$, $nb$ に対して $nc$ の値が大きいとき，
シソーラス中でのノード$C$の位置が相対的に下の方にあることになり，
名詞\hspace{-0.2mm}$A$\hspace{-0.2mm}と名詞\hspace{-0.2mm}$B$\hspace{-0.2mm}の類似度が高いことを意味する．
この手法は文献\cite{nlp}の方法を利用している．

規則22で用いる
コーパスは，新聞1年分のもの(約7千万文字)を利用している．
コーパスから一致部分を取り出す方法は
コーパスをソートしておき
二分探索で行なっている．


\subsection{解析例}

動詞の省略の補完例を図\ref{tab:dousarei}に示す．
図\ref{tab:dousarei}は
「お願いが」の動詞の省略の解析を
正しく行なったことを示している．これを以下で説明する．

\begin{figure}[t]
\fbox{
\begin{minipage}[h]{13cm}

「むりもありませんわ。

はじめてお会いするのですから。

じつは、ちょっとお願いが……」

\vspace{0.5cm}

解析における得点の分布

\begin{tabular}[h]{|l|r|r|r|}\hline
補完候補   &  前文の文末  &  あります \\\hline
規則16     &   0点        &           \\\hline
規則22     &              &   1点     \\\hline
合計点     &   0点        &   1点     \\\hline
\end{tabular}

\vspace{0.5cm}

『じつは、ちょっとお願いが』の文末の文字列を
最長に含む文の後方部分
(上位のみ)

\begin{tabular}[h]{|l|l|}\hline
最長に一致する文の後方部分 & 出現回数(個数)\\\hline
あります  & 5\\
ある      & 3\\\hline
\end{tabular}

\caption{動詞の補完例}
\label{tab:dousarei}
\end{minipage}
}\end{figure}

表\ref{tab:doushi_shouryaku_bunrui}
で示した規則のうち，
まず，文末が動詞の基本形などのふつうに文末になりうる表現でないので，
一つ目の規則は適用されず，動詞の省略であると解釈される．
次にいつでも適用される規則16が適用され
前文の文末という候補があがる．
次にコーパスを利用する規則22により，
動詞「あります」が補完の候補にあがる．
コーパスには他に「ある」などがあるが，
これらよりも「あります」の方が頻度が多かったので，
「あります」が補完の候補にあがる．
表のように候補は二つあがるが，
得点が最も大きい「あります」を正しく補完する．

