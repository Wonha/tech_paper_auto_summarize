    \documentclass[japanese]{jnlp_1.4}
\usepackage{jnlpbbl_1.1}
\usepackage[dvips]{graphicx}
\usepackage{amsmath}
\usepackage{hangcaption_jnlp}

\newcommand{\LowCell}[1]{}
\newcommand{\ZeroCell}[1]{}

\Volume{16}
\Number{1}
\Month{January}
\Year{2009}

\received{2008}{4}{10}
\revised{2008}{7}{21}
\accepted{2008}{10}{24}

\setcounter{page}{67}

\newcommand{\comment}[1]{}
\newcommand{\argmax}{}

\jtitle{優先順位型質問応答の解スコア分布に基づくリスト型質問応答}
\jauthor{石下　円香\affiref{YNU} \and 森　　辰則\affiref{EIS}}
\jabstract{
本論文では，リスト型質問応答に対する回答群の選択手法を提案する．
リスト型質問応答とは，与えられた質問に対し決められた知識源の中から過不足なく解を見つけ列挙するタスクである．
提案手法では，既存の質問応答システムが解候補に付与するスコア分布を利用する．
解候補を，そのスコアを基にいくつかのクラスタに分離することを考える．
すなわち，それぞれのクラスタを一つの確率分布とし，各確率分布のパラメタをEMアルゴリズムにより推定する．
そして，それぞれの分布を正解集合を形成するスコア分布と不正解集合を形成するスコア分布のどちらであるかを推定し，正解集合のスコア分布に由来すると推定された解候補群を最終的な回答とする．
質問応答システムには一般に不得意な質問が存在するが，提案手法では，
複数の分布のパラメタを比較することにより，質問応答システムが正解を適切に
見つけられているか否かを判定することも可能である．
評価実験によれば，スコア分布を求め，それを利用することがリスト型質問応答に対して有効に働くことがわかった．
}
\jkeywords{質問応答システム，リスト型質問応答，スコア分布}

\etitle{A Method of List-type Question-answering Based on the Distribution 
	of Anwer Score Generated by \\
	Ranking-type Q/A System}
\eauthor{Ishioroshi, Madoka\affiref{YNU} \and Mori, Tatsunori\affiref{EIS}} 
\eabstract{
In this paper, we propose a method of the list-type question-answering.
The list-type question-answering is the task in which a system is requested to enumerate all correct answers to given question.
In the method, we utilize the distribution of the score that an existing question answering system gives to answer candidates.
Answer candidates are separated into some clusters according to their scores.
Here, we assume that each cluster results from a probabilistic model.
Under the assumption, the parameters of these probabilistic distribution models are estimated by using the EM algorithm.
Then, the method judges whether each distribution model is a source of correct answers or a source of incorrect answers.
Answer candidates that originate from the distribution models corresponding to correct answers are regarded as final answers.
Moreover, by comparing model parameters, we can also judge whether or not the question-answering system appropriately found correct answers.
The experimental results show that the use of the score distribution is effective in the list-type question-answering.
}
\ekeywords{Q/A system, list type Q/A, score distribution}

\headauthor{石下，森}
\headtitle{優先順位型質問応答の解スコア分布に基づくリスト型質問応答}

\affilabel{YNU}{横浜国立大学大学院環境情報学府}{Graduate School of Environment and Information Sciences, Yokohama National University}
\affilabel{EIS}{横浜国立大学大学院環境情報研究院}{Graduate School of Environment and Information Sciences, Yokohama National University}



\begin{document}
\maketitle



\section{優先順位型質問応答システム}

\subsection{システムの概要}

本節では，本研究で使用している質問応答システム\cite{Mori:NTCIR4WN:JapaneseQASystemUsingA*SearchAndItsImprovement}の概要を説明する．
この質問応答システムでは，利用者が自然言語で質問文を入力すると，
各解候補のスコアに基づき，
解候補群を順序付けて上位から利用者が指定した数だけ提示する．
各解候補のスコアは，知識源の文書中の，各解候補と質問文中に含まれるキーワードとの近さなどを基にしている．
本稿ではこれを優先順位型質問応答システムと呼ぶことにする．
本研究で使用している質問応答システムの全体の構成を図\ref{fig:Ranking-type-QA}に示す．本システムは主に四つのモジュール，すなわち，質問文解析モジュール，文書検索モジュール，パッセージ検索モジュール，そして解抽出モジュールから構成されている．
解抽出モジュールの中には，解を整形するサブモジュールもある．

\begin{figure}[t]
\begin{center}
\includegraphics{16-1ia4f1.eps}
\end{center}
\caption{質問応答システム概要}
\label{fig:Ranking-type-QA}
\end{figure}


\subsubsection{質問文解析モジュール}

利用者が入力した質問文から質問応答に有用な情報を抽出するのが質問文解析モジュールの役割である．解析により得られる情報を次に示す．

\begin{itemize}
\item 形態素解析および構文解析の結果
\item キーワード（質問文中の内容語）
\item 人名，地名など質問の求める回答の種類を表す質問型
\item 疑問詞に対応する数量表現（質問型が数量表現であった場合）
\end{itemize}


\subsubsection{文書検索モジュール} 

本モジュールは質問文解析により得られたキーワードを元に，文書検索を行う．検索エンジンには，TFIDFによる語の重みづけとベクトル空間法による類似度尺度を用いて，与えられたキーワード集合と各文書の類似度を求めるものを採用している．

\subsubsection{パッセージ検索モジュール}

文書検索で得られた関連文書の中でも，質問の解となる情報が書かれているのはその一部だけである．
文書全体から解抽出を行なうことは計算量の面で非効率的なので，正解に関わる文脈を小さなコストで先に切り出しておいたほうがよい．
これを行うのがパッセージ検索モジュールである．パッセージとは，文章における連続した一部分のことであり，パッセージ検索は文書集合から正解を含む可能性の高いパッセージを取り出すために行う．本システムのパッセージ検索では，一パッセージを三文として抽出を行なっている．
パッセージを三文とした時の有効性は，村田ら
\cite{Murata:DcreasedAddingJapaneseQusetionAnswering}により考察されている．
それぞれのパッセージには，パッセージ中に出現するキーワードの異なり数などを基にしたスコアが付けられ，スコアが大きいパッセージが次の解抽出モジュールに渡される．

\subsubsection{解抽出モジュール}\label{subsec:解生成}

解抽出は，パッセージ検索までの処理で得られたパッセージから，質問の解を抜き出す処理である．パッセージを文単位に分割し，それぞれの文（これを検索文と呼ぶ）と質問文とを照合することにより，
解となる形態素を決定する．
スコアが高い形態素が得られたら，その形態素を中心にして最終的な解候補を生成する．

本システムの文照合は2-gram照合，キーワード照合，係り受け照合，質問型照合の四種の照合からなる．それぞれの照合において照合の一致の度合に応じて検索文の文字または形態素にスコアが与えられ，全てのスコアの和がその形態素のスコアとなる．
そしてスコアの高い形態素から順に解候補が生成される．

2-gram照合とキーワード照合では，
解を含む可能性の高い文の中で，ある形態素を解と仮定した時の
質問文との照合の良さを，2-gramとキーワードの観点から測定する．
一方，質問型照合は，
質問型と一致する形態素にスコアを与えるために行なわれる．
質問タイプには，人名，地名，組織名，その他数量表現などがある．
係り受け照合では，質問文と検索文との構造の一致の度合を見る．
本システムの係り受け照合では，一文対一文の照合を基本としているが，質問文の内容が検索文の二文以上にわかれて出現している場合もある．
そこで，このような場合には前文の最後の文節を次文の提題の文節に仮想的に係り受けさせるという手法で複数文を連結し，仮想的に一文であるとみなして質問文との照合を行なっている．

形態素$mor$の最終スコアは，2 gram，キーワード，係り受け，質問型の各照合によって与えられたスコアの和$S(mor,L_i)$で表され，スコアの和の高い形態素$mor$から，解を整形するサブモジュールを用いて解が作成される．
ここで，$L_i$は検索文である．
\begin{gather}
S(mor,L_i) = Sb(mor,L_i) + Sk(mor,L_i) + Sd(mor,L_i) +St(mor,L_i) \\
\begin{split}
 Sb(mor,L_i)&= 2 gram照合でのスコア\\
Sk(mor,L_i) &= キーワード照合でのスコア\\
Sd(mor,L_i)&= 係り受け照合でのスコア\\
St(mor,L_i) &= 質問型照合でのスコア
\end{split}
\nonumber
\end{gather}

解を整形するモジュールで作られた解候補$AC$のスコア$S(AC,L_i)$は，
解を形成している形態素のうち，スコア$S(mor,L_i)$が最大のものとなる．

複数の異なる検索文から見つかった同じ解候補に対してより高いスコアを付与する，疑似的な多数決方式がこのシステムでは採用されている．さまざまな質問応答システムにおいて，解候補の冗長性を解の選定に役立てることが有効であることが示されている
\cite{Clarke:Exploitingredundancyinquestionanswering}\cite{Xu:TREC2003QAatBBN:Answeringdefinitionalquestions}．多数決方式はその一つである．一方で，我々のシステムでは，探索制御が行なわれており指定される数の解が見つかった時点で残りの解候補を調べることはせずに探索を打ち切る．
そのため，探索の過程において，通常の多数決方式は採用できない．しかし，指定された求める解の数は異なり数である．そのため，指定された数になるまでにすでに求められている解と同じものが改めて見つかる可能性がある．そこで，その時にはその解のスコアを出現回数に応じて高くしている．
以下では，複数回同じ解が求められた場合，
その解に複数投票が入った，と表現することにする．

多数決方式を用いたときの
ある解候補$AC$の最終スコア$score_{raw}(AC)$は，以下の式で与えられる．
\begin{equation}
score_{raw}(AC) = \{1+\log_{10} frec(AC,AnsList)\} \cdot  \max_{L_i} S(AC,L_i)
\label{Eq:多数決}
\end{equation}

ここで，$AnsList$は解候補のリストであり，$frec(x,L)$は$L$中の$x$の頻度である．

式(\ref{Eq:多数決})に示される通り，多数決方式のスコアは単純に頻度を
最大のスコアに乗じるのではなく，頻度の対数値を乗じることにより頻度に対するスコアの上がり具合が穏やかになるように調整されている．
このような，頻度に対するスコアの上がり具合を調整する
多数決方式の有効性は，村田ら
\cite{Murata:DcreasedAddingJapaneseQusetionAnswering}
により考察がなされており，
この手法は，高精度の他の多数決手法と同等程度の性能を持つことが示されている．

\newcommand{\InH}[1]{}


\section{解スコア分布に基づくリスト型質問応答}\label{Chapter:list-qa}

質問応答の基本的な仕組みは，先に述べたように，
\par\InH{段階1}
 知識源となる文書集合の中から，与えられた質問に対する解候補群を見つけること，

\InH{段階2}
 各解候補に対し，その質問に対する答としての「良さ」を与える数値，すなわち，スコアを付与すること

\noindent
からなる．
リスト型質問応答の基本は，上記の二段階に加え，
\par\InH{段階3}
 優先順位型質問応答システムの出力，
 すなわち，スコア付きの解候補群を正解（と思しき）集合（最終的な回答群）と不正解（と思しき）集合の二つに分割する

\noindent
ことである．
これは，スコアの値に基づき，上位何件の解候補を正解と判断するかを決定することに等しい．

我々はその為の手法として，解候補の集合を，そのスコアを基にいくつかのクラスタに
分離することを考える．
そこで，本手法では，まず，確率密度分布に基づくクラスタリングで用いられる混合分布モデルと同様に
\par\InH{仮説1}
 あるクラスタ中の解候補のスコアの値密度分布が，ある一つの確率分布に従っており，異なるクラスタは異なるパラメタの確率分布に由来すること，そして，

\InH{仮説2}
 解候補群全体のスコアの密度分布はこの複数の確率分布の混合分布に従っていること

\noindent
を仮定する．
次に，各確率分布のパラメタをEMアルゴリズムにより推定し，いくつかの分布に
分離する．
最後に，それぞれの分布を正解集合のスコアの分布と不正解集合のスコア分布のどちらであるかを判定し，各解候補がいずれの分布に由来するものなのかを推定し，最終的な正解集合を求める．
ここで，上記クラスタ数はいくつの群に分けて分析をするかを表す一種のパラメタであり，何らかの手法で決める必要がある．正解集合には何らかの共通点があり1〜2程度の少数のクラスタから構成されることが期待されるが，不正解集合にこのような性質があるとは限らない．しかし本論文では，手法の分析のしやすさから，2〜3程度のクラスタに分ける場合について検討を行なう．


一方，基本となる優先順位型質問応答において，システムの求める解析精度が十分でないこともある．
例えば，我々の利用しているシステム\cite{Mori:NTCIR4WN:JapaneseQASystemUsingA*SearchAndItsImprovement}では，順位づけにおいても未だ満足のいくものではない．
同システムでは，MRR値
が0.5程度であり，平均すると2位に正解を見つけることができるという評価
であるが，実際のところは1/3程度の問題について1位に正解を返し，2〜5位に正解を返すのが1/3程度，残りの問題については全く正解を得ることが出来ていない．
つまり，システムにとって得意な問題と不得意な問題が存在している．

我々は，不得意な問題の場合は，各解候補に対するスコア付けがうまくいっておらず，上述の仮説1，仮説2が成立していないと考えた．
そこで，推定した確率分布のパラメタに基づき，複数に分割された分布それぞれが正解集合の分布であるか，不正解集合のそれかを判定し，正解集合の分布と不正解集合の分布とが明確に分割できるか否かを調べる．
これにより，正解が適切に見つかっているか否かを判断することがある程度可能であると考える．

解候補のスコア分布が正解集合の分布と不正解集合の分布とに分けられるとしている
本提案手法では，全ての質問対し，一つ以上の正解があることを前提としており，
最低でも一つの回答を出力する．
正解が全くない質問については，
正解が適切に見つかっていないと判定された質問の一部と
とらえることができるが，
現在対応できていない．


\subsection{解候補スコアの分布の計算}\label{sec:分布の計算}

優先順位型質問応答システムの出力は解候補とそのスコアの組のリストであり，
スコアを数直線上に示すと，図\ref{fig:ScoreDensity}（上）の様になる．
それを視覚的に分かりやすくするために，一定区間で区切ってヒストグラムに
したものが，図\ref{fig:ScoreDensity}（中）である．これは説明の為に示した図であり，
実際の処理ではヒストグラムは求めていない．
本研究では平滑化した確率密度関数を求めるための手法として，
スコア分布をいくつかの正規分布の混合分布とみなし，
各分布のパラメタを求めるのにEMアルゴリズムを用いている．

\begin{figure}[t]
\begin{center}
\includegraphics{16-1ia4f2.eps}
\end{center}
\caption{スコア分布の計算}
\label{fig:ScoreDensity}
\vspace{-1\baselineskip}
\end{figure}


本提案手法では，複雑な要因（本手法では，\ref{subsec:解生成}節に示す，解候補のスコア）が重なりあってできるばらつき
は正規分布に近付くという，統計学における中心極限定理を基にして，
仮定する分布を正規分布とした．
解候補のスコアの分布が，正解集合が成すいくつかの分布と不正解集合のそれとの混合分布であること，並びにそれらの分布がいずれも正規分布であることを仮定すると，
混合分布は式(\ref{Eq:MixtureDist})で与えられる．
なお，本稿では，各解候補のスコアは全て，各問について各解候補のスコアを最大値で除し，[0,1]の範囲となるように正規化したものを用いる．
\begin{equation}
p_s(x) = \sum_{i=1}^n \xi_i\phi_i(x:\mu_i,\sigma_i^2)
\label{Eq:MixtureDist}
\end{equation}

ここで，$x$はスコアの値に対応する確率変数，$n$は仮定する分布数，$\phi_i(x:\mu_i,\sigma_i^2)$は平均値$\mu_i$，分散$\sigma_i^2$の正規分布，$\xi_i$はそれぞれの確率分布の混合比を決めるパラメタである．
解のスコア付けが正しく行なわれ，スコア分布が混合分布であるという仮説が成り立つのであれば，スコアの平均値が大きい分布が正解集合がなす分布となる．
以降では，スコアの平均値の大きい方の分布から順に番号をつけ$\phi_1,\phi_2\ldots$とする．

解候補スコアの観測値の集合が与えられた場合，
式(\ref{Eq:MixtureDist})における各パラメタの推定は，EMアルゴリズムにより行なうことができる．
これらの分布のパラメタから次節で述べる手法により正解集合の分布と不正解集合の分布とが明確に分割できると判定できる場合には，スコアにより回答候補群を正解の群と不正解の群に分けられると判断する．

また，使用している優先順位型質問応答システムには，\ref{subsec:解生成}節に示すように，スコア付けに，多数決方式が採用されている．
この多数決スコアがスコアの分布に大きな影響を及ぼしていると考えられる（図\ref{fig:WeightedScore}）．複数回出現した解候補のスコアはその出現回数に応じて高くなり，
複数回出現した解候補のグループが，スコアの高い分布を形成しやすくなり，
分布が別れやすくなる．
このことについては\ref{sec:問題判定}節において実験，考察する．

\begin{figure}[t]
\small
\begin{center}
\includegraphics{16-1ia4f3a.eps} \\
(a) 多数決方式を用いない場合（同じ表現の解候補はスコアが高いものだけを使用）\\[1\baselineskip]
\includegraphics{16-1ia4f3b.eps} \\
(b) 多数決方式を用いた場合（出現回数が2以上の解候補のスコアが多数決方式により上昇）\\
\end{center}
\caption{多数決方式によるスコアの変化}
\label{fig:WeightedScore}
\end{figure}


\subsection{解候補スコアの分布の分割の明確さの判定}\label{sec:分布の判定}

スコアの降順で解候補が並んでおり，$i$番目の解候補を$AC_i$，その最終スコア$score_{raw}(AC_i)$を正規化したスコアを$score(AC_i)$とする．
解候補のスコアが明確に分割できるかどうかの判定は，
隣接した正規分布の平均値の差の値の最大値 ($\max_j \{\mu_j-\mu_{j+1}\}$)，
隣接解候補のスコアの差の最大値($\max_k \{score(AC_k)-score(AC_{k+1})\}$)に基づいて行なう．
これは，解候補を二群に分けるという観点において，隣接した正規分布の平均値の差の値の最大値($\max_j \{\mu_j-\mu_{j+1}\}$)が大きいほど，スコア分布が大きく二つのグループに分離できると考えられるからである．
また，
解の分布の如何によらず，解候補をスコアにしたがって二群に分けることを考えると，
最も素朴な手法は，
隣接する解候補のスコアの差が最も大きい箇所で分離するものであろう．
この時，その差の最大値が大きい時ほどスコアの分布が明確に二つに分かれると考えられる．

本稿では，以上の二つの指標，すなわち
\begin{description}
\item[分離指標1] $\max_j {\mu_j - \mu_{j+1}} \geq Th_{\mu_{\mathit{diff}}}$
\item[分離指標2] $\max_k \{score(AC_k)-score(AC_{k+1})\} \geq Th_{\mathit{diff}}$
\end{description}
を採用することとし，上記分離指標のいずれかを満たす場合を，スコアの分布が明確に分かれていると判断した．
ここで，$Th_{\mu_{\mathit{diff}}}$，$Th_{\mathit{diff}}$はそれぞれスコア分布が明確に分離できる
と判断する閾値である．

図\ref{fig:RealScore}は実際に質問応答システムが出力した
解候補のスコア分布の例である．
上位30件を採用した．
それぞれの質問文は，図\ref{fig:RealScore}(a)では「サッカーのワールドカップフランス大会で日本が対戦した国はどこですか。」（QAC2subtask2のテストセット中の質問．IDはQAC2-20055-01）
であり，知識源は毎日新聞，読売新聞それぞれの98年と99年の2年分の記事である．
図\ref{fig:RealScore}(b)では「小沢征爾はいつからボストン交響楽団の音楽監督を務めていましたか。」（QAC1のテストセット中の質問．IDはQAC1-1047-01）であり，知識源は毎日新聞の98年と99年の2年分の記事である．
棒グラフが実際の解の分布（ヒストグラム）を示しており，
実線がEMアルゴリズムにより推定された複数の分布，破線がその混合分布である．
図\ref{fig:RealScore}(a)は上位の解候補に正解が含まれている場合，
図\ref{fig:RealScore}(b)は上位の解候補に正解が含まれていない場合であり，
正解の位置はそれぞれの図に矢印で示してある．

\begin{figure}[t]
\small
\begin{center}
\includegraphics{16-1ia4f4a.eps}\\
 (a) 正解が上位に含まれているもの \\[1\baselineskip]
\includegraphics{16-1ia4f4b.eps} \\
 (b) 正解が上位に含まれていないもの \\
\end{center}
\caption{実際のスコアの分布}
\label{fig:RealScore}
\vspace{-0.5\baselineskip}
\end{figure}


上位に正解が含まれている場合（図\ref{fig:RealScore}(a)）
では
隣接した分布同士の平均値の差が，最大の所で0.16と大きく，
いくつかの分布が独立しているように見え，スコアの大きい分布と
小さい分布とに明確に分けられそうである．
それに対して，
上位の解候補に正解が含まれていない場合（図\ref{fig:RealScore}(b)）では
隣接した分布同士の平均値の差が最大の所でも0.05と小さくなっており，
全体で大きな一つの分布であるかように観察される．
このことから，大きく二つの分布に分けられるときには上位に正解があり，
そうでないときには上位に正解が含まれていないということが
期待される．


\subsection{分割する分布の数の決定}\label{sec:分布数判定}


分割する分布の数
（以下，分布数と表記）
は，スコアを正解集合と不正解集合に
分けると言う観点では二つと考えられるが，
二つの分布に分けた時にうまくいかない例が存在するため，
二つ以上のクラスタに分けることを考える．


二つの分布で分離した時にうまくいかない例を図\ref{fig:DistNum}に示す．
棒グラフが実際の解の分布（ヒストグラム）を示しており，
実線がEMアルゴリズムにより推定された二つ，もしくは三つの分布である．
図中の破線は，スコアが一番大きい分布を正解集合の分布と考えた場合の
正解分布と不正解分布の境界となるスコアの値であり，これより大きいスコアを持つ
解候補が回答として選ばれる．
二つの分布で分離した場合（図\ref{fig:DistNum}(a)）
を見ると，スコアが小さいところで一つの大きな分布が計算されており，
もう一つの分布はそれ以外の部分を被覆するように，
分散が大きな分布が計算されている．
二つの分布で分離し，スコアの高い方の分布を正解分布として回答選択をすると，
正解以外の解候補も多数回答に含まれてしまい，
回答の精度が悪くなってしまう．
一方，
三つの分布で分離した場合（図\ref{fig:DistNum}(b)）
を見ると，二つの場合と比べ，スコアが大きい分布が新たに
計算されている．
三つの分布で分離し，スコアの最も高い分布を正解分布として回答選択をすると，
余計なものを含まずに
正解を精度良く回答することが可能になる．

パラメタ調整用に用いた質問セット200問（QAC1の1〜50問目と101〜150問目及びQAC2の51〜150問目）では，
実際に上位に正解があるかどうかに関わらず，分布の形として
図\ref{fig:DistNum}と同様の傾向を持つ質問が約40問あった．
この様な例は，最上位の解候補のスコアと，最下位の解候補のスコアの差が
大きい時によく見られた．
最上位の解候補のスコアが，他の解候補よりも格段に高いスコアであった場合，
それが正解である可能性が高いと考えられる．
そのため，
図\ref{fig:DistNum}(a)の様に，二分布に分けた結果を用いて，多数の解候補を回答とするのは望ましくない．
図\ref{fig:DistNum}の例だけでなく，パラメタ調整用の質問セット中の
同様の質問においても，
図\ref{fig:DistNum}(b)の様に分布数を三つにすることで，
回答の数が不適当に多くなってしまうことをある程度解消できる
ことが分かった．

\begin{figure}[t]
\small
\begin{center}
\includegraphics{16-1ia4f5a.eps}\\
  (a) 二つの分布で分離した場合 \\[1\baselineskip]
\includegraphics{16-1ia4f5b.eps} \\
  (b) 三つの分布で分離した場合 \\
\end{center}
\caption{分離する分布の数の違い}
\label{fig:DistNum}
\end{figure}


このため，我々は二つに分けてうまくいかない例は三つにすれば
カバーできると考え，混合分布の数は二つか三つに限定した．

あるスコア群を二つの分布に分けるのか，三つの分布に分けるかの決定法には
以下のものが考えられる．
指標2，3は，EMアルゴリズムを用いて求められた分布と実際のスコアの並びを観察した結果得られたものである．

\begin{description}
\item [分布数決定指標1] MDL (minimum description length)\cite{MDL}を用いて最適な分布数を決定する．
MDLはパラメタで記述されたモデルのクラスからモデルを選択する基準である．
MDLの値が小さくなる方の分布を適切な分布とする．
MDLの値は以下のように計算する．
\begin{gather}
 MDL = - \log \mathit{\mathit{fit}}_m + \frac{3m-1}{2} \log N\\
 \mathit{fit}_m = \sum^{N}_{i=1} p_s(score(AC_i))\nonumber
\end{gather}
ここで，$m$は仮定する分布の数，$\mathit{fit}_m$は仮定した分布の数が$m$個のときの実際のスコア分布との適合度の度合であり，Nは優先順位型質問応答システムが出力した解候補の数である．
2項目の$3m-1$は，パラメタ数を表している．各分布には，混合比，平均値，分散という3つのパラメタがあるが，混合比は合計値が1と決まっているために，一つの分布については求める必要がない．そのため，パラメタ数は$3m-1$となる．
MDLの値が小さい方の分布数を採用する．

\item [分布数決定指標2] スコア分布を二つの分布の混合分布と仮定した時，スコアが大きい分布の分散と，小さい分布の分散の比率が閾値$Th_q$以上なら分布の数を三つに増やす． 
すなわち，スコア分布を二つの分布の混合分布とした時，$\sigma_1^2/\sigma_2^2 \ge Th_q$ならば，分布の数を三つにする．

これは，図\ref{fig:DistNum}
の例にあるように，二分布で分離した時にスコアの大きな分布が回答を多くとりすぎてしまう場合，スコアの小さいところで一つの大きな分布ができ，スコアの大きい方の分布はその他の部分を被覆するために，分散が大きな分布になっているという観察結果を基にしている．

\item [分布数決定指標3] スコア分布を二つの分布の混合分布と仮定した時，二分布の平均値の差が
閾値$Th_{\mu_r}$以上の時は，分布の数を三つにする．
すなわち，スコア分布を二つの分布の混合分布とした時，$\mu_1-\mu_2 \ge Th_{\mu_r}$ならば，分布の数を三つにする．

これは二分布の平均値の差の値が極近い分布では，全解候補中に正解があっても上位に位置していない場合が多いため，回答数が多くなる傾向にある二分布で正解判定をすると言う考えである．
\end{description}



\subsection{解候補の正解判定}\label{sec:回答判定}

解候補の正解判断では，まず，複数に分割した分布それぞれが正解集合の分布（以下，正解分布と呼ぶ）であるか，
不正解集合のそれ（以下，不正解分布と呼ぶ）であるかを判定する．
その後，正解分布に含まれる解候補を回答とする．
そのために，式(\ref{Eq:square})で定義される閾値$Th_s$を設け，
閾値以上のスコアを持つ解候補を回答とする．
\begin{gather}
Th_s = \argmax_t \{S_{correct}(t)-S_{incorrect}(t)\}
\label{Eq:square} \\
\begin{split}
{}& S_{correct}(t)= \sum_{i\in D_{correct}} \int^{\infty}_{t} \phi_i(x) dx \\
{}& S_{incorrect}(t)= \sum_{j\in D_{incorrect}} \int^{\infty}_{t} \phi_j(x) dx \\
{}& D_{correct} = 正解分布と判定された分布の番号の集合 \\
{}& D_{incorrest} = 不正解分布と判定された分布の番号の集合
\nonumber
\end{split}
\end{gather}

また，正解分布は以下のように決める．正解分布と判定されなかった分布は不正解分布とする．
\begin{description}
\item [分布数が二つの時] スコアの大きい方の分布を正解分布とする．
\item [分布数が三つの時] 以下のものが考えられる．
\begin{itemize}
\item スコアの大きい方からいくつめの分布までを正解分布とするかあらかじめ決めておく
\item 隣接分布間の距離が大きいところで正解分布と不正解分布とに分ける（$j=\linebreak\argmax_j \{\mu_j-\mu_{j+1}\}$となるとき，$j$番目の分布までを正解分布とする）．
\end{itemize} 
\end{description}

なお，この閾値を設けて回答を決める手法は，Murata et al \cite{Murata:JapaneseQAsystemUsingDecreasedAddingwithMultipleAnswers}などで用いられている，スコアの閾値に基づく手法に似ているが，
確率分布の上で閾値を設定している点が異なる．

\vspace{-0.5\baselineskip}
\section{考察}\label{Chapter:discussion}
 

\subsection{スコアの分布の分割の有効性}


\ref{sec:問題判定}節から\ref{sec:正解判断指標の有効性}節の結果より，
提案手法は，
ベースライン手法の候補の中で最も優れていた秋葉らの手法\cite{秋葉:質問応答における常識的な解の選択と期待効用に基づく回答群の決定}と同等以上の精度があることが分かった．
さらに秋葉らの手法に対し，スコアの分布を求めることにより，正解が適切に見つかっている質問を
判定できるという点で，本手法は優れている．

\ref{sec:分布の判定}節で
提案した分離指標を用いてスコアの分布が明確に分離できるかどうか
判断し，正解が適切に見つかっているか否かの判断をすることは可能である
ということが分かった．
しかし，正解が適切に見つかっている質問を全て抽出できているわけではない．
例えば，1位に正解があるような例でも適切に判断できないこともある．
これは，解候補のスコアの分布が明確だと判断する条件をある程度厳しくしている為だと考えられる．
条件を厳しくしているのは確実な質問についてのみ求解を行なうためである．
判断の基準を変えることによって，より確実な質問に重点をおくのか，
正解を見つけられていない質問を見つけることに重点をおくのかなどの
調整は可能である．

さらに，\ref{sec:分布数判定}節に示した分布数決定指標のうち，
経験則である分布数決定指標2を用いた手法が最も有効であることが分かった．
しかし，MDLを用いた分布数決定法は有効でないことが分かった．
この理由の一つとして，MDLの計算に用いるパラメタ数がある．
一つの分布につきパラメタは，混合比，平均値，分散と三つあるため，
分布が一つ増えただけでパラメタ数の増大が大きく，MDL値が大きくなりやすくなるため多くの質問のスコア分布が二つと判定されてしまったと考えられる．
しかし，それ以外の，精度が良くない原因
については現在調査中であり，今後の課題としたい．


\subsection{スコアの分布として仮定した確率分布の違いによる結果}

スコアの分布としてポアソン分布として仮定した場合，正規分布を
仮定した場合と比べて\ref{sec:他の分布}節の結果より
以下のことが言える．
\begin{enumerate}
\item 正規分布を仮定したときと同様に，\ref{sec:分布の判定}節で提案した分離指標を用いて，正解が適切に見つかっている質問を判定することが可能である．
\item 正解が適切に見つかっていると判断された質問については，正規分布を仮定した場合と同等のMMFである．
\item 正解が適切に見つかっていないと判断された質問については，MMFはとても低い．
\item 全体として，ポアソン分布を用いてリスト型質問応答を行ったときと，正規分布を用いた時では，ポアソン分布を
仮定した時の方が平均回答数が少なく，MMFがやや悪くなっている．
\end{enumerate}



\end{document}
