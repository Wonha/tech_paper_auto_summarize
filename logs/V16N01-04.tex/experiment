実験及び評価\label{Chapter:exp-eval}

NTCIR3 QAC1\cite{Fukumoto:QAC1}及びNTCIR4 QAC2のtask2（リスト型タスク）\cite{Fukumoto:QAC2Subtask12}のテストコレクションを用いて実験を行なった．
知識源は，QAC1の質問に対しては，毎日新聞の98年と99年の2年分の記事を用い，QAC2の問いに対しては，読売新聞と毎日新聞の98年と99年の2年分の記事を用いている．
また，優先順位型質問応答システムからの出力は上位10件を採用している．
リスト型質問の評価は一問あたりのF値の全質問平均の平均MF値（Mean Modified F-measure, MMF値）を用いる．
なお，ここでのF値は加藤らが提案する修正F値である\cite{加藤:リスト型質問応答の特徴付けと評価指標}．
すなわち，同じ解答もしくは同じものを表現する異なる表現を複数リストに含めた場合は，そのうちひとつだけを正解とし，それ以外は誤答とする．
また，正解のない質問には空リストを返した時にのみ1.0が与えられ，それ以外の場合はすべて0.0とする．

本節の構成は以下の通りである．\ref{sec:問題判定}節では正解が適切に見つかっている質問の判定に対する
分離指標の有効性を調べる．
特に，\ref{subsec:多数決}節では，多数決方式の違いによる結果の違いを見る．
多数決方式の有無やその方法により，スコアの分布が違ってくることが考えられ，
それにより正解が適切に見つかっている質問の判定をしたときの結果が違ってくる
ことが考えられる．
多数決方式を変えて\ref{sec:分離指標の有効性}節と同様の実験をし，その結果の違いを調べた．
\ref{subsec:他のスコア付け}節では，\ref{subsec:解生成}節に示した
スコア付け手法以外の手法でも，分離指標が有効かどうかを調べた．
また，多数決方式の有無による結果の違いが\ref{subsec:多数決}節での結果と
同様のものになるかどうかも実験した．

\ref{sec:相関}節では，用いた分離指標の妥当性を見るために，
スコアの分布が二つに明確に分割できると判断するための各尺度と
精度であるF値との相関関係を求めた．

\ref{sec:正解判断指標の有効性}節では，\ref{sec:回答判定}節に示した
正解判断のための閾値決定法及び\ref{sec:分布数判定}節に示した分布数判定指標の有効性を調べるために
実験を行なった．

\ref{sec:問題判定}節〜\ref{sec:正解判断指標の有効性}節では，
スコアの分布として正規分布を仮定して実験を行なっているが，
\ref{sec:他の分布}節では，正規分布以外の分布としてポアソン分布を
仮定し，\ref{sec:問題判定}節〜\ref{sec:正解判断指標の有効性}節の実験と
同様の実験をし，その結果が正規分布を用いた時と
同じような傾向になるかどうかを調べた．


\subsection{正解が適切に見つかっている質問の判定}\label{sec:問題判定}

本節では，NTCIR3 QAC1 \cite{Fukumoto:QAC1}及びNTCIR4 QAC2のtask2（リスト型タスク）\cite{Fukumoto:QAC2Subtask12}のテストコレクションを
平均正解数が同じになるように，二つの組に分け，一方をパラメタ調整用，もう一方を評価用とした．
パラメタ調整用の質問は，QAC1の1〜50問目と101〜150問目及びQAC2の51〜150問目の計200問である．
評価用の質問は，QAC1の51〜100問目と151〜200問目及びQAC2の1〜50問目と151〜200問目であり，うち一問が不適切な質問とされているため，計199問である．
パラメタ調整用のセットの平均正解数は2.31個，評価用のセットの平均正解数は2.33個である．


\subsubsection{分離指標の有効性}\label{sec:分離指標の有効性}

まず，分布の分割の明確さを判定することの有効性を見るために，スコアの分布の分離が明確な場合とそうでない場合とに分割し，それぞれの場合について\ref{sec:回答判定}節の手法で解候補の正解判定を行なった．
回答選択の手法は，
分布数の判定を行なわない手法を用いた．
\ref{sec:正解判断指標の有効性}節において，分布数の推定を行なっているが，
推定が失敗する可能性を考慮にいれて，分布数は固定とした．
ここでは，分布数の判定を行なわない手法の中で最もMMFが高い，
すべての質問において
三つの分布の混合分布であると仮定し，三つの分布のうち正解分布はスコアが一番大きい分布のみとした手法を用いている．

また，スコアの分布の分離が明確かどうかの判定には，\ref{sec:分布の判定}節で
述べた分離指標を用い，次のいずれかを満たすものをスコアの分布の分離が明確であると判断している．
以下で示している各パラメタは予備実験の結果に基づきその値を決定した．
予備実験ではパラメタ調整用の質問セットを用い，それぞれの閾値を0.01単位で動かした時に，正解が適切に求められている質問（解候補中に正解があり，かつそれらが上位に順位づけされている）とそうでない質問とを有効に分けられるかどうかの結果を基に決定した．
\begin{align}
Th_{\mu_{\mathit{diff}}} & = 0.25 \\
Th_{\mathit{diff}} & = 0.2
\end{align}

評価用の質問セットについて
上記閾値に基づき\ref{sec:分布の判定}節の分離指標により，スコアの分布の分離が明確な場合とそうでない場合とに分割した時の
平均回答数とMMFを表\ref{tab:分布の分割の違い}に示す．

表\ref{tab:分布の分割の違い}によると，分布の分割が明確な場合と不明確な場合とでMMFに明確な差がでている．
また，分布の分割が明確な場合，平均回答数を見ると正解の平均数よりも
少ない傾向にあるが，MMFが高く，選んだ回答群の精度が良いことが窺える．
分布の分割が不明確な場合には平均回答数が多くなっており，平均正解数に
近い値ではあるが，MMFは低く，回答の精度が低いことが分かる．

\begin{table}[b]
\caption{スコアの分布の分離の明確さの違いによる平均回答数とMMFの違い}
\label{tab:分布の分割の違い}
\begin{center}
\input{04table01.txt}
\end{center}
\end{table}

このことから，提案手法により正解が見つかっており，かつそれが上位に順位づけされている
質問のみを抽出することがある程度可能であることが分かる．


\subsubsection{多数決方式の違いによる精度の違い}\label{subsec:多数決}

多数決方式による解候補のスコア付けは，解候補のスコア分布に
大きな影響を与えていると考えられる．
多数決方式を用いた場合，複数投票が入った解候補はスコアが高くなり，
回答として選ばれやすくなる．
まず，複数投票が入った解候補の有無（多数決方式による
スコアの変化の有無）という観点で質問文を分けた時の精度の違いを求めた．
結果を表\ref{tab:複数投票}に示す．

\begin{table}[b]
\caption{複数投票が入った解候補がある質問と無い質問とでの平均回答数とMMF}
\label{tab:複数投票}
\begin{center}
\input{04table02.txt}
\end{center}
\end{table}

表\ref{tab:複数投票}より，複数投票が入った解候補がある場合と無い場合とで，
精度に大きな差があるのが分かる．
このことより，解候補が適切に見つかっているかどうかの判定に，
複数投票が入った解候補のある，なしという情報も使えるということが分かる．
表\ref{tab:分布の分割の違い}と比べると，
スコアの分布の分割が明確な場合と，複数投票が入った解候補がある場合とでは
スコアの分布の分割が明確な場合の方がMMFが高く，より正解が適切に見つかっている質問を抽出できている．
スコアの分布の分割が不明確な場合と，複数投票が入った解候補がない場合とでは
複数投票が入った解候補がない場合の方がMMFが低く，より正解が見つかっていない質問を抽出できると考えられる．

また，多数決方式を利用したスコアの分布と
多数決方式を利用しない場合のスコア分布の違いを見るために，
分離指標を用いた以下の実験も行なった．
多数決方式によってスコアが変化するのは，複数投票が入った質問のみであるので，
表\ref{tab:複数投票}において，
複数投票が入った解候補があった121問に対して，
優先順位型質問応答システムの解スコアを利用してリスト型質問応答を実行した．
\ref{subsec:解生成}節に示した頻度に対する上がり具合を調整する
多数決方式（以後，最大値乗算方式と呼ぶ）の他に，
複数投票があった場合，その解候補のスコアを単純に加算する多数決方式（以後，単純加算方式と呼ぶ）を用いた場合
及び，
多数決方式を用いない場合，それぞれについて，分布の分割が明確かどうかを
分けたときの，平均回答数とMMFを求めた．

\ref{sec:分布の判定}節で述べた，分布が明確に分離できるかどうかの
各分離指標のパラメタは，
\ref{sec:分離指標の有効性}節と同様の予備実験を行ない，以下のように決定した．
この時に使用した質問は，質問セット中の，複数投票が入った質問のみである．

\begin{itemize}
\item 最大値乗算方式の多数決方式を用いた場合
\begin{align}
Th_{\mu_{\mathit{diff}}} & = 0.3 \\
Th_{\mathit{diff}} & = 0.25
\end{align}
\item 単純加算方式の多数決方式を用いた場合
\begin{align}
Th_{\mu_{\mathit{diff}}} & = 0.5 \\
Th_{\mathit{diff}} & = 0.5
\end{align}
\item 多数決方式を用いない場合
\vspace{-0.5\baselineskip}
\begin{align}
Th_{\mu_{\mathit{diff}}} & = 0.15 \\
Th_{\mathit{diff}} & = 0.1
\end{align}
\end{itemize}

結果を表\ref{tab:多数決方式による結果の違い}に示す．

表\ref{tab:多数決方式による結果の違い}より，どの手法においても
分布の分割が明確な場合と不明確な場合で，MMFに大きく差が出ている．
このことから，
多数決方式の違いに関わらず，
分布の分割の明確さをみることで，
正解が適切に見つかっている質問を抽出することが，ある程度可能であることが
分かる．

また，表\ref{tab:多数決方式による結果の違い}での，121問全体のMMFの違いを見てみると，\ref{subsec:解生成}節に示した頻度に対する上がり具合を調整する
最大値乗算方式を用いた場合で0.446と最も高い値となっている．

最大値乗算方式を用いた場合のMF値と
単純加算方式や多数決方式を用いない場合でのMF値との
間に統計的有意差があるか，
表\ref{tab:多数決方式による結果の違い}で用いた121問で
ウィルコクソンの符合付順位和検定（両側検定）によって
求めた．
その結果，
最大値乗算方式と単純加算方式との間で
有意水準5\%で統計的有意差があったが($p=0.033<0.05$)，
最大値乗算方式と多数決方式を用いない場合との間では，
統計的有意差は認められない($p=0.23$)ということが分かった．

\begin{table}[t]
\caption{多数決方式の違いによる結果の違い}
\label{tab:多数決方式による結果の違い}
\begin{center}
\input{04table03.txt}
\end{center}
\end{table}


\subsubsection{スコア付け手法の違いによる精度の違い}\label{subsec:他のスコア付け}

\ref{subsec:解生成}節で示した以外の解候補のスコア付け手法でも
分離指標が有効に働くかどうかを調べるために，
質問文中のキーワードと解候補との距離に基づいた単純なスコア付け方法を
用いて同様の実験を行なった．
この距離に基づいたスコア付け手法は，構文解析を用いずに解候補のスコアを決定する素朴な手法である．この手法では，全てのキーワードからの距離が近い解候補ほど
大きなスコアが与えられる．
このスコア$S_{dist}(mor)$は，式(\ref{Eq:distance})によって与えられる．
ここで，$K_n$は質問文中の$n$番目のキーワードである．
\begin{gather}
S_{dist}(mor)=\sum_n \frac{1}{\log dist(mor,K_n)+1}
\label{Eq:distance} \\
\begin{split}
{}&dist(mor,K_n) \\
 & \qquad = 解候補となる形態素morとキーワードK_nとの間の距離を形態素単位で計ったもの
\end{split} \nonumber
\end{gather}
この手法でも，探索制御において，同じ解が複数回求められた場合には\ref{subsec:解生成}節で
示した多数決方式を用いて最終的なスコアを求めている．
スコアの分布が明確に分離できるかどうかの各パラメタは，パラメタ調整用質問セットを用いた予備実験の結果以下のように決定した．
\begin{align}
Th_{\mu_{\mathit{diff}}} & = 0.25 \\
Th_{\mathit{diff}} & = 0.2
\end{align}

解候補のスコア分布は，\ref{sec:分離指標の有効性}節と同じく三つの分布の混合分布であると仮定し，
三つの分布のうち正解分布はスコアが一番大きい
分布のみとしている．

スコア分布が明確に分割できる質問とそうでない質問とに分けた時の平均回答数とMMFを表\ref{tab:距離スコアでの分割}，複数投票が入った解候補がある場合とない場合とで分けた時の同様の結果を表\ref{tab:距離スコアで複数投票}に示す．

\begin{table}[b]
\vspace{-1\baselineskip}
\hangcaption{距離に基づいたスコアを使った時の，スコアの分布の分割の度合の違いによる
平均回答数とMMFの違い}
\label{tab:距離スコアでの分割}
\begin{center}
\input{04table04.txt}
\end{center}
\end{table}
\begin{table}[b]
\hangcaption{距離に基づいたスコアを使った時の，複数投票が入った解候補がある質問とない質問との結果の違い}
\label{tab:距離スコアで複数投票}
\begin{center}
\input{04table05.txt}
\end{center}
\end{table}

表\ref{tab:距離スコアでの分割}，表\ref{tab:距離スコアで複数投票}より，
分布の分割が明確な場合とそうでない場合，
また複数投票が入った解候補がある場合とない場合とで
MMFに明確な差がでているのが分かり，\ref{subsec:解生成}節で示した解候補のスコア付け法を用いた場合と同様の結果が得られた．
分布の分割が明確な場合は正解が適切に見つかっている質問を
抽出でき，複数投票が入った解候補がない場合では正解が適切に見つかっていない
質問を抽出できるという傾向も同じである．

距離に基づいたスコア付け方法でも\ref{subsec:多数決}節と同様に，
多数決方式を利用したスコア分布と多数決方式を利用しない場合のスコア分布の違いを見るための，分離指標を用いた
実験を行なった．
表\ref{tab:距離スコアで複数投票}において複数投票が入った解候補があった
125問に対して，
リスト型質問応答を実行した．
分布の分割が明確かどうかの判断のためのパラメタは，予備実験の結果，以下のように決定した．
その結果を表\ref{tab:距離スコアで多数決}に示す．

\begin{table}[b]
\caption{距離に基づいたスコアを使った時の，多数決方式のあるなしによる精度の違い}
\label{tab:距離スコアで多数決}
\vspace{-0.5\baselineskip}
\input{04table06.txt}
\end{table}

\pagebreak

\begin{itemize}
\item 最大値乗算方式の多数決方式を用いた場合
\begin{align}
Th_{\mu_{\mathit{diff}}} & = 0.25 \\
Th_{\mathit{diff}} & = 0.2
\end{align}
\item 多数決方式を用いない場合
\begin{align}
Th_{\mu_{\mathit{diff}}} & = 0.1 \\
Th_{\mathit{diff}} & = 0.1
\end{align}
\end{itemize}

表\ref{tab:距離スコアで多数決}より，
いずれの場合でも，ある程度正解が適切に見つかっている質問を
分けることができた．
また多数決方式を用いた場合とそうでない場合とではMF値について，125問全体を対象にした時のMF値にも差が出ているが，統計的有意差は認められない（ウィルコクソンの符合付順位和検定（両側検定）で，$p=0.31$）．

距離に基づいたスコア付け手法を利用した際にも
分離指標が有効であること，
複数投票が入った解候補がある質問とない質問で精度に大きく差がでること
などから本論文で提案した解候補の分割の指標及び解候補の選択手法は
解候補に対するスコア付け手法が単純なものであっても，
有効であると考えられる．


\subsection{スコアの分布が二つに分離できると判断するための各尺度の間の相関関係}\label{sec:相関}

\begin{table}[b]
\vspace{-0.5\baselineskip}
\caption{スコアの分布が二つに分離できると判断するための各尺度の相関関係}
\label{tab:正規分布の各尺度の相関係数}
\begin{center}
\input{04table07.txt}
\end{center}
\end{table}

分離指標としていた尺度の妥当性の検証のために，スコアの分布の分離指標として用いていた
各尺度と回答精度であるMF値との相関関係を調べた．
ここで用いた質問は，QAC1の51〜100問目と151〜200問目及びQAC2の1〜50問目と151〜200問目（うち一問が不適切な質問とされている）の計199問である．
相関を求める際，MF値は質問毎に，優先順位型質問応答システムの出力のうち
上位n件に対する解候補のF値をnを変化させて求め，その最大値
（以後最大F値と表す）を用いている．
相関を求めた結果を表\ref{tab:正規分布の各尺度の相関係数}に示す．表中の値はピアソンの相関係数である．
$\mu_{\mathit{diff}}(2)$は，スコア分布を二つの分布の混合分布としたときの，二つの正規分布の平均値の差，$\mu_{\mathit{diff}}(3)$は，スコア分布を三つの分布の混合分布したときの，隣接した正規分布の平均値の差の大きい方，
$max_{\mathit{diff}}$は隣接スコアの差の最大値($max_{\mathit{diff}}=\max_j \{score(AC_j)-score(AC_{j+1})\}$)，を表している．
以上の値に注目したのは，
$\mu_{\mathit{diff}}$と$max_{\mathit{diff}}$はその値が大きいほどスコア分布は分布は明確に分離できると期待できるためである．


表\ref{tab:正規分布の各尺度の相関係数}より，各尺度間には非常に強い相関があることがわかる．また，各尺度と最大MF値にも相関があることが示されている．
最大F値が高い質問は上位に正解が集まっている質問といえる．
各尺度と最大MF値との間に相関関係があるということから，各尺度が，
正解が上位に順位付けされている質問を抽出するための
分離指標として，利用可能である
考えられる．


\subsection{正解判断指標の有効性}\label{sec:正解判断指標の有効性}

\ref{sec:回答判定}節で提案した回答選択手法の有効性を調べるために，実験を行なった．
提案手法では，
「分布数の決定法」ならびに
「分布数が三つの場合の正解分布の決め方」
に各々数種類ずつ選択肢がある．
また，比較対象であるベースラインとなる手法についても様々な観点からいくつかの候補がある．
そのため，
QAC1及びQAC2のテストコレクションをパラメタ調整セット，開発セット，
評価用セットの三つに分けた．
まず，パラメタ調整セットにより各パラメタを調整する．
そして，開発セットによって，有効なベースライン手法及び，
提案手法における各選択肢の有効な組合せを決定した後，
テストセットによって，ベースライン手法と提案手法の精度の比較を行なう．
パラメタ調整用の質問セットは，QAC1の34〜66問目，167〜200問目及びQAC2の1〜33問目，134〜166問目（計133問，平均正解数2.32個），
開発用の質問セットは，QAC1の67〜133問目及びQAC2の34〜66問目，167〜200問目であり，うち一問が不適切な質問とされている（計133問，平均正解数2.34個）．
評価用の質問セットは，QAC1の1〜33問目，134〜166問目及びQAC2の67〜133問目（計133問，平均正解数2.29個）である．


\subsubsection{ベースライン手法の決定}\label{subsubsec:ベースライン}

ベースライン手法の候補として，先行研究を考慮し以下のものを検討する．
\begin{itemize}
\item スコアの値の上位から決まった個数の解候補を回答とする手法．
\item スコアの値に単純な閾値を設ける手法．$score(AC_i) \ge  Th_r$なる$AC_i$のリストを回答とする．ただし，提案手法が式(\ref{Eq:square})で求める値と違い，$Th_r$は全問に共通の一定の値である．また，$score(AC_i)$は最大値が1になるように正規化されていることに注意されたい．
\item 秋葉ら\cite{秋葉:質問応答における常識的な解の選択と期待効用に基づく回答群の決定}の手法を用いて回答する手法．
\end{itemize}

質問の正解数の平均は約2.3個であるため，決まった個数の解候補を回答とする手法では，回答とする解候補の数を1〜3個の場合それぞれについて結果を求めた．

スコアの値に単純な閾値を設ける手法での閾値$Th_r$は，値を0.5から0.99まで0.01刻みで変えていき，パラメタ調整用の質問セットで
最もMMFが高かった以下の値を採用した．
\begin{equation} 
 Th_r = 0.78
\end{equation}

開発セットにおけるベースライン手法の各候補の精度を，
\pagebreak
表\ref{tab:ベースライン手法，開発セット}に示す．
表中の再現率，適合率はそれぞれ，

再現率＝全質問に対する正答数／全質問の正解数の合計，

適合率＝全質問に対する正答数／全回答数，\\
と計算した．ここで，正答数とは，回答中に現れた正解の数であり，全回答数
は，全質問に対する回答数である．
表中のMMFは上記の再現率，適合率から求めた値ではなく，
それぞれの質問のMF値の全質問平均であることに注意されたい．

\begin{table}[t]
\caption{開発セットにおけるベースライン手法の精度}
\label{tab:ベースライン手法，開発セット}
\begin{center}
\input{04table08.txt}
\end{center}
\end{table}


表\ref{tab:ベースライン手法，開発セット}より，MMF値が最も高い秋葉らの手法を，提案手法と比較するベースライン手法として採用する．


\subsubsection{提案手法における，「分布数の決定法」及び，「分布数が三つの場合の正解分布の決定法」の組合せの決定}\label{subsubsec:提案手法}

提案手法では回答は\ref{sec:回答判定}節の式(\ref{Eq:square})で
求められる閾値以上のスコアを持つ解候補を回答とする．
ここで，「分割する分布数の決定法」及び，「分割されたいくつかの分布のうち，どこまでを正解分布とするかの決定法」についてそれぞれいくつかの候補が存在する．
本節では，開発セットを用いて，「分布数の決め方」と「分布数が三つの場合の正解分布の決め方」の最も良い組合せを選ぶ．

分布数が二つの時は，スコアの大きい方の分布が正解分布となる．
分布数が三つの時の正解分布の決め方として，以下の三種類を検討する．
\begin{description}
\item[固定(1)] 最もスコアが大きい分布を正解分布とする．
\item[固定(2)] スコアが大きい方から二つ目の分布までを正解分布とする．
\item[可変] 隣接分布の平均値の差が大きいところで正解分布と不正解分布とに分ける（$j=\linebreak\argmax_j \{\mu_j-\mu_{j+1}\}$となるとき，$j$番目の分布までを正解分布とする）)．
\end{description}

また，分布数の決定法は以下の場合を検討する．
\begin{itemize}
\item 分布数をあらかじめ決定しておく．
\item \ref{sec:分布数判定}節の分布数決定指標1を用いて分布数を決定する．
\item \ref{sec:分布数判定}節の分布数決定指標2を用いて分布数を決定する．
\item \ref{sec:分布数判定}節の分布数決定指標3を用いて分布数を決定する．
\item \ref{sec:分布数判定}節の分布数決定指標2と3の両方を用いて分布数を決定する．分布数決定指標2と同3の両方で分布数が三つと判定された質問だけを分布数が三であると仮定し，それ以外は分布数を二と仮定する．
\end{itemize}

各候補の組合せを表\ref{tab:設定組合せ}に示す．表\ref{tab:設定組合せ}では，
それぞれの設定において，パラメタ調整用のセットで調整する必要がある
パラメタ名を併せて示している．

\begin{table}[b]
\hangcaption{提案手法の「分布数の決定法」と「分布数が三つの場合の正解分布の決定法」のそれぞれの候補の設定の組合せ}
\label{tab:設定組合せ}
\begin{center}
\input{04table09.txt}
\end{center}
\end{table}


分布数決定指標2のパラメタ$Th_q$はパラメタ調整用の質問セットを用いて，値を1から10まで0.5刻みで変えて実験した結果，式(\ref{Eq:Th_q})の通りに決定した．
また，分布数決定指標3のパラメタ$Th_{\mu_r}$はパラメタ調整用の質問セットを用いて，値を0.01から0.2まで0.01刻みで変えて実験した結果，式(\ref{Eq:Th_mu_r})の通りに決定した．
\begin{align} 
Th_q & = 2.5 \label{Eq:Th_q}\\
Th_{\mu_r} & = 0.15 \label{Eq:Th_mu_r}
\end{align}

「分布数の決定法」と「分布数が三つの場合の正解分布の決定法」のそれぞれの候補の組合せにおける求解精度を表\ref{tab:提案手法，開発セット}に示す．

\begin{table}[b]
\hangcaption{開発セットにおける，「分布数の決定法」と「分布数が三つの時の正解分布の決定法」のそれぞれの候補の組合せにおける求解精度}
\label{tab:提案手法，開発セット}
\begin{center}
\input{04table10.txt}
\end{center}
\end{table}


表\ref{tab:提案手法，開発セット}より，最もMMF値が高い，
「分布数決定指標2で分布数を決定し，分布数が三つの場合には最もスコアが高い分布のみを正解分布とする手法」を最終的な提案手法とする． 


\subsubsection{提案手法とベースライン手法の精度比較}

評価用の質問セットを用いて，\ref{subsubsec:ベースライン}節及び\ref{subsubsec:提案手法}節で
\pagebreak
選んだベースライン手法と提案手法の精度の比較を行なった．
ベースライン手法は秋葉らの手法\cite{秋葉:質問応答における常識的な解の選択と期待効用に基づく回答群の決定}である．
提案手法は，\ref{sec:分布数判定}節の分布数決定指標2で分布数を決定し，分布数が三つの場合には最もスコアが高い分布のみを正解分布とし，\ref{sec:回答判定}節の式(\ref{Eq:square})で
求められる閾値以上のスコアを持つ解候補を回答とする手法である．
分布数決定指標2のパラメタ$Th_q$の値は2.5である．

結果を表\ref{tab:提案手法vsベースライン}に示す．

\begin{table}[b]
\caption{評価用セットにおける，提案手法とベースライン手法の精度比較}
\label{tab:提案手法vsベースライン}
\begin{center}
\input{04table11.txt}
\end{center}
\end{table}


表\ref{tab:提案手法vsベースライン}より，提案手法のMMF値がベースライン手法を若干上回っていることが分かる．
ただし，この差に統計的有意差は無く（ウィルコクソンの符合付順位和検定（両側検定）でのp値=0.453），同等の精度であるといえる．
一方で，再現率と適合率を見ると，再現率には大きな差がないのに対し，適合率は
提案手法の方が大きく勝っている．
再現率を下げずに平均回答数を
少なくすることに成功していることが分かる．


\subsection{スコアの分布に正規分布以外の分布を使った時の求解精度}\label{sec:他の分布}

本研究では，スコアの分布として，正規分布を仮定して分布を求めていた．
これは，統計学における中心極限定理に根拠をおいている．
しかしながら，正規分布による近似が最適であるという保証はない．

一方，言語処理において，単語の出現頻度の確率分布は，
ポアソン分布に近似できるといわれている．
ポアソン分布は，一定の期間や一定の大きさの空間において，ごく稀に起こる
現象の確率分布である
そこで本節では，スコアの確率分布をモデル化する正規分布以外の分布として，ポアソン分布を仮定し，正規分布の場合と同様の求解手順により求められた解の精度を調べることとする．

ポアソン分布は二項分布の特殊例で，
二項分布の期待値と分散が等しい場合となる．
ポアソン分布の式は以下のように表される．
\begin{equation}
p(x) = \frac{e^{-\lambda} \cdot \lambda^{x}}{x!} \hspace{20pt}x=0,1,2\cdots
\end{equation}

ここで，$\lambda$は平均値で，0以上の値をとる．解候補スコアの分布を
ポアソン分布と仮定して，同じようにEMアルゴリズムで分離した．
ポアソン分布は離散分布であるので，解候補のスコアを非負の整数で表現する
必要がある．そこで，最大値を100とするために正規化スコアを100倍し，
小数点以下は四捨五入したものを用いた．


\subsubsection{仮定する分布の違いによるスコア分布の違い}

図\ref{fig:Poisson}(a)は優先順位型質問応答システムが出力した，上位30件の正規化した解候補スコアのヒストグラム（ヒストグラムのデータ区間は0.04毎）であり，実線はハニング窓関数を用いてスコアの密度分布を求めたものである（ハニング窓関数の窓幅は0.02）．
図\ref{fig:Poisson}(b)は正規分布，ポアソン分布それぞれの混合分布でスコア分布を近似したものである．ハニング窓関数を用いて求めた密度分布がだいたい三つの分布
から成り立っているように観察できるため，分布数は三つとしている．
正規分布の混合分布とポアソン分布の混合分布を比べると，ポアソン分布の混合分布の方が，なだらかに変化しており，分布の切れ目が判断しづらい．
図\ref{fig:Poisson}(a)のハニング窓関数を用いて平滑化したものと図\ref{fig:Poisson}(b)の
各分布を比べてみると，
正規分布で近似したもののほうが類似しているのが見てとれる．
このことから，正規分布の方がより正確に近似できていると言えそうである．
この違いは，ポアソン分布のパラメタ数と正規分布のパラメタ数の差から来ている．ポアソン分布ではパラメタが平均値$\lambda$のみであるのに対し，正規分布では平均値$\mu$と分散$\sigma^2$があるため，実際のスコア分布に対する近似はパラメタ数の多い正規分布の方が優れていると考えられる．

\begin{figure}[t]
\small
\begin{center}
\includegraphics{16-1ia4f6a.eps}\\
 (a) スコアのヒストグラム \\[1\baselineskip]
\includegraphics{16-1ia4f6b.eps}  \\
 (b) 混合分布\\
\end{center}
\caption{仮定するスコアの分布による混合分布の違い}
\label{fig:Poisson}
\end{figure}


\subsubsection{ポアソン分布を仮定した場合のリスト型質問応答}\label{subsec:ポアソンでの精度}

解候補スコアの分布として正規分布を仮定した場合とポアソン分布を仮定した場合の
違いを比較する．
用いた質問の内訳は\ref{sec:問題判定}節と同様で，
パラメタ調整用の質問は，QAC1の1〜50問目と101〜150問目及びQAC2の51〜150問目の計200問（平均正解数2.31個）である．
評価用の質問は，QAC1の51〜100問目と151〜200問目及びQAC2の1〜50問目と151〜200問目（うち一問が不適切な質問とされている）の計199問（平均正解数2.33個）である．

まず，\ref{sec:分布の判定}節の分離指標を用いて，回答が適切に見つかっている質問の判定ができるかどうか実験を行なった．分離指標に関する各パラメタは予備実験の結果，以下のように決定した．
予備実験ではパラメタ調整用の質問セットを用い，それぞれの閾値を0.01単位で動かした時に，正解が適切に求められている質問（解候補中に正解があり，かつそれらが上位に順位づけされている）とそうでない質問とを有効に分けられるかどうかの結果を基に決定した．
\begin{align}
Th_{\mu_{\mathit{diff}}} & = 0.2 \\
Th_{\mathit{diff}} & = 0.2
\end{align}

ここでは，すべての質問において，
解候補のスコア分布は，三つの分布の混合分布であるとし，三つの分布のうち正解分布はスコアが一番大きい
分布のみとしている．
結果を表\ref{tab:分布の分割の違いポアソン}に示す．

\begin{table}[b]
\caption{ポアソン分布を仮定した時のスコアの分布の分割の度合の違いによる平均回答数とMMFの違い}
\label{tab:分布の分割の違いポアソン}
\begin{center}
\input{04table12.txt}
\end{center}
\end{table}

表\ref{tab:分布の分割の違いポアソン}より，分布の分割が明確な場合と
不明確な場合とでMMFに差がでており，ポアソン分布を仮定した場合にも，
正解が適切に見つかっている質問を判定するのに分離指標は有効であるといえる．
ただし，この結果は表\ref{tab:分布の分割の違い}とは少し違い，
分布の分割が不明確な質問のMMFがかなり低く，どちらかといえば，
正解が適切に見つかっていない質問の判定に適しているといえる．

次に，解候補スコアの分布として正規分布を仮定した場合とポアソン分布を仮定した場合の，リスト型質問応答としての精度の違いを比較する．
ここでは，すべての質問において，
解候補のスコア分布は，三つの分布の混合分布であるとし，三つの分布のうち正解分布はスコアが一番大きい
分布のみとしている．

結果を表\ref{tab:ポアソン分布を用いた場合}に示す．
表中の再現率と適合率の値については\ref{sec:正解判断指標の有効性}節でのものと
計算法は同じである．

\begin{table}[b]
\caption{スコアの分布とリスト型質問応答の精度の違い}
\label{tab:ポアソン分布を用いた場合}
\begin{center}
\input{04table13.txt}
\end{center}
\end{table}

表\ref{tab:ポアソン分布を用いた場合}より，
MMFにやや差がでており，正規分布を仮定した場合の方が精度が良くなっている．
ただし，ポアソン分布を仮定した場合と正規分布を仮定した場合とでは，
MF値について，ウィルコクソンの符合付順位和検定（両側検定）を行った結果，統計的有意差は認められなかった($p=0.089$)．
また，ポアソン分布を仮定した場合と正規分布を仮定した場合の平均回答数は，ポアソンを仮定した場合の方が少なめである．
再現率と適合率を見ても，平均回答数が少なめのポアソン分布の方は
適合率が高くなっており，平均回答数が多めの正規分布では
ポアソン分布を仮定した場合と比べ，
再現率が高く，適合率が低くなっており，
傾向が違っているのが観察される．


\subsubsection{ポアソン分布を仮定した際のスコアの分布が二つに分離できると判断するための各尺度の相関関係}

\ref{sec:相関}節と同様に，ポアソン分布を仮定した際のスコアの分布が二つに分離できると判断するための各尺度と最大MF値の相関係数を
求めた．
用いた質問は，\ref{sec:相関}節と同様，QAC1の51〜100問目と151〜200問目及びQAC2の1〜50問目と151〜200問目（うち一問が不適切な質問とされている）の計199問である．

\begin{table}[t]
\hangcaption{ポアソン分布を仮定した際の，スコアの分布が二つに分離できると判断するための各尺度の相関関係}
\label{tab:ポアソン分布の各尺度の相関係数}
\begin{center}
\input{04table14.txt}
\end{center}
\end{table}

その結果を表\ref{tab:ポアソン分布の各尺度の相関係数}に示す．
表中の値はピアソンの相関係数である．
$\mu_{\mathit{diff}}(2)$は，スコア分布を二つの分布の混合分布としたときの，二つの正規分布の平均値の差，$\mu_{\mathit{diff}}(3)$は，スコア分布を三つの分布の混合分布したときの，隣接した正規分布の平均値の差の大きい方，
$max_{\mathit{diff}}$は隣接スコアの差の最大値($max_{\mathit{diff}}=\max_j \{score(AC_j)-score(AC_{j+1})\}$)，を表している．

表\ref{tab:ポアソン分布の各尺度の相関係数}より，\ref{sec:相関}節での
結果と同様の傾向を持つ結果となっているのが分かる．
この結果より，
スコア分布を二つの分布の混合分布としたときの，二つの正規分布の平均値の差や，スコア分布を三つの分布の混合分布したときの，隣接した正規分布の平均値の差の大きい方，
という尺度は，ポアソン分布，正規分布のいずれの分布を仮定した時でも
有効な指標であると考えられる．



