評価実験\label{sec_expeval}

\subsection{評価方法}\label{eval_method}

本論文の評価はシステムが付与したランキングの上位文書がより多くの人に興味
を持たれているかを確認する事である．
実際の順位が付与された文書を含む文書群を入力とし，
システムが付与した順位と実際の順位を比較することで評価を行った．
このとき実際に付与されている順位を正解として扱っている．

本論文ではシステムの出力順位と実際の順位が近似しているほど
高精度であると考え，評価式は相関係数を求めるSpearmanの順位相関係数
\cite{Spearman}
を基に式を拡張して用いた．
Spearmanの順位相関係数$\gamma$を式(\ref{spearman})に示す．
式(\ref{spearman})において$n$は入力順位の総数，$d_i$は$i$番目に入力された
2つの順位$x_i$, $y_i$の差分を示している．
\begin{gather}
 \gamma = 1 - 6 \cdot \frac{\sum_{i=1}^{n}(d_i)^2}{n\cdot(n^2-1)} 
	\label{spearman}\\
 d_i=x_i-y_i
	\label{spearman2}
\end{gather}

本論文における精度はシステムの出力した順位と実際の順位が
類似するほど精度が高いとする．

本評価では式(\ref{spearman2})を式(\ref{eval2})の様に変更
して評価式として扱う．式(\ref{eval2})において$m$番目に
システムが出力した順位と正解順位の対を$Rank\_Sys_{m},Rank\_Ans_{m}$と示す．
\begin{gather}
 d_m = 
 \begin{cases}
  Rank\_Sys_{m} - Rank\_Ans_{m}, & if~exist\ Rank\_Ans_{m} \\
  0 , & otherwise
 \end{cases}
	\label{eval2}\\
 Rank\_Sys_{m} = m
	\label{eval3}
\end{gather}

式(\ref{eval2})を使った場合
式(\ref{spearman})において，$n$は入力文書の総文書数を
示し，$i$はシステム出力の順位，$d_i$はシステムの順位と実際の順位との差を
示している．ただし順位の差を計算する上で実際の順位とシステムの順位の両方
の値を持つ文書のみに対して順位差$d_i$を計算を行う．
これは正解の順位が正確に得ることが出来ないためである．
評価式は以下に示す情報が反映されている．
\begin{itemize}
\item 実際の順位とシステムの順位の差
\item 興味を持たれなかった記事がシステムの上位に出現する数
\end{itemize}

評価式において上記の項目が大きい値を持つとき評価値を下げることになる．
評価式は$-1$から1までの値をとり，評価式の結果が1に近づくほどシステム出力の順位と実際の順位が近いことを示す．
評価値が1に近づくことは
システムが大衆の選択した文書に
高い順位を与え，
さらにシステムの出力した順位と正解の順位が近いことを示す．
また評価の結果が1の時，システムの出力した順位と実際の順位に差が全くないことを
示している．
評価式を使った計算を\exref{evalex}に示す．

\begin{itembox}{\ex{}\label{evalex}様々な正解に対する評価値の計算}
入力文書数を10文書とし正解が1位，2位，3位の3つの場合の計算を示す．
空欄は順位が無いことを示している．
\vspace{0.5zw}
\begin{center}
{\small
\begin{tabular}{c|cccccccccc}
\hline
システム順位&1&2&3&4&5&6&7&8&9&10 \\
\hline
正解順位1&1&&2&3&&&&&& \\
正解順位2&3&&1&&&&2&&& \\
正解順位3&1&2&3&&&&&&& \\
正解順位4&&&&&&&&3&2&1 \\
正解順位5&&&&&&&&1&2&3 \\
\hline
\end{tabular}
}\end{center}
\vspace{0.5zw}
各評価値の計算を以下に示す．\\
{\setlength{\baselineskip}{12pt}
正解1：$1 - 6 \cdot ({0+1^2+1^2}) \div ({10\cdot(10^2-1)}) = 0.99$\\
正解2：$1 - 6 \cdot ({-2^2+2^2+5^2})\div({10\cdot(10^2-1)}) = 0.81 $\\
正解3：$1 - 6 \cdot ({0+0+0})\div({10\cdot(10^2-1)}) = 1 $\\
正解4：$1 - 6 \cdot ({5^2+7^2+9^2})\div({10\cdot(10^2-1)}) = 0.07$\\
正解5：$1 - 6 \cdot ({7^2+7^2+7^2})\div({10\cdot(10^2-1)}) = 0.11$
\par}
\end{itembox}



\subsection{学習データの収集}\label{sec_collect_learn}

本論文ではランキングに付与されている順位情報を用いるために順位情報が付与されて
いる文書を収集した．
順位付き文書の収集源として我々はニュースランキングに着目した．
順位情報が付与されている文書が新聞記事であるため，
形態素解析などの処理が容易であり，
また閲覧数を基にランキング付与を行っているという点において
大衆の興味への関係性が高いと考えたからである．

本論文では順位付き文書を
朝日新聞社の「アクセス Top30」\footnote{
アサヒ・コム アクセス Top30, http://www.asahi.com/whatsnew/ranking/.
}を対象に収集した．
このランキングはWeb上で公開されており，掲載される記事のジャンルは，
社会，スポーツ，ビジネス，暮らし，政治，国際，文化，芸能，サイエンスと広
範囲の記事が含まれている．
収集時期において朝日新聞社が公開していたニュースランキングは，順位を決定
する基準として0時から24時までの24時間分の総アクセス数を使用し，アクセス数
の多い順番で順位を決定している．また，
このニュースランキングでは全ての記事の順位が公開されているのではなく，
アクセス数上位30位以内の記事が順位と共に公開されている．
アクセス数は公開されていない．
順位の決定に
24時間分の総アクセス数を用いているので，ランキングの中にはその時間内に
掲載された記事だけではなくアクセス数の収集期間よりも以前に掲載された記事
も含まれている．
よって，ランキングに複数の日で出現する記事が存在するため，
記事には複数の順位情報が付与されることもある．
記事の収集については順位付きの記事だけではなく，順位が付かなかった記事に
ついても収集を行い，
順位付き文書と順位無し文書の両方を学習データとして用いている．

実際に記事を収集した期間は
2004年1月1日から2004年12月31日までの1年分について収集を行った．
表\ref{learn}に収集データの詳細を示す．

\begin{table}[b]
\caption{収集した学習データの統計データ}
\label{learn}
\input{05table01.txt}
\end{table}


\subsection{評価対象}\label{sec_collect_eval}

評価対象として入力する文書は同一の掲載日付でまとめた記事の集合である．
システムは各記事に文書興味スコアを付与し，このスコアによって順位を付与し
て出力する．この入力文書の掲載日付に対して
次の日に掲載されるランキングを参照し，
システムの順位と実際の順位の対応を作成しこの2つの順位
の比較を行う．

評価用データとして収集する文書は学習データと同様に
朝日新聞社の「アクセスTop30」とした．
抽出した記事から順位情報付き文書と順位情報無し文書を掲載日付で
分割したテストセットを作成した．
収集期間は学習データと異なる2005年3月の1ヶ月を収集の期間とし，
テストセットを30セット作成した．
この時のテストセットに含まれている順位付き文書を正解として扱う．

また，
朝日新聞社のニュースランキングは順位付き文書を30位まで取得することができるが，
ランキングに含まれる文書は同一の掲載日付のみではないため
1つのテストセットに含まれている順位付き文書数は30未満になる場
合もあり，順位付き文書数はテストセットによって左右する．
作成したテストセットについての詳細なデータを表\ref{testset}に示す．

\begin{table}[t]
\begin{center}
\caption{収集したテストセットの統計データ}
\label{testset}
\input{05table02.txt}
\end{table}


1つのテストセットごとに評価式(\ref{spearman})及び式(\ref{eval2})を使用
して評価を行い全テストセットの平均値をシステム全体の評価値とする．


\subsection{システムの評価}\label{sec_eval_main}

実験では入力文書に順位を付け正解順位との比較を行うことを評価している．
システムの出力例を付録に示す．
評価値の比較のため次の2つのモデルを考える．
\begin{itemize}
\item ランダム\\
      入力記事群にランダムに順位を付与する．
\item IDFを用いた手法\\
      対象素性$w$の興味の強さを$Interest(w)$の代わりに
      文書に含まれる語句の特徴性を表す$idf$と対象素性が順位付き文
      書に出現する割合$Ranked\_Ratio(w)$を使用して素性の興味スコアを計
      算する．
      計算式を式(\ref{idfP})に示す．
\end{itemize}
\begin{equation}\label{idfP}
 Interest_{idf}(w) = Ranked\_Ratio(w) \cdot idf(w)
\end{equation}


式(\ref{idfP})において$Ranked\_Ratio(w)$は学習データから求め，
$idf(w)$については
別にコーパスを用意し，各形態素の$idf$を算出している．
$idf$辞書を作成するために使用したコーパスは日本経済新聞\footnote{
日本経済新聞全記事データベース1990年〜2004年，日本経済新聞社．
}の1990年から2004年までの14年分である．
$idf$をカウントする際の文書の単
位は1記事としている．
$Interest_{idf}(w)$を
$Interest(w)$
の代わりに使用して興味スコア
を算出し，文書興味スコアの推定に用いる．


システムが出力した順位と実際の順位との
評価値を図\ref{eval_eq}に示す．図\ref{eval_eq}には
各評価対象の評価値の平均，
最大及び最低の評価値をエラーバーで示している．



\begin{figure}[b]
\begin{center}
\includegraphics{15-2ia5f2.eps}
\end{center}
\caption{内容語を素性とした文書の興味推定の評価}
\label{eval_eq}
\end{figure}

図\ref{eval_eq}において提案手法はランダムと比べて平均の評価値で0.17向
上している．IDFと比べて提案手法は平均の評価値で0.08向上し
ている．提案手法は平均，最低値，最高値のそれぞれにおいて比較対象より良好
な結果を得られることが分かった．


次に実際のランキングの30位以内に出現した記事を正解記事として，システムの上位
10記事分を取り出した場合の正解記事の抽出精度を調査した．
表\ref{eval_2}にシステムの出力上位10記事に注目した抽出精度を示す．

比較対象として先ほど述べた2つに加えSVM\footnote{
SVM学習ツール TinySVM, Ver.~0.09, 奈良先端科学技術大学院大学 松本研究室，http://chasen.org/\~{}taku/\linebreak[2]software/TinySVM/.
}による分類器を追加し
た．SVMの学習は内容語を素性に順位付き文書を正例，順位無し文書を負例とし
て行っている．使用したカーネルは線形カーネルである．SVMの抽出精度につい
ては10記事分ではなく分類の結果正例として出力された中で正解記事が含
まれている割合を示している．


SVMは評価条件が違うため正確な比較ではないが，提案手法は他に定義した比較
して，ランダムに比べて約26ポイント，IDFに比べて約24ポイント，SVMに比べて
約13ポイント向上している．



\subsubsection{品詞別に分けた評価}\label{pos_vary}

内容語の中でどのような語が興味の強弱の判別に貢献しているか調査するため
内容語を品詞別に分けて評価実験を行った．
\tableref{var_pos}に品詞別の評価を示す．表において使用した品詞は○，未使
用の品詞は空欄となっている．

表\ref{var_pos}より以下の事が分かった．
\begin{itemize}
\item 全ての品詞を使った場合の評価値が0.862であり名詞のみを使った場合の
      評価値が0.858であることから，名詞の貢献する割合が大きく名詞は
      興味判別のために重要である．
 \item 動詞，形容詞は文書の興味の判別に対する貢献は小さいが
      全体の精度を下げるものではない．
\end{itemize}

影響が最も大きかった名詞をさらに品詞詳細に分けて評価を行った結果を
表\ref{var_pos2}に示す．

\begin{table}[b]
\begin{minipage}{0.45\textwidth}
\caption{興味を持たれる記事の抽出精度}
\input{05table03.txt}
\label{eval_2}
\end{minipage}
\begin{minipage}{0.45\textwidth}
\caption{品詞別に分けた評価実験結果}
\input{05table04.txt}
\label{var_pos}
\end{minipage}
\end{table}
\begin{table}[b]
\caption{名詞を詳細別に分けた評価実験結果}
\input{05table05.txt}
\label{var_pos2}
\end{table}


以上より興味を判別する際に重要となる語句は
名詞—一般，名詞—サ変，動詞，名詞—固有名詞，形容詞の順で重要であることが
分かった．



\subsubsection{学習データ内の出現回数と精度}\label{th}

次に，興味を判定する素性である内容語が学習データ内の出現回数によって
評価値とどのような関係があるか調査を行った．
これは出現回数が少ない素性に付与した興味スコアが不安定であることが評価値にどの
程度影響を与えるのか調べるためである．
また出現回数の多い素性は文書を興味の強弱で判別することに不向きであるかど
うかも確認することができる．
実験は学習データ内に出現した回数で閾値を設定し閾値以上又は閾値以下の出現回数であった内容語は文書
の興味の推定の時に扱わないようにして行った．
出現回数が閾値以下の素性を削除して実験を行った結果を図\ref{down}に示す．

\begin{figure}[b]
\begin{center}
\includegraphics{15-2ia5f3.eps}
\end{center}
\caption{出現回数が閾値以下の素性を削除した評価値の変動}
\label{down}
\end{figure}

図\ref{down}より学習データにおいて頻度が少なかった素性を削除した結果，
特に「出現回数1回以下を削除」から「出現回数5回以下を削除」において
精度の低下は見られなかった．この原因は学習データにおいて
出現回数が少ない語が
評価対象として入力する文書にも出現することが少ない事，
また出現回数が少ない素性に付与する興味スコアの信頼性が低い事が挙げられる．
出現回数が少ない素性は1回の出現回数の増加で興味スコア
が大きく変化することからスコアが不安定であり信頼性を低いとしている．

次に出現回数が閾値以上の素性を削除して実験を行った結果を図\ref{up}に示す．

図\ref{up}より学習データにおいて閾値より頻度が多い素性を削除した結果，
閾値を下げていくと閾値が1,000までは精度の向上が見られた．
出現頻度が高い語を削除しても精度に変化が表れなかったことから
，これらは興味を判別する要素として重要ではないと考えられる．

以上の結果から評価値の低下が見られなかった「出現回数5回以下を削除」及び
「出現回数1,000回以上を削除」の両方を利用した．
その結果，評価値で0.865であり，
閾値が無い場合の評価値（\tableref{var_pos}の最大値0.862）と比較して精度が上昇したことが確認できた．
これにより「出現回数5回以下」及び「出現回数1,000回以上」
は全体として興味判別に貢献していないと考える．


\subsubsection{素性に付与されたスコア}\label{scoring}

興味スコアの値が付いた素性の観測結果について述べる．
\pagebreak
素性に付与した興味スコアについて並び変えを行い，
スコアの上位と下位からいくつかの内容語を例として
\exref{score1}及び
\exref{score2}に示す．

\begin{itembox}{\ex{}\label{score1}高い興味スコアが付いた内容語}
\begin{center}
乱造，落葉，撲殺，偏愛，鉢巻き，作画，倦怠，怪死，往還，討伐
\end{center}
\end{itembox}

\begin{itembox}{
\ex{}\label{score2}低い興味スコアが付いた内容語
}
\begin{center}
調べ，調査，入る，予定，述べる，会社，関係，求める，発表，東京
\end{center}
\end{itembox}

\begin{figure}[t]
\begin{center}
\includegraphics{15-2ia5f4.eps}
\end{center}
\caption{出現回数が閾値以上の素性を削除した評価値の変動}
\label{up}
\end{figure}


興味スコアが高い値の語句の特徴としては低頻度の語が多く，
低い値の語句の特徴としては高頻度の語，経済のジャンルに属する語句及びスポーツのジャ
ンルに属する語句が多いという傾向が分かった．
これはシステムが出力する順位の結果においても
スポーツ記事全般と経済に関する記事の興味スコアが低いという同様の傾向が得
られている．
よって今回の順位付けは大きく分けて
経済記事，スポーツ記事，その他の記事の
3種類の特徴を捕らえているようになっている
ことが考えられる．
これは記事の特性上，スポーツ記事では
記事間で同様の単語が使われることが多いため，
それらの単語が順位付き文書で使用される割合が
減少し，この結果興味スコアが低くなったと考える．
また，経済の記事は全経済記事に対して順位付き記事に表れる割合が少ない．
以上の傾向は大衆の興味をとらえるという点では妥当な結果と考えられる．

また\exref{ex_var}に示すような動詞は
\ref{pos_vary}節で述べたように興味推定の貢献度は少なかった．
これは内容語単体では興味を推定するのに情報が不十分であることが考えられる．
これは，一部のサ変名詞にも言えることである．
例えば\exref{ex_var}にある「結婚」という語句については
「結婚」自体が興味を持たれるのでは無く
，それと共に出現する語句を同時に扱うことで情報に限定性が付
与され興味の対象となると考える．
例えば「結婚」と「タレント＋結婚」では興味を判別すると言う観点から
語句に含まれる情報が違うと考える．
さらに，「タレント」の部分は固有名詞まで
限定できた方が興味の判別要素としては適切なのかもしれないが，この処理
を行うのは容易ではない．
固有名詞は数多くあって統計的扱いが困難なためである．

\begin{itembox}
{\ex{}\label{ex_var}単体では興味の判別要素にならない語句}
\begin{center}
入る，述べる，求める，発表，結婚，調査
\end{center}
\end{itembox}

複合名詞の問題も存在する．例えば「首相官邸」などの語が「首相」と「官邸」
に分けられた状態でしか扱っていないため語句が示す意味が実際とは異なってし
まうことが挙げられる．複合名詞になって初めて興味を判断できるとするならば
改善が必要である．



以上の考察から次節以降では素性がもつ情報量を増やす方向で拡張を試みる．



