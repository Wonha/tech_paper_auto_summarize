#!/usr/bin/perl -w

use strict;
my ($dir_path, @file_list, $total);

$total = 0;
for my $dir_num (qw/01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22/) {
	my $copied_num = 0;

	$dir_path = "./latex_corpus/NLP_LATEX_CORPUS/V".$dir_num;
	@file_list = <$dir_path/*.tex>;

	for my $file_path (@file_list) {
		open my $fh, '<:encoding(UTF-8)', $file_path || die "Cannot open < $file_path: $!";
		
		while (<$fh>) {
			if (/\\jabstract\{[^\}]+/) { 
#			if (/\\jabstract\{[^\}]+\}/) #why does not match?
				system 'cp '.$file_path.' ./train_data';
				$copied_num++;
			}
		}
		
		close $fh;
	}
	$total += $copied_num;

	print "V".$dir_num.": ".$copied_num." files copied.\n";
}
print "total: ".$total."\n";

