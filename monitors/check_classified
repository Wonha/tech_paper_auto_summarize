#!/usr/bin/perl -w
use strict;

my $path_log = '../logs';
opendir my $dh, $path_log or die "Cannot open $path_log: $!";
my $total =0;
my $intro_cnt;
my $related_cnt;
my $proposed_cnt;
my $experiment_cnt;
my $conclusion_cnt;

for my $dir_ent (sort readdir $dh) {
	next if (-d $dir_ent); #or $dir_ent eq '.' or $dir_ent eq '..';
	$total++;
	
	my $path_dir = $path_log."/".$dir_ent;
	my @list = qw/intro related_study proposed_method experiment conclusion/;

	for my $cur (@list) {
		
		my $path_target = $path_dir."/".$cur;
		if (-s $path_target) {
			if ($cur eq 'intro') {
				$intro_cnt++;
			} elsif ($cur eq 'related_study') {
				$related_cnt++;
			} elsif ($cur eq 'proposed_method') {
				$proposed_cnt++;
			} elsif ($cur eq 'experiment') {
				$experiment_cnt++;
			} else {
				$conclusion_cnt++;
			}
		}
		if (!(-s $path_target) && ($cur eq 'conclusion')) {
			print "\n************************ [$path_target] is empty ************************\n";
			$path_target =~ s/(.*)\/.*/$1\/log_classify_section/;
			open my $fh, '<', $path_target or die "Cannot open $path_target: $!";
			while (<$fh>) {
				print;
			}
		}

#open my $fh, '<', $path_target or die "Cannot open $path_target: $!";
	}
}
print "\n< classification rate >\n";
printf "%-17s".($intro_cnt/$total*100)."\n", "intro: ";
printf "%-17s".($related_cnt/$total*100)."\n", "related study: ";
printf "%-17s".($proposed_cnt/$total*100)."\n", "proposed method: ";
printf "%-17s".($experiment_cnt/$total*100)."\n", "experiment: ";
printf "%-17s".($conclusion_cnt/$total*100)."\n", "conclusion: ";

closedir $dh;

